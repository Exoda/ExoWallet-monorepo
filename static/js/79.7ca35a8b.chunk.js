(this.webpackJsonp=this.webpackJsonp||[]).push([[79],{3081:function(e,n,t){"use strict";t.d(n,"a",(function(){return O})),t.d(n,"c",(function(){return h})),t.d(n,"b",(function(){return x}));var r=t(3),c=t.n(r),o=t(1),i=t(15),a=t(43),l=t(142),s=t(147),u=t(255),d=t(56),b=t(940),j=t(42),f=(t(177),t(1127)),m=t(1155);function O(){var e;i.a.isExtensionUiStandaloneWindow&&(null==(e=window)||null==e.close||e.close())}var h=function(e){var n=Object(f.a)(),t=Object(j.d)((function(e){return e.status.boardingCompleted})),r=Object(j.d)((function(e){return e.data.homePageCheckBoarding}));Object(o.useEffect)((function(){t||(!e||e&&!r)&&(e&&a.a.dispatch(Object(s.h)()),n.replace(l.c.Onboarding,{screen:b.a.Welcome,params:{disableAnimation:!!e}}))}),[])};function x(){var e=Object(m.a)(),n=e.closeWalletSelector,t=e.openRootHome;return Object(o.useCallback)(c()((function*(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.delay,c=void 0===r?150:r,o=e.showOnBoardingLoading;o&&(a.a.dispatch(Object(u.c)(!0)),yield Object(d.g)(100)),n(),yield Object(d.g)(c),t(),yield Object(d.g)(c),O(),o&&(yield Object(d.g)(600),a.a.dispatch(Object(u.c)(!1)))})),[n,t])}},3120:function(e,n,t){"use strict";var r=t(3),c=t.n(r),o=t(10),i=t.n(o),a=t(1),l=t(67),s=t(15),u=t(658),d=t(43);n.a=function(e){var n=e.id,t=e.getResolveData,r=e.closeOnError,o=s.a.isExtensionUiStandaloneWindow,b=Object(a.useState)(null),j=i()(b,2),f=j[0],m=j[1],O=Object(a.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.close,r=e.error;r=r||f||l.b.provider.userRejectedRequest(),d.a.servicePromise.rejectCallback({id:n,error:Object(u.a)(r)}),o?setTimeout((function(){null==t||t(),window.close()}),0):null==t||t()}),[n,o,f]),h=Object(a.useCallback)(c()((function*(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.close,c=e.result;try{m(null);var o=null!=c?c:yield null==t?void 0:t();d.a.servicePromise.resolveCallback({id:n,data:o}),null==r||r()}catch(i){throw m(i),i}})),[t,n]);return Object(a.useEffect)((function(){f&&r&&O()}),[r,O,f]),Object(a.useEffect)((function(){var e=o;return e&&window.addEventListener("beforeunload",(function(){return O()})),function(){e&&window.removeEventListener("beforeunload",(function(){return O()}))}}),[o,O]),{reject:O,resolve:h}}},3187:function(e,n,t){"use strict";var r=t(52),c=t(22);n.a=function(){var e,n,t=null!=(e=null==(n=Object(r.x)().params)?void 0:n.query)?e:"",o={};try{t&&(o=JSON.parse(t)),c.a.sendTx.info("useDappParams:",o)}catch(i){c.a.sendTx.info("useDappParams:",t)}return o}},3259:function(e,n,t){"use strict";t.r(n),t.d(n,"DappConnectionModalRoutes",(function(){return G.a}));var r=t(85),c=t(283),o=t(3),i=t.n(o),a=t(163),l=t(10),s=t.n(l),u=t(426),d=t(41),b=t(234),j=t(79),f=t(110),m=t(32),O=t(70),h=t(326),x=t(743),p=t(1),g=t(52),v=t(1103),_=t(508),y=t(750),w=t(3497),C=t.n(w),k=t(22),M=t(15),S=t(43),I=t(565),E=t(176),B=t(3120),W=t(3187),P=t(3366),T=t(589),z=t(3381),A=t(285),D=t(98),R=t(1128),L=t(725),N=t(0),U=function(e){var n=e.visible,t=e.onCancel,c=e.onConfirm,o=Object(_.a)(),i=Object(r.a)(),a=Object(p.useState)(!1),l=s()(a,2),u=l[0],d=l[1];return Object(N.jsxs)(A.a,{visible:n,onClose:t,children:[Object(N.jsxs)(L.a,{w:"100%",alignItems:"center",mb:4,children:[Object(N.jsx)(f.a,{mb:5,borderRadius:"999",size:"48px",backgroundColor:"surface-neutral-default",children:Object(N.jsx)(j.a,{name:"ExclamationTriangleOutline",size:24})}),Object(N.jsx)(O.a,{typography:{sm:"Heading",md:"DisplayMedium"},color:"text-default",mb:2,children:o.formatMessage({id:"modal__rug_warning"})}),Object(N.jsx)(O.a,{typography:{sm:"Body2",md:"Body1"},color:"text-subdued",textAlign:"center",children:o.formatMessage({id:"modal__rug_warning_desc"})}),Object(N.jsx)(R.a,{mt:5,alignItems:"center",onChange:function(e){return d(e)},isChecked:u,children:Object(N.jsx)(O.a,{color:"text-subdued",ml:2,typography:{sm:"Body1Strong",md:"Body2Strong"},children:o.formatMessage({id:"content__i_am_aware_of_the_above_risks"})})})]}),Object(N.jsxs)(m.a,{flexDirection:"row",w:"100%",mt:2,children:[Object(N.jsx)(D.a,{flex:"1",onPress:t,size:i?"lg":"base",children:o.formatMessage({id:"action__cancel"})}),Object(N.jsx)(m.a,{w:4}),Object(N.jsx)(D.a,{flex:1,type:"primary",size:i?"lg":"base",onPress:function(){u&&(null==c||c())},isDisabled:!u,children:o.formatMessage({id:"action__confirm"})})]})]})},q={permissions:[{text:"content__view_the_address_of_your_permitted_accounts_required",icon:"EyeOutline"},{text:"content__send_transactions_and_signature_request",icon:"CheckOutline"}]};function H(e){var n,t,r,c=e.isWalletConnectPreloading,o=e.walletConnectError,i=e.getWalletConnectBridge,a=e.account,l=e.origin,s=e.hostname,p=e.network,g=Object(_.a)();return c?Object(N.jsx)(f.a,{flex:1,minH:"300px",children:o?Object(N.jsx)(x.a,{emoji:"\ud83d\ude35",title:o,subTitle:g.formatMessage({id:"empty__connection_failed_desc"})}):Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(h.b,{size:"lg"}),M.a.isDev?Object(N.jsx)(m.a,{mt:4,children:Object(N.jsx)(O.a,{children:i()})}):null]})}):null!=a&&a.id?Object(N.jsxs)(u.a,{flex:"1",space:"20px",bg:"surface-default",p:"4",borderRadius:"12px",children:[Object(N.jsxs)(b.a,{alignItems:"center",children:[Object(N.jsxs)(b.a,{alignItems:"center",children:[Object(N.jsx)(m.a,{size:"32px",borderWidth:2,borderColor:"surface-subdued",mr:"-8px",zIndex:1,rounded:"full",children:Object(N.jsx)(v.a,{w:"full",h:"full",borderRadius:"full",zIndex:100,source:C.a})}),Object(N.jsx)(m.a,{size:"32px",overflow:"hidden",rounded:"full",borderWidth:2,zIndex:2,borderColor:"surface-subdued",bg:"surface-subdued",children:Object(N.jsx)(v.a,{w:"full",h:"full",source:{uri:l+"/favicon.ico"},fallbackElement:Object(N.jsx)(f.a,{width:"full",height:"full",borderRadius:"full",bg:"background-selected",children:Object(N.jsx)(j.a,{name:"QuestionMarkOutline"})})})})]}),Object(N.jsx)(d.h.Body1Strong,{ml:"2",children:g.formatMessage({id:"title__connect_to_website"})})]}),Object(N.jsx)(u.a,{pt:"4",borderTopColor:"divider",borderTopWidth:"1px",children:q.permissions.map((function(e,n){return Object(N.jsxs)(b.a,{mb:"4",children:[Object(N.jsx)(m.a,{borderRadius:"full",bg:"rgba(2, 190, 50, .1)",size:"9",alignItems:"center",justifyContent:"center",children:Object(N.jsx)(j.a,{size:24,name:e.icon,color:"icon-success"})}),Object(N.jsx)(d.h.Body1,{ml:"12px",alignSelf:"center",flex:1,children:g.formatMessage({id:e.text})})]},n)}))}),Object(N.jsx)(u.a,{borderBottomWidth:"1px",borderBottomColor:"divider",pb:"4",children:Object(N.jsxs)(b.a,{alignItems:"center",children:[Object(N.jsx)(d.h.Body2Strong,{color:"text-subdued",flex:1,children:g.formatMessage({id:"form__account"})}),Object(N.jsx)(b.a,{alignItems:"center",children:Object(N.jsxs)(d.h.Body2Strong,{ml:"12px",children:[null==a?void 0:a.name,"(",null!=(n=null==a||null==(t=a.address)?void 0:t.slice(-4))?n:"",")"]})})]})}),Object(N.jsx)(z.a,{origin:l,hostname:s,networkId:null!=(r=null==p?void 0:p.id)?r:""})]}):Object(N.jsx)(f.a,{flex:1,minH:"300px",children:Object(N.jsx)(x.a,{emoji:"\ud83d\udcb3",title:g.formatMessage({id:"empty__no_account_title"})})})}var F=Object.freeze({}),J=function(){var e,n,t,r,o=S.a.dispatch,l=Object(E.h)((function(e){return e.refresher.closeDappConnectionPreloadingTs})),u=Object(p.useState)(!1),d=s()(u,2),b=d[0],j=d[1],f=Object(_.a)(),m=Object(E.f)(),O=m.networkImpl,h=m.network,x=m.accountAddress,v=m.account,w=Object(W.a)().sourceInfo,C=null!=w?w:F,z=C.origin,A=C.scope,D=C.id,R=Object(p.useMemo)((function(){return e=z,[].some((function(n){return n.includes(e.toLowerCase())}));var e}),[z]),L=Object(p.useMemo)((function(){try{return new URL(z).hostname}catch(n){var e;return(null==z||null==(e=z.split("://"))?void 0:e[1])||z}}),[z]),q=Object(g.x)(),J=null==q||null==(e=q.params)?void 0:e.walletConnectUri,Q=null==q||null==(n=q.params)?void 0:n.isDeepLink,V=null==q||null==(t=q.params)?void 0:t.refreshKey,K=Boolean(J),G=Object(p.useState)(""),X=s()(G,2),Y=X[0],Z=X[1],$=Object(y.a)(),ee=Object(p.useRef)(!1);Object(P.a)((function(){ee.current||M.a.isExtensionUi&&K&&l&&(ee.current=!0,$())}),[l,$,o,K]),Object(p.useEffect)((function(){return function(){ee.current=!0}}),[]);var ne=Object(p.useMemo)((function(){return J?I.a.getWalletConnectUriInfo({uri:J}):null}),[J]),te=Object(p.useCallback)((function(){var e,n;return(null==ne?void 0:ne.v1)&&(null==ne||null==(e=ne.v1)?void 0:e.bridge)||(null==ne?void 0:ne.v2)&&"relay-protocol="+(null==ne||null==(n=ne.v2)?void 0:n.relayProtocol)||""}),[ne]);Object(p.useEffect)((function(){J&&(null!=ne&&ne.v2&&a.a.show({title:"WalletConnect V2 not supported yet."}),V&&Z(""),S.a.walletConnect.connect({uri:J||"",isDeepLink:Q}).then((function(){o(Object(T.d)())})).catch((function(e){k.a.common.error(e),Z(f.formatMessage({id:"modal__failed_to_connect"}))})))}),[V,$,o,f,Q,J,null==ne?void 0:ne.v2]);var re=Object(p.useCallback)((function(){if(!O||!x)throw new Error("Wallet or account not selected, you should create or import one.");var e=x,n=[e].filter(Boolean);return"ethereum"===A&&(n=[e].filter(Boolean)),"near"===A&&(n={accounts:[e].filter(Boolean)}),"solana"===A&&(n=e),S.a.serviceDapp.saveConnectedAccounts({site:{origin:z},networkImpl:O,address:e}),n}),[x,O,z,A]),ce=Object(B.a)({id:D,closeOnError:!0});return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(U,{visible:b,onCancel:function(){return j(!1)},onConfirm:function(){return j(!1)}}),Object(N.jsx)(c.b,{header:K?f.formatMessage({id:"content__connecting"}):f.formatMessage({id:"title__dapp_connection"}),headerDescription:K?"WalletConnect":null!=(r=null==h?void 0:h.shortName)?r:"",hidePrimaryAction:K||!(null!=v&&v.id),hideSecondaryAction:!0,primaryActionTranslationId:"action__confirm",secondaryActionTranslationId:"action__cancel",onPrimaryActionPress:function(){var e=i()((function*(e){var n=e.close;if(!R){var t=re();return ce.resolve({close:n,result:t})}j(!0)}));return function(n){return e.apply(this,arguments)}}(),onSecondaryActionPress:function(e){var n=e.close;ce.reject(),n()},onModalClose:ce.reject,scrollViewProps:{contentContainerStyle:{flex:1},children:Object(N.jsx)(H,{walletConnectError:Y,isWalletConnectPreloading:K,getWalletConnectBridge:te,network:h,account:v,hostname:L,origin:z})}})]})},Q=t(646),V=function(){var e=Object(_.a)(),n=Object(W.a)().sourceInfo,t=(null!=n?n:{}).id,r=Object(B.a)({id:t,closeOnError:!0});return Object(N.jsx)(c.b,{primaryActionTranslationId:"action__confirm",primaryActionProps:{isDisabled:!0},hidePrimaryAction:!0,secondaryActionTranslationId:"action__cancel",onSecondaryActionPress:function(e){var n=e.close;r.reject(),n()},onModalClose:r.reject,children:Object(N.jsxs)(f.a,{flex:1,children:[Object(N.jsxs)(u.a,{alignItems:"center",mb:4,children:[Object(N.jsx)(O.a,{children:(null==n?void 0:n.origin)||""}),Object(N.jsx)(O.a,{fontWeight:"bold",children:(null==n?void 0:n.scope)||""})]}),Object(N.jsx)(Q.a,{title:e.formatMessage({id:"msg__mismatched_networks"}),alertType:"error",dismiss:!1})]})})},K=t(3081),G=t(407),X=t(456),Y=Object(X.a)(),Z=[{name:G.a.ConnectionModal,component:J},{name:G.a.NetworkNotMatchModal,component:V}];n.default=function(){Object(K.c)();var e=Object(r.a)();return Object(N.jsx)(Y.Navigator,{screenOptions:{headerShown:!1,animationEnabled:!!e},children:Z.map((function(e){return Object(N.jsx)(Y.Screen,{name:e.name,component:e.component},e.name)}))})}},3366:function(e,n,t){"use strict";t.d(n,"a",(function(){return c}));var r=t(1);function c(e,n){var t=Object(r.useRef)(!0);return Object(r.useEffect)((function(){t.current?t.current=!1:e()}),n)}},3381:function(e,n,t){"use strict";t.d(n,"a",(function(){return m}));var r=t(32),c=t(234),o=t(426),i=t(41),a=t(79),l=t(10),s=t.n(l),u=t(1),d=t(508),b=t(43),j=t(0),f={is_open_source:"badge__not_open_source",malicious_contract:"badge__malicious_contract",malicious_creator:"badge__malicious_contract_creator",phishing_site:"badge__phishing_site"},m=function(e){var n,t,l,m=e.hostname,O=e.origin,h=e.networkId,x=Object(d.a)(),p=Object(u.useState)(),g=s()(p,2),v=g[0],_=g[1],y=Object(u.useCallback)((function(){b.a.serviceToken.getSiteSecurityInfo(O,h).then((function(e){return _(e)}))}),[O,h]);Object(u.useEffect)((function(){y()}),[y]);var w=Object(u.useMemo)((function(){return"undefined"===typeof v?Object(j.jsx)(a.a,{name:"QuestionMarkCircleMini",size:32}):0===(null==v?void 0:v.length)?Object(j.jsx)(a.a,{name:"BadgeCheckMini",size:32,color:"icon-success"}):Object(j.jsx)(a.a,{name:"ShieldExclamationMini",size:32,color:"icon-critical"})}),[v]);return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)(c.a,{alignItems:"center",mt:"-2",w:"full",children:[w,Object(j.jsxs)(o.a,{ml:"3",flex:"1",children:[Object(j.jsx)(i.h.Body1Strong,{textTransform:"capitalize",children:null!=(n=null==m||null==(t=m.split("."))||null==t.reverse||null==(l=t.reverse())?void 0:l[1])?n:"N/A"}),Object(j.jsx)(i.h.Body2,{isTruncated:!0,maxW:"300px",children:m})]})]}),v&&(null==v?void 0:v.length)>0?Object(j.jsx)(c.a,{borderTopWidth:"1px",borderTopColor:"divider",alignItems:"center",flexWrap:"wrap",pt:"4",children:null==v?void 0:v.map((function(e){var n;return Object(j.jsx)(r.a,{bg:"surface-critical-subdued",py:"2px",px:"2",mr:"2",mb:"2",borderRadius:"6px",children:Object(j.jsx)(i.h.Body2Strong,{color:"text-critical",children:x.formatMessage({id:null!=(n=f[e])?n:""})})})}))}):null]})}},3497:function(e,n,t){e.exports=t.p+"static/media/logo_round.5d03617b.png"}}]);