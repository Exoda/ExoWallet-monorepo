(this.webpackJsonp=this.webpackJsonp||[]).push([[843],{3726:function(e,t,n){"use strict";n.r(t);var a=n(125),i=n(70),r=n(285),o=n(390),c=n(98),s=n(389),l=n(32),u=n(79),d=n(10),b=n.n(d),p=n(758),f=n(1),j=n(52),g=n(508),h=n(24),O=n(43),_=n(3076),m=n(1123),x=n(42),y=n(3080),v=n(3223),k=n(142),M=n(0);t.default=function(){var e=Object(g.a)(),t=Object(j.u)(),n=Object(p.a)().locale,d=Object(f.useState)(""),P=b()(d,2),w=P[0],S=P[1],C=Object(x.c)().wallet,E=Object(f.useState)(!1),I=b()(E,2),T=I[0],R=I[1],L=Object(f.useState)(!1),B=b()(L,2),D=B[0],z=B[1],A=Object(f.useState)(null),W=b()(A,2),V=W[0],F=W[1],J=Object(f.useState)(""),H=b()(J,2),U=H[0],q=H[1],G=Object(f.useState)(null),K=b()(G,2),N=K[0],Q=K[1],X=Object(f.useState)([]),Y=b()(X,2),Z=Y[0],$=Y[1];Object(f.useEffect)((function(){S("https://lite.onekey.so/?language="+n)}),[n]),Object(f.useEffect)((function(){C&&O.a.engine.getWallets().then((function(e){return $(e.filter((function(e){return"hd"===e.type})))}))}),[C]);var ee=Object(f.useMemo)((function(){var t=[];return t.push({label:e.formatMessage({id:"action__restore_with_onekey_lite"}),value:"restore",iconProps:{name:"SaveAsOutline"}}),t.push({label:e.formatMessage({id:"action__change_pin"}),value:"change_pin",iconProps:{name:"PencilAltOutline"}}),t.push({label:e.formatMessage({id:"action__reset_onekey_lite"}),value:"reset",iconProps:{name:"TrashOutline",color:"icon-critical"},color:"icon-critical"}),t}),[e]),te=Object(f.useCallback)((function(){return Object(M.jsx)(s.b,{dropdownPosition:"right",title:e.formatMessage({id:"app__hardware_name_onekey_lite"}),onChange:function(e){N!==e&&Q(e)},footer:null,activatable:!1,triggerProps:{width:"40px"},dropdownProps:{width:248},options:ee,renderTrigger:function(){return Object(M.jsx)(l.a,{mr:"android"!==h.a.OS?4:0,alignItems:"flex-end",children:Object(M.jsx)(u.a,{name:"DotsHorizontalOutline"})})}})}),[e,ee,N]);Object(f.useEffect)((function(){t.setOptions({title:e.formatMessage({id:"app__hardware_name_onekey_lite"}),headerRight:function(){return te()}})}),[e,ee,t]);var ne=function(){t.navigate(k.c.Modal,{screen:k.b.CreateWallet,params:{screen:y.b.OnekeyLiteRestorePinCodeVerifyModal}})};Object(f.useEffect)((function(){switch(N){case"restore":ne(),Q(null);break;case"change_pin":t.navigate(k.c.Modal,{screen:k.b.OnekeyLiteChangePinInputPin,params:{screen:y.d.OnekeyLiteChangePinInputPinModal}}),Q(null);break;case"reset":z(!0),Q(null)}}),[N]),Object(f.useEffect)((function(){"RESET"===U.toUpperCase()?F(!0):0===U.trim().length?F(null):F(!1)}),[U]);var ae=Object(f.useMemo)((function(){return Z.length?Object(M.jsx)(c.a,{onPress:function(){R(!0)},size:"xl",m:4,type:"primary",children:e.formatMessage({id:"action__back_up_to_onekey_lite"})}):Object(M.jsx)(c.a,{size:"xl",m:4,type:"primary",onPress:function(){ne()},children:e.formatMessage({id:"action__restore_with_onekey_lite"})})}),[Z.length,e]);return Object(M.jsxs)(M.Fragment,{children:[Object(M.jsxs)(l.a,{flexDirection:"column",flex:1,children:[Object(M.jsx)(l.a,{flex:1,children:Object(M.jsx)(m.a,{src:w})}),Object(M.jsx)(l.a,{bg:"surface-subdued",pb:"ios"===h.a.OS?4:0,children:ae}),Object(M.jsx)(r.a,{hasFormInsideDialog:!0,visible:D,footerMoreView:Object(M.jsx)(l.a,{mb:3,children:Object(M.jsx)(o.a,{w:"full",value:U,isInvalid:null!=V&&!V,onChangeText:q,placeholder:"RESET"})}),contentProps:{iconType:"danger",title:e.formatMessage({id:"action__reset_onekey_lite"}),content:e.formatMessage({id:"modal__reset_onekey_lite_desc"},{0:"RESET"})},footerButtonProps:{onPrimaryActionPress:function(e){var n=e.onClose;null==n||n(),setTimeout((function(){t.navigate(k.c.Modal,{screen:k.b.OnekeyLiteReset,params:{screen:y.e.OnekeyLiteResetModal}})}),500)},primaryActionTranslationId:"action__delete",primaryActionProps:{isDisabled:!V,type:"destructive"}},onClose:function(){z(!1),q("")}})]}),Object(M.jsx)(s.b,{visible:T,onVisibleChange:R,onChange:function(e){t.navigate(k.c.Modal,{screen:k.b.BackupWallet,params:{screen:v.BackupWalletModalRoutes.BackupWalletLiteModal,params:{walletId:e.id}}})},title:e.formatMessage({id:"title_select_wallet"}),footer:null,activatable:!1,dropdownPosition:"right",containerProps:{zIndex:5},options:Z.map((function(t){return{label:t.name,description:e.formatMessage({id:"form__str_accounts"},{count:t.accounts.length.toString()}),value:t}})),renderItem:function(e,t,n){return Object(M.jsxs)(a.a,{onPress:function(){return null==n?void 0:n(e.value,e)},flexDirection:"row",alignItems:"center",height:"68px",paddingLeft:"18px",children:[Object(M.jsx)(_.c,{walletImage:e.value.type,avatar:e.value.avatar,size:"sm",circular:!0}),Object(M.jsxs)(l.a,{flexDirection:"column",ml:"12px",children:[Object(M.jsx)(i.a,{typography:"Body1Strong",children:e.label}),Object(M.jsx)(i.a,{typography:"Body2",color:"text-subdued",children:e.description})]})]})},renderTrigger:function(){return Object(M.jsx)(l.a,{})}})]})}}}]);