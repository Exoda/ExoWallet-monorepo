(this.webpackJsonp=this.webpackJsonp||[]).push([[8],{3056:function(e,t,n){"use strict";var r=n(125),o=n(2),a=n.n(o),c=n(234),i=n(16),s=n.n(i),l=n(79),d=n(268),u=n(426),f=n(70),b=n(1),j=n(0),p=["text","image","icon","children"];function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var x=Object(b.forwardRef)((function(e,t){var n=e.text,r=e.image,o=e.icon,a=e.children,c=s()(e,p);return n?Object(j.jsxs)(u.a,m(m({ref:t,space:1},c),{},{children:[n.label?Object(b.isValidElement)(n.label)?n.label:Object(j.jsx)(f.a,m(m({typography:"sm"===n.size?"Body2Strong":"Body1Strong"},n.labelProps),{},{children:n.label})):null,n.description?Object(b.isValidElement)(n.description)?n.description:Object(j.jsx)(f.a,m(m({typography:"Body2",color:"text-subdued"},n.descriptionProps),{},{children:n.description})):null]})):r?Object(j.jsx)(d.a,m({size:10},r)):o?Object(j.jsx)(l.a,m({},o)):Object(j.jsx)(j.Fragment,{children:a})}));x.displayName="Column";var h=["onLongPress","onPress","children"];function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var g=function(e){var t=e.onLongPress,n=e.onPress,o=e.children,a=s()(e,h);return n?Object(j.jsx)(r.a,{onPress:n,onLongPress:t,children:function(e){var t=e.isHovered,n=e.isPressed;return Object(j.jsx)(c.a,v(v({px:2,py:1.5,my:.5,space:3,alignItems:"center",borderRadius:"xl",bgColor:n?"surface-pressed":t?"surface-hovered":void 0},a),{},{children:o}))}}):Object(j.jsx)(c.a,v(v({alignItems:"center",p:2,space:3},a),{},{children:o}))};g.Column=x;t.a=g},3081:function(e,t,n){"use strict";n.d(t,"a",(function(){return O})),n.d(t,"c",(function(){return m})),n.d(t,"b",(function(){return x}));var r=n(3),o=n.n(r),a=n(1),c=n(15),i=n(43),s=n(142),l=n(147),d=n(255),u=n(56),f=n(940),b=n(42),j=(n(177),n(1127)),p=n(1155);function O(){var e;c.a.isExtensionUiStandaloneWindow&&(null==(e=window)||null==e.close||e.close())}var m=function(e){var t=Object(j.a)(),n=Object(b.d)((function(e){return e.status.boardingCompleted})),r=Object(b.d)((function(e){return e.data.homePageCheckBoarding}));Object(a.useEffect)((function(){n||(!e||e&&!r)&&(e&&i.a.dispatch(Object(l.h)()),t.replace(s.c.Onboarding,{screen:f.a.Welcome,params:{disableAnimation:!!e}}))}),[])};function x(){var e=Object(p.a)(),t=e.closeWalletSelector,n=e.openRootHome;return Object(a.useCallback)(o()((function*(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.delay,o=void 0===r?150:r,a=e.showOnBoardingLoading;a&&(i.a.dispatch(Object(d.c)(!0)),yield Object(u.g)(100)),t(),yield Object(u.g)(o),n(),yield Object(u.g)(o),O(),a&&(yield Object(u.g)(600),i.a.dispatch(Object(d.c)(!1)))})),[t,n])}},3135:function(e,t,n){"use strict";n.d(t,"Tabs",(function(){return y}));var r=n(2),o=n.n(r),a=n(121),c=n(10),i=n.n(c),s=n(85),l=n(1),d=n(249),u=n(4413),f=n(5198),b=n(32),j=n(1105),p=n(559),O=n(1114),m=n(0);n(3702);function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var y={Container:function(e){var t=e.children,n=e.containerStyle,r=e.headerHeight,o=e.renderHeader,c=e.headerContainerStyle,j=e.onIndexChange,p=e.initialTabName,O=e.scrollEnabled,x=void 0===O||O,y=Object(d.a)(),v=Object(s.a)(),g=Object(l.useMemo)((function(){var e=[],n={},r=0;return l.Children.forEach(t,(function(t,o){var a=t.props,c=a.name,i=a.children,s=a.label;p===c&&(r=o),e.push({key:c,title:s}),n[c]=i})),{routes:e,renderScene:function(e){var t=e.route;return n[t.key]},initialIndex:r}}),[t,p]),w=g.routes,I=g.renderScene,P=g.initialIndex,k=Object(l.useState)(P),_=i()(k,2),S=_[0],C=_[1],T=Object(l.useCallback)((function(e){C(e),null==j||j(e)}),[j]),A=Object(a.a)(["text-default","text-subdued","action-primary-default","border-subdued","background-default"]),M=i()(A,5),D=M[0],E=M[1],N=M[2],B=M[3],F=M[4],R=Object(l.useCallback)((function(e){var t={tabbar:{backgroundColor:"transparent",width:"100%",height:48,borderBottomWidth:1,borderBottomColor:B},indicator:{backgroundColor:N,height:2},indicatorContainer:{height:2,top:46,width:"100%"},tabStyle:{width:v?y.width/w.length:"auto",minWidth:v?void 0:90},label:{fontWeight:"500",fontSize:14,lineHeight:20}};return Object(m.jsx)(u.a,h(h({},e),{},{scrollEnabled:x,indicatorStyle:t.indicator,indicatorContainerStyle:t.indicatorContainer,style:t.tabbar,tabStyle:t.tabStyle,activeColor:D,inactiveColor:E,labelStyle:t.label,getLabelText:function(e){return e.route.title},getAccessibilityLabel:function(e){return e.route.title}}))}),[D,B,N,v,E,y.width,w.length,x]);return Object(m.jsxs)(b.a,{style:[{backgroundColor:F},n],children:[Object(m.jsx)(b.a,{h:r||"auto",style:c,children:null==o?void 0:o()}),Object(m.jsx)(f.a,{navigationState:{index:S,routes:w},renderScene:I,onIndexChange:T,initialLayout:{width:y.width},renderTabBar:R})]})},Tab:l.Fragment,FlatList:j.b,ScrollView:p.a,SectionList:O.a}},3136:function(e,t,n){"use strict";n.r(t),n.d(t,"FiatPayRoutes",(function(){return J}));var r=n(2),o=n.n(r),a=n(85),c=n(283),i=n(98),s=n(3),l=n.n(s),d=n(1133),u=n(125),f=n(268),b=n(32),j=n(326),p=n(110),O=n(70),m=n(10),x=n.n(m),h=n(1),y=n(52),v=n(508),g=n(25),w=n(249),I=n(1122),P=n(284),k=n(3495),_=n.n(k),S=n(42),C=n(15),T=n(176),A={moonpay:["usd","cny","jpy","hkd"]},M={usd:"$",cny:"\xa5",hkd:"HK$",jpy:"JP\xa5"};var D=n(1181),E=n(3246),N=n(0);var B=function(){var e,t=Object(v.a)(),n=Object(y.x)(),r=Object(y.u)(),o=n.params,a=o.token,s=o.type,m=function(e,t){return A[e].includes(t)?{fiatCode:t,symbol:M[t]}:{fiatCode:"usd",symbol:M.usd}}("moonpay",Object(S.n)().selectedFiatMoneySymbol),k=m.fiatCode,B=m.symbol,F=a.provider.moonpay,R="Buy"===s?k:a.symbol,V=Object(h.useState)(""),L=x()(V,2),W=L[0],G=L[1],z=Object(h.useState)(""),U=x()(z,2),H=U[0],q=U[1],K=Object(T.i)(W,1e3),Q=Object(h.useState)(!1),X=x()(Q,2),Y=X[0],$=X[1],Z=Object(h.useState)(!0),ee=x()(Z,2),te=ee[0],ne=ee[1],re=Object(S.c)().account,oe=Object(w.a)().height<768,ae=oe?"16px":"24px",ce=Object(h.useState)(!1),ie=x()(ce,2),se=ie[0],le=ie[1],de=Object(h.useState)(0),ue=x()(de,2),fe=ue[0],be=ue[1],je=Object(h.useState)(0),pe=x()(je,2),Oe=pe[0],me=pe[1],xe=Object(h.useState)(0),he=x()(xe,2),ye=he[0],ve=he[1],ge=Object(h.useState)(0),we=x()(ge,2),Ie=we[0],Pe=we[1],ke=Object(S.j)(k),_e=Object(S.j)(F);Object(I.b)("quoteAmount",(function(){return Object(D.c)(s,_e,ke)}),{onSuccess:function(e){if(e){if(te&&ne(!1),"Buy"===s)be(e.minAmount),me(e.maxAmount),Pe(null==e?void 0:e.fees);else{var t=Number(a.balance);be(Math.min(t,e.minAmount)),me(Math.min(t,e.maxAmount))}ve(e.askPrice)}}});var Se=Object(h.useCallback)((function(e){if(e.length>0){var n=Number(e);n<fe||0===n?(q((function(){return"Buy"===s?B+" "+t.formatMessage({id:"form__buy_int_min_purchase"},{0:fe}):""+t.formatMessage({id:"form__sell_min_transaction_amount"},{0:fe,1:a.symbol})})),le(!1)):n>Oe?(q((function(){return"Buy"===s?t.formatMessage({id:"form__buy_int_max_purchase"},{0:Oe}):""+t.formatMessage({id:"form__sell_max_transaction_amount"},{0:Oe,1:a.symbol})})),le(!1)):(q("Buy"===s?"\u2248 "+((n-Ie)/ye).toFixed(null==_e?void 0:_e.precision)+"  "+a.symbol:"\u2248 "+(n*ye).toFixed(null==ke?void 0:ke.precision)+"  "+ke.code.toUpperCase()),le(!0))}else q(""),le(!1)}),[fe,Oe,s,t,a.symbol,B,Ie,ye,null==_e?void 0:_e.precision,null==ke?void 0:ke.precision,ke.code]);setTimeout((function(){K===W?($(!1),Se(W)):$(!0)}),100);var Ce=Object(h.useCallback)((function(e){G((function(t){var n=e;return function(e){return/^(0|([1-9][0-9]*))?\.?([0-9]{1,2})?$/.test(e)||""===e}(e)||(n=t),n}))}),[]);return Object(N.jsx)(c.b,{height:"560px",header:t.formatMessage({id:"Buy"===s?"action__buy":"action__sell"})+" "+a.symbol,headerDescription:Object(P.c)(null!=(e=null==re?void 0:re.address)?e:""),hideSecondaryAction:!0,footer:null,staticChildrenProps:{flex:"1",paddingX:"24px",paddingTop:"24px",paddingBottom:oe?"0px":"24px"},children:Object(N.jsxs)(b.a,{flex:1,justifyContent:"space-between",children:[Object(N.jsx)(b.a,{flex:1,justifyContent:"center",children:Object(N.jsxs)(b.a,{height:"140px",flexDirection:"column",justifyContent:"center",children:[Object(N.jsx)(O.a,{height:"24px",textAlign:"center",typography:{sm:"DisplaySmall",md:"Body1Strong"},color:"text-subdued",children:R.toUpperCase()}),Object(N.jsx)(p.a,{flex:1,children:Object(N.jsx)(E.a,{text:W,onChangeText:Ce,placeholder:"0"})}),Object(N.jsx)(b.a,{height:"24px",children:Y||te?Object(N.jsx)(j.b,{size:"sm"}):Object(N.jsx)(O.a,{typography:"DisplaySmall",textAlign:"center",children:H})})]})}),Object(N.jsxs)(b.a,{paddingBottom:"24px",children:[Object(N.jsxs)(u.a,{flexDirection:"row",justifyContent:"space-between",alignItems:"center",mb:ae,mt:ae,px:"16px",py:"12px",bgColor:"surface-default",borderWidth:g.a.hairlineWidth,borderColor:"border-subdued",borderRadius:"12px",disabled:!0,children:[Object(N.jsx)(f.a,{borderRadius:"12px",width:"40px",height:"40px",source:_.a}),Object(N.jsxs)(b.a,{flex:1,flexDirection:"column",ml:"12px",children:[Object(N.jsx)(O.a,{typography:{sm:"Body1Strong",md:"Body2Strong"},children:"MoonPay"}),Object(N.jsx)(O.a,{typography:"Body1Strong",color:"text-subdued",children:t.formatMessage({id:"form__third_party_provider"})})]})]}),C.a.isNative?Object(N.jsx)(d.a,{itemHeight:oe?"44px":void 0,pattern:/^(0|([1-9][0-9]*))?\.?([0-9]{1,2})?$/,text:W,onTextChange:function(e){G(e)}}):null,Object(N.jsx)(i.a,{type:"primary",size:"xl",isDisabled:!se,mt:C.a.isNative?ae:"0px",onPress:l()((function*(){var e,t="Buy"===s?Object(D.a)({walletAddress:null!=(e=null==re?void 0:re.address)?e:"",currencyCode:F,baseCurrencyCode:k,baseCurrencyAmount:W}):Object(D.d)({baseCurrencyCode:F,baseCurrencyAmount:W}),n=yield Object(D.e)(t);r.navigate(J.MoonpayWebViewModal,{url:n})})),children:t.formatMessage({id:"action__next"})})]})]})})},F=n(1123),R=function(){var e=Object(y.x)(),t=((null==e?void 0:e.params)||{}).url,n=Object(y.u)();return Object(h.useLayoutEffect)((function(){}),[n]),Object(h.useEffect)((function(){}),[]),Object(N.jsx)(c.b,{height:"560px",header:"MoonPay",hideSecondaryAction:!0,primaryActionProps:{type:"basic"},footer:null,staticChildrenProps:{flex:1},children:Object(N.jsx)(b.a,{flex:"1",overflow:"hidden",borderBottomRadius:"12px",children:Object(N.jsx)(F.a,{containerProps:{borderBottomRadius:"24px"},src:t,onSrcChange:function(e){}})})})},V=n(743),L=n(79),W=n(742),G=n(3093),z=n(3205);function U(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function H(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?U(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var q={includeScore:!0,threshold:.4,keys:[{name:"symbol",weight:1}]};var K=function(e){var t=e.onChange,n=Object(v.a)(),r=Object(h.useState)(""),o=x()(r,2),a=o[0],c=o[1];return Object(N.jsx)(b.a,{px:"8px",mb:"16px",children:Object(N.jsx)(G.a,{w:"full",placeholder:n.formatMessage({id:"form__search_tokens",defaultMessage:"Search Tokens"}),value:a,onClear:function(){t(""),c("")},onChangeText:function(e){c(e),t(e)}})})};function Q(e,t){return e.map((function(e){var n,r,o={balance:"0"},a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=e.toLowerCase(),r=t.toLowerCase();return n&&!r?P.a+"assets/"+n+"/"+n+".png":P.a+"assets/"+n+"/"+r+".png"}(e.networkName,e.contract);return o=""===e.contract?t.main:t[e.contract],H(H({},e),{},{balance:null!=(n=null==(r=o)?void 0:r.balance)?n:"0",logoURI:a})}))}var J,X=function(){var e=Object(v.a)(),t=Object(y.x)().params,n=t.networkId,r=t.type,o=void 0===r?"Buy":r,a=Object(S.g)(n),i=Object(S.c)().accountId,s=Q(a,Object(T.c)(n,i)),l=Object(h.useState)([]),d=x()(l,2),f=d[0],j=d[1],p=Object(h.useState)(""),m=x()(p,2),g=m[0],w=m[1],I=Object(y.u)(),P=Object(h.useMemo)((function(){return g.length>0?f:s}),[s,f,g.length]),k=Object(h.useCallback)((function(e){var t,n=e.item;return Object(N.jsxs)(u.a,{flex:1,flexDirection:"row",alignItems:"center",p:"8px",borderRadius:"12px",_hover:{bgColor:"surface-hovered"},_pressed:{bgColor:"surface-pressed"},onPress:function(){I.navigate(J.AmountInputModal,{token:n,type:o})},children:[Object(N.jsxs)(b.a,{flex:1,flexDirection:"row",alignItems:"center",children:[Object(N.jsx)(W.c,{size:8,token:{logoURI:n.logoURI},name:n.tokenName}),Object(N.jsx)(O.a,{typography:"Body1Strong",ml:"12px",children:n.symbol})]}),Object(N.jsx)(O.a,{typography:"Body1",color:"text-subdued",mr:"4px",children:null!=(t=n.balance)?t:0}),Object(N.jsx)(L.a,{name:"ChevronRightMini",color:"icon-subdued",size:20})]})}),[I,o]);return Object(N.jsx)(c.b,{maxHeight:"560px",header:e.formatMessage({id:"Buy"===o?"action__buy":"action__sell"}),hideSecondaryAction:!0,primaryActionProps:{type:"basic"},footer:null,flatListProps:{data:P,renderItem:k,showsVerticalScrollIndicator:!1,keyExtractor:function(e){return e.tokenName},ItemSeparatorComponent:function(){return Object(N.jsx)(b.a,{h:"8px"})},ListEmptyComponent:function(){return Object(N.jsx)(b.a,{children:Object(N.jsx)(V.a,{title:e.formatMessage({id:"Buy"===o?"empty__no_purchasable_tokens":"empty__no_salable_tokens"}),subTitle:e.formatMessage({id:"empty__no_purchasable_tokens_desc"}),icon:"DatabaseMini"})})},ListHeaderComponent:Object(N.jsx)(K,{onChange:function(e){w(e),j((function(){return t=s,n=e,new z.a(t,q).search(n).map((function(e){return e.item}));var t,n}))}}),mx:"-8px"}})},Y=n(560),$=n(456);function Z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}!function(e){e.SupportTokenListModal="SupportTokenList",e.AmountInputModal="AmountInputModal",e.MoonpayWebViewModal="MoonpayWebViewModal"}(J||(J={}));var ee=Object($.a)(),te=[{name:J.SupportTokenListModal,component:X},{name:J.AmountInputModal,component:B},{name:J.MoonpayWebViewModal,component:R}];t.default=function(){var e=Object(a.a)();return Object(N.jsx)(ee.Navigator,{screenOptions:function(t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({headerShown:!1},Object(Y.b)({isVerticalLayout:e,navInfo:t}))},children:te.map((function(e){return Object(N.jsx)(ee.Screen,{name:e.name,component:e.component},e.name)}))})}},3147:function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e.NewAddressRoute="NewAddressRoute",e.EditAddressRoute="EditAddressRoute",e.PickAddressRoute="PickAddressRoute",e.EnterAddressRoute="EnterAddressRoute"}(r||(r={}))},3152:function(e,t,n){"use strict";var r=n(2),o=n.n(r),a=n(16),c=n.n(a),i=n(1),s=n(32),l=n(0),d=["children"];function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var b=function(e){var t=e.children,n=c()(e,d);return Object(l.jsx)(s.a,f(f({w:"100%",flexDirection:"column",bg:"surface-default",borderRadius:"12px",overflow:"hidden"},n),{},{children:t&&(t instanceof Array?t:[t]).map((function(e,n){if(!0!==e&&!1!==e&&null!==e){var r=e.props.children;return Object(i.cloneElement)(e,f(f({},e.props),{},{key:n.toString(),hasDivider:n!==(t instanceof Array?t:[t]).length-1,children:r}))}}))}))},j=n(738),p=n(387),O=n(79),m=n(186),x=n(1115),h=n(70),y=n(41),v=["onPress"];function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var I=function(e){var t=e.title,n=e.titleColor,r=e.describe,o=e.describeColor,a=e.subDescribe,c=e.subDescribeCustom,i=e.hasArrow,d=e.customArrowIconName,u=e.hasDivider,f=e.children,b=e.hidePadding,x=e.wrap,v=e.onArrowIconPress;return Object(l.jsxs)(s.a,{w:"100%",flexDirection:"column",children:[x||Object(l.jsxs)(s.a,{px:b?"0":{base:"4",lg:"6"},py:b?0:4,w:"100%",flexDirection:"row",justifyContent:"space-between",alignItems:"center",children:[!!t&&Object(l.jsx)(h.a,{h:"100%",maxW:"60%",flexWrap:"wrap",color:null!=n?n:"text-subdued",typography:{sm:"Body1Strong",md:"Body2Strong"},children:t}),Object(l.jsxs)(s.a,{flex:1,w:"100%",ml:3,flexDirection:"column",flexWrap:"wrap",alignItems:"flex-end",children:[!!f&&Object(l.jsx)(s.a,{w:"100%",flexWrap:"wrap",justifyContent:"flex-end",flexDirection:"row",children:f}),!!r&&Object(l.jsx)(h.a,{typography:{sm:"Body1Strong",md:"Body2Strong"},w:"100%",flexWrap:"wrap",color:null!=o?o:"text-default",textAlign:"right",children:r}),!!a&&a.length>0&&(a instanceof Array?a.map((function(e,t){return Object(l.jsx)(y.h.Body2,{w:"100%",flexWrap:"wrap",color:"text-subdued",textAlign:"right",children:e},"subDescribe-"+t)})):Object(l.jsx)(y.h.Body2,{w:"100%",color:"text-subdued",flexWrap:"wrap",textAlign:"right",children:a})),!!c&&Object(l.jsx)(s.a,{w:"100%",flexWrap:"wrap",flexDirection:"row",justifyContent:"flex-end",children:c})]}),(i||!!d)&&(v?Object(l.jsx)(j.a,{my:-1,ml:2,mr:-1,children:Object(l.jsx)(m.a,{size:"xs",circle:!0,name:null!=d?d:"ChevronRightMini",type:"plain",onPress:v})}):Object(l.jsx)(s.a,{ml:3,children:Object(l.jsx)(O.a,{name:null!=d?d:"ChevronRightMini",color:"icon-subdued",size:20})}))]}),u&&Object(l.jsx)(p.a,{})]})},P=function(e){var t=e.onPress,n=c()(e,v);return t?Object(l.jsx)(x.a,{px:0,py:0,onPress:t,children:Object(l.jsx)(I,w({},n))}):Object(l.jsx)(I,w({},n))};P.defaultProps={hasArrow:!1,valueColor:null,hidePadding:!1};var k={Box:b,Item:P};t.a=k},3186:function(e,t,n){"use strict";var r=n(4245);n.d(t,"a",(function(){return r.a}))},3237:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(3),o=n.n(r),a=n(10),c=n.n(a),i=n(1),s=n(56),l=n(1117);function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.loadingDelay,a=void 0===r?0:r,d=n.checkIsMounted,u=Object(i.useState)(),f=c()(u,2),b=f[0],j=f[1],p=Object(i.useState)(!1),O=c()(p,2),m=O[0],x=O[1],h=Object(i.useRef)(),y=Object(l.a)();return h.current=e,Object(i.useEffect)((function(){o()((function*(){var e=function(){return d&&y.current||!d};try{if(e()){x(!0);var t=yield null==h||null==h.current?void 0:h.current();e()&&j(t)}}finally{yield Object(s.g)(a),e()&&x(!1)}}))()}),t),{result:b,isLoading:m}}},3239:function(e,t,n){"use strict";n.d(t,"b",(function(){return k}));var r=n(326),o=n(389),a=n(79),c=n(41),i=n(3),s=n.n(i),l=n(85),d=n(10),u=n.n(d),f=n(2),b=n.n(f),j=n(32),p=n(16),O=n.n(p),m=n(1),x=n(508),h=n(43),y=n(176),v=n(0),g=["children"];function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){b()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var P=function(e){var t=e.children,n=O()(e,g);return Object(v.jsx)(j.a,I(I({flexDirection:"row",alignSelf:"stretch",px:"12px",py:"8px",rounded:"12px",bgColor:"action-secondary-default",borderWidth:1,borderColor:"border-default"},n),{},{children:t}))},k=function(){var e=Object(m.useState)(),t=u()(e,2),n=t[0],r=t[1],o=Object(m.useMemo)((function(){return!(null==n||!n.isValidName)&&(!(null==n||!n.isSearching)||(!(null==n||!n.errorMessage)||void 0))}),[null==n?void 0:n.isSearching,null==n?void 0:n.isValidName,null==n?void 0:n.errorMessage]);return Object(m.useMemo)((function(){return{onChange:r,address:null==n?void 0:n.activeAddress,disableSubmitBtn:o,name:null==n?void 0:n.name,isValid:null==n?void 0:n.isValidName}}),[null==n?void 0:n.activeAddress,o,null==n?void 0:n.name,null==n?void 0:n.isValidName])};t.a=Object(m.memo)((function(e){var t,n=e.name,i=e.onChange,d=e.disableBTC,f=e.networkId,b=e.disable,p=void 0!==b&&b,O=Object(y.i)(n,500),g=Object(l.a)(),w=Object(x.a)(),k=h.a.serviceNameResolver,_=Object(m.useState)({isSearching:!1,isValidName:!1,length:0,options:[],activeAddress:"",shownSymbol:"",name:""}),S=u()(_,2),C=S[0],T=S[1],A=Object(m.useCallback)((function(e){T((function(t){var n=e(t);return null==i||i(n),n}))}),[i,T]),M=Object(m.useCallback)(function(){var e=s()((function*(e){var t=yield k.checkIsValidName(e);return A((function(e){return I(I({},e),{},{isValidName:t,activeAddress:"",name:""})})),t}));return function(t){return e.apply(this,arguments)}}(),[k,A]),D=Object(m.useCallback)(s()((function*(){A((function(e){return I(I({},e),{},{isSearching:!0,options:[],errorMessage:""})}));try{var e=yield k.resolveName(O,{disableBTC:d,networkId:f}),t=e.success,n=e.names,r=e.message,o=e.length,a=e.shownSymbol;if(t){var c,i,s,l,u=(null!=(c=null==n||null==(i=n[0])||null==(s=i.options)||null==(l=s[0])?void 0:l.value)?c:"").split("-")[1];A((function(e){var t,r,c;return I(I({},e),{},{length:o,options:n,activeAddress:null!=u?u:"",shownSymbol:a,name:null!=(t=null==O||null==(r=O.split("."))||null==(c=r.slice(0,-1))?void 0:c.join("."))?t:""})}))}else A((function(e){return I(I({},e),{},{options:[],shownSymbol:a,activeAddress:"",name:"",errorMessage:r})}))}catch(b){}finally{A((function(e){return I(I({},e),{},{isSearching:!1})}))}})),[k,O,A,d,f]);if(Object(m.useEffect)((function(){p||M(O)}),[O,M,p]),Object(m.useEffect)((function(){p||C.isValidName&&D()}),[D,C.isValidName,O,p]),p)return null;if(null==C||!C.isValidName)return null;if(null!=C&&C.errorMessage)return Object(v.jsx)(c.h.Body1,{color:"action-critical-default",children:w.formatMessage({id:null==C?void 0:C.errorMessage},{0:null==C?void 0:C.shownSymbol})});if(null!=C&&null!=(t=C.options)&&t.length){var E,N,B,F,R,V,L,W=null!=(E=C.options)?E:[],G=null!=(N=null==W||null==(B=W[0])||null==(F=B.options)||null==(R=F[0])?void 0:R.value)?N:"",z=null==W||null==(V=W[0])?void 0:V.title,U=null==C?void 0:C.length;return Number(U)<=1?Object(v.jsxs)(P,{children:[Object(v.jsx)(c.h.Body2Strong,{mr:"12px",color:"text-subdued",children:null!=z?z:"-"}),Object(v.jsx)(c.h.Body2,{flex:1,wordBreak:"break-all",color:"text-default",children:null!=(L=null==C?void 0:C.activeAddress)?L:"-"})]}):Object(v.jsx)(o.b,{defaultValue:G,onChange:function(e){var t=e.split("-")[1];A((function(e){return I(I({},e),{},{activeAddress:t})}))},title:w.formatMessage({id:"message__choose_address"}),headerShown:!!g,renderTrigger:function(e){var t,n=e.activeOption,r=e.isHovered,o=e.isPressed,i=e.visible,s=W.find((function(e){return!!e.options.find((function(e){return e.value===n.value}))})),l=n.value.split("-")[1];return Object(v.jsxs)(P,{bgColor:r?"action-secondary-hovered":o?"action-secondary-pressed":i?"surface-selected":"action-secondary-default",children:[Object(v.jsx)(c.h.Body2Strong,{mr:"12px",color:"text-subdued",children:null!=(t=null==s?void 0:s.title)?t:"-"}),Object(v.jsx)(c.h.Body2,{flex:1,wordBreak:"break-all",color:"text-default",children:l}),Object(v.jsx)(j.a,{ml:"12px",children:Object(v.jsx)(a.a,{name:"ChevronDownMini",color:"icon-subdued",size:20})})]})},dropdownPosition:"left",dropdownProps:{height:g?"70%":"240px"},footer:null,options:W})}return Object(v.jsxs)(j.a,{py:"8px",flexDirection:"row",children:[Object(v.jsx)(r.b,{size:"sm"}),Object(v.jsx)(c.h.Body2,{ml:"12px",color:"text-subdued",children:w.formatMessage({id:"message__fetching_addresses"})})]})}))},3245:function(e,t,n){"use strict";var r=n(32),o=n(125),a=n(41),c=n(79),i=n(387),s=n(2),l=n.n(s),d=n(1159),u=n(3),f=n.n(u),b=n(10),j=n.n(b),p=n(16),O=n.n(p),m=n(1),x=n(508),h=n(746),y=n(15),v=n(176),g=n(142),w=n(1118),I=n(3147),P=n(0),k=["value","onChange","onChangeAddressName","plugins","networkId"];function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.a=function(e){var t=e.value,n=e.onChange,s=e.onChangeAddressName,l=e.plugins,u=void 0===l?["paste","scan"]:l,b=e.networkId,p=O()(e,k),_=Object(x.a)(),C=Object(v.o)(),T=Object(m.useState)(!1),A=j()(T,2),M=A[0],D=A[1],E=Object(m.useCallback)((function(e){e!==t&&(null==n||n(e))}),[t,n]),N=Object(m.useCallback)(f()((function*(){var e=yield Object(h.b)();null==E||E(e)})),[E]),B=Object(m.useCallback)((function(){Object(w.a)(E)}),[E]),F=Object(m.useCallback)((function(){C.navigate(g.c.Modal,{screen:g.b.AddressBook,params:{screen:I.a.PickAddressRoute,params:{networkId:b,onSelected:function(e){var t=e.address,n=e.name;null==E||E(t),n&&(null==s||s(n))}}}})}),[C,E,b,s]),R=Object(m.useCallback)((function(){D(!1)}),[]);return Object(P.jsxs)(r.a,{w:"full",borderRadius:12,overflow:"hidden",borderWidth:"1",borderColor:M?"focused-default":"border-default",children:[Object(P.jsx)(d.a,S(S({trimValue:!0,borderRadius:0,w:"full",value:t,onChangeText:n,placeholder:_.formatMessage({id:"form__address"})+", ENS "+_.formatMessage({id:"content__or_lowercase"})+" .bit ",borderWidth:"0",onFocus:function(){D(!0)}},p),{},{onBlur:R})),Object(P.jsx)(i.a,{}),Object(P.jsxs)(r.a,{display:"flex",flexDirection:"row",bg:"action-secondary-default",children:[u.includes("paste")&&y.a.canGetClipboard?Object(P.jsxs)(o.a,{flex:"1",justifyContent:"center",alignItems:"center",py:"3",onPress:N,flexDirection:"row",children:[Object(P.jsx)(c.a,{size:20,name:"ClipboardMini"}),Object(P.jsx)(a.h.Body2,{ml:"3",children:_.formatMessage({id:"action__paste"})})]}):null,u.includes("contact")?Object(P.jsxs)(o.a,{flex:"1",justifyContent:"center",alignItems:"center",py:"3",onPress:F,flexDirection:"row",children:[Object(P.jsx)(c.a,{size:20,name:"BookOpenMini"}),Object(P.jsx)(a.h.Body2,{ml:"3",children:_.formatMessage({id:"action__contact"})})]}):null,u.includes("scan")?Object(P.jsxs)(o.a,{flex:"1",justifyContent:"center",alignItems:"center",py:"3",onPress:B,flexDirection:"row",children:[Object(P.jsx)(c.a,{size:20,name:"ViewfinderCircleMini"}),Object(P.jsx)(a.h.Body2,{ml:"3",children:_.formatMessage({id:"action__scan"})})]}):null]})]})}},3287:function(e,t,n){"use strict";var r=n(3),o=n.n(r),a=n(16),c=n.n(a),i=n(2),s=n.n(i),l=n(268),d=n(1),u=(n(4243),n(269)),f=n(43),b=n(3237),j=n(56),p=n(0),O=["accountId","account","walletName","size","radius"];function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.a=Object(d.memo)((function(e){var t=e.accountId,n=e.account,r=e.walletName,a=e.size,i=void 0===a?6:a,s=e.radius,d=void 0===s?"6":s,m=c()(e,O),h=f.a.serviceExternalAccount,y=Object(b.a)(o()((function*(){if(t=t||(null==n?void 0:n.id)||"",Object(u.d)({accountId:t})){var e,r,o,a=yield h.getExternalAccountImage({accountId:t});return a||(yield Object(j.g)(1e3),a=yield h.getExternalAccountImage({accountId:t})),(null==(e=a)?void 0:e.sm)||(null==(r=a)?void 0:r.md)||(null==(o=a)?void 0:o.lg)||""}return""})),[t,n,r]).result;if(y){var v={uri:y};return Object(p.jsx)(l.a,x({source:v,w:i,h:i,borderRadius:d},m),y)}return null}))},3290:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(3),o=n.n(r),a=n(1),c=n(14),i=n(22),s=n(43);function l(){var e=s.a.serviceAccount,t=s.a.serviceExternalAccount;return{addExternalAccount:Object(a.useCallback)(function(){var n=o()((function*(n){var r,o,a,s,l,d=n.status,u=n.session,f=n.client,b=n.walletService,j=n.injectedProviderState,p=n.externalAccountInfo;i.a.walletConnect.info("Connect NewSession",{status:d,peerMeta:null==u?void 0:u.peerMeta,walletServiceUrl:null==f||null==(r=f.walletService)?void 0:r.homepage});var O=null!=(o=null!=(a=null==j?void 0:j.chainId)?a:null==d?void 0:d.chainId)?o:1,m=(null==j||null==(s=j.accounts)?void 0:s[0])||(null==d||null==(l=d.accounts)?void 0:l[0])||"";m=m.toLowerCase();var x=yield e.addExternalAccount({impl:c.C,chainId:O,address:m}),h=x.account.id;f&&(f.watchAccountSessionChanged({accountId:h}),u&&(yield f.saveAccountSession({accountId:h,session:u})));var y=p;return!y&&b&&(y=yield t.generateExternalAccountInfoFromWalletService({externalAccountType:"injectedProvider",walletService:b})),j&&y&&(yield t.saveExternalAccountInfo({accountId:h,accountInfo:y})),yield e.changeActiveExternalWalletName(h),x}));return function(e){return n.apply(this,arguments)}}(),[e,t])}}},3316:function(e,t,n){"use strict";n.r(t),n.d(t,"SendRoutes",(function(){return c.a}));var r=n(2),o=n.n(r),a=n(85),c=n(458),i=n(110),s=n(743),l=n(52),d=n(508),u=n(3120),f=n(3109),b=n(0);function j(e){var t,n=e.children,r=e.titleI18nKey,o=Object(d.a)(),a=Object(l.x)().params||{},c=a.networkId,j=a.accountId,p=a.sourceInfo,O=Object(u.a)({id:null!=(t=null==p?void 0:p.id)?t:"",closeOnError:!0});return j?n:Object(b.jsx)(f.a,{header:o.formatMessage({id:r||"empty__no_account_title"}),accountId:j,networkId:c,secondaryActionTranslationId:"action__close",onSecondaryActionPress:function(e){var t=e.close;O.reject(),t()},hidePrimaryAction:!0,onModalClose:function(){O.reject()},children:Object(b.jsx)(i.a,{flex:1,minH:"300px",children:Object(b.jsx)(s.a,{emoji:"\ud83d\udcb3",title:o.formatMessage({id:"empty__no_account_title"})})})})}j.wrap=function(e,t){return function(){return Object(b.jsx)(j,{titleI18nKey:t,children:Object(b.jsx)(e,{})})}};var p=n(1),O=n(82),m=n(70),x=n(32),h=n(646),y=n(3),v=n.n(y),g=n(761),w=n.n(g),I=n(16),P=n.n(I),k=n(27),_=n.n(k),S=n(14),C=n(269),T=n(15),A=n(176),M=n(362),D=n(6),E=n.n(D),N=n(9),B=n.n(N),F=n(12),R=n.n(F),V=n(5),L=n.n(V);function W(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=L()(e);if(t){var o=L()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return R()(this,n)}}var G=function(e){B()(n,e);var t=W(n);function n(){return t.apply(this,arguments)}return n.prototype.render=function(){return this.state.error?Object(b.jsx)(m.a,{children:this.state.error.message}):this.props.children},E()(n)}(n(1138).b),z=n(426),U=n(1157);function H(e){var t,n=e.nativeToken,r=e.isWatchingAccount,o=e.balanceInsufficient,a=e.isNetworkNotMatched,c=e.isAccountNotMatched,i=[],s=Object(d.a)();(c&&i.push(Object(b.jsx)(U.a,{isAlertStyle:!0,message:s.formatMessage({id:"msg__mismatched_account"})})),a&&i.push(Object(b.jsx)(U.a,{isAlertStyle:!0,message:s.formatMessage({id:"msg__mismatched_networks"})})),r&&i.push(Object(b.jsx)(U.a,{isAlertStyle:!0,message:s.formatMessage({id:"form__error_trade_with_watched_acocunt"})})),o)&&i.push(Object(b.jsx)(U.a,{isAlertStyle:!0,message:s.formatMessage({id:"form__amount_invalid"},{0:null!=(t=null==n?void 0:n.symbol)?t:""})}));return i&&i.length?Object(b.jsx)(z.a,{testID:"SendConfirmErrorsAlert",space:2,pb:4,children:i.map((function(e,t){return Object(b.jsx)(x.a,{children:e},t)}))}):null}var q=["children","encodedTxs","decodedTxs","confirmDisabled","feeInfoPayloads","feeInfoLoading","totalFeeInNative","handleConfirm","updateEncodedTxsBeforeConfirm","autoConfirm","sourceInfo","feeInput","isSingleTransformMode"];function K(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?K(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function J(e){var t=e.children,n=e.encodedTxs,r=e.decodedTxs,o=e.confirmDisabled,a=e.feeInfoPayloads,c=e.feeInfoLoading,i=e.totalFeeInNative,s=e.handleConfirm,l=e.updateEncodedTxsBeforeConfirm,u=e.autoConfirm,j=(e.sourceInfo,e.feeInput),O=e.isSingleTransformMode,y=P()(e,q),g=n[0],I=r[0],k=a[0],D=Object(d.a)(),E=Object(A.e)(e),N=E.networkImpl,B=E.networkId,F=E.accountId,R=E.accountAddress,V=Object(M.h)(B),L=Object(M.i)(B,F),W=Object(p.useMemo)((function(){return new _.a(null!=L?L:"0").lt(new _.a(i))}),[i,L]),z=Object(p.useMemo)((function(){return Object(C.h)({accountId:F})}),[F]),U=Object(p.useMemo)((function(){if(!g)return!1;if(N===S.C){var e=g;if(e&&R&&w()(e.from)!==w()(R))return!0}return!1}),[R,g,N]),K=Object(p.useCallback)(function(){var e=v()((function*(e){var t=e.close,r=e.onClose,o=n;o&&(l&&(o=yield l(o)),s({close:t,onClose:r,encodedTxs:o}))}));return function(t){return e.apply(this,arguments)}}(),[n,s,l]);return Object(b.jsx)(f.a,Q(Q({height:"598px",primaryActionTranslationId:"action__confirm",primaryActionProps:{isDisabled:z||W||U||c||!k||!g||!I||o},secondaryActionTranslationId:"action__cancel",header:D.formatMessage({id:O?"form__transaction":"form__multiple_transactions"}),onSecondaryActionPress:function(e){return(0,e.close)()},onPrimaryActionPress:K},y),{},{scrollViewProps:{children:Object(b.jsxs)(b.Fragment,{children:[!u&&Object(b.jsx)(H,{nativeToken:V,isWatchingAccount:z,balanceInsufficient:W,isAccountNotMatched:U}),Object(b.jsx)(x.a,{mb:3,children:Object(b.jsx)(h.a,{dismiss:!1,title:D.formatMessage({id:"content__do_not_transfer_to_any_exchange_accounts_to_avoid_loss_of_assets"}),alertType:"warn"})}),Object(b.jsx)(x.a,{mb:6,children:j}),Object(b.jsx)(G,{children:t}),T.a.isDev?Object(b.jsxs)(m.a,{children:[L," ",null==V?void 0:V.symbol]}):null]})}}))}var X=n(3562),Y=n(3056),$=n(956),Z=n.n($),ee=n(460),te=n.n(ee),ne=n(43),re=n(3411);function oe(e){var t=e.accountId,n=(e.networkId,ne.a.serviceWalletConnect),r=Object(re.a)().connectToWallet;Object(p.useEffect)((function(){v()((function*(){if(Object(C.d)({accountId:t})){var e=yield n.getWalletConnectSessionOfAccount({accountId:t}),o=e.session,a=e.walletService;null!=o&&o.connected&&(yield r({isNewSession:!1,session:o,walletService:a,accountId:t}))}}))()}),[t,r,n])}function ae(e){var t=e.condition,n=Object(l.u)();Object(p.useLayoutEffect)((function(){t&&n.setOptions({animation:"none",animationEnabled:!1})}),[n,t])}var ce=n(3081),ie=n(142),se=n(3152),le=n(3694),de=n(3413),ue=n(3244),fe=n(3758),be=n(3218);function je(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?je(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):je(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Oe(e){var t,n,r,o,a,c=e.decodedTx,i=e.isSendConfirm,s=e.transferAmount,l=e.transformType,u=void 0===l?"T1":l,f=e.sendConfirmParamsParsed,j=e.isSingleTransformMode,O=Object(d.a)(),m=Object(A.r)(c.networkId),x=Object(be.b)({decodedTx:c}),h=Object(p.useCallback)((function(){return x.map((function(e,t){var n=Object(fe.a)({action:e,decodedTx:c,intl:O,historyTx:void 0});n.meta.transferAmount=s;var r=n.meta,o=n.components[u];return Object(b.jsx)(se.a.Item,{wrap:Object(b.jsx)(o,pe(pe({},n.props),{},{meta:r,network:m})),hidePadding:!0},t)}))}),[c,x,O,m,s,u]);return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(le.a,{origin:null!=(t=null!=(n=null==c||null==(r=c.interactInfo)?void 0:r.url)?n:null==f||null==(o=f.sourceInfo)?void 0:o.origin)?t:"",networkId:null!=(a=null==c?void 0:c.networkId)?a:""}),Object(b.jsx)(ue.a,{isSendConfirm:i,isCollapse:!j,isMultipleActions:!0,children:Object(b.jsxs)(b.Fragment,{children:[j&&Object(b.jsx)(de.a,pe(pe({},e),{},{transformType:"T1",space:6})),!j&&Object(b.jsx)(se.a.Box,{p:"0",borderWidth:1,borderColor:"border-subdued",children:h()})]})})]})}var me=n(234),xe=n(326),he=n(1120),ye=n(3186),ve=n(79),ge=n(10),we=n.n(ge),Ie=n(462),Pe=n(21),ke=n(3051),_e=n(147),Se=n(388),Ce=n(125),Te=["value","size","isChecked","isDisabled","onChange"];function Ae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Me(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ae(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ae(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var De=["value","size","defaultValue","isDisabled","onChange","children","radioProps"];function Ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ne(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ee(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ee(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Be=function(e){var t=e.value,n=(e.size,e.defaultValue,e.isDisabled,e.onChange),r=e.children,o=e.radioProps,a=P()(e,De);return Object(b.jsx)(x.a,Ne(Ne({w:"full",flex:1},a),{},{p:4,children:r&&r.map((function(e,r){var a=e.props,c=a.value,i=a.children;return Object(p.cloneElement)(e,Ne(Ne(Ne({},e.props),o),{},{key:"RadioBox-"+r,isChecked:t===c,onChange:function(e){n&&n(e)}}),i)}))}))},Fe=function(e){var t=e.value,n=(e.size,e.isChecked),r=e.isDisabled,o=e.onChange,a=P()(e,Te),c=Object(p.useState)(!1),i=we()(c,2),s=i[0],l=i[1],d="border-default";d=n?r?"action-primary-activate-disabled":"action-primary-default":r?"border-disabled":"border-default";var u="action-secondary-default";return u=r?"action-secondary-disabled":"action-secondary-default",Object(b.jsx)(Ce.a,Me(Me({onFocus:function(){return l(!0)},onBlur:function(){return l(!1)},_hover:{bg:s?"surface-hovered":"action-secondary-hovered",borderColor:s?"interactive-default":d},_focus:{bg:"surface-hovered",borderColor:"focused-default"},_focusVisible:{bg:"surface-hovered",borderColor:"action-primary-focus"},_pressed:{bg:"surface-selected",borderColor:r?"action-secondary-disabled":"action-primary-default"},_disabled:{bg:"action-secondary-disabled",borderColor:"action-primary-disabled"},disabled:r,borderRadius:"12px",borderWidth:"1px",borderColor:d,bg:u,py:4,px:{base:4,md:6},onPress:function(){o&&o(t)}},a),{},{children:a.children}))};Fe.Group=Be;var Re=Fe,Ve=n(41),Le=["items"];function We(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ge(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?We(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):We(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ze=function(e){var t=e.items,n=P()(e,Le);return Object(b.jsx)(Re.Group,Ge(Ge({},n),{},{children:function(){var e=[];return t.forEach((function(t){e.push(Object(b.jsxs)(Re,{disabled:t.isDisabled,value:t.value,flexDirection:"row",justifyContent:"space-between",mt:3,children:[Object(b.jsxs)(x.a,{alignSelf:"stretch",children:[Object(b.jsx)(m.a,{typography:{sm:"DisplayMedium",md:"DisplaySmall"},color:t.isDisabled?"text-disabled":"text-default",children:t.title}),!!t.titleSecond&&Object(b.jsx)(Ve.h.Body2,{mt:"auto",color:t.isDisabled?"text-disabled":"text-subdued",children:t.titleSecond})]}),Object(b.jsxs)(x.a,{alignItems:"flex-end",children:[!!t.describe&&Object(b.jsx)(m.a,{typography:{sm:"DisplayMedium",md:"DisplaySmall"},color:t.isDisabled?"text-disabled":"text-default",children:t.describe}),!!t.describeSecond&&Object(b.jsx)(Ve.h.Body2,{color:t.isDisabled?"text-disabled":"text-subdued",children:t.describeSecond}),!!t.describeThird&&Object(b.jsx)(Ve.h.Body2,{color:t.isDisabled?"text-disabled":"text-subdued",children:t.describeThird})]})]},t.value))})),e}()}))};function Ue(e){var t=e.index,n=Object(d.a)(),r=parseInt(t,10),o="\ud83d\ude85  "+n.formatMessage({id:"content__fast"});return 0===r&&(o="\ud83d\ude97  "+n.formatMessage({id:"content__normal"})),1===r&&(o="\ud83d\ude85  "+n.formatMessage({id:"content__fast"})),2===r&&(o="\ud83d\ude80  "+n.formatMessage({id:"content__rapid"})),Object(b.jsx)(b.Fragment,{children:o})}function He(e){var t,n=e.feeInfoPayload,r=e.value,o=e.onChange,a=Object(p.useMemo)((function(){var e,t;return null!=(e=null==n||null==(t=n.info)?void 0:t.prices)?e:[]}),[null==n||null==(t=n.info)?void 0:t.prices]),c=Object(p.useMemo)((function(){return a?a.map((function(e,t){return{value:t.toString(),title:Object(b.jsx)(Ue,{index:t})}})):[]}),[a]);return Object(b.jsx)(ze,{padding:0,pb:6,items:c,name:"standard fee group",value:r,onChange:o})}function qe(e){var t=Object(A.h)((function(e){return e.data.feePresetIndexMap}));return null==t?void 0:t[e]}function Ke(e){var t,n=e.networkId,r=Object(A.q)({networkId:n}).network;return Boolean(null==r||null==(t=r.settings)?void 0:t.feeInfoEditable)}function Qe(e){var t=e.children,n=e.canPress,r=e.onPress;return n?Object(b.jsx)(Ie.a,{onPress:r,activeOpacity:.9,children:t}):Object(b.jsx)(b.Fragment,{children:t})}function Je(e){var t,n,r=e.feeInfoPayloads,o=e.feeInfoLoading,a=e.totalFeeInNative,i=e.minTotalFeeInNative,s=e.accountId,u=e.networkId,f=e.encodedTxs,j=e.batchSendConfirmParams,O=e.isSingleTransformMode,h=e.feeInfoError,y=Object(p.useState)(!1),v=we()(y,2),g=v[0],w=v[1],I=Object(l.u)(),P=Object(d.a)(),k=qe(u),_=Ke({networkId:u})&&e.editable,S=f[0],C=r[0],T=(O?null==C||null==(t=C.selected)?void 0:t.preset:k)||"0";C&&C.selected&&(C.selected.preset=T);var A,M=(null==C||null==(n=C.info)?void 0:n.nativeSymbol)||"",D=o||!_||!S||!C||j.signOnly,E=Object(p.useMemo)((function(){if(!h)return null;var e=null;return(e=h instanceof Pe.m&&"onekey_error"!==h.key?P.formatMessage({id:h.key}):h.message)&&e.length>350&&(e=e.slice(0,350)+"..."),!!e&&!o&&Object(b.jsx)(ye.a,{maxW:"360px",isOpen:g,hasArrow:!0,label:e,bg:"surface-neutral-default",_text:{color:"text-default",fontSize:"14px"},px:"16px",py:"8px",placement:"top",borderRadius:"12px",children:Object(b.jsx)(x.a,{children:Object(b.jsx)(ve.a,{name:"ExclamationTriangleOutline",size:20,color:"icon-warning"})})})}),[h,g,P,o]),N=Object(p.useCallback)((function(){Object(Se.a)((function(e){return Object(b.jsx)(he.a,{title:P.formatMessage({id:"action__edit_fee"}),closeOverlay:e,children:Object(b.jsx)(He,{feeInfoPayload:C,value:C.selected.preset,onChange:function(t){e(),ne.a.dispatch(Object(_e.f)({networkId:u,index:t}))}})})}))}),[C,P,u]),B=Object(p.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.replace,n=void 0!==t&&t;if(!D)return O?void(n?I.replace(c.a.SendEditFee,{networkId:u,accountId:s,encodedTx:S,feeInfoSelected:null==C?void 0:C.selected,forBatchSend:!O}):I.navigate({name:c.a.SendEditFee,params:{networkId:u,accountId:s,encodedTx:S,feeInfoSelected:null==C?void 0:C.selected,forBatchSend:!O}})):N()}),[D,O,N,I,u,s,S,null==C?void 0:C.selected]);return O?Object(b.jsx)(Qe,{canPress:!!E,onPress:function(){return w(!g)},children:Object(b.jsx)(se.a.Box,{borderWidth:1,borderColor:"border-subdued",children:Object(b.jsx)(se.a.Item,{onPress:D?null:B,wrap:Object(b.jsxs)(me.a,{p:4,alignItems:"center",pr:2,children:[Object(b.jsxs)(z.a,{flex:1,space:1,children:[Object(b.jsx)(m.a,{typography:"Body2Strong",color:"text-subdued",children:P.formatMessage({id:"form__gas_fee_settings"})}),Object(b.jsxs)(m.a,{typography:"Body1Strong",children:[Object(b.jsx)(Ue,{index:T}),Object(b.jsx)(ke.e,{networkId:u,accountId:s,value:a,render:function(e){return Object(b.jsxs)(b.Fragment,{children:["(~ ",e,")"]})}})]}),Object(b.jsxs)(x.a,{w:"100%",flexDirection:"row",alignItems:"center",justifyContent:"flex-start",children:[C?Object(b.jsx)(m.a,{typography:"Body2",color:"text-subdued",children:a+" "+((null==C||null==(A=C.info)?void 0:A.nativeSymbol)||"")}):Object(b.jsx)(m.a,{color:"text-subdued",flex:1,children:P.formatMessage({id:"content__calculate_fee"})}),Object(b.jsx)(x.a,{w:2}),E,o?Object(b.jsx)(xe.b,{size:"sm"}):null,Object(b.jsx)(x.a,{flex:1})]})]}),!D&&Object(b.jsx)(x.a,{children:Object(b.jsx)(ve.a,{name:"ChevronRightMini",color:"icon-subdued",size:20})})]})})})}):Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)(se.a.Box,{borderWidth:1,borderColor:"border-subdued",children:[Object(b.jsx)(se.a.Item,{onPress:D?null:B,wrap:Object(b.jsxs)(me.a,{p:4,alignItems:"center",pr:2,children:[Object(b.jsxs)(z.a,{flex:1,space:1,children:[Object(b.jsx)(m.a,{typography:"Body2Strong",color:"text-subdued",children:P.formatMessage({id:"form__gas_fee_settings"})}),Object(b.jsx)(m.a,{typography:"Body1Strong",children:Object(b.jsx)(Ue,{index:T})})]}),!D&&Object(b.jsx)(x.a,{children:Object(b.jsx)(ve.a,{name:"ChevronRightMini",color:"icon-subdued",size:20})})]})}),Object(b.jsx)(se.a.Item,{hidePadding:!0,wrap:Object(b.jsx)(Qe,{canPress:!!E,onPress:function(){return w(!g)},children:Object(b.jsx)(x.a,{flexDirection:"column",w:"100%",p:4,children:Object(b.jsxs)(z.a,{space:1,children:[Object(b.jsx)(m.a,{typography:"Body2Strong",color:"text-subdued",children:P.formatMessage({id:"form__estimate_total_gas_fee"})}),Object(b.jsxs)(x.a,{w:"100%",flexDirection:"row",alignItems:"center",justifyContent:"flex-start",children:[C?Object(b.jsxs)(m.a,{typography:"Body1Strong",children:[i===a&&a+" "+M,i!==a&&i+" ~ "+a+" "+M]}):Object(b.jsx)(m.a,{color:"text-subdued",flex:1,children:P.formatMessage({id:"content__calculate_fee"})}),Object(b.jsx)(x.a,{w:2}),E,o?Object(b.jsx)(xe.b,{size:"sm"}):null,Object(b.jsx)(x.a,{flex:1})]})]})})})})]}),Object(b.jsx)(m.a,{typography:"Caption",color:"text-subdued",mt:"12px",children:P.formatMessage({id:"content__to_ensure_that_the_transaction_will_be_successfully_sent"})})]})}function Xe(e){var t=e.networkId,n=e.accountId,r=e.encodedTxs,o=void 0===r?[]:r,a=e.payload,c=e.sourceInfo,i=Object(p.useState)([]),s=we()(i,2),l=s[0],d=s[1],u=Object(p.useState)([]),f=we()(u,2),b=f[0],j=f[1],O=ne.a.engine,m=function(e){var t=e.sourceInfo;return Object(p.useMemo)((function(){if(null!=t&&t.origin)return{url:null==t?void 0:t.origin,name:"",description:"",icons:[],provider:null==t?void 0:t.scope}}),[null==t?void 0:t.origin,null==t?void 0:t.scope])}({sourceInfo:c});return Object(p.useEffect)((function(){Promise.all(o.map((function(e){return O.decodeTx({networkId:t,accountId:n,encodedTx:e,payload:a,interactInfo:m})}))).then((function(e){j(Z()(e,"decodedTx")),d(Z()(e,"decodedTxLegacy,"))}))}),[n,o,O,m,t,a]),{decodedTxs:b,decodedTxsLegacy:l}}function Ye(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $e(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ye(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ye(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ze(e){return delete e.gasPrice,delete e.maxPriorityFeePerGas,delete e.maxFeePerGas,e}function et(e){return tt.apply(this,arguments)}function tt(){return(tt=v()((function*(e){var t=e.encodedTx,n=e.networkImpl,r=e.sendConfirmParams,o=e.address;if(!t)throw new Error("prepareEncodedTx encodedTx should NOT be null");if(n===S.C){var a=$e({},t);a.from=a.from||o,r.sourceInfo&&(a=Ze(a));var c=new _.a(a.value);c.isNaN()||(a.value="0x"+c.toString(16));try{a.from&&(a.from=w()(a.from)||a.from),a.to&&(a.to=w()(a.to)||a.to)}catch(i){}return Promise.resolve(a)}return Promise.resolve(t)}))).apply(this,arguments)}var nt=n(163),rt=n(20),ot=n.n(rt),at=n(957),ct=n(3095),it=n(22);function st(e){var t=e.accountId,n=e.networkId;Object(p.useEffect)((function(){t&&n&&ne.a.serviceToken.fetchAccountTokens({activeAccountId:t,activeNetworkId:n})}),[t,n])}function lt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function dt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lt(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ut(e){return Object(b.jsx)(J,dt(dt({},e),{},{confirmDisabled:!0,children:Object(b.jsx)(i.a,{minH:"320px",w:"full",h:"full",flex:1,children:Object(b.jsx)(xe.b,{size:"lg"})})}))}function ft(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function bt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ft(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ft(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function jt(e){var t=e.batchSendConfirmParamsParsed,n=t.navigation,r=t.routeParams,o=t.sourceInfo,a=t.payload,i=t.payloadInfo,s=t.dappApprove,u=t.onModalClose,f=t.networkId,j=t.accountId,O=t.feeInfoUseFeeInTx,m=t.feeInfoEditable,x=t.transferCount,h=Object(d.a)();Object(ce.c)(),st({networkId:f,accountId:j}),ae({condition:!!r.autoConfirmAfterFeeSaved});var y=ne.a.engine,g=ne.a.serviceHistory,w=ne.a.serviceToken,I=Object(A.e)({accountId:j,networkId:f}),P=I.networkImpl,k=I.accountAddress,C=I.walletId,T=function(e){var t=e.batchSendConfirmParams,n=e.networkImpl,r=e.address,o=Object(p.useState)([]),a=we()(o,2),c=a[0],i=a[1];return Object(p.useEffect)((function(){Promise.all(t.encodedTxs.map((function(e){return et({encodedTx:e,sendConfirmParams:t,networkImpl:n,address:r})}))).then(i)}),[r,n,t,t.encodedTxs]),{encodedTxs:c}}({batchSendConfirmParams:r,networkImpl:P,address:k||""}).encodedTxs,M=T[0],D=1===T.length,E=Xe({accountId:j,networkId:f,encodedTxs:T,payload:i,sourceInfo:o}).decodedTxs,N=E[0],B=function(e){var t,n=e.encodedTxs,r=e.decodedTxs,o=e.useFeeInTx,a=void 0!==o&&o,c=e.pollingInterval,i=void 0===c?0:c,s=e.fetchAnyway,d=void 0!==s&&s,u=e.networkId,f=e.accountId,b=e.signOnly,j=e.forBatchSend,O=e.transferCount,m=Object(l.t)(),x=Object(A.e)({accountId:f,networkId:u}).network,h=Object(p.useState)(null),y=we()(h,2),g=y[0],w=y[1],I=Object(p.useState)([]),P=we()(I,2),k=P[0],C=P[1],T=Object(p.useState)(0),M=we()(T,2),D=M[0],E=M[1],N=Object(p.useState)(0),B=we()(N,2),F=B[0],R=B[1],V=Object(p.useRef)([]),L=Object(p.useRef)(),W=Object(p.useState)(!0),G=we()(W,2),z=G[0],U=G[1],H=Object(l.x)(),q=qe(u),K=null==(t=H.params)?void 0:t.feeInfoSelected,Q=Object(p.useCallback)((function(e){var t=e.info,n=e.index,r=parseInt(n,10),o=r>t.prices.length-1?t.prices.length-1:r,a=t.prices[o];return{eip1559:t.eip1559,price:a,limit:t.limit}}),[]),J=Object(p.useCallback)(function(){var e=v()((function*(e,t){var n,r=!1,o=K,c=null!=x?x:{},i={nativeDecimals:c.decimals,nativeSymbol:c.symbol,feeDecimals:c.feeDecimals,feeSymbol:c.feeSymbol,prices:[],defaultPresetIndex:null!=q?q:"1"},s={price:"0",limit:"0"},l=null,p=!o||"preset"===(null==(n=o)?void 0:n.type);if(d&&(p=!0),p)try{i=yield ne.a.engine.fetchFeeInfo({accountId:f,networkId:u,encodedTx:e,signOnly:b})}catch(D){if((null==x?void 0:x.impl)!==S.C||e.to!==at.a[null==x?void 0:x.id]){var m=D,h=m.code,y=m.data;return w(-32603===h&&y?y:D),it.a.sendTx.error("engine.fetchFeeInfo ERROR: ",D),null}var v;r=!0;var g=0,I=0,P=yield ne.a.engine.getGasPrice(u);I=+(yield ne.a.engine.proxyJsonRPCCall(u,{method:"eth_getBlockByNumber",params:["latest",!1]})).gasLimit/10,null!=t&&null!=(v=t.info)&&v.limit&&(g=+t.info.limit*O,I=_.a.min(3*g,I).toNumber()),s={eip1559:"object"===typeof P[0],limit:String(I),price:P[P.length-1]},l={eip1559:"object"===typeof P[0],limit:String(g||I),price:P[P.length-1]},i.prices=P}r||(q&&(i.defaultPresetIndex=q),parseFloat(i.defaultPresetIndex)>i.prices.length-1&&(i.defaultPresetIndex=""+(i.prices.length-1)),parseFloat(i.defaultPresetIndex)<0&&(i.defaultPresetIndex="0")),!o&&i&&a&&i.tx&&(o={type:"custom",custom:i.tx,preset:i.defaultPresetIndex}),o=o||{type:"preset",preset:i.defaultPresetIndex},j&&i&&"preset"===o.type&&o.preset&&(i.customDisabled=!0),"custom"===o.type&&o.custom&&(s=o.custom),i&&"preset"===o.type&&o.preset&&!r&&(s=Q({info:i,index:o.preset}));var k=Object(ct.b)(s).max,C={value:s,total:k,totalNative:Object(ct.a)({amount:k,info:i})};if(r&&l){var T=Object(ct.b)(l).max,A=Object(ct.a)({amount:T,info:i});C.minTotal=T,C.minTotalNative=A}var M={selected:o,info:i,current:C};return it.a.sendTx.info("useFeeInfoPayload: ",M),M}));return function(t,n){return e.apply(this,arguments)}}(),[K,x,q,d,a,j,f,u,b,O,Q]);return Object(p.useEffect)((function(){v()((function*(){if(!n.length)return null;U(!0);var e=n[0],t=yield J(e),r=n.slice(1);try{var o=yield Promise.all(r.map((function(e){return J(e,t)}))),a=[t].concat(ot()(o)),c=a.includes(null)?[]:a;C(c),c.length>0&&w(null)}catch(s){if(-32603===s.code){var i=s.data.message;"string"===typeof i&&nt.a.show({title:i})}C([]),w(s),it.a.sendTx.error("fetchFeeInfo ERROR: ",s)}finally{U(!1)}}))()}),[r,n,J,C]),Object(p.useEffect)((function(){return clearInterval(L.current),i&&m&&(L.current=setInterval(v()((function*(){if(!z&&"custom"!==(null==K?void 0:K.type))try{var e=n[0],t=yield J(e),r=n.slice(1),o=yield Promise.all(r.map((function(e){return J(e,t)})));if(o){var a=[t].concat(ot()(o)),c=a.includes(null)?[]:a;C(c),V.current=c,c.length>0&&w(null)}else V.current&&V.current.length>0&&(C(V.current),w(null))}catch(i){V.current&&V.current.length>0?(C(V.current),w(null)):w(i),it.a.sendTx.error("feeInfoPollingInterval ERROR: ",i)}})),i)),function(){clearInterval(L.current)}}),[null==K?void 0:K.type,J,z,i,m,n]),Object(p.useEffect)((function(){var e=0,t=0;if(k.length===r.length&&0!==k.length){for(var n=0;n<k.length;n+=1){var o,a,c,i,s,l,d,u;if(r[n].totalFeeInNative)t+=new _.a(null!=(o=r[n].totalFeeInNative)?o:0).toNumber(),e+=new _.a(null!=(a=r[n].totalFeeInNative)?a:0).toNumber();else t+=new _.a(null!=(c=null==(i=k[n].current)?void 0:i.totalNative)?c:0).toNumber(),e+=new _.a(null!=(s=null!=(l=null==(d=k[n].current)?void 0:d.minTotalNative)?l:null==(u=k[n].current)?void 0:u.totalNative)?s:0).toNumber()}E(t),R(e)}}),[r,k]),{feeInfoError:g,minTotalFeeInNative:F,totalFeeInNative:D,feeInfoPayloads:k,feeInfoLoading:z,getSelectedFeeInfoUnit:Q}}({accountId:j,networkId:f,encodedTxs:T,decodedTxs:E,useFeeInTx:O,pollingInterval:m?5e3:0,signOnly:r.signOnly,forBatchSend:!0,transferCount:x}),F=B.feeInfoError,R=B.feeInfoPayloads,V=B.feeInfoLoading,L=B.totalFeeInNative,W=B.minTotalFeeInNative;oe({accountId:j,networkId:f});var G=Object(p.useCallback)(function(){var e=v()((function*(e){var t=e.close,o=e.encodedTxs;if(!te()(o)){var a=o;m&&!te()(R)&&(a=yield Promise.all(o.map((function(e,t){var n;return y.attachFeeInfoToEncodedTx({networkId:f,accountId:j,encodedTx:e,feeInfoValue:null==(n=R[t])?void 0:n.current.value})}))));var i=function(){var e=v()((function*(e,o){var a;w.fetchAccountTokens({activeAccountId:j,activeNetworkId:f}),r.signOnly?yield s.resolve({result:Z()(e,"rawTx")}):yield s.resolve({result:Z()(e,"txid")});var i=r.signOnly?"Sign":"Send",l={networkId:f,accountId:j,txid:null!=(a=e[0].txid)?a:"unknown_txid",type:i,closeModal:t,onDetail:r.onDetail,isSingleTransformMode:D};n.navigate(ie.c.Modal,{screen:ie.b.Send,params:{screen:c.a.SendFeedbackReceipt,params:l}}),r.onSuccess&&r.onSuccess(e,o),g.refreshHistoryUi(),setTimeout((function(){}),0)}));return function(t,n){return e.apply(this,arguments)}}(),l=bt(bt({},r),{},{encodedTxs:a,feeInfoPayloads:R,accountId:j,networkId:f,walletId:C,onSuccess:i,onFail:function(e){s.reject({error:e})},onModalClose:u});return n.navigate(ie.c.Modal,{screen:ie.b.Send,params:{screen:c.a.BatchSendProgress,params:l}})}}));return function(t){return e.apply(this,arguments)}}(),[j,s,y,m,R,D,n,f,u,r,g,w,C]),z=Object(b.jsx)(Je,{accountId:j,networkId:f,encodedTxs:T,feeInfoPayloads:R,feeInfoLoading:V,totalFeeInNative:L,minTotalFeeInNative:W,batchSendConfirmParams:r,editable:m,isSingleTransformMode:D,feeInfoError:F}),U={accountId:j,networkId:f,batchSendConfirmParams:r,sourceInfo:o,encodedTxs:T,decodedTxs:E,payload:a,feeInfoPayloads:R,feeInfoLoading:V,feeInfoEditable:m,totalFeeInNative:L,feeInput:z,isSingleTransformMode:D,handleConfirm:G,onSecondaryActionPress:function(e){var t=e.close;s.reject(),t()},onModalClose:u,children:null},H=E.map((function(e,t){return{headerProps:{title:(h.formatMessage({id:"form__transaction"})+" #"+(t+1)).toUpperCase()},data:[e]}}));return U.children=D?Object(b.jsx)(Oe,{isSendConfirm:!0,isSingleTransformMode:D,decodedTx:N}):Object(b.jsx)(X.a,{headerProps:{title:h.formatMessage({id:"form__multiple_transactions"})+" ("+T.length+")"},sections:H,renderItem:function(e){var t=e.item;return Object(b.jsx)(Y.a,{children:Object(b.jsx)(Oe,{isSendConfirm:!0,isSingleTransformMode:D,decodedTx:t})},t.txid)}}),!N||!M?Object(b.jsx)(ut,bt({},U)):Object(b.jsx)(J,bt({},U))}var pt=function(){var e=function(){var e,t,n,r,o,a,c=Object(l.u)(),i=Object(l.x)(),s=Object(p.useRef)({}),d=null!=(e=i.params)?e:s.current,f=d.sourceInfo,b=d.resendActionInfo,j=d.encodedTxs,O=d.onModalClose,m=d.networkId,x=d.accountId,h=d.transferCount,y=!!d.sourceInfo,v=null==(t=d.feeInfoEditable)||t,g=null!=(n=d.feeInfoUseFeeInTx)&&n,w="cancel"===(null==(r=d.resendActionInfo)?void 0:r.type)||"speedUp"===(null==(o=d.resendActionInfo)?void 0:o.type),I=Object(p.useMemo)((function(){return d.payload}),[d.payload]),P=Object(u.a)({id:null!=(a=null==f?void 0:f.id)?a:"",closeOnError:!0}),k=Object(p.useRef)(O),_=Object(p.useRef)(!1),S=Object(p.useCallback)((function(){_.current||(P.reject(),k.current&&k.current(),_.current=!0)}),[P]);Object.assign(d,{onModalClose:S});var C="InternalSwap"===(null==I?void 0:I.payloadType);return{networkId:m,accountId:x,transferCount:h,dappApprove:P,onModalClose:S,encodedTxs:j,navigation:c,route:i,routeParams:d,sourceInfo:f,isFromDapp:y,feeInfoEditable:v,feeInfoUseFeeInTx:g,isSpeedUpOrCancel:w,payload:I,payloadInfo:d.payloadInfo,resendActionInfo:b,isInternalSwapTx:C,isTransferTypeTx:!1}}(),t=e.sourceInfo,n=e.routeParams;return Object(p.useMemo)((function(){return!!t&&!O.b.includes(t.scope)}),[t])?Object(b.jsx)(J,{accountId:n.accountId,networkId:n.networkId,batchSendConfirmParams:n,feeInfoPayloads:[],feeInfoLoading:!1,encodedTxs:[],decodedTxs:[],totalFeeInNative:0,handleConfirm:function(){return null},children:Object(b.jsx)(H,{isNetworkNotMatched:!0})}):Object(b.jsx)(jt,{batchSendConfirmParamsParsed:e})},Ot=n(98),mt=n(864),xt=n(3062);function ht(e){var t=e.sourceInfo;return Object(p.useMemo)((function(){if(null!=t&&t.origin)return{url:null==t?void 0:t.origin,name:"",description:"",icons:[],provider:null==t?void 0:t.scope}}),[null==t?void 0:t.origin,null==t?void 0:t.scope])}function yt(e){var t=e.networkId,n=e.accountId,r=e.encodedTx,o=e.payload,a=e.sourceInfo,c=Object(p.useState)(null),i=we()(c,2),s=i[0],l=i[1],d=Object(p.useState)(null),u=we()(d,2),f=u[0],b=u[1],j=ne.a.engine,O=ht({sourceInfo:a});return Object(p.useEffect)((function(){r&&v()((function*(){var e=yield j.decodeTx({networkId:t,accountId:n,encodedTx:r,payload:o,interactInfo:O});b(e.decodedTx),l(e.decodedTxLegacy)}))()}),[n,r,j,O,t,o]),{decodedTx:f,decodedTxLegacy:s}}var vt=n(771),gt=n(151),wt=n(56),It=n(757);var Pt=Object(p.memo)((function(e){var t=e.password,n=e.currentState,r=e.setCurrentState,o=Object(p.useState)(0),a=we()(o,2),c=a[0],s=a[1],u=Object(p.useState)(0),f=we()(u,2),j=f[0],O=f[1],h=Object(l.u)(),y=Object(d.a)(),g=Object(l.x)(),w=Object(p.useRef)(!1),I=Object(p.useRef)(!0),P=Object(p.useRef)(),k=g.params,S=k.networkId,C=k.accountId,T=k.encodedTxs,A=k.onSuccess,M=k.onFail,D=k.walletId,E=k.payloadInfo,N=k.feeInfoPayloads,B=k.backRouteName,F=k.sourceInfo,R=k.signOnly,V=void 0!==R&&R,L=E||g.params.payload,W=ht({sourceInfo:F}),G=Object(p.useRef)(n),z=Object(vt.a)({walletId:D}).wallet,U=n===It.a.inProgress,H=Xe({networkId:S,accountId:C,encodedTxs:T,sourceInfo:F,payload:L}).decodedTxs,q=T.length,K=new _.a(j/q).toNumber(),Q=U&&c<q-1,J=Object(p.useCallback)(v()((function*(){return G.current===It.a.inProgress?Promise.resolve(!0):(yield Object(wt.g)(1e3),J())})),[G]),X=Object(p.useCallback)(v()((function*(){for(var e=[],n=0;n<T.length;n+=1){yield J(),s(n+1),it.a.sendTx.info("Authentication sendTx:",g.params);var r,o=yield ne.a.serviceBatchTransfer.signAndSendEncodedTx({password:t,networkId:S,accountId:C,encodedTx:T[n],signOnly:V,pendingTxs:Z()(e,(function(e){return{id:e.txid}}))});if(e.push(o),o)yield ne.a.serviceHistory.saveSendConfirmHistory({networkId:S,accountId:C,data:{signedTx:o,encodedTx:T[n],decodedTx:(yield ne.a.engine.decodeTx({networkId:S,accountId:C,encodedTx:T[n],payload:L,interactInfo:W})).decodedTx},feeInfo:null==(r=N[n])?void 0:r.current.value});it.a.sendTx.info("Authentication sendTx DONE:",g.params,e),O(n+1)}return e})),[C,T,N,W,S,t,L,g.params,V,J]),Y=Object(p.useCallback)(v()((function*(){try{if(w.current)return;w.current=!0;var e,t=T,n=[];if(!te()(t)){if(e=n=yield X(),te()(n))return;var r=Z()(n,"encodedTx").filter(Boolean);if(r.length!==n.length)throw new Error("signedTxs including null encodedTx, please check code");t=te()(r)?t:r}if(!te()(e)){var o,a,c,i,s=L;"InternalSwap"===(null==(o=s)?void 0:o.type)&&null!=(a=s)&&a.swapInfo&&null!=(c=s)&&null!=(i=c.swapInfo)&&i.isApprove&&(s=void 0),null==A||A(e,{signedTxs:n,encodedTxs:t,decodedTxs:te()(t)?[]:Z()(yield Promise.all(t.map((function(e){return ne.a.engine.decodeTx({networkId:S,accountId:C,encodedTx:e,payload:s,interactInfo:W})}))),"decodedTx")})}}catch(p){var l,d=p;if(it.a.common.error(d),B)h.navigate({merge:!0,name:B,params:{}});else{var u;if(!I.current)return;null==(u=h.getParent())||null==u.goBack||u.goBack()}if(yield Object(wt.g)(600),-32603===(null==d?void 0:d.code)&&"string"===typeof(null==d||null==(l=d.data)?void 0:l.message))nt.a.show({title:d.data.message||y.formatMessage({id:"transaction__failed"}),description:d.data.message},{type:"error"});else{var f,b,j=null!=d&&d.key?y.formatMessage({id:null==d?void 0:d.key},null!=(f=null==d?void 0:d.info)?f:{}):null!=(b=null==d?void 0:d.message)?b:"";d.className!==Pe.n.OneKeyWalletConnectModalCloseError&&(gt.a.showErrorToast(d)||nt.a.show({title:j||y.formatMessage({id:"transaction__failed"}),description:j},{type:"error"}))}yield Object(wt.g)(100),null==M||M(d)}})),[C,B,T,W,y,h,S,A,M,L,X]);return Object(p.useEffect)((function(){return function(){I.current=!1,clearInterval(P.current)}}),[P,I]),Object(p.useEffect)((function(){te()(H)||Y()}),[H,Y]),Object(p.useEffect)((function(){G.current=n}),[n]),Object(b.jsxs)(i.a,{h:"full",w:"full",children:[Object(b.jsx)(x.a,{position:"relative",children:Object(b.jsx)(mt.a.Circle,{progress:K,text:Object(b.jsx)(m.a,{typography:"Body2Strong",color:"text-subdued",textAlign:"center",children:y.formatMessage({id:"form__str_transactions"},{0:Object(b.jsx)(m.a,{typography:"DisplayMedium",textAlign:"center",children:j+" / "+q+"\n"})})})})}),Object(b.jsxs)(m.a,{typography:"DisplayMedium",mt:"24px",textAlign:"center",children:[n===It.a.inProgress&&y.formatMessage({id:"title__transactions_in_progress"}),n===It.a.onPause&&y.formatMessage({id:"title__you_ve_paused_the_transaction_generation"})]}),"hw"===(null==z?void 0:z.type)&&U&&Object(b.jsx)(m.a,{textAlign:"center",mt:"4px",typography:"DisplaySmall",color:"text-subdued",children:y.formatMessage({id:"content__you_may_receive_multiple_signing_requests_on_the_hardware_wallet"})}),!U&&Object(b.jsx)(m.a,{textAlign:"center",mt:"4px",typography:"DisplaySmall",color:"text-subdued",children:y.formatMessage({id:"content__if_you_want_to_cancel_transactions_that_has_already_been_generated"})}),Object(b.jsx)(Ot.a,{type:"basic",mt:"16px",onPress:function(){return r(It.a.onPause)},opacity:Q?1:0,disabled:!Q,children:y.formatMessage({id:"action__pause"})})]})}));var kt=n(274),_t=n(288),St=n.n(_t),Ct=n(750),Tt=n(210);var At=n(742),Mt=n(200),Dt=n(745),Et=n(311),Nt=n(3245),Bt=n(3239),Ft=n(3088),Rt=n(3700),Vt=n(3075),Lt=["transferInfos","accountId","networkId","closeModal"];function Wt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Gt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wt(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function zt(e){var t,n,r=e.asset,o=e.total,a=Object(d.a)();return r?Object(b.jsxs)(x.a,{flexDirection:"row",alignItems:"center",children:[Object(b.jsx)(Vt.a,{asset:r,borderRadius:"6px",size:40}),Object(b.jsxs)(Ve.h.Body1Strong,{ml:3,numberOfLines:2,flex:1,children:[1===o&&(null!=(t=r.name)?t:r.contractName),o>1&&a.formatMessage({id:"content__str_and_others_int_nfts"},{firstNFT:null!=(n=r.name)?n:r.contractName,otherNFTs:o-1})]})]}):Object(b.jsx)(x.a,{size:"40px"})}var Ut=n(3777),Ht=n(773),qt=n.n(Ht),Kt=n(3384),Qt=n(3407),Jt=n(3559),Xt=n(1112),Yt=n(3705),$t=n(121),Zt=n(5198),en=function(e){var t=e.onIndexChange,n=e.options,r=Object(p.useState)(0),o=we()(r,2),a=o[0],c=o[1],i=Object($t.a)("background-default"),s=Object(p.useMemo)((function(){return n.map((function(e){return{key:e.label}}))}),[n]),l=Object(p.useMemo)((function(){var e={};return n.forEach((function(t){e[t.label]=t.view})),Object(Yt.a)(e)}),[n]);return Object(b.jsx)(Zt.a,{navigationState:{index:a,routes:s},renderScene:l,renderTabBar:function(){return Object(b.jsx)(Xt.a,{selectedIndex:a,onChange:c,values:n.map((function(e){return e.title}))})},onIndexChange:function(e){c(e),t&&t(e)},style:{backgroundColor:i}})};function tn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var nn=Object(p.memo)((function(){var e=Object(d.a)(),t=Object(a.a)(),n=Object(l.u)(),r=Object(l.x)(),i=Object(p.useMemo)((function(){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tn(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},r.params)}),[r.params]),u=i.accountId,j=i.networkId;st({accountId:u,networkId:j});var O=t?"16px":"24px",m=Object(p.useMemo)((function(){return Object(b.jsx)(s.a,{emoji:"\ud83d\udcb3",title:e.formatMessage({id:"empty__no_account_title"})})}),[e]),h=Object(p.useCallback)((function(){return u?Object(b.jsx)(Qt.a,{accountId:u,networkId:j,showRoundTop:!0,singleton:!0,hidePriceInfo:!0,ListHeaderComponent:Object(b.jsx)(x.a,{h:"24px"}),ListFooterComponent:Object(b.jsx)(x.a,{h:"24px"}),contentContainerStyle:{paddingHorizontal:0,marginTop:0},onTokenPress:function(e){var t=e.token;n.navigate(c.a.PreSendAddress,qt()({from:"",to:"",amount:""},i,{token:t.tokenIdOnNetwork,sendAddress:t.sendAddress,to:void 0,accountId:u,networkId:j})),Object(Kt.a)(t)}}):m}),[u,m,n,j,i]),y=Object(p.useCallback)((function(){return u?Object(b.jsx)(Jt.a,{networkId:j,accountId:u}):m}),[u,m,j]);return Object(b.jsx)(f.a,{accountId:u,networkId:j,hidePrimaryAction:!0,height:560,hideSecondaryAction:!1,header:e.formatMessage({id:"action__send"}),footer:null,staticChildrenProps:{flex:1,paddingX:O,paddingTop:O},children:Object(b.jsx)(en,{options:[{label:"token",title:"Tokens",view:h},{label:"nft",title:"NFTs",view:y}]})})})),rn=n(284);function on(e){return an.apply(this,arguments)}function an(){return(an=v()((function*(e){var t=e.client,n=e.walletUrl,r=ne.a.serviceWalletConnect;try{var o,a;if(null==t||t.offAllEvents(),yield r.removeWalletSession(n),null!=t&&null!=(o=t.connector)&&o.peerId)null==t||null==(a=t.connector)||a.killSession();null==t||t.disconnect()}catch(c){it.a.common.error("terminateWcConnection ERROR: ",c)}}))).apply(this,arguments)}var cn=n(152),sn=n(177),ln=n(3382),dn=n(3287),un=Object(p.memo)((function(e){var t,n=e.session,r=e.currentAccount,o=e.currentNetwork,a=e.accountInfo,c=e.client,i=e.setTitleInfo,s=e.injectedConnectorInfo,l=Object(d.a)(),u=Object(sn.a)(),f=null==a?void 0:a.walletName,j=(null==a||a.type,null==n?void 0:n.connected),O=Object(p.useMemo)((function(){return{connected:s?s.isConnected:j}}),[s,j]).connected;Object(p.useEffect)((function(){i({title:l.formatMessage({id:"action__connect_str"},{0:f}),subTitle:o.name})}),[o.name,l,i,f]);var h=Object(p.useState)(!1),y=we()(h,2),g=y[0],w=y[1];Object(p.useEffect)((function(){if(O&&!s){var e=setTimeout((function(){return w(!0)}),cn.m);return function(){clearTimeout(e),w(!1)}}}),[s,O]);var I=Object(p.useMemo)((function(){var e,t,n="icon-default";return null!=c&&null!=(e=c.connector)&&e.isTransportOpen&&(n="icon-warning"),null!=c&&null!=(t=c.connector)&&t.isTransportOpen&&O&&(n="interactive-default"),s&&O&&(n="interactive-default"),Object(b.jsx)(x.a,{position:"absolute",top:"-4px",right:"10px",w:3,h:3,bgColor:n,borderWidth:2,borderColor:"surface-default",borderRadius:"full"})}),[null==c||null==(t=c.connector)?void 0:t.isTransportOpen,O,s]);return Object(b.jsxs)(z.a,{flex:1,children:[Object(b.jsxs)(me.a,{alignItems:"center",children:[Object(b.jsx)(xe.b,{}),Object(b.jsxs)(m.a,{typography:"PageHeading",ml:3,children:[l.formatMessage({id:"content__connecting"}),"..."]})]}),Object(b.jsxs)(me.a,{mt:6,mb:8,alignItems:"center",children:[Object(b.jsxs)(x.a,{children:[Object(b.jsx)(dn.a,{size:10,accountId:r.id,radius:"12px",mr:3}),I]}),Object(b.jsx)(m.a,{typography:"Heading",children:f})]}),Object(b.jsx)(ln.a,{details:[{title:l.formatMessage({id:"form__account"}),content:Object(rn.c)(r.address)},{title:l.formatMessage({id:"network__network"}),content:o.name}]}),g?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(m.a,{typography:"Body2",mt:8,children:l.formatMessage({id:"content__disconnect_and_try_again"},{0:f})}),Object(b.jsx)(Ot.a,{alignSelf:"flex-start",mt:4,size:"lg",onPress:v()((function*(){yield on({client:c,walletUrl:null==a?void 0:a.walletUrl}),u.canGoBack()&&u.goBack()})),children:l.formatMessage({id:"action__disconnect"})})]}):null]})}));un.displayName="AuthExternalAccountInfo";var fn=n(253),bn=n.n(fn),jn=n(107),pn=n.n(jn),On=n(225),mn=n(394),xn=n(3780),hn=n(285),yn=n(268),vn=n(165),gn=n(4252),wn=n.n(gn),In=n(3237),Pn=n(3290);function kn(e){var t=Object(d.a)(),n=e.onClose,r=e.onCancel,o=e.onSubmit,a=e.peerAddress,c=e.myAddress,i=e.peerChainId,s=e.accountInfo,l=e.currentAccount,u=e.currentNetwork,f=e.isAddressMismatched,j=e.isChainMismatched,O=e.connectToWalletResult,y=ne.a.engine,g=Object(Pn.a)().addExternalAccount,w=Object(A.p)().openRootHome,I=Object(In.a)(v()((function*(){try{var e=Object(vn.c)({impl:S.C,chainId:i});return yield y.getNetwork(e)}catch(t){return void it.a.common.error(t)}})),[i]).result,P=Object(p.useMemo)((function(){return f&&j?"content__account_and_network_not_matched":f?"content__account_is_not_matched":j?"content__chain_is_not_matched":void 0}),[f,j]);return Object(b.jsx)(hn.a,{visible:!0,onClose:function(){null==n||n()},contentProps:{contentElement:Object(b.jsxs)(z.a,{space:6,alignSelf:"stretch",children:[Object(b.jsx)(h.a,{title:t.formatMessage({id:P}),alertType:"info",dismiss:!1}),Object(b.jsxs)(z.a,{children:[Object(b.jsxs)(me.a,{children:[Object(b.jsx)(yn.a,{source:wn.a,borderRadius:"6px",size:6}),Object(b.jsx)(m.a,{typography:"Body1Strong",ml:3,children:"OneKey"})]}),Object(b.jsxs)(me.a,{justifyContent:"space-between",py:3,children:[Object(b.jsx)(m.a,{typography:"Body2Strong",color:"text-subdued",children:t.formatMessage({id:"form__account"})}),Object(b.jsx)(m.a,{typography:"Body2",children:Object(rn.c)(c)})]}),Object(b.jsxs)(me.a,{justifyContent:"space-between",py:3,children:[Object(b.jsx)(m.a,{typography:"Body2Strong",color:"text-subdued",children:t.formatMessage({id:"network__network"})}),Object(b.jsx)(m.a,{typography:"Body2",children:u.shortName})]})]}),Object(b.jsxs)(z.a,{children:[Object(b.jsxs)(me.a,{children:[Object(b.jsx)(dn.a,{accountId:l.id,size:6,radius:"6px"}),Object(b.jsx)(m.a,{typography:"Body1Strong",ml:3,children:(null==s?void 0:s.walletName)||"3rd Wallet"})]}),Object(b.jsxs)(me.a,{justifyContent:"space-between",py:3,children:[Object(b.jsx)(m.a,{typography:"Body2Strong",color:"text-subdued",children:t.formatMessage({id:"form__account"})}),Object(b.jsxs)(x.a,{children:[Object(b.jsx)(m.a,{typography:"Body2",color:f?"text-critical":"text-default",children:Object(rn.c)(a)}),T.a.isWeb&&"injectedProvider"===(null==s?void 0:s.type)?Object(b.jsx)(Ce.a,{onPress:v()((function*(){null==n||n(),O&&(yield g(O),w(),yield Object(wt.g)(600),nt.a.show({title:t.formatMessage({id:"msg__connect_and_switch"})}))})),children:Object(b.jsxs)(me.a,{justifyContent:"flex-end",children:[Object(b.jsx)(m.a,{color:"text-subdued",children:t.formatMessage({id:"action__connect"})}),Object(b.jsx)(ve.a,{name:"ChevronRightMini",color:"icon-subdued",size:20})]})}):null]})]}),Object(b.jsxs)(me.a,{justifyContent:"space-between",py:3,children:[Object(b.jsx)(m.a,{typography:"Body2Strong",color:"text-subdued",children:t.formatMessage({id:"network__network"})}),Object(b.jsx)(m.a,{typography:"Body2",color:j?"text-critical":"text-default",children:(null==I?void 0:I.shortName)||(i?"chainId="+i:"")})]})]})]})},footerButtonProps:{primaryActionProps:{type:"primary"},primaryActionTranslationId:"action__continue",onPrimaryActionPress:function(){o(),null==n||n()},onSecondaryActionPress:function(){r(),null==n||n()}}})}var _n=["client","walletUrl","shouldTerminateConnection","shouldGoBack"];function Sn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Cn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Sn(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Tn(e){var t,n=e.encodedTx,r=e.unsignedMessage,o=e.sourceInfo,a=e.networkId,c=e.accountId,i=e.signOnly,s=Object(d.a)(),l=ne.a.validator,u=function(e){var t=e.accountId,n=e.networkId,r=ne.a.engine,o=ne.a.serviceWalletConnect,a=Object(re.a)().connectToWallet,c=Object(p.useRef)(!1);Object(p.useEffect)((function(){return function(){c.current=!0}}),[]);var i=Object(p.useState)(),s=we()(i,2),l=s[0],d=s[1],u=Object(sn.a)(),f=Object(p.useCallback)((function(e){var t=e.client,n=e.walletUrl,r=e.shouldTerminateConnection,o=e.shouldGoBack,a=P()(e,_n);return new Promise((function(e){mn.a.show({render:Object(b.jsx)(kn,Cn(Cn({},a),{},{onSubmit:function(){e(!0)},onCancel:v()((function*(){r&&(yield on({client:t,walletUrl:n})),o&&u.canGoBack()&&u.goBack(),e(!1)}))}))})}))}),[u]),j=Object(p.useCallback)(v()((function*(){var e=yield o.getWalletConnectSessionOfAccount({accountId:t}),a=e.session,c=e.walletService,i=e.accountInfo,s=yield r.getNetwork(n),l={accountInfo:i,walletService:c,session:a,currentAccount:yield r.getAccount(t,n),currentNetwork:s,client:void 0,injectedConnectorInfo:void 0};return d(l),l})),[t,r,n,o]);return{externalAccountInfo:l,getExternalConnector:Object(p.useCallback)(v()((function*(){var e,n,r,o,i,s=yield j(),l=s.session,u=s.walletService,b=s.accountInfo,p=s.currentAccount,O=s.currentNetwork,m="injectedProvider"===(null==b?void 0:b.type),x="walletConnect"===(null==b?void 0:b.type),h={accountInfo:b,wcConnector:void 0,client:void 0,injectedConnectorInfo:void 0},y=NaN,v=[],g={walletService:u};if(x){var w;if((null==l||!l.connected)&&(yield Object(wt.g)(cn.o),c.current))return h;var I=yield a({session:l,walletService:u,accountId:t}),P=I.status,k=I.session,_=I.client;if(o=_,d((function(e){return e?Cn(Cn({},e),{},{session:k,client:o}):e})),!(r=null==(w=o)?void 0:w.connector))throw new Error("WalletConnect Error: connector not initialized.");y=r.chainId,v=r.accounts,g.client=_,g.session=k,g.status=P}if(m){var S,C,T,A=(i=Object(xn.a)({name:null==b?void 0:b.walletName})).store;yield null==(S=i.connector)||null==S.connectEagerly?void 0:S.connectEagerly();var M=A.getState();null!=(C=M)&&null!=(T=C.accounts)&&T.length||(yield i.connector.activate(),M=A.getState()),y=M.chainId,v=M.accounts,g.injectedProviderState=M,g.externalAccountInfo=b,d((function(e){return e?Cn(Cn({},e),{},{injectedConnectorInfo:i}):e}))}var D=""+(null!=(e=y)?e:""),E=((null==(n=v)?void 0:n[0])||"").toLowerCase(),N=p.address,B=O.extraInfo.networkVersion,F=E!==N,R=D!==B;if(F||R){if(yield Object(wt.g)(x?cn.n:600),c.current)return h;if(!(yield f({myAddress:N,myChainId:B,peerAddress:E,peerChainId:D,client:o,accountInfo:b,currentAccount:p,currentNetwork:O,isAddressMismatched:F,isChainMismatched:R,walletUrl:null==b?void 0:b.walletUrl,shouldGoBack:!0,connectToWalletResult:g})))return h}return c.current?h:{injectedConnectorInfo:i,wcConnector:r,client:o,accountInfo:b}})),[t,a,j,f])}}({accountId:c,networkId:a}),f=u.getExternalConnector;return{externalAccountInfo:u.externalAccountInfo,sendTxForExternalAccount:Object(p.useCallback)(v()((function*(){if(!n)throw new Error("encodedTx is missing!");var e="",t=yield f(),r=t.wcConnector,o=t.injectedConnectorInfo,a=t.accountInfo;if("walletConnect"===(null==a?void 0:a.type)){if(!r)return;e=i?yield r.signTransaction(n):yield r.sendTransaction(n)}if("injectedProvider"===(null==a?void 0:a.type)){var c,d=null==o?void 0:o.connector;if(!d)return;e=yield null==d||null==(c=d.provider)?void 0:c.request({method:i?"eth_signTransaction":"eth_sendTransaction",params:[n]})}if(it.a.walletConnect.info("sendTxForExternalAccount -> sendTransaction txid: ",e),e&&(yield l.isValidEvmTxid({txid:e})))return{txid:e,rawTx:"",encodedTx:n};var u=e&&pn()(e)?e:s.formatMessage({id:"msg__transaction_failed"});throw new Error(u)})),[n,l,s,f,i]),signMsgForExternalAccount:Object(p.useCallback)(v()((function*(){if(!r)throw new Error("unsignedMessage is missing!");var e=r.payload,t=r.type,n="",a=yield f(),c=a.wcConnector,i=a.injectedConnectorInfo,s=a.accountInfo;if("walletConnect"===(null==s?void 0:s.type)){if(!c)return;if(t===On.b.PERSONAL_SIGN)n=yield c.signPersonalMessage(e);else if(t===On.b.ETH_SIGN)n=yield c.signMessage(e);else{var l=bn()(e);if(t===On.b.TYPED_DATA_V3||t===On.b.TYPED_DATA_V4)null==l||l[1];n=yield c.signTypedData(l)}}if("injectedProvider"===(null==s?void 0:s.type)){var d,u,b=null==i?void 0:i.connector;if(!b)return;var j=Object(On.c)(t);j=j||(null==o||null==(d=o.data)?void 0:d.method)||"",n=yield null==(u=b.provider)?void 0:u.request({method:j,params:e})}return n})),[r,f,null==o||null==(t=o.data)?void 0:t.method])}}function An(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Mn=function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?An(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):An(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e)};function Dn(e){var t=e.accountId,n=e.networkId,r=e.encodedTx,o=e.feeInfoPayload,a=(Object(sn.a)(),Object(A.e)({accountId:t,networkId:n}).networkImpl),c=ne.a.engine,i=Object(l.x)(),s=ht({sourceInfo:i.params.sourceInfo}),d=Object(p.useCallback)(v()((function*(){var e,o,l=Mn({networkId:n,accountId:t});try{if(a===S.C){yield l.parseToNativeTx("0xf86b018502540be40082520894a9b4d559a98ff47c83b74522b7986146538cd4df861b48eb57e0008081e5a06f021ecfb345b8122561c751acdc8c0516632442065c2dc6867c2b19054539dca022f230825979a211d70d4488888d6a3ed9d9c12667e15a6d90df6e5a7a48b440")}yield l.parseToNativeTx(r)}catch(u){}var d=yield c.decodeTx({accountId:t,networkId:n,encodedTx:r,payload:(null==(e=i.params)?void 0:e.payloadInfo)||(null==(o=i.params)?void 0:o.payload),interactInfo:s});d.decodedTx,d.decodedTxLegacy})),[o,n,t,c,r,i.params,s,a]);return T.a.isDev&&r?Object(b.jsx)(Ot.a,{mt:4,mb:4,onPress:d,children:"DecodeTxButtonTest"}):null}function En(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Nn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?En(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):En(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Bn=Object(p.memo)((function(e){var t=e.password,n=e.setTitleInfo,r=Object(l.u)(),o=Object(d.a)(),a=Object(l.x)(),c=Object(p.useRef)(!1),s=Object(p.useRef)(!0),u=a.params,f=u.networkId,j=u.accountId,O=u.encodedTx,m=u.onSuccess,x=u.onFail,h=u.unsignedMessage,y=u.payloadInfo,g=u.backRouteName,w=u.sourceInfo,I=u.signOnly,P=void 0!==I&&I,k=y||a.params.payload,_=yt({accountId:j,networkId:f,encodedTx:O,payload:k}).decodedTx,S=ht({sourceInfo:w}),T=Object(p.useMemo)((function(){return Object(C.d)({accountId:j})}),[j]),A=Tn({encodedTx:O,unsignedMessage:h,sourceInfo:w,networkId:f,accountId:j,signOnly:P}),M=A.externalAccountInfo,D=A.sendTxForExternalAccount,E=A.signMsgForExternalAccount,N=Object(p.useCallback)(v()((function*(){if(T)return D();it.a.sendTx.info("Authentication sendTx:",a.params);var e=yield ne.a.engine.signAndSendEncodedTx({password:t,networkId:f,accountId:j,encodedTx:O,signOnly:P});return it.a.sendTx.info("Authentication sendTx DONE:",a.params,e),e})),[T,a.params,t,f,j,O,D,P]),B=Object(p.useCallback)(v()((function*(){return T?E():yield ne.a.engine.signMessage({password:t,networkId:f,accountId:j,unsignedMessage:h})})),[j,T,f,t,E,h]),F=Object(p.useCallback)(v()((function*(){try{if(c.current)return;c.current=!0;var e,t,n,a=O;if(a){if(e=t=yield N(),!t)return;a=t.encodedTx||a}if(h&&(e=n=yield B(),!n))return;if(e){var i,l,d,u,b=k;"InternalSwap"===(null==(i=b)?void 0:i.type)&&null!=(l=b)&&l.swapInfo&&null!=(d=b)&&null!=(u=d.swapInfo)&&u.isApprove&&(b=void 0),null==m||m(e,{signedTx:t,encodedTx:a,decodedTx:a?(yield ne.a.engine.decodeTx({networkId:f,accountId:j,encodedTx:a,payload:b,interactInfo:S})).decodedTx:void 0}),null!=r&&null!=r.canGoBack&&r.canGoBack()}}catch(_){var p,y=_;if(it.a.common.error(y),g)r.navigate({merge:!0,name:g,params:{}});else{var v;if(!s.current)return;null==(v=r.getParent())||null==v.goBack||v.goBack()}if(yield Object(wt.g)(600),-32603===(null==y?void 0:y.code)&&"string"===typeof(null==y||null==(p=y.data)?void 0:p.message))nt.a.show({title:y.data.message||o.formatMessage({id:"transaction__failed"}),description:y.data.message},{type:"error"});else{var w,I,P=null!=y&&y.key?o.formatMessage({id:null==y?void 0:y.key},null!=(w=null==y?void 0:y.info)?w:{}):null!=(I=null==y?void 0:y.message)?I:"";y.className!==Pe.n.OneKeyWalletConnectModalCloseError&&(gt.a.showErrorToast(y)||nt.a.show({title:P||o.formatMessage({id:"transaction__failed"}),description:P},{type:"error"}))}yield Object(wt.g)(100),null==x||x(y)}})),[j,g,O,S,o,r,f,m,x,k,N,B,h]);return Object(p.useEffect)((function(){return function(){s.current=!1}}),[s]),Object(p.useEffect)((function(){(_||h)&&F()}),[_,h,F]),M?Object(b.jsx)(un,Nn(Nn({},M),{},{setTitleInfo:n})):Object(b.jsx)(i.a,{h:"full",w:"full",children:Object(b.jsx)(xe.b,{testID:"SendAuth-Default-Spinner",size:"lg"})})})),Fn=n(57),Rn=n(3412),Vn=["children","encodedTx","decodedTx","confirmDisabled","feeInfoPayload","feeInfoLoading","handleConfirm","updateEncodedTxBeforeConfirm","autoConfirm","sourceInfo"];function Ln(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Wn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ln(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ln(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Gn(e){var t,n,r=Object(d.a)(),o=Object(A.e)(e),a=o.network,c=o.networkImpl,i=o.networkId,s=o.accountId,l=o.accountAddress,u=e.children,j=e.encodedTx,O=e.decodedTx,x=e.confirmDisabled,h=e.feeInfoPayload,y=e.feeInfoLoading,g=e.handleConfirm,I=e.updateEncodedTxBeforeConfirm,k=e.autoConfirm,D=(e.sourceInfo,P()(e,Vn)),E=Object(A.n)(null==a?void 0:a.id),N=Object(Ct.a)(),B=Object(M.l)({networkId:i,accountId:s,token:E,fallback:"0"}),F=null!=(t=null==h||null==(n=h.current)?void 0:n.totalNative)?t:"0",R=Object(p.useRef)(!1),V=Object(p.useMemo)((function(){return new _.a(B).lt(new _.a(F))}),[F,B]),L=Object(p.useMemo)((function(){return Object(C.h)({accountId:s})}),[s]),W=Object(p.useMemo)((function(){if(!j)return!1;if(c===S.C){var e=j;if(e&&l&&w()(e.from)!==w()(l))return!0}return!1}),[l,j,c]),z=Object(p.useCallback)(function(){var e=v()((function*(e){var t=e.close,n=e.onClose,r=j;r&&(I&&(r=yield I(r)),g({close:t,onClose:n,encodedTx:r}))}));return function(t){return e.apply(this,arguments)}}(),[j,g,I]);return Object(p.useEffect)((function(){!k||y||R.current||(R.current=!0,setTimeout((function(){z({close:N})}),600))}),[y,k,z,N]),Object(b.jsx)(f.a,Wn(Wn({height:"598px",primaryActionTranslationId:"action__confirm",primaryActionProps:{isDisabled:L||V||W||y||!h||!j||!O||x},secondaryActionTranslationId:"action__cancel",header:r.formatMessage({id:"transaction__transaction_confirm"}),onSecondaryActionPress:function(e){return(0,e.close)()},onPrimaryActionPress:z},D),{},{scrollViewProps:{children:Object(b.jsxs)(b.Fragment,{children:[!k&&Object(b.jsx)(H,{nativeToken:E,isWatchingAccount:L,balanceInsufficient:V,isAccountNotMatched:W}),Object(b.jsxs)(G,{children:[u,Object(b.jsx)(Dn,{accountId:s,networkId:i,encodedTx:j,feeInfoPayload:h})]}),T.a.isDev?Object(b.jsxs)(m.a,{children:[B," ",null==E?void 0:E.symbol]}):null]})}}))}var zn=n(3293);n(547);function Un(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Hn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Un(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Un(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function qn(e){var t=e.children,n=e.canPress,r=e.onPress;return n?Object(b.jsx)(Ie.a,{onPress:r,activeOpacity:.9,children:t}):Object(b.jsx)(b.Fragment,{children:t})}function Kn(e){var t,n=e.networkId,r=e.accountId,o=e.encodedTx,a=e.feeInfoPayload,i=e.loading,s=e.renderChildren,d=e.editable,u=e.autoNavigateToEdit,f=e.sendConfirmParams,j=Object(l.u)(),O=Object(l.x)(),m=i||!d||!o||f.signOnly||(null==a||null==(t=a.info)?void 0:t.disableEditFee),x=Object(p.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.replace,i=void 0!==t&&t;m||(i?j.replace(c.a.SendEditFee,{networkId:n,accountId:r,encodedTx:o,feeInfoSelected:null==a?void 0:a.selected,autoConfirmAfterFeeSaved:u,resendActionInfo:O.params.resendActionInfo,sendConfirmParams:f}):j.navigate({name:c.a.SendEditFee,params:{networkId:n,accountId:r,encodedTx:o,feeInfoSelected:null==a?void 0:a.selected,autoConfirmAfterFeeSaved:u,sendConfirmParams:f}}))}),[m,j,n,r,o,null==a?void 0:a.selected,u,O.params.resendActionInfo,f]);return Object(p.useEffect)((function(){u&&x({replace:!0})}),[u,x]),m?s({isHovered:!0}):Object(b.jsx)(Ce.a,{onPress:function(){return x({replace:zn.a})},children:s})}var Qn=Object(p.memo)((function(e){var t=Ke({networkId:e.networkId})&&e.editable;return Object(b.jsx)(Kn,Hn(Hn({},e),{},{editable:t}))}));function Jn(e){var t,n,r=e.encodedTx,o=e.feeInfoPayload,a=e.loading,c=e.editable,i=e.sendConfirmParams,s=e.networkId,l=e.accountId,u=e.feeInfoError,f=Object(d.a)(),j="preset"===(null==o||null==(t=o.selected)?void 0:t.type),O=Ke({networkId:s}),h=Object(p.useState)(!1),y=we()(h,2),v=y[0],g=y[1],w=(null==o||null==(n=o.current)?void 0:n.totalNative)||"";r.totalFeeInNative&&(w=r.totalFeeInNative);var I=Object(p.useMemo)((function(){var e;return!r||i.signOnly||null!=o&&null!=(e=o.info)&&e.disableEditFee?null:a?Object(b.jsx)(xe.b,{size:"sm"}):o&&c&&O?Object(b.jsx)(ve.a,{size:20,name:"PencilMini"}):null}),[c,r,o,a,O,i.signOnly]),P=Object(p.useMemo)((function(){var e;if(!r||!o)return null;var t=w||"0";return Object(b.jsxs)(x.a,{flexDirection:"row",alignItems:"center",children:[Object(b.jsx)(m.a,{typography:{sm:"Body1Strong",md:"Body2Strong"},children:t+" "+((null==o||null==(e=o.info)?void 0:e.nativeSymbol)||"")}),Object(b.jsx)(x.a,{w:2}),I]})}),[r,o,I,w]),k=Object(p.useMemo)((function(){if(!r||!o)return null;var e,t=w||"0";return j?Object(b.jsxs)(m.a,{color:"text-subdued",children:[Object(b.jsx)(Ue,{index:null==o||null==(e=o.selected)?void 0:e.preset})," ",Object(b.jsx)(ke.e,{networkId:s,accountId:l,value:t,render:function(e){return Object(b.jsxs)(b.Fragment,{children:["(~ ",e,")"]})}})]}):Object(b.jsx)(m.a,{color:"text-subdued",children:Object(b.jsx)(ke.e,{networkId:s,accountId:l,value:t,render:function(e){return Object(b.jsx)(b.Fragment,{children:e})}})})}),[l,r,o,j,s,w]),_=(Object(p.useMemo)((function(){var e;if(!j||!r||!o)return null;var t,n,a,c="";"preset"===(null==o||null==(e=o.selected)?void 0:e.type)&&("0"===(null==o||null==(t=o.selected)?void 0:t.preset)&&(c=f.formatMessage({id:"content__maybe_in_30s"})),"1"===(null==o||null==(n=o.selected)?void 0:n.preset)&&(c=f.formatMessage({id:"content__likely_less_than_15s"})),"2"===(null==o||null==(a=o.selected)?void 0:a.preset)&&(c=f.formatMessage({id:"content__very_likely_less_than_15s"})));return Object(b.jsx)(m.a,{color:"text-subdued",flex:1,children:c})}),[r,o,f,j]),Object(p.useMemo)((function(){if(!u)return null;var e=null;return(e=u instanceof Pe.m&&"onekey_error"!==u.key?f.formatMessage({id:u.key}):u.message)&&e.length>350&&(e=e.slice(0,350)+"..."),!!e&&Object(b.jsx)(ye.a,{maxW:"360px",isOpen:v,hasArrow:!0,label:e,bg:"surface-neutral-default",_text:{color:"text-default",fontSize:"14px"},px:"16px",py:"8px",placement:"top",borderRadius:"12px",children:Object(b.jsx)(x.a,{children:Object(b.jsx)(ve.a,{name:"ExclamationTriangleOutline",size:20,color:"icon-warning"})})})}),[u,v,f])),S=Object(p.useCallback)((function(){var e=null;return e=P?Object(b.jsxs)(x.a,{flexDirection:"column",children:[P,k]}):Object(b.jsx)(qn,{canPress:!!_,onPress:function(){return g(!v)},children:Object(b.jsxs)(x.a,{flexDirection:"row",alignItems:"center",justifyContent:"flex-start",children:[Object(b.jsx)(m.a,{color:"text-subdued",flex:1,children:f.formatMessage({id:"content__calculate_fee"})}),Object(b.jsx)(x.a,{w:2}),_,a?Object(b.jsx)(xe.b,{size:"sm"}):null,Object(b.jsx)(x.a,{flex:1})]})}),Object(b.jsx)(x.a,{children:e})}),[_,v,f,a,k,P]);return Object(p.useEffect)((function(){return function(){return g(!1)}}),[]),Object(b.jsx)(Qn,{networkId:s,accountId:l,sendConfirmParams:i,editable:c,encodedTx:r,feeInfoPayload:o,loading:a,renderChildren:S})}function Xn(e){var t=e.encodedTx,n=e.feeInfoPayload,r=e.loading,o=e.editable,a=e.sendConfirmParams,c=e.networkId,i=e.accountId,s=Object(p.useCallback)((function(e){e.isHovered;return null}),[]);return Object(b.jsx)(Qn,{networkId:c,accountId:i,sendConfirmParams:a,editable:o,encodedTx:t,feeInfoPayload:n,loading:r,renderChildren:s,autoNavigateToEdit:!0})}Qn.displayName="FeeInfoInputContainer";function Yn(e){var t,n=e.encodedTx,r=e.useFeeInTx,o=void 0!==r&&r,a=e.pollingInterval,c=void 0===a?0:a,i=e.fetchAnyway,s=void 0!==i&&i,d=e.networkId,u=e.accountId,f=e.signOnly,b=e.forBatchSend,j=e.payload,O=Object(l.t)(),m=Object(A.e)({accountId:u,networkId:d}).network,x=Object(p.useState)(null),h=we()(x,2),y=h[0],g=h[1],w=Object(p.useState)(null),I=we()(w,2),P=I[0],k=I[1],_=Object(p.useRef)(null),S=Object(p.useState)(!0),C=we()(S,2),T=C[0],M=C[1],D=Object(l.x)(),E=function(e){var t=Object(A.h)((function(e){return e.data.feePresetIndexMap}));return null==t?void 0:t[e]}(d),N=Object(A.h)((function(e){return e.swapTransactions.swapFeePresetIndex}));j&&"InternalSwap"===(null==j?void 0:j.type)&&N&&(E=N);var B=null==(t=D.params)?void 0:t.feeInfoSelected,F=Object(p.useCallback)((function(e){var t=e.info,n=e.index,r=parseInt(n,10),o=r>t.prices.length-1?t.prices.length-1:r,a=t.prices[o];return{eip1559:t.eip1559,price:a,limit:t.limit}}),[]),R=Object(p.useCallback)(v()((function*(){var e,t;if(!n)return null;var r=B,a=null!=m?m:{},c={nativeDecimals:a.decimals,nativeSymbol:a.symbol,feeDecimals:a.feeDecimals,feeSymbol:a.feeSymbol,prices:[],defaultPresetIndex:null!=(e=E)?e:"1"},i=!r||"preset"===(null==(t=r)?void 0:t.type);if(s&&(i=!0),i)try{c=yield ne.a.engine.fetchFeeInfo({accountId:u,networkId:d,encodedTx:n,signOnly:f}),g(null)}catch(y){var l=y,j=l.code,p=l.data;return g(-32603===j&&p?p:y),it.a.sendTx.error("engine.fetchFeeInfo ERROR: ",y),null}E&&(c.defaultPresetIndex=E),parseFloat(c.defaultPresetIndex)>c.prices.length-1&&(c.defaultPresetIndex=""+(c.prices.length-1)),parseFloat(c.defaultPresetIndex)<0&&(c.defaultPresetIndex="0");var O={price:"0",limit:"0"};!r&&c&&o&&c.tx&&(r={type:"custom",custom:c.tx,preset:c.defaultPresetIndex}),r=r||{type:"preset",preset:c.defaultPresetIndex},b&&c&&"preset"===r.type&&r.preset&&(c.customDisabled=!0),"custom"===r.type&&r.custom&&(O=r.custom),c&&"preset"===r.type&&r.preset&&(O=F({info:c,index:r.preset}));var x=Object(ct.b)(O).max,h={selected:r,info:c,current:{value:O,total:x,totalNative:Object(ct.a)({amount:x,info:c})}};return it.a.sendTx.info("useFeeInfoPayload: ",h),h})),[n,B,m,E,s,o,b,u,d,f,F]);return Object(p.useEffect)((function(){v()((function*(){if(!n)return null;M(!0);try{var e=yield R();k(e)}catch(r){if(-32603===r.code){var t=r.data.message;"string"===typeof t&&nt.a.show({title:t})}k(null),g(r),it.a.sendTx.error("fetchFeeInfo ERROR: ",r)}finally{M(!1)}}))()}),[n,R,k]),Object(p.useEffect)((function(){var e;return c&&O&&(e=setInterval(v()((function*(){if(!T&&"custom"!==(null==B?void 0:B.type))try{var e=yield R();e?(k(e),_.current=e):_.current&&(k(_.current),g(null))}catch(t){_.current?(k(_.current),g(null)):g(t),it.a.sendTx.error("feeInfoPollingInterval ERROR: ",t)}})),c)),function(){clearInterval(e)}}),[null==B?void 0:B.type,R,T,c,O]),{feeInfoError:y,feeInfoPayload:P,feeInfoLoading:T,getSelectedFeeInfoUnit:F}}function $n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Zn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$n(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$n(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function er(e){return Object(b.jsx)(Gn,Zn(Zn({},e),{},{confirmDisabled:!0,children:Object(b.jsx)(i.a,{minH:"320px",w:"full",h:"full",flex:1,children:Object(b.jsx)(xe.b,{size:"lg"})})}))}function tr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function nr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tr(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function rr(e){var t=e.feeInfoPayload,n=e.feeInfoLoading,r=e.feeInfoEditable,o=e.feeInfoError,a=e.encodedTx,c=e.sendConfirmParams,s=e.networkId,u=e.accountId,f=Object(l.x)(),j=Object(d.a)(),O=f.params.autoConfirmAfterFeeSaved,m=!O&&(null==t?void 0:t.selected),x=Object(p.useMemo)((function(){if(!o)return null;var e=null;return(e=o instanceof Pe.m&&"onekey_error"!==o.key?j.formatMessage({id:o.key}):o.message)&&e.length>350&&(e=e.slice(0,350)+"..."),!!e&&Object(b.jsx)(h.a,{alertType:"error",title:e})}),[o,j]);return Object(b.jsxs)(Gn,nr(nr({},e),{},{autoConfirm:!!O,hidePrimaryAction:!0,hideSecondaryAction:!0,children:[x,Object(b.jsxs)(i.a,{w:"full",py:16,children:[!x&&Object(b.jsx)(xe.b,{size:"lg"}),m?Object(b.jsx)(Xn,{networkId:s,accountId:u,editable:r,encodedTx:a,feeInfoPayload:t,loading:n,sendConfirmParams:c}):null]})]}))}function or(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ar(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?or(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):or(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function cr(e){var t,n,r,o=e.payload,a=e.feeInfoPayload,c=e.feeInput,i=e.decodedTx,s=Object(A.e)(e),l=s.accountId,d=s.networkId,u=o,f=!(null!=u&&null!=(t=u.token)&&t.idOnNetwork),j=Object(M.l)({networkId:d,accountId:l,token:{tokenIdOnNetwork:null==u||null==(n=u.token)?void 0:n.idOnNetwork,sendAddress:null==u||null==(r=u.token)?void 0:r.sendAddress}}),O=Object(p.useMemo)((function(){if(!u)return!1;if(f){var e,t,n,r=new _.a(null!=(e=u.value)?e:0),o=new _.a(j),c=new _.a(null!=(t=null==a||null==(n=a.current)?void 0:n.totalNative)?t:0);if(r.plus(c).gte(o))return!0}return!1}),[a,j,f,u]),m=Object(p.useMemo)((function(){var e;if(!u)return"0";if(O){var t,n,r,o=i.actions[0],c=o.type,s=o.nativeTransfer;if("NATIVE_TRANSFER"===c&&"undefined"!==typeof s&&"undefined"!==typeof s.utxoFrom)return s.amount;var l=new _.a(j),d=new _.a(null!=(t=u.value)?t:0),f=_.a.min(l,d),b=new _.a(null!=(n=null==a||null==(r=a.current)?void 0:r.totalNative)?n:0);return f.minus(b).toFixed()}return null!=(e=u.value)?e:"0"}),[i,a,j,O,u]),x=Object(p.useMemo)((function(){return new _.a(m).lt(0)}),[m]),h=Object(p.useMemo)((function(){return x&&u?u.value:m}),[x,m,u]);return Object(b.jsx)(Gn,ar(ar({},e),{},{confirmDisabled:x,updateEncodedTxBeforeConfirm:function(){var e=v()((function*(e){if(u&&O){var t={amount:h},n=yield ne.a.engine.updateEncodedTx({networkId:d,accountId:l,encodedTx:e,payload:t,options:{type:Fn.d.transfer}});return Promise.resolve(n)}return Promise.resolve(e)}));return function(t){return e.apply(this,arguments)}}(),children:Object(b.jsx)(Rn.a,{isSendConfirm:!0,decodedTx:i,feeInput:c,transferAmount:h})}))}function ir(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function sr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ir(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ir(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function lr(e){var t=e.sendConfirmParamsParsed;Object(ce.c)();var n=ne.a.engine,r=ne.a.serviceHistory,o=ne.a.serviceToken,a=t.navigation,i=t.routeParams,s=t.feeInfoEditable,l=t.feeInfoUseFeeInTx,d=t.sourceInfo,u=t.payload,f=t.payloadInfo,j=t.resendActionInfo,O=t.isSpeedUpOrCancel,m=t.isFromDapp,x=t.dappApprove,h=t.onModalClose,y=t.networkId,g=t.accountId;st({networkId:y,accountId:g});var w=Object(A.e)({accountId:g,networkId:y}),I=w.walletId,P=w.networkImpl,k=w.account,_=w.wallet;ae({condition:!!i.autoConfirmAfterFeeSaved});var C=function(e){var t=e.sendConfirmParams,n=e.networkImpl,r=e.address,o=Object(p.useState)(null),a=we()(o,2),c=a[0],i=a[1];return Object(p.useEffect)((function(){et({encodedTx:t.encodedTx,sendConfirmParams:t,networkImpl:n,address:r}).then(i)}),[r,n,t,t.encodedTx]),{encodedTx:c}}({sendConfirmParams:i,networkImpl:P,address:(null==k?void 0:k.address)||""}).encodedTx,T=yt({accountId:g,networkId:y,encodedTx:C,payload:f||u,sourceInfo:d}).decodedTx,M=Object(p.useMemo)((function(){var e;if(m||!u)return!1;if(T&&1===(null==T||null==(e=T.actions)?void 0:e.length)&&T.actions[0].type===Fn.a.NATIVE_TRANSFER)return!0;return!1}),[T,m,u]),D=Yn({accountId:g,networkId:y,encodedTx:C,useFeeInTx:l,pollingInterval:s?5e3:0,signOnly:i.signOnly,payload:f||u}),E=D.feeInfoError,N=D.feeInfoPayload,B=D.feeInfoLoading;oe({accountId:g,networkId:y});var F=Object(p.useCallback)(function(){var e=v()((function*(e){var t=e.close,l=e.encodedTx;if(l){var d,u=l;s&&N&&(d=null==N?void 0:N.current.value,u=yield n.attachFeeInfoToEncodedTx({networkId:y,accountId:g,encodedTx:l,feeInfoValue:d}));var b=function(){var e=v()((function*(e,n){if(o.fetchAccountTokens({activeAccountId:g,activeNetworkId:y}),i.signOnly?P===S.A?yield x.resolve({result:e}):yield x.resolve({result:e.rawTx}):(yield x.resolve({result:e.txid}),yield r.saveSendConfirmHistory({networkId:y,accountId:g,data:n,resendActionInfo:j,feeInfo:d})),null!=f&&f.swapInfo&&null!=f&&f.swapInfo.isApprove&&"hw"===(null==_?void 0:_.type)){var s={networkId:y,accountId:g,closeModal:t};a.navigate(c.a.HardwareSwapContinue,s)}else{var l,u=i.signOnly?"Sign":"Send",b={networkId:y,accountId:g,txid:null!=(l=e.txid)?l:"unknown_txid",type:u,closeModal:t,onDetail:i.onDetail,isSingleTransformMode:!0};a.navigate(c.a.SendFeedbackReceipt,b)}i.onSuccess&&i.onSuccess(e,n),r.refreshHistoryUi(),setTimeout((function(){}),0)}));return function(t,n){return e.apply(this,arguments)}}(),p=sr(sr({},i),{},{encodedTx:u,accountId:g,networkId:y,walletId:I,onSuccess:b,onFail:function(e){x.reject({error:e})},onModalClose:h});delete p._disabledAnimationOfNavigate;var O="navigate";return i.autoConfirmAfterFeeSaved&&(yield Object(wt.g)(600),O="replace"),a[O](c.a.SendAuthentication,p)}}));return function(t){return e.apply(this,arguments)}}(),[s,N,i,g,I,y,h,a,n,x,o,null==f?void 0:f.swapInfo,null==_?void 0:_.type,r,j,P]),R=Object(b.jsx)(Jn,{accountId:g,networkId:y,sendConfirmParams:i,editable:s,encodedTx:C,feeInfoPayload:N,loading:B,feeInfoError:E}),V={accountId:g,networkId:y,sendConfirmParams:i,sourceInfo:d,encodedTx:C,decodedTx:T,payload:u,feeInfoPayload:N,feeInfoLoading:B,feeInfoError:E,feeInfoEditable:s,feeInput:R,handleConfirm:F,onSecondaryActionPress:function(e){var t=e.close;x.reject(),t()},onModalClose:h,children:null};return T&&C?(V.children=Object(b.jsx)(Rn.a,{sendConfirmParamsParsed:t,isSendConfirm:!0,decodedTx:T,feeInput:R}),O?Object(b.jsx)(rr,sr({},V)):M?Object(b.jsx)(cr,sr({},V)):Object(b.jsx)(Gn,sr({},V))):Object(b.jsx)(er,sr({},V))}var dr=function(){var e=function(){var e,t,n,r,o,a,c=Object(l.u)(),i=Object(l.x)(),s=Object(p.useRef)({}),d=null!=(e=i.params)?e:s.current,f=d.sourceInfo,b=d.resendActionInfo,j=d.encodedTx,O=d.onModalClose,m=d.networkId,x=d.accountId,h=!!d.sourceInfo,y=null==(t=d.feeInfoEditable)||t,v=null!=(n=d.feeInfoUseFeeInTx)&&n,g="cancel"===(null==(r=d.resendActionInfo)?void 0:r.type)||"speedUp"===(null==(o=d.resendActionInfo)?void 0:o.type),w=Object(p.useMemo)((function(){return d.payload}),[d.payload]),I=Object(u.a)({id:null!=(a=null==f?void 0:f.id)?a:"",closeOnError:!0}),P=Object(p.useRef)(O),k=Object(p.useRef)(!1),_=Object(p.useCallback)((function(){k.current||(I.reject(),P.current&&P.current(),k.current=!0)}),[I]);Object.assign(d,{onModalClose:_});var S="InternalSwap"===(null==w?void 0:w.payloadType);return{networkId:m,accountId:x,dappApprove:I,onModalClose:_,encodedTx:j,navigation:c,route:i,routeParams:d,sourceInfo:f,isFromDapp:h,feeInfoEditable:y,feeInfoUseFeeInTx:v,isSpeedUpOrCancel:g,payload:w,payloadInfo:d.payloadInfo,resendActionInfo:b,isInternalSwapTx:S,isTransferTypeTx:!1}}(),t=e.sourceInfo,n=e.routeParams;return Object(p.useMemo)((function(){return!!t&&!O.b.includes(t.scope)}),[t])?Object(b.jsx)(Gn,{accountId:n.accountId,networkId:n.networkId,sendConfirmParams:n,feeInfoPayload:null,feeInfoLoading:!1,encodedTx:null,handleConfirm:function(){return null},children:Object(b.jsx)(H,{isNetworkNotMatched:!0})}):Object(b.jsx)(lr,{sendConfirmParamsParsed:e})},ur=n(229),fr=n(42),br=n(3187);var jr=n(3266),pr=n.n(jr),Or=n(298),mr=n.n(Or),xr=n(4253),hr=n.n(xr);function yr(e){var t=e.message;return t?Object(b.jsx)(Ve.h.Caption,{color:"text-warning",children:t}):null}function vr(e){var t,n,r,o,c,i,s=e.feeInfoPayload,l=e.useFormReturn,u=e.autoConfirmAfterFeeSaved,f=e.networkId,j=l.control,O=l.getValues,m=Object(d.a)(),x=Object(p.useState)({max:"0",min:"0"}),h=we()(x,2),y=h[0],g=h[1],w=null==s?void 0:s.selected,I=(null==s||null==(t=s.info)?void 0:t.feeSymbol)||"",P=null==s||null==(n=s.info)?void 0:n.eip1559,k=pr()(null!=(r=null==s||null==(o=s.info)?void 0:o.prices)?r:[]),S=hr()(null!=(c=null==s||null==(i=s.info)?void 0:i.prices)?c:[]),C=Object(a.a)(),T=Object(p.useState)(void 0),A=we()(T,2),M=A[0],D=A[1],E=Object(p.useState)(void 0),N=we()(E,2),B=N[0],F=N[1],R=Object(p.useState)(void 0),V=we()(R,2),L=V[0],W=V[1],G=Object(p.useState)(void 0),z=we()(G,2),U=z[0],H=z[1],q=Object(p.useCallback)((function(){var e;e=P?Object(ct.b)({eip1559:!0,limit:O("gasLimit"),price:{baseFee:O("baseFee"),maxFeePerGas:O("maxFeePerGas"),maxPriorityFeePerGas:O("maxPriorityFeePerGas")}}):Object(ct.b)({limit:O("gasLimit"),price:O("gasPrice")}),g(e)}),[O,P]);return Object(Ft.a)({useFormReturn:l,revalidate:!0,onChange:q}),Object(p.useEffect)((function(){q()}),[q]),Object(b.jsxs)(Mt.a,{mt:8,children:[P&&Object(b.jsx)(Mt.a.Item,{label:m.formatMessage({id:"content__base_fee"})+" ("+I+")",control:j,name:"baseFee",defaultValue:"",formControlProps:{isReadOnly:!0},children:Object(b.jsx)(Mt.a.Input,{w:"100%",rightText:"",bgColor:"surface-neutral-subdued",size:C?"xl":void 0,isReadOnly:!0})}),P&&Object(b.jsx)(Mt.a.Item,{label:m.formatMessage({id:"content__max_priority_fee"})+" ("+I+")",control:j,name:"maxPriorityFeePerGas",defaultValue:"",rules:{validate:function(){var e=v()((function*(e){var t=S,n=k;try{var r,o,a;yield ne.a.validator.validateMaxPriortyFee({networkId:f,value:e,lowValue:null==t?void 0:t.maxPriorityFeePerGas,highValue:null==n?void 0:n.maxPriorityFeePerGas,minValue:u&&null!=w&&null!=(r=w.custom)&&r.price?new _.a(null==w||null==(o=w.custom)||null==(a=o.price)?void 0:a.maxPriorityFeePerGas).times(zn.b).toFixed():"0"}),W(void 0)}catch(i){var c=i;if((null==c?void 0:c.className)===Pe.n.OneKeyValidatorError)return W(void 0),m.formatMessage({id:c.key},c.info);(null==c?void 0:c.className)===Pe.n.OneKeyValidatorTip&&W(m.formatMessage({id:c.key},c.info))}return!0}));return function(t){return e.apply(this,arguments)}}()},helpText:L&&Object(b.jsx)(yr,{message:L}),children:Object(b.jsx)(Mt.a.NumberInput,{rightText:"",size:C?"xl":void 0})}),P&&Object(b.jsx)(Mt.a.Item,{label:m.formatMessage({id:"content__max_fee"})+" ("+I+")",control:j,name:"maxFeePerGas",defaultValue:"",rules:{validate:function(){var e=v()((function*(e){var t=S,n=k;try{var r,o,a;yield ne.a.validator.validateMaxFee({networkId:f,maxPriorityFee:O("maxPriorityFeePerGas"),value:e,lowValue:null==t?void 0:t.maxFeePerGas,highValue:null==n?void 0:n.maxFeePerGas,minValue:u&&null!=w&&null!=(r=w.custom)&&r.price?new _.a(null==w||null==(o=w.custom)||null==(a=o.price)?void 0:a.maxFeePerGas).times(zn.b).toFixed():"0"}),H(void 0)}catch(i){var c=i;if((null==c?void 0:c.className)===Pe.n.OneKeyValidatorError)return H(void 0),m.formatMessage({id:c.key},c.info);(null==c?void 0:c.className)===Pe.n.OneKeyValidatorTip&&H(m.formatMessage({id:c.key},c.info))}return!0}));return function(t){return e.apply(this,arguments)}}()},helpText:U&&Object(b.jsx)(yr,{message:U}),children:Object(b.jsx)(Mt.a.NumberInput,{rightText:"",size:C?"xl":void 0})}),!P&&Object(b.jsx)(Mt.a.Item,{label:m.formatMessage({id:"content__gas_price"}),control:j,name:"gasPrice",rules:{validate:function(){var e=v()((function*(e){var t=S,n=k;try{var r,o;yield ne.a.validator.validateGasPrice({networkId:f,value:e,minValue:u&&null!=w&&null!=(r=w.custom)&&r.price?new _.a(null==w||null==(o=w.custom)?void 0:o.price).times(zn.b).toFixed():"0",lowValue:t,highValue:n}),F(void 0)}catch(c){var a=c;if((null==a?void 0:a.className)===Pe.n.OneKeyValidatorError)return F(void 0),m.formatMessage({id:a.key},a.info);(null==a?void 0:a.className)===Pe.n.OneKeyValidatorTip&&F(m.formatMessage({id:a.key},a.info))}return!0}));return function(t){return e.apply(this,arguments)}}()},defaultValue:"",helpText:B&&Object(b.jsx)(yr,{message:B}),children:Object(b.jsx)(Mt.a.NumberInput,{size:C?"xl":void 0})}),Object(b.jsx)(Mt.a.Item,{label:m.formatMessage({id:"content__gas_limit"}),control:j,name:"gasLimit",rules:{validate:function(){var e=v()((function*(e){var t,n=null==s||null==(t=s.info)?void 0:t.limit;try{yield ne.a.validator.validateGasLimit({networkId:f,value:e,highValue:n}),D(void 0)}catch(o){var r=o;if((null==r?void 0:r.className)===Pe.n.OneKeyValidatorError)return D(void 0),m.formatMessage({id:r.key},r.info);(null==r?void 0:r.className)===Pe.n.OneKeyValidatorTip&&D(m.formatMessage({id:r.key},r.info))}return!0}));return function(t){return e.apply(this,arguments)}}()},defaultValue:"",helpText:M&&Object(b.jsx)(yr,{message:M}),children:Object(b.jsx)(Mt.a.NumberInput,{size:C?"xl":void 0})}),Object(b.jsx)(Mt.a.Item,{name:"totalFee",control:j,label:m.formatMessage({id:"content__fee"}),children:Object(b.jsxs)(Ve.h.Body2,{color:"text-subdued",children:[y.min===y.max?y.max:y.min+" - "+y.max," ",I]})})]})}function gr(e){var t=e.index,n=e.waitingSeconds,r=Object(d.a)(),o=parseInt(t,10),a=r.formatMessage({id:"content__likely_less_than_15s"});return n?a=r.formatMessage({id:"content__about_int_str"},{time:n>60?Math.ceil(n/60):n,unit:r.formatMessage({id:n>60?"content__minutes_lowercase":"content__seconds__lowercase"})}):(0===o&&(a=r.formatMessage({id:"content__maybe_in_30s"})),1===o&&(a=r.formatMessage({id:"content__likely_less_than_15s"})),2===o&&(a=r.formatMessage({id:"content__very_likely_less_than_15s"}))),Object(b.jsx)(b.Fragment,{children:a})}function wr(e){var t,n=e.feeInfoPayload,r=e.value,o=e.onChange,a=e.accountId,c=e.networkId,i=Object(p.useMemo)((function(){var e,t;return null!=(e=null==n||null==(t=n.info)?void 0:t.prices)?e:[]}),[null==n||null==(t=n.info)?void 0:t.prices]),s=Object(p.useMemo)((function(){var e;return i?(null==n||null==(e=n.info)?void 0:e.eip1559)?i.map((function(e,t){var r,o,i,s=Object(ct.b)({eip1559:!0,limit:null==n||null==(r=n.info)?void 0:r.limit,price:e}),l=s.min,d=s.max,u=l,f=Object(ct.a)({amount:d,info:null==n?void 0:n.info}),j=Object(ct.a)({amount:u,info:null==n?void 0:n.info}),p=null==n||null==(o=n.info.waitingSeconds)?void 0:o[t];return{value:t.toString(),title:Object(b.jsx)(Ue,{index:t}),titleSecond:Object(b.jsx)(gr,{index:t,waitingSeconds:p}),describe:Object(b.jsx)(ke.e,{accountId:a,networkId:c,value:j,render:function(e){return Object(b.jsxs)(b.Fragment,{children:["~ ",j?e:"-"]})}}),describeSecond:Object(b.jsx)(ke.e,{accountId:a,networkId:c,value:f,render:function(e){return Object(b.jsxs)(b.Fragment,{children:["Max Fee: ",f?e:"-"]})}}),describeThird:""+f+(null!=(i=n.info.nativeSymbol)?i:"")}})):i.map((function(e,t){var r,o,i,s,l=Object(ct.b)({limit:null==n||null==(r=n.info)?void 0:r.limit,price:e}).max,d=Object(ct.a)({amount:l,info:null==n?void 0:n.info}),u=null==(o=(null==n?void 0:n.info).waitingSeconds)?void 0:o[t];return{value:t.toString(),title:Object(b.jsx)(Ue,{index:t}),titleSecond:Object(b.jsx)(gr,{index:t,waitingSeconds:u}),describe:Object(b.jsx)(ke.e,{accountId:a,networkId:c,value:d,render:function(e){return Object(b.jsxs)(b.Fragment,{children:["~ ",d?e:"-"]})}}),describeSecond:d+(null!=n&&null!=(i=n.info)&&i.nativeSymbol?" "+(null==n||null==(s=n.info)?void 0:s.nativeSymbol):"")}})):[]}),[a,null==n?void 0:n.info,i,c]);return Object(b.jsx)(ze,{padding:"0px",mt:5,items:s,name:"standard fee group",value:r,onChange:o})}function Ir(e){var t=e.onChange,n=e.type,r=Object(d.a)();return Object(b.jsx)(Xt.a,{selectedIndex:n===It.b.standard?0:1,onChange:t,values:[r.formatMessage({id:"content__standard"}),r.formatMessage({id:"content__advanced"})]})}function Pr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function kr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pr(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _r(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=new _.a(null!=e?e:"").times(n),o=new _.a(null!=t?t:"");return o.isNaN()&&r.isNaN()?"0":o.isNaN()?r.toFixed():r.isNaN()?o.toFixed():r.isGreaterThan(o)?r.toFixed():o.toFixed()}var Sr=Object(p.memo)((function(e){var t,n=Object.assign({},(mr()(e),e)).trigger,r=Object(d.a)(),o=Object(l.u)(),a=Object(l.x)(),s=a.params,u=s.encodedTx,j=s.autoConfirmAfterFeeSaved,O=s.resendActionInfo,m=s.sendConfirmParams,h=s.networkId,y=s.accountId,g=s.forBatchSend,w=Object(A.e)({networkId:h,accountId:y}).network,I=Object(p.useMemo)((function(){var e="action__edit_fee";return"speedUp"===(null==O?void 0:O.type)&&(e="form__accelerated_transaction"),"cancel"===(null==O?void 0:O.type)&&(e="form__cancelled_transaction"),r.formatMessage({id:e})}),[r,null==O?void 0:O.type]);ae({condition:!!j});var P=Object(p.useMemo)((function(){if(j){var e=bn()(u);return delete e.gasLimit,delete e.gas,e}return u}),[j,u]),k=Yn({networkId:h,accountId:y,encodedTx:P,fetchAnyway:!0,forBatchSend:g}),_=k.feeInfoPayload,S=k.feeInfoLoading,C=k.getSelectedFeeInfoUnit,M=null==_||null==(t=_.info)?void 0:t.eip1559;Object(p.useEffect)((function(){it.a.sendTx.info("SendEditFee  >>>>  ",_,u)}),[u,_]);var D=Object(p.useState)(It.b.standard),E=we()(D,2),N=E[0],B=E[1],F=Object(p.useState)(""),R=we()(F,2),V=R[0],L=R[1],W=Object(Dt.a)({mode:"onBlur",reValidateMode:"onBlur"}),G=W.handleSubmit,z=W.setValue,U=W.trigger,H=G(function(){var e=v()((function*(e){var t,n,i=N===It.b.advanced?"custom":"preset";V||"preset"!==i||(i="custom");var s=e.gasPrice||"0";M&&(s={baseFee:e.baseFee||"0",maxPriorityFeePerGas:e.maxPriorityFeePerGas||"0",maxFeePerGas:e.maxFeePerGas||"0"});var l={type:i,preset:V||"1",custom:{eip1559:M,price:s,limit:e.gasLimit||"0"}};it.a.sendTx.info("SendEditFee Confirm >>>> ",l);var d=o.getState(),f=null==(t=d.routes[d.index-1])?void 0:t.name;if(j){var b=kr(kr({},m),{},{networkId:h,accountId:y,encodedTx:u,resendActionInfo:a.params.resendActionInfo,feeInfoSelected:l,autoConfirmAfterFeeSaved:j,feeInfoUseFeeInTx:!1,feeInfoEditable:!0});return o.replace(c.a.SendConfirm,b)}var p=kr(kr({},m),{},{networkId:h,accountId:y,feeInfoSelected:l,autoConfirmAfterFeeSaved:j});if(null!=w&&null!=(n=w.settings)&&n.isUTXOModel)try{Object.assign(p,{encodedTx:yield ne.a.engine.attachFeeInfoToEncodedTx({networkId:h,accountId:y,encodedTx:u,feeInfoValue:l.custom})})}catch(v){var O=v.key;return void("form__amount_invalid"===(void 0===O?"":O)&&nt.a.show({title:r.formatMessage({id:"form__amount_invalid"},{0:""})}))}var x=f||c.a.SendConfirm;return zn.a?o.replace(x,p):("preset"===i&&ne.a.dispatch(Object(_e.f)({networkId:h,index:V})),o.navigate({merge:!0,name:x,params:p}))}));return function(t){return e.apply(this,arguments)}}()),q=Object(p.useCallback)((function(e){var t=e.price,n=e.limit;if(M){var r=t;z("baseFee",r.baseFee),z("maxFeePerGas",r.maxFeePerGas),z("maxPriorityFeePerGas",r.maxPriorityFeePerGas)}else{var o;z("gasPrice",null!=(o=t)?o:"")}z("gasLimit",null!=n?n:"")}),[M,z]);Object(p.useEffect)((function(){if(_&&N===It.b.standard&&!(parseFloat(V)<0)&&V){var e=C({info:_.info,index:V}),t=e.limit,n=e.price;q({price:n,limit:t})}}),[_,N,C,M,V,q,z]),Object(p.useEffect)((function(){N===It.b.advanced&&U()}),[N,U]),Object(p.useEffect)((function(){var e,t,n,r=null==_?void 0:_.selected,o=null!=(e=null==r?void 0:r.type)?e:"preset";if(_&&null!=_&&null!=(t=_.info)&&null!=(n=t.prices)&&n.length&&!j||(o="custom"),_&&"preset"===o){var a,c,i=(null==r?void 0:r.preset)||"1";(null==_||null==(a=_.info)||null==(c=a.prices)?void 0:c.length)<2&&(i="0"),L(i),B(It.b.standard)}else if("custom"===o){var s,l=bn()(null!=(s=null==r?void 0:r.custom)?s:{});if(B(It.b.advanced),l){if(j){var d,u,f,b=null==m?void 0:m.actionType,p=pr()(null!=(d=null==_||null==(u=_.info)?void 0:u.prices)?d:[]),O=l.limit,x=null==_||null==(f=_.info)?void 0:f.limit;if(l.limit=_r(O,x,1),"cancel"===b&&(l.limit=_r("21000",x,1)),null!=l&&l.eip1559){var h=l.price;if(h){var y,v=p;h.baseFee=null!=(y=null==v?void 0:v.baseFee)?y:h.baseFee,h.maxFeePerGas=_r(h.maxFeePerGas,null==v?void 0:v.maxFeePerGas,zn.b),h.maxPriorityFeePerGas=_r(h.maxPriorityFeePerGas,null==v?void 0:v.maxPriorityFeePerGas,zn.b)}}else{var g=p;l.price=_r(l.price,g,zn.b)}}q(l)}}}),[j,_,null==_?void 0:_.selected,null==_?void 0:_.selected.type,null==m?void 0:m.actionType,q,z]);var K=Object(b.jsx)(i.a,{w:"full",py:16,children:Object(b.jsx)(xe.b,{size:"lg"})});if(N&&!S){var Q,J=Object(b.jsx)(vr,{accountId:y,networkId:h,autoConfirmAfterFeeSaved:j,feeInfoPayload:_,useFormReturn:W}),X=g?Object(b.jsx)(He,{feeInfoPayload:_,value:V,onChange:function(e){L(e)}}):Object(b.jsx)(wr,{accountId:y,networkId:h,feeInfoPayload:_,value:V,onChange:function(e){L(e)}});K=_?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(Ir,{type:N,onChange:function(e){B(0===e?It.b.standard:It.b.advanced)}}),Object(b.jsx)(x.a,{children:N===It.b.standard?X:J})]}):Object(b.jsx)(x.a,{children:J}),null!=_&&null!=(Q=_.info)&&Q.customDisabled&&(K=Object(b.jsx)(x.a,{children:X}))}return Object(b.jsx)(f.a,{networkId:h,accountId:y,height:"598px",trigger:n,primaryActionTranslationId:"action__apply",primaryActionProps:{isDisabled:S},onPrimaryActionPress:function(){return H()},hideSecondaryAction:!0,onModalClose:function(){null==m||null==m.onModalClose||m.onModalClose()},header:I,scrollViewProps:{children:Object(b.jsxs)(b.Fragment,{children:[K,Object(b.jsx)(Dn,{networkId:h,accountId:y,encodedTx:u}),T.a.isDev&&Object(b.jsx)(Ot.a,{onPress:function(){W.setValue("maxPriorityFeePerGas","0.00001"),W.setValue("maxFeePerGas","0.00001"),W.setValue("gasPrice","0.00001"),B(It.b.advanced)},children:"Fill 0 Fee"})]})}})})),Cr=n(3131);var Tr=n(143),Ar=n.n(Tr),Mr=n(123),Dr=n(25),Er=n(4255),Nr=n.n(Er),Br=function(e){var t;return((t={})[On.b.ETH_SIGN]="eth_sign",t[On.b.PERSONAL_SIGN]="personal_sign",t[On.b.TYPED_DATA_V1]="signTypedData_v1",t[On.b.TYPED_DATA_V3]="signTypedData_v3",t[On.b.TYPED_DATA_V4]="signTypedData_v4",t[On.a.SIGN_MESSAGE]="signMessage",t)[e]},Fr=function(e){return Object(b.jsx)(z.a,{bg:"surface-default",borderRadius:"12px",mt:"4",children:Object(b.jsx)(me.a,{justifyContent:"space-between",space:"16px",padding:"16px",children:Object(b.jsx)(m.a,{typography:{sm:"Caption",md:"Caption"},color:"text-subdued",flex:1,overflowWrap:"anywhere",children:e||"-"})})})},Rr=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(Ar()(t))return Object(b.jsx)(Ve.h.Body2,{children:"null\n"});if("boolean"===typeof t)return Object(b.jsx)(Ve.h.Body2,{children:(t?"true":"false")+"\n"});if("string"===typeof t||"number"===typeof t)return Object(b.jsxs)(Ve.h.Body2,{wordBreak:"break-all",whiteSpace:"pre-wrap",children:[t,"\n"]});var r=Object.keys(t).map((function(r){return Object(b.jsxs)(Ve.h.Body2,{color:"text-subdued",children:[""+"".padStart(n)+r+": ",e(t[r],n+4)]})}));return Object(b.jsxs)(Ve.h.Body2,{children:[n?"\n":"",r]})},Vr=function(e){var t,n,r=e.message,o=e.type;if(o===On.b.PERSONAL_SIGN){var a=r;try{a=Mr.toBuffer(r).toString("utf-8")}catch(i){}return Fr(a)}var c=null!=(t=JSON.parse(r))?t:{};(c=null!=(n=c.message)?n:c,o===On.b.TYPED_DATA_V1&&Array.isArray(c))&&(c=c.reduce((function(e,t){return e[t.name]=t.value,e}),{}));return Object(b.jsx)(z.a,{bg:"surface-default",borderRadius:"12px",mt:"2",children:Object(b.jsx)(me.a,{justifyContent:"space-between",space:"16px",padding:"16px",children:Object(b.jsx)(m.a,{flex:1,overflowWrap:"anywhere",children:Rr(c)})})})},Lr=function(e){var t=e.message,n=e.type;if(n===On.b.PERSONAL_SIGN)return Fr(t);if(n===On.a.SIGN_MESSAGE){var r="";try{var o;r=null==(o=JSON.parse(t))?void 0:o.fullMessage}catch(c){}return Fr(r)}var a="";try{a=JSON.stringify(JSON.parse(t),null,4)}catch(i){}return Fr(a)},Wr=function(e){var t,n=e.title,r=e.origin,o=(e.networkId,e.accountId,Object(A.e)(e)),a=o.account,c=o.network,s=Object(d.a)(),l=r?r+"/favicon.ico":"",u=null!=(t=null==r?void 0:r.split("://")[1])?t:"DApp";return Object(b.jsxs)(x.a,{flexDirection:"column",alignItems:"center",justifyContent:"center",mt:"2",children:[Object(b.jsx)(yn.a,{source:{uri:l},alt:"logoURI",size:"40px",borderRadius:"full",fallbackElement:Object(b.jsx)(i.a,{w:"40px",h:"40px",rounded:"full",bgColor:"surface-neutral-default",children:Object(b.jsx)(ve.a,{size:24,name:"QuestionMarkOutline"})})}),Object(b.jsx)(Ve.h.DisplayXLarge,{mt:"4",children:n}),Object(b.jsx)(Ve.h.Body1,{mt:1,color:"text-subdued",children:u}),Object(b.jsxs)(me.a,{alignItems:"center",borderBottomWidth:Dr.a.hairlineWidth,borderColor:"border-subdued",mt:"32px",alignSelf:"stretch",px:"16px",pb:"12px",children:[Object(b.jsx)(Ve.h.Body1Strong,{color:"text-subdued",flex:1,children:s.formatMessage({id:"form__account"})}),Object(b.jsxs)(me.a,{alignItems:"center",children:[Object(b.jsx)(yn.a,{src:null==c?void 0:c.logoURI,size:"24px",borderRadius:"full"}),Object(b.jsx)(Ve.h.Body1,{ml:"12px",children:null==a?void 0:a.name})]})]})]})},Gr=function(e){var t=e.unsignedMessage,n=e.sourceInfo,r=e.networkId,o=e.accountId,a=Object(d.a)(),c=t.type,i=t.message,s=Object(p.useState)("message"),l=we()(s,2),u=l[0],f=l[1],j=Object(p.useMemo)((function(){return o&&o.startsWith("watching-")}),[o]),O=Object(p.useMemo)((function(){return Object(b.jsx)(Wr,{networkId:r,accountId:o,title:a.formatMessage({id:"title__signature_request"}),origin:null==n?void 0:n.origin})}),[o,a,r,null==n?void 0:n.origin]),m=Object(p.useMemo)((function(){return Object(b.jsx)(z.a,{bg:"surface-critical-subdued",borderColor:"border-critical-subdued",borderRadius:"12px",borderWidth:1,children:Object(b.jsxs)(me.a,{justifyContent:"space-between",space:"16px",padding:"16px",children:[Object(b.jsx)(yn.a,{size:"20px",source:Nr.a}),Object(b.jsx)(Ve.h.Body2,{maxW:"95%",children:a.formatMessage({id:"msg__signing_this_message_can_be_dangerous_Only_sign_this_message_if_you_fully_trust_this_site_and_understand_the_potential_risks"})})]})})}),[a]);return c===On.b.ETH_SIGN?Object(b.jsxs)(z.a,{children:[O,m,Object(b.jsx)(Ve.h.Subheading,{mt:"24px",color:"text-subdued",children:a.formatMessage({id:"form__message_tab"})}),Fr(i)]}):Object(b.jsxs)(z.a,{children:[O,function(){var e="message"===u;return Object(b.jsxs)(me.a,{space:2,mt:2,children:[Object(b.jsx)(Ot.a,{type:"plain",size:"base",_text:{color:e?"text-default":"text-subdued"},onPress:function(){return f("message")},children:a.formatMessage({id:"form__message_tab"})}),Object(b.jsx)(Ot.a,{type:"plain",size:"base",_text:{color:e?"text-subdued":"text-default"},onPress:function(){return f("data")},children:a.formatMessage({id:"form__data_tab"})})]})}(),"message"===u?Object(b.jsxs)(z.a,{children:[Vr(t),j?Object(b.jsx)(U.a,{message:a.formatMessage({id:"form__error_trade_with_watched_acocunt"})}):null]}):Object(b.jsxs)(z.a,{flex:"1",children:[Lr(t),Object(b.jsx)(Ve.h.Subheading,{mt:"24px",color:"text-subdued",children:a.formatMessage({id:"form__sign_method_type_uppercase"})}),Object(b.jsx)(Ve.h.Body2,{mt:"6px",children:Br(c)})]})]})},zr=["children","confirmDisabled","handleConfirm","unsignedMessage"];function Ur(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Hr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ur(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ur(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function qr(e){var t=Object(A.e)(e),n=(t.walletId,t.accountId),r=t.networkId,o=e.children,a=e.confirmDisabled,c=e.handleConfirm,i=e.unsignedMessage,s=P()(e,zr),l=Object(p.useMemo)((function(){return n&&n.startsWith("watching-")}),[n]),d=i.type===On.b.ETH_SIGN;return Object(b.jsx)(f.a,Hr(Hr({height:"598px",primaryActionTranslationId:"action__confirm",primaryActionProps:{type:d?"destructive":"primary",isDisabled:l||a},secondaryActionTranslationId:"action__reject",onSecondaryActionPress:function(e){return(0,e.close)()},onPrimaryActionPress:function(e){var t=e.close,n=e.onClose;c({close:t,onClose:n,unsignedMessage:i})}},s),{},{accountId:n,networkId:r,scrollViewProps:{children:o}}))}function Kr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Qr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Kr(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Kr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Jr=null,Xr=n(616);function Yr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Yr(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Yr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Zr=n(1428),eo=n(560),to=n(456);function no(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var ro=Object(to.a)(),oo=[{name:c.a.PreSendToken,component:j.wrap(nn,"action__send")},{name:c.a.PreSendAddress,component:j.wrap((function(){var e,t,n,r,o=Object(d.a)(),a=Object(l.x)(),i=Object(p.useState)([]),s=we()(i,2),u=s[0],j=s[1],m=Object(p.useState)(!1),h=we()(m,2),y=h[0],g=h[1],w=ne.a.serviceNFT,I=ne.a.serviceBatchTransfer,k=ne.a.engine,S=Object(p.useMemo)((function(){return Gt({},a.params)}),[a.params]),C=S.transferInfos,T=S.accountId,D=S.networkId,E=S.closeModal,N=P()(S,Lt),B=C&&C.length>0?C[0]:N,F=B.isNFT,R=Object(A.e)(S),V=R.account,L=R.network,W=Object(Dt.a)({mode:"onBlur",reValidateMode:"onBlur",defaultValues:{to:B.to||""}}),G=Object(Ft.a)({useFormReturn:W}),z=G.isLoading,U=G.formValues,H=G.isValid,q=Object(Bt.b)(),K=q.onChange,Q=q.disableSubmitBtn,J=q.isValid,X=q.address,Y=W.control,$=W.formState,Z=W.trigger,ee=W.handleSubmit,te=Object(l.u)(),re=Object(M.k)(D,null!=(e=B.token)?e:"").token,oe=Object(p.useState)(),ae=we()(oe,2),ce=ae[0],se=ae[1];Object(p.useEffect)((function(){v()((function*(){if(F){var e=B.tokenId;if(e){var t,n=B.token,r=yield w.getAsset({accountId:null!=(t=null==V?void 0:V.address)?t:"",networkId:D,contractAddress:n,tokenId:e,local:!0});se(r)}}}))()}),[B.tokenId,B.token]);var le=z||!(null!=U&&U.to)||!H||$.isValidating||Q,de=Object(p.useState)(""),ue=we()(de,2),fe=ue[0],be=ue[1],je=Object(p.useState)(""),pe=we()(je,2),Oe=pe[0],me=pe[1],xe=Object(p.useCallback)(v()((function*(){if(!le){var e=X||U.to;if(H&&D&&e){var t=yield ne.a.serviceToken.getAddressRiskyItems({address:e,networkId:D,apiName:Et.a.address_security});j(t)}}})),[D,H,U,X,le]);Object(p.useEffect)((function(){xe()}),[xe]);var he=Object(p.useCallback)((function(e){return Object(O.j)({asyncFunc:function(){var t=v()((function*(){return yield ne.a.validator.isContractAddress(D,e)}));return function(){return t.apply(this,arguments)}}(),timeout:600,timeoutResult:!1})}),[D]),ye=Object(p.useCallback)((function(e){K(e),Z("to")}),[Z,K]),ve=Object(p.useCallback)(function(){var e=v()((function*(e){if(V&&L&&ce){var t,n=[],r=null;if(B&&(B.from=V.address,B.to=e),C&&C.length>1){g(!0);var o=yield I.buildEncodedTxsFromBatchApprove({networkId:D,accountId:T,transferInfos:C}),a=o[o.length-1];a&&(t=void 0!==(t=a.nonce)?new _.a(t).toNumber():t),r=yield I.buildEncodedTxFromBatchTransfer({networkId:D,accountId:T,transferInfos:C,prevNonce:t});for(var i=0;i<C.length;i+=1){var s,l,d=yield w.getAsset({accountId:null!=(s=null==V?void 0:V.address)?s:"",networkId:D,contractAddress:C[i].token,tokenId:null!=(l=C[i].tokenId)?l:"",local:!0});n.push({asset:d||{},amount:B.amount,from:V.address,to:e})}g(!1),te.navigate(ie.c.Modal,{screen:ie.b.Send,params:{screen:c.a.BatchSendConfirm,params:{networkId:D,accountId:T,feeInfoUseFeeInTx:!1,feeInfoEditable:!0,encodedTxs:[].concat(ot()(o),[r]),backRouteName:c.a.PreSendAddress,payloadInfo:{type:"Transfer",nftInfos:n},transferCount:C.length,onModalClose:E}}})}else r=yield k.buildEncodedTxFromTransfer({networkId:D,accountId:T,transferInfo:B}),te.navigate(ie.c.Modal,{screen:ie.b.Send,params:{screen:c.a.SendConfirm,params:Gt(Gt({},B),{},{networkId:D,accountId:T,encodedTx:r,feeInfoUseFeeInTx:!1,feeInfoEditable:!0,backRouteName:c.a.PreSendAddress,payloadInfo:{type:"Transfer",nftInfo:{asset:ce,amount:B.amount,from:V.address,to:e}},onModalClose:E})}})}}));return function(t){return e.apply(this,arguments)}}(),[te,ce,B,C,E]),ge=ee(Object(p.useCallback)((function(e){var t=X||e.to;!z&&t&&(F?ve(t):te.navigate(ie.c.Modal,{screen:ie.b.Send,params:{screen:c.a.PreSendAmount,params:Gt(Gt({},B),{},{networkId:D,accountId:T,to:t,destinationTag:e.destinationTag})}}))}),[X,z,ve,te,B])),Ie=Object(p.useMemo)((function(){return"xrp--0"!==D?null:Object(b.jsx)(Mt.a.Item,{control:Y,name:"destinationTag",rules:{maxLength:{value:10,message:o.formatMessage({id:"msg__exceeding_the_maximum_word_limit"})},validate:function(e){if(e)return!/^[0-9]+$/.test(e)?o.formatMessage({id:"form__enter_a_number_greater_than_or_equal_to_0"}):void 0}},children:Object(b.jsx)(Mt.a.Input,{type:"number",placeholder:o.formatMessage({id:"form__destination_tag_placeholder"})})})}),[Y,o,D]);return Object(b.jsx)(f.a,{accountId:T,networkId:D,height:"auto",hideSecondaryAction:!0,header:o.formatMessage({id:"modal__send_to"}),primaryActionTranslationId:"action__next",primaryActionProps:{isDisabled:le,isLoading:y},onPrimaryActionPress:function(){return ge()},scrollViewProps:{children:Object(b.jsxs)(x.a,{children:[Object(b.jsxs)(Mt.a,{children:[F?Object(b.jsx)(zt,{asset:ce,total:(null==C?void 0:C.length)||1}):Object(b.jsxs)(x.a,{flexDirection:"row",alignItems:"center",children:[Object(b.jsx)(At.c,{size:8,token:re}),Object(b.jsx)(Ve.h.Body1Strong,{ml:3,children:null==re?void 0:re.symbol})]}),Object(b.jsx)(Mt.a.Item,{control:Y,warningMessage:fe,successMessage:Oe,name:"to",formControlProps:{width:"full"},helpText:function(e){return Object(b.jsx)(Bt.a,{name:e,onChange:ye,disableBTC:!1,networkId:D})},rules:{validate:function(){var e=v()((function*(e){var t=X||e||"";if(me(""),be(""),t){try{yield ne.a.validator.validateAddress(D,t),yield ne.a.validator.validatePreSendAddress({address:t,networkId:D,accountId:T})}catch(a){if(J&&!X)return;var n=a.key,r=a.info;return n?o.formatMessage({id:n},null!=r?r:{}):o.formatMessage({id:"form__address_invalid"})}return(yield he(t))?(be(o.formatMessage({id:"msg__the_recipient_address_is_a_contract_address"})),me("")):(be(""),me(o.formatMessage({id:"form__enter_recipient_address_valid"}))),!0}}));return function(t){return e.apply(this,arguments)}}()},defaultValue:"",children:Object(b.jsx)(Nt.a,{maxLength:103,networkId:D,h:{base:120,md:120},plugins:["contact","paste","scan"]})}),Ie]}),Object(b.jsx)(x.a,{height:(null==fe?void 0:fe.length)>0||(null==Oe?void 0:Oe.length)>0||(null==$||null==(t=$.errors)||null==(n=t.to)||null==(r=n.message)?void 0:r.length)>0?0:"28px"}),Object(b.jsx)(Rt.a,{items:u})]})}})}))},{name:c.a.PreSendAmount,component:j.wrap(Ut.a)},{name:c.a.SignMessageConfirm,component:j.wrap((function(){var e;Object(ce.c)();var t=Object(d.a)(),n=Object(l.u)(),r=Object(l.x)(),o=r.params,a=o.sourceInfo,i=o.unsignedMessage,s=Object(A.e)(r.params),f=s.walletId,j=s.accountId,O=s.networkId,m=Object(u.a)({id:null!=(e=null==a?void 0:a.id)?e:"",closeOnError:!0}),x=Object(p.useCallback)((function(){null==m||m.reject()}),[m]);Object(p.useEffect)((function(){clearTimeout(Jr),it.a.sendTx.info("SignMessageConfirm  >>>>  ",i,r.params)}),[i,r.params]);var h=Object(p.useCallback)(function(){var e=v()((function*(e){var o=e.close,a=e.unsignedMessage;try{if(a.type===On.b.TYPED_DATA_V3||a.type===On.b.TYPED_DATA_V4){var i,s,l,d=new _.a(null!=(i=Object(vn.g)(O).chainId)?i:0),u=null!=(s=JSON.parse(a.message))?s:{},b=null==u||null==(l=u.domain)?void 0:l.chainId;b||null==m||m.reject({error:new Pe.m("missing value for field chainId of type uint256")}),d.isEqualTo(b)||null==m||m.reject({error:new Pe.m('Provided chainId "'+b+'" must match the active chainId "'+d.toFixed()+'"')})}}catch(h){null==m||m.reject({error:h})}var p=Qr(Qr({},r.params),{},{unsignedMessage:a,accountId:j,networkId:O,walletId:f,onSuccess:function(){var e=v()((function*(e){yield m.resolve({result:e});var n=t.formatMessage({id:"transaction__success"});nt.a.show({title:n}),Jr=setTimeout((function(){o()}),600)}));return function(t){return e.apply(this,arguments)}}(),onModalClose:x});return delete p._disabledAnimationOfNavigate,n.navigate(c.a.SendAuthentication,p)}));return function(t){return e.apply(this,arguments)}}(),[r.params,j,f,O,x,n,m,t]),y={header:t.formatMessage({id:"action__sign"}),networkId:O,accountId:j,handleConfirm:h,onSecondaryActionPress:function(e){var t=e.close;m.reject(),t()},onModalClose:x,sourceInfo:a,unsignedMessage:i};return Object(b.jsx)(qr,Qr(Qr({},y),{},{children:Object(b.jsx)(Gr,Qr({},y))}))}))},{name:c.a.SendConfirmFromDapp,component:function(){var e=Object(l.u)(),t=Object(p.useRef)(),n=Object(br.a)(),r=n.sourceInfo,o=n.unsignedMessage,a=n.encodedTx,i=n.signOnly,s=void 0!==i&&i,d=n._$t,u=void 0===d?void 0:d,f=n.networkId;return Object(p.useEffect)((function(){var n,i=ur.a.addEventListener("change",(function(n){"active"===n&&setTimeout((function(){t.current&&(e.dispatch(t.current),t.current=void 0)}))})),d=Object(fr.a)(),b=d.networkId,j=d.accountId;if(a){var p={networkId:null!=f?f:b,accountId:j,sourceInfo:r,encodedTx:a,feeInfoEditable:!0,feeInfoUseFeeInTx:!1,signOnly:s,_disabledAnimationOfNavigate:!0,_$t:u};n=l.i.replace(c.a.SendConfirm,p)}if(o){var O={networkId:null!=f?f:b,accountId:j,sourceInfo:r,unsignedMessage:o,_disabledAnimationOfNavigate:!0,_$t:u};n=l.i.replace(c.a.SignMessageConfirm,O)}return n&&("active"===ur.a.currentState?setTimeout((function(){return e.dispatch(n)})):t.current=n),function(){i.remove()}}),[u,a,e,r,o,s,f]),null}},{name:c.a.SendConfirm,component:j.wrap(dr)},{name:c.a.BatchSendConfirm,component:j.wrap(pt)},{name:c.a.BatchSendProgress,component:j.wrap((function(){var e=Object(l.x)().params,t=e.walletId,n=e.onModalClose,r=e.networkId,o=e.accountId,a=Object(p.useState)(),c=we()(a,2),i=c[0],s=c[1],d=Object(p.useState)(It.a.inProgress),u=we()(d,2),j=u[0],O=u[1],m=j===It.a.onPause;return Object(b.jsx)(f.a,{closeable:!1,hideBackButton:!0,height:"489px",closeOnOverlayClick:!1,accountId:o,networkId:r,header:null==i?void 0:i.title,headerDescription:null==i?void 0:i.subTitle,onModalClose:function(){null==n||n(),Object(ce.a)()},footer:m?void 0:null,hidePrimaryAction:!m,hideSecondaryAction:!m,primaryActionTranslationId:"action__continue",secondaryActionTranslationId:"action__abort",onPrimaryActionPress:function(){return O(It.a.inProgress)},children:Object(b.jsx)(x.a,{flex:1,children:Object(b.jsx)(xt.b,{walletId:t,field:xt.a.Payment,children:function(e){return Object(b.jsx)(Pt,{setTitleInfo:s,password:e,currentState:j,setCurrentState:O})}})})})}))},{name:c.a.SendEditFee,component:j.wrap(Sr)},{name:c.a.TokenApproveAmountEdit,component:j.wrap((function(e){var t,n,r,o,a,i=Object.assign({},(mr()(e),e)).trigger,s=ne.a.engine,u=Object(d.a)(),j=Object(l.u)(),O=Object(l.x)(),m=O.params,x=m.encodedTx,h=m.tokenApproveAmount,y=m.isMaxAmount,g=Object(A.e)(O.params),w=g.networkId,I=g.accountId,P=g.network,k=Object(p.useState)(y),_=we()(k,2),S=_[0],C=_[1],T=O.params,M=T.decodedTx,D=T.sendConfirmParams,E=null==M||null==(t=M.actions)||null==(n=t[0])?void 0:n.tokenApprove,N=null==E?void 0:E.tokenInfo,B=null==N?void 0:N.symbol,F=Object(Dt.a)({mode:"onChange",reValidateMode:"onChange",defaultValues:{amount:y?"":h}}),R=F.control,V=F.handleSubmit,L=F.trigger,W=Object(Ft.a)({useFormReturn:F}).isValid,G=V(function(){var e=v()((function*(e){var t;if(x){var n=S?Xr.d:e.amount,r=yield s.updateEncodedTxTokenApprove({networkId:w,accountId:I,encodedTx:x,amount:n}),o=j.getState(),a=(null==(t=o.routes[o.index-1])?void 0:t.name)||c.a.SendConfirm,i=$r($r({},D),{},{networkId:w,accountId:I,tokenApproveAmount:n,encodedTx:r});return zn.a?j.replace(a,i):j.navigate({merge:!0,name:a,params:i})}}));return function(t){return e.apply(this,arguments)}}()),z={required:u.formatMessage({id:"form__max_spend_limit_validateRules"})};return S&&(z.required=""),Object(b.jsx)(f.a,{accountId:I,networkId:w,trigger:i,primaryActionTranslationId:"action__save",onPrimaryActionPress:function(){return G()},primaryActionProps:{isDisabled:!W},hideSecondaryAction:!0,onModalClose:function(){null==D||null==D.onModalClose||D.onModalClose()},secondaryActionTranslationId:"action__reject",header:u.formatMessage({id:"content__spend_limit_amount"}),scrollViewProps:{children:Object(b.jsx)(Mt.a,{children:Object(b.jsx)(Mt.a.Item,{label:u.formatMessage({id:"form__max_spend_limit"}),rules:z,control:R,name:"amount",defaultValue:u.formatMessage({id:"form__unlimited"}),helpText:u.formatMessage({id:"content__if_you_choose_max"},{0:null!=(r=null!=(o=null==(a=O.params.sourceInfo)?void 0:a.origin)?o:null==P?void 0:P.shortName)?r:"--"}),children:Object(b.jsx)(Mt.a.NumberInput,{w:"full",size:"xl",decimal:null==N?void 0:N.decimals,rightText:B,enableMaxButton:!0,isMax:S,maxModeCanEdit:!0,onMaxChange:function(e){C(e),e&&setTimeout((function(){L("amount")}),300)},maxText:u.formatMessage({id:"form__unlimited"})})})})}})}))},{name:c.a.SendAuthentication,component:j.wrap((function(){var e=Object(l.x)().params,t=e.walletId,n=e.onModalClose,r=e.networkId,o=e.accountId,a=Object(p.useState)(),c=we()(a,2),i=c[0],s=c[1];return Object(b.jsx)(f.a,{accountId:o,networkId:r,header:null==i?void 0:i.title,headerDescription:null==i?void 0:i.subTitle,footer:null,onModalClose:function(){null==n||n(),Object(ce.a)()},children:Object(b.jsxs)(x.a,{flex:1,children:[Object(b.jsx)(Dn,{accountId:o,networkId:r,encodedTx:e.encodedTx}),Object(b.jsx)(xt.b,{walletId:t,field:xt.a.Payment,children:function(e){return Object(b.jsx)(Bn,{setTitleInfo:s,password:e})}})]})})}))},{name:c.a.SendFeedbackReceipt,component:j.wrap((function(){var e=Object(d.a)(),t=Object(l.x)(),r=Object(Ct.a)(),o=t.params,a=o.networkId,c=o.accountId,i=o.type,s=Object(A.e)(t.params),u=s.network,j=s.accountAddress,O=Object(Cr.c)(u),h=Object(p.useState)(3),y=we()(h,2),v=y[0],g=y[1],w=T.a.isExtensionUiStandaloneWindow,I=w,P=ne.a.serviceDapp,k=Object(p.useCallback)((function(){P.setSendConfirmModalVisible({visible:!1})}),[P]);Object(p.useEffect)((function(){var e=w;return e&&window.addEventListener("beforeunload",k),function(){k(),e&&window.removeEventListener("beforeunload",k)}}),[k,w]);var _=Object(p.useCallback)((function(){var e,n;St()(null==t||null==(e=t.params)?void 0:e.closeModal)?null==t||null==(n=t.params)||null==n.closeModal||n.closeModal():r();w&&k()}),[null==t?void 0:t.params,w,r,k]);Object(A.k)((function(){I&&g((function(e){var t=e-1;return t<=0&&_(),t}))}),1e3);var S=Object(p.useMemo)((function(){return"Send"===i?e.formatMessage({id:"modal__transaction_submitted"}):e.formatMessage({id:"msg__signature_done"})}),[e,i]);return Object(b.jsx)(f.a,{networkId:a,accountId:c,hideBackButton:!0,height:"auto",header:void 0,headerDescription:void 0,primaryActionProps:{children:I?e.formatMessage({id:"action__done"})+" ("+v+")":""+e.formatMessage({id:"action__done"})},onPrimaryActionPress:function(){return _()},hideSecondaryAction:!(O.hasAvailable||"function"===typeof t.params.onDetail)||"Sign"===i,secondaryActionTranslationId:"action__view_details",onSecondaryActionPress:function(){_(),setTimeout((function(){var e;if(t.params.onDetail)null==t.params.onDetail||t.params.onDetail(null==t||null==(e=t.params)?void 0:e.txid);else if(!1===t.params.isSingleTransformMode)O.openAddressDetails(j);else{var n;O.openTransactionDetails(null==t||null==(n=t.params)?void 0:n.txid)}}),100)},closeAction:function(){return _()},children:Object(b.jsxs)(z.a,{alignItems:"center",justifyContent:"center",flex:1,children:[Object(b.jsx)(x.a,{w:"200px",h:"200px",children:Object(b.jsx)(kt.a,{width:200,source:n(3383),autoPlay:!0,loop:!1})}),Object(b.jsx)(m.a,{typography:"DisplayMedium",children:S}),Object(b.jsx)(x.a,{h:8})]})})}))},{name:c.a.HardwareSwapContinue,component:j.wrap((function(){var e=Object(d.a)(),t=Object(l.x)(),r=Object(Ct.a)(),o=t.params,a=o.networkId,c=o.accountId,s=Object(p.useCallback)((function(){var e,n;St()(null==t||null==(e=t.params)?void 0:e.closeModal)?null==t||null==(n=t.params)||null==n.closeModal||n.closeModal():r()}),[r,null==t?void 0:t.params]);return Object(p.useEffect)((function(){return Tt.b.on(Tt.a.SwapError,s),Tt.b.on(Tt.a.SwapCompleted,s),function(){Tt.b.off(Tt.a.SwapError,s),Tt.b.off(Tt.a.SwapCompleted,s)}}),[]),Object(b.jsx)(f.a,{networkId:a,accountId:c,hideBackButton:!0,height:"auto",header:void 0,headerDescription:void 0,primaryActionProps:{children:""+e.formatMessage({id:"action__close"}),type:"basic"},onPrimaryActionPress:function(){return s()},hideSecondaryAction:!0,closeAction:function(){return s()},children:Object(b.jsxs)(z.a,{alignItems:"center",justifyContent:"center",flex:1,children:[Object(b.jsx)(x.a,{w:"200px",h:"200px",children:Object(b.jsx)(kt.a,{width:200,source:n(3383),autoPlay:!0,loop:!1})}),Object(b.jsx)(m.a,{typography:"DisplayMedium",children:e.formatMessage({id:"title__swap_processing_1_2"})}),Object(b.jsx)(x.a,{h:8}),Object(b.jsxs)(x.a,{position:"relative",children:[Object(b.jsxs)(x.a,{display:"flex",flexDirection:"row",alignItems:"center",children:[Object(b.jsx)(i.a,{w:"8",h:"8",backgroundColor:"interactive-default",borderRadius:"full",mr:"6",children:Object(b.jsx)(ve.a,{name:"CheckMini",size:20,color:"text-on-primary"})}),Object(b.jsxs)(x.a,{children:[Object(b.jsx)(Ve.h.Body1Strong,{children:e.formatMessage({id:"title__approved"})}),Object(b.jsx)(Ve.h.Body1Strong,{children:e.formatMessage({id:"transaction__swap_status_completed"})})]})]}),Object(b.jsx)(x.a,{h:"6"}),Object(b.jsxs)(x.a,{display:"flex",flexDirection:"row",alignItems:"center",children:[Object(b.jsx)(i.a,{w:"8",h:"8",backgroundColor:"surface-subdued",borderRadius:"full",borderWidth:"2",borderColor:"interactive-default",mr:"6",children:Object(b.jsx)(x.a,{w:"2",h:"2",borderRadius:"full",backgroundColor:"interactive-default"})}),Object(b.jsxs)(x.a,{children:[Object(b.jsx)(Ve.h.Body1Strong,{children:e.formatMessage({id:"form__swap_tokens"})}),Object(b.jsxs)(x.a,{flexDirection:"row",children:[Object(b.jsx)(xe.b,{size:"sm"}),Object(b.jsx)(Ve.h.Body1Strong,{ml:"2",children:e.formatMessage({id:"form__please_confirm_on_device"})})]})]})]}),Object(b.jsx)(x.a,{w:"8",h:"full",position:"absolute",top:"0",left:"0",display:"flex",justifyContent:"center",alignItems:"center",zIndex:-1,children:Object(b.jsx)(x.a,{w:"1",height:"80%",bg:"interactive-default"})})]})]})})}))}];t.default=function(){var e=Object(a.a)();return Object(b.jsx)(Zr.a,{children:Object(b.jsx)(ro.Navigator,{screenOptions:function(t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?no(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):no(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(eo.b)({isVerticalLayout:e,navInfo:t}))},children:oo.map((function(e){return Object(b.jsx)(ro.Screen,{name:e.name,component:e.component},e.name)}))})})}},3383:function(e){e.exports=JSON.parse('{"v":"4.8.0","meta":{"g":"LottieFiles AE 1.0.0","a":"","k":"","d":"","tc":""},"fr":24,"ip":0,"op":47,"w":520,"h":520,"nm":"Checklist 2","ddd":0,"assets":[],"layers":[{"ddd":0,"ind":1,"ty":4,"nm":"Checklist","sr":1,"ks":{"o":{"a":1,"k":[{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.333],"y":[0]},"t":46.728,"s":[100]},{"t":62,"s":[0]}],"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[259.587,260.119,0],"ix":2},"a":{"a":0,"k":[297.587,298.119,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[0,0],[0,0]],"o":[[0,0],[0,0],[0,0]],"v":[[54.754,-36.121],[-17.487,36.12],[-54.754,-1.147]],"c":false},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"st","c":{"a":0,"k":[1,1,1,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":23,"ix":5},"lc":2,"lj":2,"bm":0,"nm":"Stroke 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"tr","p":{"a":0,"k":[294.971,298.679],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 1","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false},{"ty":"tm","s":{"a":1,"k":[{"i":{"x":[0],"y":[1]},"o":{"x":[0.333],"y":[0]},"t":13.637,"s":[100]},{"t":28.9091796875,"s":[0]}],"ix":1},"e":{"a":0,"k":100,"ix":2},"o":{"a":0,"k":0,"ix":3},"m":1,"ix":2,"nm":"Trim Paths 1","mn":"ADBE Vector Filter - Trim","hd":false}],"ip":0,"op":720,"st":0,"bm":0},{"ddd":0,"ind":2,"ty":4,"nm":"Cricle","sr":1,"ks":{"o":{"a":1,"k":[{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.333],"y":[0]},"t":46.728,"s":[100]},{"t":62,"s":[0]}],"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[260,260,0],"ix":2},"a":{"a":0,"k":[-7.627,-7.691,0],"ix":1},"s":{"a":1,"k":[{"i":{"x":[0.667,0.667,0.667],"y":[1,1,1]},"o":{"x":[0.167,0.167,0.167],"y":[0,0,0]},"t":6,"s":[124.222,124.222,100]},{"i":{"x":[0.667,0.667,0.667],"y":[1,1,1]},"o":{"x":[0.333,0.333,0.333],"y":[0,0,0]},"t":8.546,"s":[134.222,134.222,100]},{"i":{"x":[0.667,0.667,0.667],"y":[1,1,1]},"o":{"x":[0.333,0.333,0.333],"y":[0,0,0]},"t":11.091,"s":[114.222,114.222,100]},{"t":13.63671875,"s":[124.222,124.222,100]}],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"d":1,"ty":"el","s":{"a":0,"k":[178.46,178.46],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"nm":"Ellipse Path 1","mn":"ADBE Vector Shape - Ellipse","hd":false},{"ty":"tm","s":{"a":0,"k":0,"ix":1},"e":{"a":1,"k":[{"i":{"x":[0.239],"y":[1]},"o":{"x":[0.333],"y":[0]},"t":0,"s":[0]},{"t":13.63671875,"s":[100]}],"ix":2},"o":{"a":0,"k":0,"ix":3},"m":1,"ix":2,"nm":"Trim Paths 1","mn":"ADBE Vector Filter - Trim","hd":false},{"ty":"st","c":{"a":0,"k":[0.180392156863,0.721568627451,0.235294117647,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":10,"ix":5},"lc":2,"lj":2,"bm":0,"nm":"Stroke 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"fl","c":{"a":0,"k":[0.180392156863,0.721568627451,0.235294117647,1],"ix":4},"o":{"a":1,"k":[{"i":{"x":[0],"y":[1]},"o":{"x":[0.333],"y":[0]},"t":11.091,"s":[0]},{"t":13.63671875,"s":[100]}],"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[-7.627,-7.691],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Ellipse 1","np":4,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":720,"st":0,"bm":0},{"ddd":0,"ind":3,"ty":4,"nm":"Line","sr":1,"ks":{"o":{"a":1,"k":[{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.333],"y":[0]},"t":19,"s":[0]},{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.333],"y":[0]},"t":32.728,"s":[100]},{"t":46.7275390625,"s":[0]}],"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[260,260,0],"ix":2},"a":{"a":0,"k":[298,298,0],"ix":1},"s":{"a":1,"k":[{"i":{"x":[0,0,0.667],"y":[1,1,1]},"o":{"x":[0.333,0.333,0.333],"y":[0,0,0]},"t":19,"s":[46,46,100]},{"t":46.7275390625,"s":[100,100,100]}],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[-120.208,0],[0,-120.208],[120.207,0],[0,120.208]],"o":[[120.207,0],[0,120.208],[-120.208,0],[0,-120.208]],"v":[[0,-217.655],[217.655,0],[0,217.655],[-217.655,0]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"st","c":{"a":0,"k":[0.180392156863,0.721568627451,0.235294117647,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":8,"ix":5},"lc":1,"lj":1,"ml":10,"bm":0,"nm":"Stroke 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"tr","p":{"a":0,"k":[297.587,298.119],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 1","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":19,"op":720,"st":0,"bm":0},{"ddd":0,"ind":4,"ty":4,"nm":"Shadow","sr":1,"ks":{"o":{"a":1,"k":[{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.333],"y":[0]},"t":11.091,"s":[0]},{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.333],"y":[0]},"t":25.091,"s":[20]},{"t":39.0908203125,"s":[0]}],"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[260,260,0],"ix":2},"a":{"a":0,"k":[298,298,0],"ix":1},"s":{"a":1,"k":[{"i":{"x":[0,0,0.667],"y":[1,1,1]},"o":{"x":[0.333,0.333,0.333],"y":[0,0,0]},"t":11.091,"s":[60,60,100]},{"t":39.0908203125,"s":[100,100,100]}],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[-94.797,0],[0,-94.797],[94.797,0],[0,94.798]],"o":[[94.797,0],[0,94.798],[-94.797,0],[0,-94.797]],"v":[[0,-171.646],[171.646,0],[0,171.646],[-171.646,0]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.180392156863,0.721568627451,0.235294117647,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[297.587,298.119],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 1","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":11,"op":720,"st":0,"bm":0}],"markers":[]}')},3385:function(e,t,n){"use strict";var r,o;n.d(t,"a",(function(){return o})),function(e){e.Pool="Pool",e.Locked="Locked",e.Farming="Farming",e.Liquidity="Liquidity",e.Staked="Staked",e.Deposited="Deposited",e.Vesting="Vesting",e.Governance="Governance",e.Lending="Lending",e.Borrowed="Borrowed",e.Rewards="Rewards"}(r||(r={})),function(e){e.OverviewProtocolDetail="OverviewProtocolDetail"}(o||(o={}))},3407:function(e,t,n){"use strict";var r=n(387),o=n(32),a=n(1105),c=n(2),i=n.n(c),s=n(4246),l=n.n(s),d=n(457),u=n(85),f=n(1),b=n(52),j=n(3135),p=n(75),O=n(142),m=n(300),x=n(43),h=n(176),y=n(362),v=n(742),g=n(125),w=n(426),I=n(234),P=n(1109),k=n(41),_=n(79),S=n(70),C=n(27),T=n.n(C),A=n(508),M=n(3051),D=n(3385),E=n(0),N=function(e){var t=e.name,n=e.value,r=e.itemLength,a=e.accountAllValue,c=e.onPress,i=Object(A.a)(),s=Object(u.a)(),l=Object(f.useMemo)((function(){return n.div(a).multipliedBy(100)}),[n,a]),d=Object(f.useMemo)((function(){return Object(E.jsxs)(E.Fragment,{children:[s?null:Object(E.jsx)(o.a,{mx:"2",my:"auto",w:"1",h:"1",borderRadius:"2px",bg:"text-default"}),Object(E.jsx)(S.a,{typography:{sm:"DisplayLarge",md:"Heading"},children:Object(E.jsx)(M.f,{value:n})})]})}),[n,s]);return Object(E.jsxs)(w.a,{bg:"surface-default",children:[Object(E.jsx)(g.a.Item,{px:"6",py:"4",bg:"surface-subdued",onPress:c,children:Object(E.jsxs)(w.a,{flex:"1",children:[Object(E.jsxs)(I.a,{flex:"1",children:[Object(E.jsxs)(I.a,{flex:"1",alignItems:"center",children:[Object(E.jsx)(o.a,{size:s?6:8,borderRadius:"full",bg:"decorative-icon-one",justifyContent:"center",alignItems:"center",mr:s?"8px":"12px",children:Object(E.jsx)(_.a,{size:s?12:16,color:"icon-on-primary",name:"DatabaseOutline"})}),Object(E.jsx)(k.h.Heading,{children:t}),s?null:d,l.isGreaterThan(0)?Object(E.jsx)(P.a,{title:l.toFixed(2)+"%",size:"lg",ml:"2"}):null]}),Object(E.jsxs)(I.a,{alignItems:"center",children:[Object(E.jsx)(k.h.Body2Strong,{color:"text-subdued",children:r}),Object(E.jsx)(_.a,{size:24,name:"ChevronRightMini"})]})]}),s?d:null]})}),s?null:Object(E.jsxs)(I.a,{mt:"4",px:"6",bg:"surface-default",children:[Object(E.jsx)(k.h.Subheading,{flex:"1",color:"text-subdued",children:i.formatMessage({id:"form__protocols_uppercase"})}),Object(E.jsx)(k.h.Subheading,{flex:"1",color:"text-subdued",children:i.formatMessage({id:"form__claimable_uppercase"})}),Object(E.jsx)(k.h.Subheading,{flex:"1",color:"text-subdued",textAlign:"right",children:i.formatMessage({id:"form__value_uppercase"})})]})]})},B=Object(f.memo)((function(e){var t=e.networkId,n=e.address,r=e.limitSize,o=e.accountId,a=Object(u.a)(),c=Object(h.o)(),i=Object(y.e)(),s=Object(h.h)((function(e){var r,o;return null!=(r=null==(o=e.overview.defi)?void 0:o[t+"--"+n])?r:[]})),l=Object(f.useMemo)((function(){return s.reduce((function(e,t){return e.plus(t.protocolValue)}),new T.a(0)).multipliedBy(i)}),[s,i]),d=Object(h.d)({networkId:t,accountId:o}).value,b=Object(f.useCallback)((function(){c.navigate(O.a.OverviewDefiListScreen,{networkId:t,address:n})}),[c,t,n]);return s.length?Object(E.jsxs)(w.a,{overflow:"hidden",borderColor:"border-subdued",borderWidth:"1px",borderRadius:12,mb:"24",children:[Object(E.jsx)(N,{name:"DeFi",value:l,accountAllValue:d,itemLength:s.length,onPress:b}),s.slice(0,r).map((function(e,r){return Object(E.jsxs)(g.a.Item,{onPress:function(){c.navigate(O.c.Modal,{screen:O.b.Overview,params:{screen:D.a.OverviewProtocolDetail,params:{protocolId:e._id.protocolId,networkId:t,address:n,accountId:o}}})},flex:1,px:"6",py:"4",flexDirection:"row",alignItems:"center",borderTopWidth:0===r?0:"1px",borderTopColor:"divider",children:[Object(E.jsx)(v.c,{flex:"1",size:8,showInfo:!0,infoBoxProps:{flex:1},token:{logoURI:e.protocolIcon,name:e.protocolName}}),a?null:Object(E.jsx)(k.h.Body2Strong,{flex:"1",numberOfLines:2,isTruncated:!0,children:Object(E.jsx)(M.f,{value:0,convertValue:+e.claimableValue})}),Object(E.jsx)(k.h.Body2Strong,{flex:"1",textAlign:"right",numberOfLines:2,isTruncated:!0,children:Object(E.jsx)(M.f,{value:0,convertValue:+e.protocolValue})})]},e._id.protocolId)}))]}):null})),F=n(186),R=n(76),V=n(461),L=n(42),W=n(3703),G=function(e){var t,n,r=e.showTokenCount,a=e.showRoundTop,c=e.borderColor,i=void 0===c?"border-subdued":c,s=e.tokenEnabled,l=Object(A.a)(),d=Object(h.o)(),b=Object(u.a)(),j=Object(L.c)(),p=j.account,m=j.network,x=j.networkId,v=b?"24px":"32px",w=b?12:16,I=b?"12px":"16px",C=Object(h.b)(x,null==p?void 0:p.id,!0),T=Object(f.useMemo)((function(){return r?Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(S.a,{color:"text-subdued",typography:{sm:"Body1Strong",md:"Body2Strong"},children:C.length}),Object(E.jsx)(_.a,{name:"ChevronRightMini",color:"icon-subdued"})]}):s&&Object(E.jsx)(F.a,{size:"sm",borderRadius:17,name:"PlusMini",bg:"action-secondary-default",onPress:function(){return d.navigate(O.c.Modal,{screen:O.b.ManageToken,params:{screen:V.a.Listing}})}})}),[C.length,d,r,s]),D=r?g.a.Item:o.a,N=Object(y.b)(x,null!=(t=null==p?void 0:p.id)?t:"",!0).value,B=Object(h.d)({networkId:x,accountId:null!=(n=null==p?void 0:p.id)?n:""}).value,R=Object(f.useMemo)((function(){return N.div(B).multipliedBy(100)}),[B,N]);return Object(E.jsxs)(D,{p:4,shadow:void 0,borderTopRadius:a?"12px":0,borderTopWidth:a?1:0,borderWidth:1,borderBottomWidth:0,borderColor:i,onPress:r?function(){d.navigate(O.a.FullTokenListScreen,{accountId:null==p?void 0:p.id,networkId:null==m?void 0:m.id})}:void 0,flexDirection:"column",bg:"surface-subdued",children:[Object(E.jsxs)(o.a,{flexDirection:"row",alignItems:"center",justifyContent:"space-between",children:[Object(E.jsx)(o.a,{w:v,h:v,borderRadius:I,bg:"decorative-icon-one",justifyContent:"center",alignItems:"center",mr:b?"8px":"12px",children:Object(E.jsx)(_.a,{size:w,color:"icon-on-primary",name:"DatabaseOutline"})}),Object(E.jsx)(S.a,{typography:{sm:"Body1Strong",md:"Heading"},children:l.formatMessage({id:"asset__tokens"})}),!b&&Object(E.jsxs)(o.a,{flexDirection:"row",alignItems:"center",children:[Object(E.jsx)(o.a,{mx:"8px",my:"auto",w:"4px",h:"4px",borderRadius:"2px",bg:"text-default"}),Object(E.jsx)(S.a,{typography:{sm:"DisplayLarge",md:"Heading"},children:N.isNaN()?" ":Object(E.jsx)(M.f,{decimals:2,value:N})})]}),R.isNaN()?null:Object(E.jsx)(P.a,{title:R.toFixed(2)+"%",size:"lg",ml:"2"}),Object(E.jsx)(o.a,{ml:"auto",flexDirection:"row",alignItems:"center",children:T})]}),Object(E.jsx)(o.a,{mt:b?"8px":"16px",children:b?Object(E.jsx)(S.a,{typography:{sm:"DisplayLarge",md:"Heading"},children:Number.isNaN(N)?" ":Object(E.jsx)(M.f,{decimals:2,value:N})}):Object(E.jsxs)(o.a,{flexDirection:"row",w:"full",children:[Object(E.jsx)(k.h.Subheading,{color:"text-subdued",flex:1,children:l.formatMessage({id:"title__assets"})}),Object(E.jsx)(k.h.Subheading,{ml:"44px",color:"text-subdued",flex:1,textAlign:"right",pr:"6",children:l.formatMessage({id:"content__price_uppercase"})}),Object(E.jsx)(k.h.Subheading,{color:"text-subdued",flex:1,textAlign:"right",children:l.formatMessage({id:"form__value"})})]})})]})},z=function(e){var t,n=e.showInnerHeader,a=e.showTokenCount,c=e.showOuterHeader,i=e.showInnerHeaderRoundTop,s=e.innerHeaderBorderColor,l=Object(A.a)(),d=Object(h.o)(),u=Object(L.c)(),b=u.network,j=u.wallet,p=null!=(t=null==b?void 0:b.settings)?t:{tokenEnabled:!1,activateTokenRequired:!1},m=p.tokenEnabled,x=p.activateTokenRequired,y=Object(f.useMemo)((function(){return((null==j?void 0:j.type)!==R.e||!x)&&m}),[x,m,null==j?void 0:j.type]);return Object(E.jsxs)(E.Fragment,{children:[c&&Object(E.jsxs)(o.a,{flexDirection:"row",justifyContent:"space-between",alignItems:"center",pb:3,children:[Object(E.jsx)(k.h.Heading,{children:l.formatMessage({id:"title__assets"})}),y&&Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(F.a,{onPress:function(){return d.navigate(O.c.Modal,{screen:O.b.ManageToken,params:{screen:V.a.Listing}})},size:"sm",name:"PlusMini",type:"plain",ml:"auto",mr:3}),Object(E.jsx)(F.a,{onPress:W.a,size:"sm",name:"Cog8ToothMini",type:"plain",mr:-2})]})]}),n&&Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(G,{borderColor:s,showRoundTop:i,showTokenCount:a,tokenEnabled:y}),Object(E.jsx)(r.a,{})]})]})};z.displayName="AssetsListHeader";var U=z,H=n(110),q=n(98),K=n(3328),Q=n(3136),J=n(3403),X=n(33);function Y(e){var t=e.network,n=Object(A.a)(),r=Object(h.o)();return Object(E.jsxs)(o.a,{flexDirection:"row",justifyContent:"space-between",children:[Object(E.jsx)(q.a,{flex:1,mr:"16px",alignItems:"flex-start",onPress:function(){var e;r.navigate(X.g.Modal,{screen:X.e.FiatPay,params:{screen:Q.FiatPayRoutes.SupportTokenListModal,params:{networkId:null!=(e=null==t?void 0:t.id)?e:""}}})},children:Object(E.jsxs)(o.a,{py:"24px",flexDirection:"column",alignItems:"center",children:[Object(E.jsx)(o.a,{w:"48px",h:"48px",borderRadius:"24px",bg:"surface-neutral-default",mb:"24px",overflow:"hidden",children:Object(E.jsx)(K.a,{colors:["#64D36F","#33C641"],style:{width:"100%",height:"100%",justifyContent:"center",alignItems:"center"},start:{x:0,y:0},end:{x:1,y:1},children:Object(E.jsx)(_.a,{name:"PlusOutline",color:"icon-on-primary"})})}),Object(E.jsx)(k.h.DisplayMedium,{mb:"4px",textAlign:"center",children:n.formatMessage({id:"action__buy_crypto"})}),Object(E.jsx)(k.h.Body2,{mb:"4px",color:"text-subdued",textAlign:"center",children:n.formatMessage({id:"action__buy_crypto_desc"})})]})}),Object(E.jsx)(q.a,{flex:1,alignItems:"flex-start",onPress:function(){r.navigate(X.g.Modal,{screen:X.e.ManageToken,params:{screen:J.ManageTokenRoutes.Listing}})},children:Object(E.jsxs)(o.a,{py:"24px",flexDirection:"column",alignItems:"center",children:[Object(E.jsx)(H.a,{w:"48px",h:"48px",borderRadius:"24px",bg:"surface-neutral-default",mb:"24px",children:Object(E.jsx)(_.a,{name:"ViewGridAddMini"})}),Object(E.jsx)(k.h.DisplayMedium,{mb:"4px",textAlign:"center",children:n.formatMessage({id:"action__add_tokens"})}),Object(E.jsx)(k.h.Body2,{mb:"4px",color:"text-subdued",textAlign:"center",children:n.formatMessage({id:"action__add_tokens_desc"})})]})})]})}var $=n(3053),Z=function(e){var t=e.borderBottomRadius,n=void 0===t?0:t,r=Object(u.a)();return Object(E.jsxs)(o.a,{p:4,bg:"surface-default",shadow:void 0,borderWidth:1,borderColor:"border-subdued",borderTopWidth:1,borderBottomWidth:1,borderBottomRadius:n,w:"100%",flexDirection:"row",alignItems:"center",children:[Object(E.jsx)($.a,{shape:"Avatar"}),Object(E.jsxs)(o.a,{ml:"12px",flexDirection:"column",flex:1,children:[Object(E.jsx)(o.a,{flexDirection:"row",alignItems:"center",children:Object(E.jsx)($.a,{shape:"Body1"})}),Object(E.jsx)($.a,{shape:"Body2"})]}),!r&&Object(E.jsx)(o.a,{flexDirection:"column",flex:1,alignItems:"flex-end",children:Object(E.jsx)($.a,{shape:"Body2"})}),Object(E.jsx)(o.a,{flexDirection:"column",flex:1,alignItems:"flex-end",children:Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)($.a,{shape:"Body1"}),Object(E.jsx)($.a,{shape:"Body2"})]})})]})},ee=function(){var e=Object(A.a)(),t=Object(u.a)(),n=t?"24px":"32px",r=t?12:16,a=t?"12px":"16px";return Object(E.jsxs)(o.a,{p:4,shadow:void 0,borderWidth:1,borderBottomWidth:0,borderColor:"border-subdued",borderTopRadius:12,flexDirection:"column",children:[Object(E.jsxs)(o.a,{flexDirection:"row",alignItems:"center",justifyContent:"space-between",children:[Object(E.jsx)(o.a,{w:n,h:n,borderRadius:a,bg:"decorative-icon-one",justifyContent:"center",alignItems:"center",mr:t?"8px":"12px",children:Object(E.jsx)(_.a,{size:r,color:"icon-on-primary",name:"DatabaseOutline"})}),t?Object(E.jsx)($.a,{shape:"Body1"}):Object(E.jsx)($.a,{shape:"DisplayLarge"}),Object(E.jsx)(o.a,{ml:"auto",flexDirection:"row",alignItems:"center",children:Object(E.jsx)($.a,{shape:"Body1"})})]}),Object(E.jsx)(o.a,{mt:t?"8px":"16px",children:t?Object(E.jsx)($.a,{shape:"DisplayLarge"}):Object(E.jsxs)(o.a,{flexDirection:"row",w:"full",children:[Object(E.jsx)(k.h.Subheading,{color:"text-subdued",flex:1,children:e.formatMessage({id:"title__assets"})}),Object(E.jsx)(k.h.Subheading,{ml:"44px",color:"text-subdued",flex:1,textAlign:"right",children:e.formatMessage({id:"content__price_uppercase"})}),Object(E.jsx)(k.h.Subheading,{color:"text-subdued",flex:1,textAlign:"right",children:e.formatMessage({id:"form__value"})})]})})]})},te=function(){return Object(E.jsxs)(o.a,{style:{maxWidth:m.f,width:"100%",marginHorizontal:"auto"},children:[Object(E.jsx)(ee,{}),Object(E.jsx)(Z,{}),Object(E.jsx)(Z,{}),Object(E.jsx)(Z,{borderBottomRadius:12})]})};te.displayName="AssetsListSkeleton";var ne=Object(f.memo)(te),re=n(16),oe=n.n(re),ae=n(3082),ce=n(1113),ie=["accountId","networkId","hidePriceInfo","borderTopRadius","borderRadius","borderBottomWidth","borderTopWidth","onPress","borderColor","bg"];function se(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function le(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?se(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):se(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var de=function(e){var t=e.accountId,n=e.networkId,r=e.hidePriceInfo,a=e.borderTopRadius,c=e.borderRadius,i=e.borderBottomWidth,s=e.borderTopWidth,l=e.onPress,d=e.borderColor,b=void 0===d?"border-subdued":d,j=e.bg,p=void 0===j?"surface-default":j,O=oe()(e,ie),m=Object(u.a)(),x=Object(y.k)(n,O.tokenIdOnNetwork).token,w=Object(y.l)({accountId:t,networkId:n,token:le(le({},x),O),fallback:"0"}),I=Object(h.e)({accountId:t,networkId:n}).network,P=(null==x?void 0:x.tokenIdOnNetwork)||"main",_=Object(ae.a)({contractAdress:null==x?void 0:x.tokenIdOnNetwork,networkId:n}),S=Object(ae.b)({contractAdress:null==x?void 0:x.tokenIdOnNetwork,networkId:n}),C=Object(h.h)((function(e){return e.settings.selectedFiatMoneySymbol})),A=Object(ce.c)({priceInfo:_,vsCurrency:C}),D=Object(ce.a)({basePrice:A[C],price:S}),N=D.percentageGain,B=D.gainTextBg,F=D.gainTextColor,R="main"===P?null==I?void 0:I.nativeDisplayDecimals:null==I?void 0:I.tokenDisplayDecimals,V=Object(f.useMemo)((function(){if("undefined"!==typeof w&&"undefined"!==typeof S)return null===S?0:new T.a(w).times(S).toNumber()||0}),[w,S]),L=Object(f.useMemo)((function(){return"undefined"===typeof w?Object(E.jsx)($.a,{shape:"Body2"}):Object(E.jsx)(M.a,{balance:w,suffix:null==x?void 0:x.symbol,formatOptions:{fixed:null!=R?R:4},render:function(e){return Object(E.jsx)(k.h.Body2,{color:"text-subdued",children:e})}})}),[w,R,null==x?void 0:x.symbol]),W=Object(f.useCallback)((function(e){null==l||l(le(le({},e),{},{sendAddress:null==O?void 0:O.sendAddress}))}),[l,null==O?void 0:O.sendAddress]);return x?Object(E.jsxs)(g.a.Item,{p:4,bg:p,shadow:void 0,borderTopRadius:a,borderRadius:c,borderWidth:1,borderColor:b,borderTopWidth:s,borderBottomWidth:i,onPress:function(){return W(x)},w:"100%",flexDirection:"row",alignItems:"center",children:[Object(E.jsx)(o.a,{flex:1,children:Object(E.jsx)(v.c,{flex:"1",size:8,showInfo:!0,token:x,showExtra:!1,description:L,infoBoxProps:{flex:1}})}),!m&&!r&&Object(E.jsx)(o.a,{flexDirection:"column",flex:1,alignItems:"flex-end",children:void 0===S?Object(E.jsx)($.a,{shape:"Body2"}):Object(E.jsx)(k.h.Body2Strong,{children:Object(E.jsx)(M.f,{value:+(S||0)})})}),Object(E.jsx)(o.a,{flexDirection:"column",flex:1,alignItems:"flex-end",children:void 0!==V?Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(k.h.Body2Strong,{w:"100%",textAlign:"right",children:Object(E.jsx)(M.f,{value:V})}),Object(E.jsx)(o.a,{mt:"4px",bg:B,px:"6px",py:"2px",borderRadius:"6px",justifyContent:"center",alignItems:"center",children:Object(E.jsx)(k.h.CaptionStrong,{color:F,children:N})})]}):Object(E.jsx)($.a,{shape:"Body2"})})]}):null};de.displayName="TokenCell";var ue=Object(f.memo)(de);function fe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}t.a=function(e){var t=e.showRoundTop,n=e.singleton,c=e.hidePriceInfo,s=e.ListHeaderComponent,v=e.ListFooterComponent,g=e.contentContainerStyle,w=e.onTokenPress,I=e.limitSize,P=e.flatStyle,k=e.accountId,_=e.networkId,S=e.renderDefiList,C=Object(u.a)(),T=Object(y.a)(_,k),A=Object(h.b)(_,k,!0),M=Object(f.useMemo)((function(){return I?A.slice(0,I):A}),[A,I]),D=Object(h.e)({accountId:k,networkId:_}),N=D.account,F=D.network,R=Object(b.u)(),V=Object(d.a)().size;Object(b.s)(Object(f.useCallback)((function(){var e=x.a.serviceToken,t=x.a.serviceOverview;return N&&F&&(e.startRefreshAccountTokens(),t.startQueryPendingTasks(),e.fetchAccountTokens({activeAccountId:N.id,activeNetworkId:F.id})),function(){e.stopRefreshAccountTokens(),t.stopQueryPendingTasks()}}),[N,F])),Object(f.useEffect)((function(){N&&F&&x.a.serviceOverview.subscribe()}),[N,F]);var L=Object(f.useCallback)((function(e){var t,n;if(w)w({token:e});else{var r=e.tokenIdOnNetwork?void 0:function(e){return e.txType===p.a.NATIVE_TRANSFER};R.navigate(O.a.ScreenTokenDetail,{accountId:null!=(t=null==N?void 0:N.id)?t:"",networkId:null!=_?_:"",tokenId:null!=(n=e.tokenIdOnNetwork)?n:"",sendAddress:e.sendAddress,historyFilter:r})}}),[null==N?void 0:N.id,_,R,w]),W=n?a.b:j.Tabs.FlatList,G=Object(f.useMemo)((function(){var e;return Object(E.jsxs)(o.a,{children:[v,S?Object(E.jsx)(B,{networkId:_,accountId:k,address:null!=(e=null==N?void 0:N.address)?e:"",limitSize:I}):null]})}),[v,_,k,null==N?void 0:N.address,S,I]);return Object(E.jsx)(W,{style:{maxWidth:m.f,width:"100%",marginHorizontal:"auto",alignSelf:"center"},contentContainerStyle:[{paddingHorizontal:P?0:["NORMAL","LARGE"].includes(V)?32:16,marginTop:24},g],data:M.slice(0,I),renderItem:function(e){var n=e.item,r=e.index;return Object(E.jsx)(ue,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fe(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({networkId:_,accountId:k,hidePriceInfo:c,bg:P?"transparent":"surface-default",borderTopRadius:!P&&t&&0===r?"12px":0,borderRadius:P||r!==(null==M?void 0:M.length)-1?"0px":"12px",borderTopWidth:!P&&t&&0===r?1:0,borderBottomWidth:r===(null==M?void 0:M.length)-1?1:0,borderColor:P?"transparent":"border-subdued",onPress:L},l()(n,"source")))},ListHeaderComponent:T?null:null!=s?s:Object(E.jsx)(U,{innerHeaderBorderColor:P?"transparent":"border-subdued",showTokenCount:void 0!==I,showOuterHeader:void 0!==I,showInnerHeader:M.length>0,showInnerHeaderRoundTop:!P}),ItemSeparatorComponent:r.a,ListEmptyComponent:T?ne:function(){return Object(E.jsx)(Y,{network:F})},ListFooterComponent:G,keyExtractor:function(e){var t;return e.tokenIdOnNetwork+"--"+(null!=(t=e.sendAddress)?t:"")},extraData:C,showsVerticalScrollIndicator:!1})}},3411:function(e,t,n){"use strict";n.d(t,"a",(function(){return K}));var r=n(163),o=n(2),a=n.n(o),c=n(3),i=n.n(c),s=n(10),l=n.n(s),d=n(1),u=n(4228),f=n.n(u),b=n(259),j=n(750),p=n(746),O=n(22),m=n(15),x=n(43),h=n(177),y=n(33),v=n(56),g=n(565),w=n(773),I=n.n(w),P=n(6),k=n.n(P),_=n(9),S=n.n(_),C=n(12),T=n.n(C),A=n(5),M=n.n(A),D=n(185),E=n(21),N=n(1933),B=n(152),F=n(1070);function R(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=M()(e);if(t){var o=M()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return T()(this,n)}}var V=new F.a({storageId:F.a.STORAGE_IDS.DAPP_SIDE}),L=B.d,W=function(e){S()(n,e);var t=R(n);function n(e){var n;return(n=t.call(this,I()({sessionStorage:V,clientMeta:L},e))).isWalletSide=!1,n.accountId="",n._autoOpenWalletAppListener=function(){var e=i()((function*(e){var t;e.payload&&null!=(t=n.connector)&&t.peerMeta&&n.walletService&&(yield Object(v.g)(B.k),yield g.a.dappOpenWalletApp({walletService:n.walletService}))}));return function(t){return e.apply(this,arguments)}}(),n.saveAccountSession=function(){var e=i()((function*(e){var t,r=e.accountId,o=e.session,a=x.a.serviceWalletConnect;n.walletService||(n.walletService=yield a.findWalletServiceBySession({session:o})),O.a.walletConnect.info("saveExternalAccountSession",r,o.peerMeta,null==(t=n.walletService)?void 0:t.homepage),yield a.saveWalletConnectSessionOfAccount({accountId:r,session:o,walletService:n.walletService})}));return function(t){return e.apply(this,arguments)}}(),n.handleAccountSessionUpdate=function(){var e=i()((function*(e){var t=e.connector;n.accountId&&null!=t&&t.session&&(yield n.saveAccountSession({accountId:n.accountId,session:null==t?void 0:t.session}))}));return function(t){return e.apply(this,arguments)}}(),n}var r=n.prototype;return r.sendTestingRequest=function(){var e=i()((function*(){if(yield Object(v.g)(3500),this.connector){var e=this.connector._formatRequest({method:"wc_sessionRequest",params:[{peerId:this.connector.clientId,peerMeta:this.connector.clientMeta,chainId:null}]});this.connector.handshakeId=e.id,yield this.connector._sendSessionRequest(e,"Session update rejected",{topic:this.connector.handshakeTopic}),yield this.connector.updateChain({chainId:56,networkId:137,rpcUrl:"",nativeCurrency:{name:"",symbol:""}})}}));return function(){return e.apply(this,arguments)}}(),r.cleanPrevConnection=function(){this.offAllEvents(),this.connector&&(this.unregisterEvents(this.connector),this.connector.transportClose(),this.connector._connected=!1,this.connector=void 0),this.walletService=void 0,this.accountId=""},r.connect=function(){var e=i()((function*(e){return this.cleanPrevConnection(),yield this.autoConnectLastSession(e),this.addAutoOpenWalletListener(),this.connector&&this.connector.connected?{peerId:this.connector.peerId,peerMeta:this.connector.peerMeta,chainId:this.connector.chainId,accounts:this.connector.accounts}:this.connectNewSession(e)}));return function(t){return e.apply(this,arguments)}}(),r.connectNewSession=function(){var e=i()((function*(e){var t=this;if(!e.qrcodeModal)throw new Error(D.i);this.cleanPrevConnection();yield this.createConnector(e,{shouldDisconnectStorageSession:!1});return this.addAutoOpenWalletListener(),new Promise((function(e,n){if(!t.connector)return n(new Error("WalletConnect Error: connector not ready yet."));t.connector.on(t.EVENT_NAMES.modal_closed,(function(){return n(new E.s(D.j))})),t.connector.on(t.EVENT_NAMES.connect,(function(t,r){var o;if(t)return n(t);e(null==r||null==(o=r.params)?void 0:o[0])})),t.connector.on(t.EVENT_NAMES.disconnect,(function(e,t){var r,o,a=(null==e?void 0:e.message)||(null==t||null==(r=t.params)||null==(o=r[0])?void 0:o.message)||"Session Disconnected";n(new Error(a))}))}))}));return function(t){return e.apply(this,arguments)}}(),r.offAllEvents=function(){this._offAccountSessionChanged(),this._offAutoOpenWalletApp()},r._offAccountSessionChanged=function(){this.off(this.EVENT_NAMES.connect,this.handleAccountSessionUpdate),this.off(this.EVENT_NAMES.session_update,this.handleAccountSessionUpdate),this.off(this.EVENT_NAMES.disconnect,this.handleAccountSessionUpdate)},r._offAutoOpenWalletApp=function(){this.off(this.EVENT_NAMES.call_request_sent,this._autoOpenWalletAppListener)},r.addAutoOpenWalletListener=function(){this.connector&&(this._offAutoOpenWalletApp(),this.on(this.EVENT_NAMES.call_request_sent,this._autoOpenWalletAppListener))},r.watchAccountSessionChanged=function(e){var t=e.accountId;O.a.walletConnect.info("watchAccountSessionChanged",t),this.accountId=t,this._offAccountSessionChanged(),this.on(this.EVENT_NAMES.connect,this.handleAccountSessionUpdate),this.on(this.EVENT_NAMES.session_update,this.handleAccountSessionUpdate),this.on(this.EVENT_NAMES.disconnect,this.handleAccountSessionUpdate)},k()(n)}(N.a);function G(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?G(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var U,H=Object.freeze({visible:!1,uri:void 0,cb:void 0});function q(){return U||(U=new W),U}function K(){var e=x.a.serviceWalletConnect,t=Object(d.useState)(H),n=l()(t,2),o=(n[0],n[1]),a=Object(d.useRef)(),c=Object(h.a)(),s=Object(j.a)({fallbackToHome:!1}),u=Object(d.useRef)(),w=Object(d.useCallback)(function(){var e=i()((function*(e,t){if("string"!==typeof t||!t.length)return Promise.reject(new Error("Invalid uri."));var n=g.a.buildConnectWalletAppUrl({uri:t,walletService:e});O.a.walletConnect.info("connectToWalletService",{uri:t,connectionUrl:n,walletServiceUrl:null==e?void 0:e.homepage});try{m.a.isNative&&(yield Object(v.g)(B.k));var r=!1,o=n;if(m.a.isNativeAndroid)try{o=t,r=yield b.a.canOpenURL(o)}catch(a){O.a.common.error(a)}if(!r)try{o=n,r=yield b.a.canOpenURL(o)}catch(a){O.a.common.error(a)}if(O.a.walletConnect.info("Linking.openURL(connectionUrl)",{openConnectionUrl:o,canOpenURL:r}),m.a.isDev&&Object(p.a)(o),u.current=e,!r){if(m.a.isNativeAndroid)throw b.a.openURL("https://walletconnect.org/wallets"),new Error("No wallets found.");throw new Error("Unable to open deeplink url, make sure you have added scheme to LSApplicationQueriesSchemes in your iOS Info.plist and the target Apps is installed. >>>> "+o)}return m.a.isNativeAndroid,(yield Promise.all([b.a.openURL(o)]))&&void 0}catch(a){return O.a.common.error(a),Promise.reject(a)}}));return function(t,n){return e.apply(this,arguments)}}(),[]),I=Object(d.useRef)(!1),P=Object(d.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(e.walletServiceForConnectDirectly,e.shouldCloseCurrentModal);I.current||(O.a.walletConnect.info("useWalletConnectQrcodeModal onDismiss closed"),I.current=!0,t&&s(),o((function(e){var t=e.cb;return setTimeout((function(){"function"===typeof t&&t&&t()}),0),{visible:!1,uri:void 0,cb:void 0}})))}),[s]),k=Object(d.useCallback)((function(){P({shouldCloseCurrentModal:!1}),i()((function*(){}))()}),[P]),_=Object(d.useCallback)(i()((function*(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.walletServiceForConnectDirectly;return yield Object(v.g)(0),B.i?{open:function(){var e=i()((function*(e,n,a){if(O.a.walletConnect.info("qrcodeModalNative Open >>>>>>>>>>>>>> ",{uri:e,opt:a}),I.current=!1,m.a.isNativeAndroid){if(yield Object(v.g)(B.k),!(yield b.a.canOpenURL(e)))throw r.a.show({title:"WalletConnect compatible wallets App not found in your device."},{type:"error"}),yield b.a.openURL(B.s),new Error("No wallets found.");yield b.a.openURL(e)}else t?yield w(t,e):c.navigate(y.g.Modal,{screen:y.e.CreateWallet,params:{screen:y.b.WalletConnectQrcodeModal,params:{connectToWalletService:w,uri:e,onDismiss:k,shouldRenderQrcode:!1}}}),o({visible:!1,uri:e,cb:n})}));return function(t,n,r){return e.apply(this,arguments)}}(),close:function(){P({walletServiceForConnectDirectly:t,shouldCloseCurrentModal:!t})}}:z(z({},f.a),{},{close:function(){f.a.close.apply(f.a,arguments)}})})),[P,w,c,k]);return{connectToWallet:Object(d.useCallback)(i()((function*(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.isNewSession,o=void 0!==r&&r,c=n.session,i=n.walletService,s=n.accountId,l=q();a.current=l,u.current=void 0;var d,f=yield _({walletServiceForConnectDirectly:i});o?(O.a.walletConnect.info("connect NEW session: ",{walletServiceUrl:null==i?void 0:i.homepage}),d=yield l.connectNewSession({qrcodeModal:f})):(O.a.walletConnect.info("connect EXISTS session: ",{sessionPeerMeta:null==c?void 0:c.peerMeta,walletServiceUrl:null==i?void 0:i.homepage}),d=yield l.connect({session:c,qrcodeModal:f,walletService:i}));var b,j=null==(t=l.connector)?void 0:t.session;m.a.isNativeAndroid?l.walletService=i:l.walletService=null!=(b=u.current)?b:i;!l.walletService&&j&&(l.walletService=yield e.findWalletServiceBySession({session:j}));var p=l.walletService;return s&&(l.watchAccountSessionChanged({accountId:s}),j&&(yield l.saveAccountSession({accountId:s,session:j}))),O.a.walletConnect.info("connectToWallet result >>>>> ",{status:d,walletServiceUrl:null==p?void 0:p.homepage}),{status:d,session:j,client:l,walletService:p}})),[_,e]),clientRef:a}}},3495:function(e,t,n){e.exports=n.p+"static/media/MoonPay.6aa29168.png"},3559:function(e,t,n){"use strict";n.d(t,"b",(function(){return H}));var r=n(70),o=n(3),a=n.n(o),c=n(32),i=n(98),s=n(2),l=n.n(s),d=n(558),u=n(1105),f=n(10),b=n.n(f),j=n(85),p=n(1),O=n(52),m=n(508),x=n(957),h=n(14),y=n(15),v=n(43),g=n(176),w=n(1117),I=n(33),P=n(142),k=n(125),_=n(16),S=n.n(_),C=n(79),T=n(4420),A=n(3075),M=n(0);function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var N=Object(p.createContext)(null);function B(e){var t=e.children,n=e.listData,r=e.multiSelect,o=Object(p.useState)({multiSelect:!1,listData:[]}),a=b()(o,2),c=a[0],i=a[1];Object(p.useEffect)((function(){i((function(e){return E(E({},e),{},{listData:n,multiSelect:r})}))}),[r,n]);var s=Object(p.useMemo)((function(){return{context:c,setContext:i}}),[c]);return Object(M.jsx)(N.Provider,{value:s,children:t})}function F(){return Object(p.useContext)(N)}var R=["accountId","networkId","cardWidth","asset"];function V(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function L(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function W(e){var t=e.multiSelect,n=e.selected,r=e.width;return!1===t&&!1===n?null:Object(M.jsx)(c.a,{borderRadius:"full",justifyContent:"center",alignItems:"center",bgColor:"icon-on-primary",size:r+"px",children:n&&Object(M.jsx)(T.a,{from:{scale:0},animate:{scale:1},transition:{type:"timing",duration:150},children:Object(M.jsx)(C.a,{name:"CheckCircleMini",color:"interactive-default",size:r})})})}var G=Object(p.memo)((function(e){var t=e.accountId,n=e.networkId,o=e.cardWidth,a=e.asset,i=S()(e,R),s=F(),l=Object(g.e)({accountId:t,networkId:n}).networkImpl,d=null==s?void 0:s.context.multiSelect,u=Object(p.useCallback)((function(){null==s||s.setContext((function(e){var t=e.listData,n=a.selected,r=t.map((function(e){return l===h.C&&e.contractAddress===a.contractAddress&&e.tokenId===a.tokenId||l===h.G&&e.tokenAddress&&e.tokenAddress===a.tokenAddress?L(L({},e),{},{selected:!e.selected}):!1!==d||n?e:L(L({},e),{},{selected:!1})}));return L(L({},e),{},{listData:r})}))}),[a,s,d,l]);return Object(M.jsx)(c.a,L(L({mb:"16px"},i),{},{children:Object(M.jsx)(k.a,{flexDirection:"column",width:o,onPress:u,children:function(e){var t,n,i=e.isHovered,s=e.isPressed;return Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(T.a,{animate:{opacity:i||s?.8:1},transition:{type:"timing",duration:150},children:Object(M.jsx)(A.a,{asset:a,borderRadius:"12px",size:o})}),Object(M.jsx)(r.a,{typography:"Body2Strong",numberOfLines:2,mt:"8px",children:null!=(t=null!=(n=a.name)?n:a.collection.contractName)?t:""}),Object(M.jsx)(c.a,{position:"absolute",right:"6px",top:"6px",children:Object(M.jsx)(W,{multiSelect:d,selected:a.selected,width:20})})]})}})}))}));function z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function U(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function H(e){var t=e.maxCardWidth,n=e.pageWidth,r=e.numColumns,o=e.margin,a=Object(j.a)();return Object(p.useMemo)((function(){var e,c;return 0===n?{cardWidth:t,numColumns:r}:(a?(c=r,e=Math.floor((n-o*(r-1))/r)):(c=Math.floor((n+o)/(t+o)),e=Math.floor((n-o*(c-1))/c)),{cardWidth:e,numColumns:c})}),[a,o,t,r,n])}function q(e){var t,n=e.accountId,r=e.networkId,o=F(),a=(null!=(t=null==o?void 0:o.context)?t:{listData:[]}).listData,c=Object(p.useState)(0),i=b()(c,2),s=i[0],l=i[1],d=H({maxCardWidth:112,numColumns:3,margin:8,pageWidth:s}),f=d.cardWidth,j=d.numColumns,O=Object(p.useCallback)((function(e){var t,o=e.item;return Object(M.jsx)(G,{accountId:n,networkId:r,cardWidth:f,marginRight:"8px",asset:o},null!=(t=o.tokenId)?t:o.tokenAddress)}),[n,f,r]);return Object(M.jsx)(u.b,{onLayout:function(e){s!==e.nativeEvent.layout.width&&l(e.nativeEvent.layout.width)},numColumns:j,data:a,renderItem:O,showsVerticalScrollIndicator:!1,py:"24px"},j)}function K(e){var t,n=e.accountId,r=e.networkId,o=F(),a=Object(d.a)().bottom,s=Object(m.a)(),l=Object(O.u)(),u=null!=(t=null==o?void 0:o.context.listData)?t:[],f=null==o?void 0:o.context.multiSelect;if(0===u.length)return null;var b=u.filter((function(e){return!0===e.selected})),j=0===b.length,p=b.map((function(e){var t,n,r;return{from:"",to:"",isNFT:!0,amount:null!=(t=e.amount)?t:"1",token:null!=(n=e.contractAddress)?n:e.tokenAddress,tokenId:null!=(r=e.tokenId)?r:e.tokenAddress,type:e.ercType}}));return Object(M.jsx)(c.a,{pt:"16px",pb:{base:16+a+"px",md:"24px"},children:Object(M.jsx)(i.a,{isDisabled:j,size:y.a.isNative?"xl":"lg",type:"primary",onPress:function(){var e=U(U({},p[0]),{},{accountId:n,networkId:r,transferInfos:p});l.navigate(P.c.Modal,{screen:P.b.Send,params:{screen:I.h.PreSendAddress,params:e}})},children:f&&b.length>0?s.formatMessage({id:"action__send_count_nfts"},{count:b.length}):s.formatMessage({id:"action__send_nft"})})})}t.a=function(e){var t=e.accountId,n=e.networkId,o=Object(p.useState)([]),i=b()(o,2),s=i[0],l=i[1],d=Object(m.a)(),u=Object(g.e)({accountId:t,networkId:n}).account,f=Object(g.q)({networkId:n}).network,j=Boolean(f&&(x.a[f.id]||f.impl===h.G)),O=Object(p.useMemo)((function(){return s.map((function(e){return e.assets})).flat().map((function(e){return U(U({},e),{},{selected:!1})}))}),[s]),y=v.a.serviceNFT,I=Object(w.a)(),P=Object(p.useCallback)(a()((function*(){return u&&n?yield y.fetchNFT({accountId:u.address,networkId:n}):[]})),[u,n,y]);return Object(p.useEffect)((function(){a()((function*(){if(u&&n){var e=yield y.getLocalNFTs({networkId:n,accountId:u.address});I.current&&l(e);var t=yield P();I.current&&l(t)}}))()}),[u,P,I,n,y]),O.length>0?Object(M.jsxs)(B,{listData:O,multiSelect:j,children:[Object(M.jsx)(q,{accountId:t,networkId:n}),Object(M.jsx)(K,{accountId:t,networkId:n})]}):Object(M.jsxs)(c.a,{flex:1,justifyContent:"center",alignItems:"center",children:[Object(M.jsx)(r.a,{typography:"Display2XLarge",fontSize:48,lineHeight:60,children:"\ud83d\uddbc\ufe0f"}),Object(M.jsx)(r.a,{typography:"DisplayMedium",mt:"12px",children:d.formatMessage({id:"empty__no_nfts"})})]})}},3702:function(e,t){},3705:function(e,t,n){"use strict";var r=n(4251);n.d(t,"a",(function(){return r.a}))},3780:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var r=n(6),o=n.n(r),a=n(152),c=n(10),i=n.n(c),s=n(4231),l=n(4237);var d={createConnector:function(){var e=Object(s.initializeConnector)((function(e){return new l.MetaMask({actions:e})})),t=i()(e,3);return{connector:t[0],hooks:t[1],store:t[2]}}},u=function(){function e(e){var t=e.connector,n=e.hooks,r=e.store;this.connector=t,this.hooks=n,this.store=r}return o()(e,[{key:"isActivating",get:function(){var e=this.store.getState(),t=e.activating;e.chainId,e.accounts;return Boolean(t)}},{key:"isActive",get:function(){var e=this.store.getState(),t=e.chainId,n=e.activating,r=e.accounts;return Boolean(t&&r&&!n)}},{key:"isConnected",get:function(){var e=this.store.getState(),t=e.chainId,n=e.accounts;e.activating;return Boolean(t&&n&&n.length)}},{key:"connectedAccount",get:function(){var e=this.store.getState(),t=(e.chainId,e.accounts);e.activating;return null==t?void 0:t[0]}}]),e}(),f={};function b(e){var t=e.name;return f[t]||(f[t]=function(e){var t=e.name;if(t===a.t.MetaMask)return new u(d.createConnector());throw new Error("createInjectedConnectorByName ERROR: wallet name not supported. name="+t)}({name:t})),f[t]}},4243:function(e,t,n){e.exports=n.p+"static/media/logo_imtoken.3d2301dd.png"},4252:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAMAAADVRocKAAAAP1BMVEUAAAAAuBIAtxMAuBIAuBMAuBIArxAAthIAtxQAuRIAtxAAuBIAtxAAvxAAuBIAuRMAuBEAuRIAuRQAuBIAuBIHG4zcAAAAFHRSTlMAoGDfv4AQkEDvINBAEHBQMK+Pj3Lqxa4AAAFGSURBVGje7dfRcoIwEIXhTXZJSLAINu//rO2024wI9EJOOmXc/85c5BsXjZFK4wwwwAADDDDAACTA/j7BA47uc3jg0hhgagy41sClMcDUGEjuOzCwzgADDDDAAATgND7hvehvAI6+/2xsNCLXU21ycEAmWpQZC3S0qkMBuv+zAj21vwoowNFODgNwJi13wiyxvn5LEMDrduG9aLc6JATAP/sPpTaE+haOA25r4KKLEQDo1d1vrvYAQKchy1XRGR0HWHfacfkwIDqLnckNKOD6uH7VyR0GBj2gm72D9PszSP//U1Sum0950kcD/CbHrQPcAYAUqrBCM+Q07UjzrOQIPU1LylSJKHP0gbQM+kUT2mkAAeVGm3XnuVWUMmd6KMzYmx17WtRDb3ZKBNLCKG2u7xJH78cop/1/YMBXBhhgQCkGGPCKwAc8DpK1vVrr8wAAAABJRU5ErkJggg=="},4255:function(e,t,n){e.exports=n.p+"static/media/red_x.c8d26966.png"}}]);