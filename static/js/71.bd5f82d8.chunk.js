(this.webpackJsonp=this.webpackJsonp||[]).push([[71],{3062:function(e,t,n){"use strict";n.d(t,"a",(function(){return w.a}));var a=n(41),r=n(326),i=n(32),o=n(3),s=n.n(o),c=n(163),l=n(10),u=n.n(l),d=n(1),f=n(52),b=n(508),j=n(76),h=n(43),g=n(42),m=n(151),p=n(22),O=n(110),v=n(15),x=n(176),w=n(648),y=n(747),A=n(98),M=n(200),_=n(1125),I=n.n(_),C=n(745),S=n(3088),P=n(328),k=n(1124),B=n(0),E=function(e){var t=e.onOk,n=e.hideTitle,r=Object(b.a)(),o=Object(d.useRef)(),c=Object(g.d)((function(e){return e.settings.enableLocalAuthentication})),l=Object(C.a)({mode:"onBlur",reValidateMode:"onBlur",defaultValues:{password:""}}),u=l.control,f=l.handleSubmit,j=l.setError,m=Object(S.a)({useFormReturn:l,revalidate:!1,clearErrorIfEmpty:!0}).formValues,p=f(function(){var e=s()((function*(e){(yield h.a.serviceApp.verifyPassword(e.password))?null==t||t(e.password,!1):j("password",{message:r.formatMessage({id:"msg__wrong_password"})})}));return function(t){return e.apply(this,arguments)}}()),v=Object(d.useMemo)((function(){return I()(p,1e3,{trailing:!1})}),[p]),x=Object(d.useCallback)((function(e){null==t||t(e,!0)}),[t]);return Object(d.useEffect)((function(){c?Object(P.b)().then((function(e){e||setTimeout((function(){var e;return null==(e=o.current)?void 0:e.focus()}),100)})):setTimeout((function(){var e;return null==(e=o.current)?void 0:e.focus()}),100)}),[]),Object(B.jsxs)(y.a,{px:{base:n?0:4,md:0},children:[n?null:Object(B.jsxs)(i.a,{mb:"8",children:[Object(B.jsx)(a.h.DisplayLarge,{textAlign:"center",mb:2,children:r.formatMessage({id:"Verify_Password"})}),Object(B.jsx)(a.h.Body1,{textAlign:"center",color:"text-subdued",children:r.formatMessage({id:"Verify_password_to_continue"})})]}),Object(B.jsxs)(M.a,{children:[Object(B.jsx)(M.a.Item,{name:"password",defaultValue:"",control:u,rules:{minLength:{value:8,message:r.formatMessage({id:"msg__password_validation"})},maxLength:{value:128,message:r.formatMessage({id:"msg__password_validation"})}},children:Object(B.jsx)(M.a.PasswordInput,{ref:o,onSubmitEditing:p})}),Object(B.jsx)(A.a,{isDisabled:!(null!=m&&m.password),type:"primary",size:"xl",onPress:v,children:r.formatMessage({id:"action__continue",defaultMessage:"Continue"})})]}),Object(B.jsx)(O.a,{mt:"8",children:Object(B.jsx)(k.a,{onOk:x})})]})},T=function(e){var t=e.field,n=e.onOk,a=e.hideTitle,i=Object(d.useState)(!1),o=u()(i,2),c=o[0],l=o[1],f=Object(d.useState)(!1),b=u()(f,2),j=b[0],g=b[1],m=Object(d.useState)(),p=u()(m,2),y=p[0],A=p[1],M=Object(x.h)((function(e){return e.settings.validationSetting})),_=Object(d.useMemo)((function(){var e=!!t&&!(null==M||!M[t]);return!(!t||t!==w.a.Secret)||e}),[M,t]);Object(d.useEffect)((function(){function e(){return(e=s()((function*(){var e=yield h.a.servicePassword.getPassword();e&&(g(!0),v.a.isNative?setTimeout((function(){return null==n?void 0:n(e,!1)}),500):null==n||n(e,!1)),A(!!e),l(!0)}))).apply(this,arguments)}_||function(){e.apply(this,arguments)}()}),[]);var I=Object(d.useCallback)(function(){var e=s()((function*(e,t){g(!0),yield h.a.servicePassword.savePassword(e),null==n||n(e,t)}));return function(t,n){return e.apply(this,arguments)}}(),[n]);if(!j){if(_)return Object(B.jsx)(E,{onOk:I,hideTitle:a});if(c&&!y)return Object(B.jsx)(E,{onOk:I,hideTitle:a})}return Object(B.jsx)(O.a,{w:"full",h:"full",children:Object(B.jsx)(r.b,{size:"lg"})})},V=function(e){var t=e.onOk,n=e.skipSavePassword,r=e.hideTitle,o=e.isAutoHeight,l=Object(b.a)(),u=Object(x.l)().isOk,f=Object(x.h)((function(e){return e.status.boardingCompleted})),j=Object(x.h)((function(e){return e.status.authenticationType})),g=Object(C.a)({mode:"onBlur",reValidateMode:"onBlur",defaultValues:{password:"",confirmPassword:""}}),m=g.control,p=g.handleSubmit,O=g.getValues,v=Object(S.a)({useFormReturn:g,revalidate:!1,clearErrorIfEmpty:!0}).formValues,w=Object(d.useMemo)((function(){return!(null!=v&&v.password)||!(null!=v&&v.confirmPassword)}),[null==v?void 0:v.confirmPassword,null==v?void 0:v.password]),_=Object(d.useCallback)(function(){var e=s()((function*(e){e.password===e.confirmPassword?(f&&!n&&(yield h.a.serviceApp.updatePassword("",e.password)),null==t||t(e.password,e.withEnableAuthentication)):c.a.show({title:l.formatMessage({id:"msg__password_needs_to_be_the_same"})},{type:"error"})}));return function(t){return e.apply(this,arguments)}}(),[f,n,t,l]),I="FACIAL"===j?l.formatMessage({id:"content__face_id"}):l.formatMessage({id:"content__touch_id"});return Object(B.jsxs)(y.a,{h:o?{base:"full",sm:"auto"}:"full",px:{base:r?0:4,md:0},children:[r?null:Object(B.jsxs)(i.a,{mb:"8",children:[Object(B.jsxs)(a.h.DisplayLarge,{textAlign:"center",mb:2,children:["\ud83d\udd10"," ",l.formatMessage({id:"title__set_password",defaultMessage:"Set Password"})]}),Object(B.jsx)(a.h.Body1,{textAlign:"center",color:"text-subdued",children:l.formatMessage({id:"Only_you_can_unlock_your_wallet",defaultMessage:"Only you can unlock your wallet"})})]}),Object(B.jsxs)(M.a,{children:[Object(B.jsx)(M.a.Item,{name:"password",defaultValue:"",control:m,rules:{minLength:{value:8,message:l.formatMessage({id:"msg__password_validation"})},maxLength:{value:128,message:l.formatMessage({id:"msg__password_validation"})},validate:function(e){var t=O("confirmPassword");if(t&&e)return t!==e?l.formatMessage({id:"msg__password_needs_to_be_the_same"}):void 0}},children:Object(B.jsx)(M.a.PasswordInput,{autoFocus:!0,onSubmitEditing:p(_),placeholder:l.formatMessage({id:"form__rule_at_least_int_digits"},{0:8})})}),Object(B.jsx)(M.a.Item,{name:"confirmPassword",defaultValue:"",control:m,rules:{minLength:{value:8,message:l.formatMessage({id:"msg__password_validation"})},validate:function(e){var t=O("password");if(t&&e)return t!==e?l.formatMessage({id:"msg__password_needs_to_be_the_same"}):void 0}},children:Object(B.jsx)(M.a.PasswordInput,{onSubmitEditing:p(_),placeholder:l.formatMessage({id:"Confirm_password"})})}),u?Object(B.jsx)(M.a.Item,{name:"withEnableAuthentication",defaultValue:u,control:m,children:Object(B.jsx)(M.a.CheckBox,{title:l.formatMessage({id:"content__authentication_with"},{0:I})})}):null,Object(B.jsx)(A.a,{type:"primary",size:"xl",onPress:p(_),isDisabled:w,children:l.formatMessage({id:"action__continue",defaultMessage:"Continue"})})]})]})};t.b=Object(d.memo)((function(e){var t=e.children,n=e.skipSavePassword,o=e.field,l=e.walletId,O=e.hideTitle,v=e.isAutoHeight,x=Object(f.u)(),w=Object(g.i)(l),y=Object(b.a)(),A=h.a.engine,M=h.a.serviceHardware,_=Object(d.useState)(),I=u()(_,2),C=I[0],S=I[1],P=Object(d.useState)(""),k=u()(P,2),E=k[0],W=k[1],D=Object(d.useState)(),R=u()(D,2),z=R[0],L=R[1],G=Object(d.useState)(),F=u()(G,2),N=F[0],U=F[1],Y=Object(g.f)().isPasswordSet,H=Object(d.useState)(Y),Z=u()(H,1)[0],Q=Object(d.useCallback)((function(e,t){U(t),W(e)}),[]),J=Object(d.useCallback)((function(e,t){L(t),W(e)}),[]),K=Object(d.useCallback)((function(){null!=x&&null!=x.canGoBack&&x.canGoBack()&&x.goBack()}),[x]),X="hw"===(null==w?void 0:w.type),q=(null==w?void 0:w.type)===j.a;return Object(d.useEffect)((function(){function e(){c.a.show({title:y.formatMessage({id:"action__connection_timeout"})}),K()}function t(){return(t=s()((function*(){if(null!=w&&w.id){var t=yield A.getHWDeviceByWalletId(w.id);if(t){var n=null;try{var a=yield M.getFeatursByWalletId(w.id);a?(n=a,p.a.hardwareSDK.debug("use features cache: ",a)):n=yield M.getFeatures(t.mac)}catch(r){return K(),void m.a.showErrorToast(r)}if(!n)return c.a.show({title:y.formatMessage({id:"action__connection_timeout"})}),void K();S(n)}else e()}else e()}))).apply(this,arguments)}X&&function(){t.apply(this,arguments)}()}),[X,A,null==w?void 0:w.id,y,K,M]),q?Object(B.jsx)(i.a,{flex:1,children:t(E,{withEnableAuthentication:z,isLocalAuthentication:N})}):E?Object(B.jsx)(i.a,{w:"full",h:"full",children:t(E,{withEnableAuthentication:z,isLocalAuthentication:N})}):X?C?Object(B.jsx)(i.a,{w:"full",h:"full",children:t(E,{withEnableAuthentication:z,isLocalAuthentication:N,deviceFeatures:C})}):Object(B.jsxs)(i.a,{h:"100%",justifyContent:"center",alignItems:"center",children:[Object(B.jsx)(r.b,{size:"lg"}),Object(B.jsx)(a.h.DisplayMedium,{mt:6,children:y.formatMessage({id:"modal__device_status_check"})})]}):Z?Object(B.jsx)(T,{onOk:Q,field:o,hideTitle:O}):Object(B.jsx)(V,{onOk:J,skipSavePassword:n,hideTitle:O,isAutoHeight:v})}))},3076:function(e,t,n){"use strict";n.d(t,"b",(function(){return S})),n.d(t,"d",(function(){return B})),n.d(t,"a",(function(){return E}));var a=n(2),r=n.n(a),i=n(16),o=n.n(i),s=n(110),c=n(32),l=n(70),u=n(79),d=n(268),f=n(1),b=n(3143),j=n.n(b),h=n(3144),g=n.n(h),m=n(3145),p=n.n(m),O=n(76),v=n(269),x=n(942),w=n(151),y=n(0),A=["size","avatarBgColor","walletImage","circular","hwWalletType","avatar","status","isPassphrase"],M=["wallet","deviceStatus"];function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var C=function(e){var t,n,a=e.size,r=e.walletImage,i=e.hwWalletType,o=e.avatar;if("hw"===r){var s,c,f={xl:{width:"20px",height:"30px"},lg:{width:"20px",height:"30px"},sm:{width:"14px",height:"21px"},xs:{width:"12px",height:"18px"}},b=j.a;return"classic"===i&&(b=j.a),"mini"===i&&(b=g.a),"touch"===i&&(b=p.a),Object(y.jsx)(d.a,{width:null==(s=f[a])?void 0:s.width,height:null==(c=f[a])?void 0:c.height,source:b},i)}var h,m,O={xs:16,sm:20,xl:24,lg:24};if("imported"===r||"watching"===r)return Object(y.jsx)(u.a,{name:"imported"===r?"InboxArrowDownOutline":"EyeOutline",size:null!=(t=O[null!=(n=a)?n:"lg"])?t:24,color:"icon-default"});if("external"===r)return Object(y.jsx)(u.a,{name:"LinkOutline",size:null!=(h=O[null!=(m=a)?m:"lg"])?h:24,color:"icon-default"});var v={xl:"DisplayXLarge",lg:"DisplayLarge",sm:"DisplayMedium",xs:"Body1"};return"hd"===r?Object(y.jsx)(l.a,{typography:v[a],children:null==o?void 0:o.emoji}):Object(y.jsx)(l.a,{typography:v[a],children:r})},S=function(e){var t=e.size,n=e.status;return Object(y.jsx)(c.a,{position:"absolute",right:-2,top:-3,rounded:"full",p:"2px",bgColor:"background-default",children:Object(y.jsx)(c.a,{rounded:"full",bgColor:"warning"===n?"icon-warning":"interactive-default",size:"xl"===t||"lg"===t?"10px":"8px"})})},P=function(e){var t=e.size;return Object(y.jsx)(s.a,{position:"absolute",right:-3,bottom:-3,borderColor:"background-default",rounded:"full",size:"xl"===t||"lg"===t?"16px":"12px",bgColor:"background-default",children:Object(y.jsx)(u.a,{name:"LockClosedMini",color:"icon-default",size:"xl"===t||"lg"===t?12:10})})},k=function(e){var t=e.size,n=e.avatarBgColor,a=e.walletImage,r=e.circular,i=e.hwWalletType,c=e.avatar,l=e.status,u=e.isPassphrase,d=o()(e,A),f=null!=c?c:x.b,b=n||("hd"===a?f.bgColor:"surface-neutral-default");return Object(y.jsxs)(s.a,I(I({rounded:r?"full":"xs"===t?"6px":"12px",size:"xl"===t?"56px":"lg"===t?12:"sm"===t?8:"xs"===t?6:void 0,bgColor:b},d),{},{pointerEvents:"none",children:[Object(y.jsx)(C,{size:t,walletImage:a,hwWalletType:i,avatar:f}),l?Object(y.jsx)(S,{size:t,status:l}):void 0,u?Object(y.jsx)(P,{size:t}):void 0]}))};k.defaultProps={size:"lg",circular:!1};function B(e){var t=e.deviceStatus,n=e.wallet;return Object(f.useMemo)((function(){var e,a,r,i,o=n.type,s=n.deviceType,c=n.associatedDevice||"",l=!1;o===O.c&&(r=function(e){if(e)return null!=e&&e.hasUpgrade?"warning":null!=e&&e.isConnected?"connected":void 0}(i=null==t?void 0:t[c]),l=Object(v.g)(n));var u=s;return u||(u=Object(w.b)(c)),{isPassphrase:l,status:r,hwWalletType:u,statusType:i,hasUpgrade:Boolean(null==(e=i)?void 0:e.hasUpgrade),isConnected:Boolean(null==(a=i)?void 0:a.isConnected)}}),[t,n])}function E(e){var t=e.wallet,n=e.deviceStatus,a=o()(e,M),r=t.avatar,i=t.type,s=null==r?void 0:r.bgColor,c=B({deviceStatus:n,wallet:t});return Object(y.jsx)(k,I({walletImage:i,avatarBgColor:s,avatar:r,hwWalletType:c.hwWalletType,status:c.status,isPassphrase:c.isPassphrase},a))}t.c=Object(f.memo)(k)},3088:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a=n(209),r=n.n(a),i=n(10),o=n.n(i),s=n(1),c=n(1126);function l(e){var t=e.useFormReturn,n=e.wait,a=void 0===n?500:n,i=e.revalidate,l=void 0===i||i,u=e.clearErrorIfEmpty,d=void 0!==u&&u,f=e.onChange,b=t.watch,j=t.trigger,h=t.formState,g=t.clearErrors,m=t.getValues,p=Object(s.useRef)(!1),O=Object(s.useState)(),v=o()(O,2),x=v[0],w=v[1];Object(s.useEffect)((function(){var e=m();w(e),setTimeout((function(){return j()}),0)}),[m,j]),Object(s.useEffect)((function(){var e=r()((function(e,t){var n=t.name,a=t.type;p.current=!1,"change"!==a&&void 0!==a||(w(e),f&&f(e,{name:n,type:a}),d&&""===(null==e?void 0:e[n])&&g(n),l&&j(n))}),a,{leading:!1,trailing:!0}),t=b((function(t,n){var a=n.name,r=n.type;p.current=!0,e(t,{name:a,type:r})}));return function(){return t.unsubscribe()}}),[d,g,f,l,j,a,b]);var y=Object(c.a)(h.isValid&&!Object.keys(h.errors).length&&!h.isValidating,100);return{loadingRef:p,isLoading:p.current,formValues:x,isValid:y}}},3130:function(e,t,n){"use strict";var a=n(1163);n.d(t,"a",(function(){return a.a}))},3143:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACwAAABACAMAAABWbGUSAAAAllBMVEUAAAAgICBDQ0MPDw8ICAhGRkZiYmIyMjIvLy81NTViYmIyMjJjY2NbW1s1NTVhYWE0NDRjY2MyMjI6OjpUVFRgYGBiYmIrKysyMjI0NDRhYWFiYmJGRkYXFxcMDAwwMDATExMQEBA/Pz80NDRiYmJQUFBKSko4ODg7OzsoKChMTExPT09DQ0NUVFQiIiIfHx9ZWVlfX197zIXbAAAAHHRSTlMAA2MFCGNgZibw71UgEsHAo6BnY2JSUBdIRUJBZStvwQAAAX5JREFUSMfVkolygyAURUO0rUvWZuuCGrAFNGb7/5/rA7VGHTBpx2l6MpnrcrwDzBv8iPH6UcP7uKGOph8G5qNLd+Wd959aTmdvfdHr7bGRvVd1z8HtsKeo3NsJAyLSwDFwKnf5xjCmQaglyDBmq7waLeHLQ0i2Gkh4AGFZyA9wTcJACyEgPFzIITHIIQjD3uXh9TL6h2vuu5mYZFJv7h6k4aA658w0orS+DIBHGgTGtWWY+bWcxVQGrYWQ0ZaTkJCkFURFc4NUHvSW060Knkcsg2QtWQSSiKuIYxU8yu9aMkvg8ZHlkeIjxIGpSFh7zTsa8R3GKUQKIVSwWEZbxmyX1kIVphCNDRq5S/mW2bCubwZuaEZ9zvN9nPOfy+iOBgktrpEXIEv8rNvNXovmjeiWhVPI1qTTpjOrlB23wxauA3Jh+y4XVIuIXR/cAst2ZrGBiWNLt6y2befl6Ztn9S/xN7ZlgVXZgK0D3qniSgdfAwIGTeQzVAK3ecpf/3wBJ33rfjd+//8AAAAASUVORK5CYII="},3144:function(e,t,n){e.exports=n.p+"static/media/deviceIcon_mini.96e3b384.png"},3145:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAABICAMAAACHrYYZAAAAz1BMVEUAAABkZGRkZGRra2tgYGBOTk5+fn5jY2Nqampubm5eXl5gYGBra2tnZ2dmZmZGRkZ1dXVLS0tLS0t5eXl1dXVVVVVTU1NQUFCBgYGAgIBgYGCAgICAgIAAAAApKSkvLy8sLCwyMjI2NjYkJCQHBwcmJiYhISENDQ07Ozs5OTkeHh5bW1tfX19ycnIFBQVERERAQEBOTk7///+AgIAbGxtiYmIPDw8SEhI9PT1hYWEUFBRXV1dPT08WFhZJSUloaGhTU1O/v79vb29kZGTv7+/qo1HcAAAAHXRSTlMAQCDbMO/f37+IQBDv7+/v39/Pv7+/n4B/YGAgEJ5ceGIAAAI9SURBVEjHvZNpd6IwGIUdtdt09n0DZROsNMSpIg5u0/b//6aSiNxwkpecfulTLR68z7l5Sey9FH9+fBnsl8v1smItLuKfRN58eDu46qv53+f7cjMHm/qNG4d0MFSE830W5CFjLKz/GsJQvuNtUb5Bx8/b3daxwPz0shE+P0TMccIOKmN7eNcIH2ZVQVAURZJMJb7Ak4wkLnO22bpZ0+0sdFiVTozpcYW7cmKeDlUhLKi8JHfiJH3VEpAXgt8WXIugrcgktBeEPClMNQF5ogF5X8axILpBH4AWMDHy0nAJgZrYtQrYAghRbGvAgmgBeb3AJJALogU0IN8hIK8JESHQE0QBIXjantkEnyggBQyAfJeAfLuAEEynNKqEgBA88hHZG8YS5I2CZ8rbBWzBkTo/MQjUnkVWARMjbxKIBUUibxIYVUAKWh4TdzaoeZugn7o6TgjEAEG3oJwJteHGIOiPVAoTWkCBnu8SsGdYECFgYhTYBOTVAkLAzwBnohFCStD34OYZAgoWBkHPQ1iYGvRTGsi4LDA1jFsCCkhhpD1SFFAN2LPnCJE+gVFwIgygFyyYLrB/R1YNuSQWhI4m2KCF/P4OTCghxhf//yo85hC4KqzaAlCE3ez1SbifjbCmyZ0Cd3B/DmFQZgvL2GxVzMv+Sbgss8wbuRVi85rr6bN4eTzbHXonrtKM86wTzovdt0a4vtgk04rEzFTCz/q9hv7FPPGPeHh5nrhRX/jZsKfy6+tH0UuQvf/0/br3QjwBXAV+n5hC73IAAAAASUVORK5CYII="},3163:function(e,t,n){"use strict";var a=n(3119);n.d(t,"c",(function(){return a.RecyclerListView})),n.d(t,"a",(function(){return a.DataProvider})),n.d(t,"b",(function(){return a.LayoutProvider}))},3210:function(e,t,n){"use strict";n.r(t),n.d(t,"ManagerWalletModalRoutes",(function(){return I}));var a=n(2),r=n.n(a),i=n(85),o=n(857),s=n(283),c=n(326),l=n(10),u=n.n(l),d=n(1),f=n(52),b=n(738),j=n(3062),h=n(0),g=function(){var e=Object(f.u)(),t=Object(f.x)().params,n=t.requestId,a=t.onSuccess,r=t.onCancel,i=t.field,o=Object(d.useState)(""),l=u()(o,2),g=l[0],m=l[1],p=function(t){var r=t.password;return Object(d.useEffect)((function(){r&&(g||(m(r),setTimeout((function(){a(r,n),e.goBack()}),500)))}),[r]),Object(h.jsx)(b.a,{w:"full",h:"full",children:Object(h.jsx)(c.b,{size:"lg"})})};return Object(h.jsx)(s.b,{footer:null,onModalClose:function(){g||null==r||r()},children:Object(h.jsx)(j.b,{walletId:null,field:i,children:function(e){return Object(h.jsx)(p,{password:e})}})})},m=n(70),p=n(1134),O=n.n(p),v=n(125),x=n(110),w=n(32),y=n(3163),A=n(3076),M=n(942),_=Object(d.memo)((function(e){var t=e.color,n=e.onPress;return Object(h.jsx)(w.a,{flexDirection:"row",height:"40px",justifyContent:"space-around",px:"24px",marginY:"24px",children:M.a.map((function(e){var a=t===e;return Object(h.jsx)(v.a,{onPress:function(){n(e)},children:function(t){var n=t.isHovered;return Object(h.jsx)(x.a,{width:"40px",height:"40px",p:"2px",borderRadius:"full",bgColor:a?e:n?"border-hovered":void 0,children:Object(h.jsx)(w.a,{flex:1,alignSelf:"stretch",bgColor:e,borderRadius:"full",borderColor:"background-default",borderWidth:"4px"})})}},"color"+e)}))})}));_.displayName="ColorSelecter";var I,C=function(){var e=Object(d.useRef)(),t=Object(f.u)(),n=Object(f.x)().params,a=n.avatar,r=n.onDone,i=Object(d.useState)(a.bgColor),o=u()(i,2),c=o[0],l=o[1],b=Object(d.useState)(a.emoji),j=u()(b,2),g=j[0],p=j[1],x=Object(d.useState)(0),I=u()(x,2),C=I[0],S=I[1],P=C-48,k=Math.floor(P/48),B=Object(d.useMemo)((function(){var e=O()(M.c,k);return new y.a((function(e,t){return e!==t})).cloneWithRows(e)}),[k]),E=Object(d.useMemo)((function(){return new y.b((function(){return"emoji"}),(function(e,t){t.width=P,t.height=48}))}),[P,48]),T=Object(d.useCallback)((function(e,t){var n=O()(t,k);return Object(h.jsx)(w.a,{height:"full",children:n.map((function(e,t){return Object(h.jsx)(w.a,{flexDirection:"row",justifyContent:"space-between",width:P+"px",height:"48px",children:e.map((function(e,n){return Object(h.jsx)(v.a,{onPress:function(){p(e)},borderRadius:"12px",_hover:{bg:"surface-hovered"},_pressed:{bg:"surface-pressed"},children:Object(h.jsx)(w.a,{alignItems:"center",justifyContent:"center",width:"48px",height:"48px",children:Object(h.jsx)(m.a,{typography:"DisplayXLarge",children:e})})},"rows"+t+" "+n)}))},"rows"+t)}))})}),[48,k,P]);return Object(h.jsx)(s.b,{size:"xs",height:"562px",header:"",primaryActionTranslationId:"action__done",hideSecondaryAction:!0,staticChildrenProps:{flex:1},primaryActionProps:{onPress:function(){r&&r({emoji:g,bgColor:c}),t.goBack()}},children:Object(h.jsxs)(w.a,{flex:1,children:[Object(h.jsx)(w.a,{alignItems:"center",children:Object(h.jsx)(A.c,{avatar:{emoji:g,bgColor:c},walletImage:"hd",size:"xl"})}),Object(h.jsx)(_,{color:c,onPress:l}),Object(h.jsx)(w.a,{onLayout:function(e){C!==e.nativeEvent.layout.width&&S(e.nativeEvent.layout.width)},flex:1,ref:e,borderTopLeftRadius:"24px",borderTopRadius:"24px",bgColor:"surface-subdued",children:C>0&&Object(h.jsx)(w.a,{flex:1,children:Object(h.jsx)(y.c,{dataProvider:B,layoutProvider:E,rowRenderer:T,renderAheadOffset:300,renderAheadStep:100,style:{padding:24}})})})]})})},S=n(747),P=n(98),k=n(200),B=n(3130),E=n(79),T=n(163),V=n(3),W=n.n(V),D=n(745),R=n(508),z=n(43),L=n(42),G=n(142),F=n(94),N=function(){var e,t,n,a=Object(R.a)(),r=Object(f.u)(),i=Object(f.x)().params.walletId,o=z.a.engine,c=z.a.dispatch,l=z.a.serviceCloudBackup,b=z.a.serviceAccount,j=Object(L.l)().wallets,g=null!=(e=j.find((function(e){return e.id===i})))?e:null,m=Object(d.useState)(!1),p=u()(m,2),O=p[0],y=p[1],_=Object(d.useState)(null!=(t=null==g?void 0:g.avatar)?t:M.b),C=u()(_,2),V=C[0],N=C[1],U=Object(D.a)({defaultValues:{name:""}}),Y=U.control,H=U.handleSubmit,Z=U.setError,Q=H(function(){var e=W()((function*(e){y(!0);var t,n=""===e.name?null==g?void 0:g.name:e.name;if(j.find((function(e){return e.name===n&&e.name!==(null==g?void 0:g.name)})))return Z("name",{message:a.formatMessage({id:"form__account_name_invalid_exists"})}),void y(!1);(yield o.setWalletNameAndAvatar(i,{name:n,avatar:V}))?(l.requestBackup(),yield b.initWallets(),setTimeout((function(){return c(Object(F.B)())})),T.a.show({title:a.formatMessage({id:"msg__change_saved"})}),null==(t=r.getParent())||t.goBack()):Z("name",{message:a.formatMessage({id:"msg__unknown_error"})});y(!1)}));return function(t){return e.apply(this,arguments)}}()),J=Object(d.useMemo)((function(){return Object(h.jsx)(x.a,{children:Object(h.jsx)(v.a,{onPress:function(){r.navigate(G.c.Modal,{screen:G.b.ManagerWallet,params:{screen:I.ManagerWalletModifyEmojiModal,params:{avatar:V,onDone:function(e){N((function(){return e}))}}}})},children:function(e){var t=e.isHovered;return Object(h.jsxs)(B.a,{width:"56px",height:"56px",children:[Object(h.jsx)(w.a,{width:"full",height:"full",justifyContent:"center",alignItems:"center",children:Object(h.jsx)(A.c,{avatar:V,walletImage:"hd",size:"xl"})}),Object(h.jsx)(w.a,{size:6,justifyContent:"center",alignItems:"center",borderWidth:2,bg:t?"surface-hovered":"surface-neutral-default",borderColor:"surface-subdued",borderRadius:"full",right:"-12px",bottom:"-12px",children:Object(h.jsx)(E.a,{name:"PencilMini",size:16})})]})}})})}),[V,r]);return Object(h.jsx)(s.b,{header:a.formatMessage({id:"modal__edit_wallet"}),footer:null,children:Object(h.jsxs)(S.a,{px:{base:4,md:0},children:[J,Object(h.jsxs)(k.a,{mt:"6",children:[Object(h.jsx)(k.a.Item,{name:"name",defaultValue:"",control:Y,rules:{maxLength:{value:24,message:a.formatMessage({id:"form__account_name_invalid_characters_limit"},{0:"24"})}},children:Object(h.jsx)(k.a.Input,{size:"xl",autoFocus:!0,placeholder:null!=(n=null==g?void 0:g.name)?n:""})}),Object(h.jsx)(P.a,{type:"primary",size:"xl",isLoading:O,onPress:Q,children:a.formatMessage({id:"action__done"})})]})]})})},U=n(560);function Y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}!function(e){e.ManagerWalletModal="ManagerWalletModal",e.ManagerWalletAuthorityVerifyModal="ManagerWalletAuthorityVerifyModal",e.ManagerWalletModifyNameModal="ManagerWalletModifyNameModal",e.ManagerWalletModifyEmojiModal="ManagerWalletModifyEmojiModal"}(I||(I={}));var H=Object(o.a)(),Z=[{name:I.ManagerWalletModifyNameModal,component:N},{name:I.ManagerWalletAuthorityVerifyModal,component:g},{name:I.ManagerWalletModifyEmojiModal,component:C}];t.default=function(){var e=Object(i.a)();return Object(h.jsx)(H.Navigator,{screenOptions:function(t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({headerShown:!1},Object(U.b)({isVerticalLayout:e,navInfo:t}))},children:Z.map((function(e){return Object(h.jsx)(H.Screen,{name:e.name,component:e.component},e.name)}))})}}}]);