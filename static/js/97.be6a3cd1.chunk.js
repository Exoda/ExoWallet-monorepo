(this.webpackJsonp=this.webpackJsonp||[]).push([[97],{3292:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n(163),c=n(1),o=n(508),r=n(746),a=n(15);function s(){var e=Object(o.a)(),t=a.a.canGetClipboard;return{copyText:Object(c.useCallback)((function(t,n){t&&(Object(r.a)(t),i.a.show({title:e.formatMessage({id:n||"msg__copied"})}))}),[e]),getClipboard:r.b,canGetClipboard:t}}},3503:function(e,t,n){"use strict";var i;n.d(t,"a",(function(){return i})),function(e){e.ManageConnectedSitesModel="ManageConnectedSitesModal"}(i||(i={}))},3554:function(e,t,n){"use strict";n.r(t);var i=n(85),c=n(283),o=n(387),r=n(743),a=n(125),s=n(186),l=n(285),d=n(41),u=n(32),f=n(79),b=n(3),j=n.n(b),p=n(10),m=n.n(p),h=n(253),x=n.n(h),O=n(1),g=n(1103),v=n(477),_=n.n(v),C=n(508),y=n(284),w=n(14),M=n(43),I=n(42),S=n(56),D=n(388),k=n(390),P=n(98),A=n(70),T=n(163),W=n(565),L=n(176),z=n(3292),E=n(0),B=function(e){var t=e.closeOverlay,n=Object(O.useState)(""),i=m()(n,2),c=i[0],o=i[1],r=Object(C.a)(),a=Object(z.a)(),s=a.getClipboard,d=a.canGetClipboard,u=Object(L.f)().networkImpl;return Object(E.jsx)(l.a,{visible:!0,onClose:t,footerButtonProps:{primaryActionTranslationId:"action__add",primaryActionProps:{type:"primary"},onPrimaryActionPress:function(){var e=j()((function*(){var e=c.trim();if(/^wc:.+@.+\?.+/.test(e))W.a.openConnectToDappModal({uri:e});else if(e.length>0){e.startsWith("http://")||e.startsWith("https://")||(e="https://"+e);try{var n=new URL(e),i=n.hostname,o=n.origin;if(i.includes(".")||i.includes("localhost")){var a=yield M.a.serviceDapp.getActiveConnectedAccountsAsync({origin:o,impl:u});null!=a&&a.length?T.a.show({title:r.formatMessage({id:"msg__this_address_already_exists"})}):setTimeout(j()((function*(){yield M.a.serviceDapp.openConnectionModal({origin:o})})),600)}}catch(s){}}t()}));return function(){return e.apply(this,arguments)}}()},contentProps:{title:r.formatMessage({id:"title__add_site_connection"}),contentElement:Object(E.jsx)(k.a,{rightCustomElement:d?Object(E.jsx)(P.a,{type:"plain",onPress:j()((function*(){var e=yield s();e&&o(e)})),children:Object(E.jsx)(A.a,{color:"text-success",children:r.formatMessage({id:"action__paste"})})}):null,autoFocus:!0,w:"full",mt:"2",type:"text",placeholder:r.formatMessage({id:"form__start_with_wc_or_https_placeholder"}),value:c,onChangeText:function(e){o(e)}})}})},R=n(1105),G=n(1118),H=Object(O.memo)((function(e){var t=e.connections,n=e.onAddConnectSite,i=e.onDisConnectWalletConnected,c=Object(C.a)(),o=Object(L.f)(),r=o.accountId,l=o.networkId,b=o.walletId,p=Object(O.useState)((function(){return[]})),h=m()(p,2),x=h[0],v=h[1],_=Object(L.h)((function(e){return e.refresher.refreshConnectedSitesTs}));Object(O.useEffect)((function(){var e=function(){var e=j()((function*(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;yield Object(S.g)(e);var t=yield M.a.serviceDapp.getWalletConnectSession();v((function(){return t?[t]:[]}))}));return function(){return e.apply(this,arguments)}}();e(),e(600)}),[t,_,r,l,b]);var w=Object(O.useCallback)((function(e){var t,n,c,o,r,l,f,b=e.item,p=e.index,m=null!=(t=null!=(n=null==(c=b.peerMeta)?void 0:c.name)?n:null==(o=b.peerMeta)?void 0:o.url)?t:"",h=null!=(r=null==b||null==(l=b.peerMeta)?void 0:l.icons[0])?r:"";return Object(E.jsx)(a.a,{children:Object(E.jsx)(u.a,{padding:"16px",height:"76px",width:"100%",bgColor:"surface-default",borderTopRadius:0===p?"12px":"0px",borderRadius:p===(null==x?void 0:x.length)-1?"12px":"0px",borderWidth:1,borderTopWidth:0===p?1:0,borderBottomWidth:p===(null==x?void 0:x.length)-1?1:0,borderColor:"border-subdued",children:Object(E.jsxs)(u.a,{alignItems:"center",flexDirection:"row",flex:1,children:[Object(E.jsx)(u.a,{size:"32px",overflow:"hidden",rounded:"full",children:Object(E.jsx)(g.a,{w:"full",h:"full",src:h,alt:h},h)}),Object(E.jsxs)(u.a,{ml:"3",flex:1,children:[Object(E.jsx)(d.h.Body2Strong,{noOfLines:2,children:m}),Object(E.jsx)(d.h.Body2,{color:"text-subdued",children:Object(y.c)(null!=(f=b.accounts[0])?f:"")+"\xb7 EVM"})]}),Object(E.jsx)(s.a,{name:"XCircleMini",type:"plain",circle:!0,onPress:function(){i(m,j()((function*(){yield M.a.walletConnect.disconnect()})))}})]})})})}),[i,x.length]);return Object(E.jsx)(u.a,{children:Object(E.jsx)(R.b,{renderItem:w,data:x,ListHeaderComponent:Object(E.jsxs)(u.a,{flexDirection:"column",children:[Object(E.jsxs)(u.a,{flexDirection:"row",alignItems:"center",justifyContent:"space-around",flex:1,children:[Object(E.jsx)(P.a,{type:"basic",leftIconName:"PlusMini",iconSize:20,size:"lg",flex:1,mr:"4",onPress:n,children:c.formatMessage({id:"action__add"})}),Object(E.jsx)(P.a,{type:"basic",size:"lg",flex:1,leftIconName:"ViewfinderCircleMini",iconSize:20,onPress:function(){Object(G.a)()},children:c.formatMessage({id:"action__scan"})})]}),Object(E.jsxs)(u.a,{flexDirection:"row",alignItems:"center",mb:1,mt:3,flex:1,children:[Object(E.jsx)(f.a,{name:"WalletconnectLogoIllus"}),Object(E.jsx)(d.h.Subheading,{ml:"2",color:"text-subdued",children:c.formatMessage({id:"form__walletconnect__uppercase"})})]})]}),ListFooterComponent:Object(E.jsx)(u.a,{display:"flex",flexDirection:"row",alignItems:"center",flex:1,mb:"1",mt:"6",children:Object(E.jsx)(d.h.Subheading,{color:"text-subdued",children:c.formatMessage({id:"title__connect_sites"})})}),ListEmptyComponent:Object(E.jsx)(a.a,{borderRadius:"12",flexDirection:"row",p:"4",alignItems:"center",bg:"surface-default",onPress:function(){Object(G.a)()},children:Object(E.jsxs)(u.a,{display:"flex",alignItems:"center",flexDirection:"row",flex:1,children:[Object(E.jsx)(u.a,{alignItems:"center",justifyContent:"center",size:"32px",overflow:"hidden",rounded:"full",backgroundColor:"surface-neutral-default",children:Object(E.jsx)(f.a,{name:"ViewfinderCircleMini",size:20})}),Object(E.jsx)(d.h.Body2Strong,{ml:"3",children:c.formatMessage({id:"action__scan_to_connect"})})]})})})})})),N=function(e){switch(e){case w.G:return"Solana";case w.C:case w.F:case w.v:case w.z:case w.H:case w.K:return e.toUpperCase();default:return""}};function V(e){var t=e.item,n=Object(O.useState)(t.site.icon),i=m()(n,2),c=i[0],o=i[1];return Object(O.useEffect)((function(){t.site.icon||j()((function*(){yield Object(S.g)(0);var e=yield M.a.serviceDapp.getWalletConnectSession();o((function(){var n,i;return e&&(null==(n=e.peerMeta)?void 0:n.url)===t.site.origin?null==(i=e.peerMeta)?void 0:i.icons[0]:t.site.origin+"/favicon.ico"}))}))()}),[t.site.origin,t.site.icon]),Object(E.jsx)(u.a,{size:"32px",overflow:"hidden",rounded:"full",children:Object(E.jsx)(g.a,{w:"full",h:"full",src:c,alt:c,fallbackElement:Object(E.jsx)(f.a,{name:"LinkOutline",size:32})},c)})}function F(e){var t=e.item,n=M.a.serviceDapp,i=Object(I.c)(),c=i.accountId,o=i.networkId,r=i.walletId,a=Object(O.useState)(t.address),s=m()(a,2),l=s[0],u=s[1];return Object(O.useEffect)((function(){j()((function*(){var e;yield Object(S.g)(0);var i=yield n.getActiveConnectedAccountsAsync({origin:t.site.origin,impl:t.networkImpl}),c=null==i||null==(e=i[0])?void 0:e.address;u(c)}))()}),[t.networkImpl,t.site.origin,n,c,o,r]),Object(E.jsx)(d.h.Body2,{color:"text-subdued",numberOfLines:1,children:Object(y.c)(l)+"\xb7 "+N(t.networkImpl)})}var U=n(3503),J=n(456),X=Object(J.a)(),K=[{name:U.a.ManageConnectedSitesModel,component:function(){var e=Object(C.a)(),t=Object(I.d)((function(e){return e.dapp.connections})),n=Object(O.useMemo)((function(){return function(e){var t=x()(e),n=[],i=new Map;for(var c of t){var o=c.site.origin+c.address+c.networkImpl;i.has(o)||(c.site.hostname=new URL(c.site.origin).hostname,n.push(c),i.set(o,1))}return n.sort((function(e,t){return _()({insensitive:!0})(e.site.hostname,t.site.hostname)}))}(t)}),[t]),i=Object(O.useCallback)((function(t,n){Object(D.a)((function(i){return Object(E.jsx)(l.a,{visible:!0,onClose:i,footerButtonProps:{primaryActionTranslationId:"action__disconnect",primaryActionProps:{type:"destructive",onPromise:function(){var e=j()((function*(){yield n(),i()}));return function(){return e.apply(this,arguments)}}()},wrap:!0},contentProps:{iconType:"danger",iconName:"ConnectOffOutline",title:e.formatMessage({id:"dialog__disconnect_from_this_site"}),content:e.formatMessage({id:"dialog__disconnect_all_accounts_desc"},{0:t})}})}))}),[e]),b=Object(O.useCallback)((function(){Object(D.a)((function(e){return Object(E.jsx)(B,{closeOverlay:e})}))}),[]),p=Object(O.useCallback)((function(e){var t=e.item,c=e.index;return Object(E.jsx)(a.a,{children:Object(E.jsx)(u.a,{padding:"16px",height:"76px",width:"100%",bgColor:"surface-default",borderTopRadius:0===c?"12px":"0px",borderRadius:c===(null==n?void 0:n.length)-1?"12px":"0px",borderWidth:1,borderTopWidth:0===c?1:0,borderBottomWidth:c===(null==n?void 0:n.length)-1?1:0,borderColor:"border-subdued",children:Object(E.jsxs)(u.a,{flexDirection:"row",flex:1,alignItems:"center",children:[Object(E.jsx)(V,{item:t}),Object(E.jsxs)(u.a,{flexDirection:"column",ml:"3",justifyContent:"center",flex:1,children:[Object(E.jsx)(d.h.Body1Strong,{children:t.site.hostname}),Object(E.jsx)(F,{item:t})]}),Object(E.jsx)(s.a,{name:"XCircleMini",type:"plain",circle:!0,onPress:function(){i(t.site.origin,j()((function*(){yield M.a.serviceDapp.cancellConnectedSite(t)})))}})]})})})}),[i,null==n?void 0:n.length]),m=Object(O.useCallback)((function(){return Object(E.jsx)(H,{connections:t,onDisConnectWalletConnected:i,onAddConnectSite:b})}),[t,i,b]);return Object(E.jsx)(c.b,{hidePrimaryAction:!0,maxHeight:"560px",header:e.formatMessage({id:"title__connect_sites"}),footer:null,flatListProps:{ListHeaderComponent:m,data:n,renderItem:p,ListEmptyComponent:Object(E.jsx)(u.a,{flexDirection:"column",alignItems:"center",justifyContent:"center",height:"350px",children:Object(E.jsx)(r.a,{icon:Object(E.jsx)(f.a,{name:"InboxOutline",size:48}),title:e.formatMessage({id:"empty__no_connected_sites"}),subTitle:e.formatMessage({id:"empty__no_connected_sites_desc"})})}),ItemSeparatorComponent:o.a,showsVerticalScrollIndicator:!1}})}}];t.default=function(){var e=Object(i.a)();return Object(E.jsx)(X.Navigator,{screenOptions:{headerShown:!1,animationEnabled:!!e},children:K.map((function(e){return Object(E.jsx)(X.Screen,{name:e.name,component:e.component},e.name)}))})}}}]);