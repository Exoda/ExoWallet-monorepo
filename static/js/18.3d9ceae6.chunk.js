(this.webpackJsonp=this.webpackJsonp||[]).push([[18],{3083:function(t,e,n){"use strict";var r,o,i;n.d(e,"c",(function(){return r})),n.d(e,"b",(function(){return o})),n.d(e,"a",(function(){return i})),function(t){t.Swap="Swap",t.Input="Input",t.Output="Output",t.Settings="Settings",t.CustomToken="CustomToken",t.Transaction="Transaction",t.Webview="Webview",t.Share="Share",t.SwftcHelp="SwftcHelp",t.PickRecipient="PickRecipient",t.PickAccount="PickAccount",t.EnterAddress="EnterAddress",t.Welcome="Welcome",t.SelectRoutes="SelectRoutes",t.Send="Send"}(r||(r={})),function(t){t.QuoteFailed="QuoteFailed",t.InsufficientBalance="InsufficientBalance",t.NotSupport="NotSupport",t.DepositMax="DepositMax",t.DepositMin="DepositMin"}(o||(o={})),function(t){t.swftc="swftc",t.socket="socket",t.mdex="mdex",t.zeroX="0x",t.jupiter="jupiter"}(i||(i={}))},3138:function(t,e,n){"use strict";var r=n(32),o=n(110),i=n(2),a=n.n(i),u=n(186),c=n(16),s=n.n(c),d=n(1),l=n(115),f=n(1852),p=n(179),h=n(699),v=n(623),m=n(0),y=["children","renderLeftArrow","renderRightArrow","bg","selectedIndex","leftButtonProps","rightButtonProps"];function b(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function O(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?b(Object(n),!0).forEach((function(e){a()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var g=Object(d.forwardRef)((function(t,e){var n=t.children,i=t.renderLeftArrow,a=t.renderRightArrow,c=t.bg,b=void 0===c?"surface-default":c,g=t.selectedIndex,w=t.leftButtonProps,k=t.rightButtonProps,j=s()(t,y),T=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=Object(d.useRef)(e);return Object(d.useEffect)((function(){t&&("function"===typeof t?t(n.current):t.current=n.current)}),[t]),n}(e),I=Object(l.a)(!1),A=Object(l.a)(!1),x=Object(l.a)(0),P=Object(l.a)(0),S=Object(l.a)(0),N=Object(d.useCallback)((function(t){S.value=t,P.value&&(A.value=Math.floor(S.value-x.value)>P.value)}),[]),C=Object(f.a)(function(){var t=function(t){var e=t.contentOffset,n=t.contentSize;x.value=e.x,I.value=x.value>0,A.value=Math.floor(n.width-x.value)>P.value};return t._closure={currentOffsetX:x,showLeftArrow:I,showRightArrow:A,containerWidth:P},t.asString="function _f({contentOffset:contentOffset,contentSize:contentSize}){const{currentOffsetX,showLeftArrow,showRightArrow,containerWidth}=jsThis._closure;{currentOffsetX.value=contentOffset.x;showLeftArrow.value=currentOffsetX.value>0;showRightArrow.value=Math.floor(contentSize.width-currentOffsetX.value)>containerWidth.value;}}",t.__workletHash=0xd8f9392efcb,t.__location="/home/runner/work/app-monorepo/app-monorepo/packages/components/src/ScrollableButtonGroup/ScrollableButtonGroup.tsx (64:6)",t}(),[]),R=Object(d.useRef)([]),D=Object(d.useRef)(0),B=Object(d.useRef)(),U=Object(d.useCallback)((function(t){if(t!==g){if(T.current){var e=R.current[t];if(e){var n=e.x+e.width/2-D.current/2;return B.current=void 0,T.current.scrollTo({x:n,animated:!0})}}B.current=t}}),[T,g]),F=d.Children.count(n);Object(d.useEffect)((function(){R.current=[],B.current=void 0}),[F]),Object(d.useEffect)((function(){void 0!==g&&U(g)}),[U,g]);var E=Object(d.useCallback)((function(){var t;null==(t=T.current)||t.scrollTo({x:x.value-P.value||0,animated:!0})}),[]),L=Object(d.useCallback)((function(){var t;null==(t=T.current)||t.scrollTo({x:x.value+P.value,animated:!0})}),[]),M=Object(d.useCallback)((function(t){var e=t.nativeEvent.layout.width;P.value=e,A.value=Math.floor(S.value-x.value)>P.value}),[]);return Object(m.jsxs)(r.a,O(O({bg:b},j),{},{onLayout:M,children:[Object(m.jsx)(p.default.View,{style:[{position:"absolute"},Object(h.a)(function(){var t=function(){return{opacity:Object(v.a)(I.value?1:0,{duration:300}),scale:Object(v.a)(I.value?1:0,{duration:300}),zIndex:Object(v.a)(I.value?1:-1,{duration:300})}};return t._closure={withTiming:v.a,showLeftArrow:I},t.asString="function _f(){const{withTiming,showLeftArrow}=jsThis._closure;{return{opacity:withTiming(showLeftArrow.value?1:0,{duration:300}),scale:withTiming(showLeftArrow.value?1:0,{duration:300}),zIndex:withTiming(showLeftArrow.value?1:-1,{duration:300})};}}",t.__workletHash=4700141212306,t.__location="/home/runner/work/app-monorepo/app-monorepo/packages/components/src/ScrollableButtonGroup/ScrollableButtonGroup.tsx (151:14)",t.__optimalization=2,t}(),[])],children:Object(m.jsx)(o.a,{bg:b,children:i?i({onPress:E}):Object(m.jsx)(u.a,O({type:"plain",circle:!0,name:"ChevronLeftMini",size:"sm",onPress:E},w))})}),Object(m.jsx)(p.default.ScrollView,{ref:T,onLayout:function(t){var e=t.nativeEvent.layout.width;D.current=e},style:{flex:1},horizontal:!0,onScroll:C,scrollEventThrottle:16,showsHorizontalScrollIndicator:!1,onContentSizeChange:N,children:d.Children.map(n,(function(t,e){return Object(d.cloneElement)(t,O(O({},t.props),{},{onPress:function(){U(e),null==t.props.onPress||t.props.onPress()},onLayout:function(t){var n=t.nativeEvent.layout,r=n.width,o=n.x,i=R.current;i[e]={x:o,width:r},i.length===F&&void 0!==B.current&&U(B.current)}}))}))}),Object(m.jsx)(p.default.View,{style:[{position:"absolute",right:0},Object(h.a)(function(){var t=function(){return{opacity:Object(v.a)(A.value?1:0,{duration:300}),scale:Object(v.a)(A.value?1:0,{duration:300}),zIndex:Object(v.a)(A.value?1:-1,{duration:300})}};return t._closure={withTiming:v.a,showRightArrow:A},t.asString="function _f(){const{withTiming,showRightArrow}=jsThis._closure;{return{opacity:withTiming(showRightArrow.value?1:0,{duration:300}),scale:withTiming(showRightArrow.value?1:0,{duration:300}),zIndex:withTiming(showRightArrow.value?1:-1,{duration:300})};}}",t.__workletHash=0xa6e322ee692,t.__location="/home/runner/work/app-monorepo/app-monorepo/packages/components/src/ScrollableButtonGroup/ScrollableButtonGroup.tsx (232:14)",t.__optimalization=2,t}(),[])],children:Object(m.jsx)(o.a,{bg:b,children:a?a({onPress:L}):Object(m.jsx)(u.a,O({type:"plain",circle:!0,name:"ChevronRightMini",size:"sm",onPress:L},k))})})]}))}));g.displayName="ScrollableButtonGroup";e.a=g},3149:function(t,e,n){"use strict";n.d(e,"b",(function(){return f})),n.d(e,"a",(function(){return p}));var r=n(10),o=n.n(r),i=n(20),a=n.n(i),u=n(1),c=n(43),s=n(42);function d(){var t=function(){var t=Object(s.d)((function(t){return t.swapTransactions.transactions}));return Object(u.useMemo)((function(){var e=Object.values(t).reduce((function(t,e){return t.concat.apply(t,a()(Object.values(e)))}),[]);return a()(e).sort((function(t,e){return t.addedTime>e.addedTime?-1:1}))}),[t])}();return Object(u.useMemo)((function(){return t.filter((function(t){return"swap"===t.type}))}),[t])}function l(){var t=Object(s.d)((function(t){return t.runtime.wallets}));return Object(u.useMemo)((function(){return t.reduce((function(t,e){return t.concat(e.accounts.map((function(t){return{accountId:t,walletId:e.id}})))}),[])}),[t])}function f(){var t=d(),e=l(),n=Object(s.d)((function(t){return t.runtime.networks})),r=Object(u.useMemo)((function(){return n.map((function(t){return t.id}))}),[n]),o=Object(u.useMemo)((function(){return e.map((function(t){return t.accountId}))}),[e]);return t.filter((function(t){return o.includes(t.accountId)&&r.includes(t.networkId)}))}function p(t){var e=l(),n=Object(u.useState)((function(){return e.find((function(e){return e.accountId===t}))?void 0:null})),r=o()(n,2),i=r[0],a=r[1];return Object(u.useEffect)((function(){var n=e.find((function(e){return e.accountId===t}));n&&c.a.engine.getAccounts([n.accountId]).then((function(t){var e=o()(t,1)[0];e&&a(e)}))}),[e,t]),i}},3154:function(t,e,n){"use strict";n.d(e,"a",(function(){return w}));var r=n(2),o=n.n(r),i=n(16),a=n.n(i),u=n(125),c=n(234),s=n(41),d=n(110),l=n(1107),f=n(79),p=n(1),h=n(3138),v=n(0),m=["buttons","selectedIndex","onButtonPress","size","bg","maxTextWidth"];function y(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function b(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?y(Object(n),!0).forEach((function(e){o()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var O=function(t){var e=t.text,n=t.leftIcon,r=t.leftImage,o=t.leftComponentRender,i=t.isCurrent,a=t.onPress,h=t.leftIconSize,m=t.onLayout,y=t.size,b=t.maxTextWidth,O=t.leftIconSelectedColor,g="sm"===y,w=h||(g?"16px":"20px"),k=O||"icon-hovered",j=Object(p.useMemo)((function(){var t="0px";return e.length>0&&(t=g?"4px":"8px"),t}),[g,e.length]);return Object(v.jsx)(u.a,{mr:"8px",onPress:a,onLayout:m,children:function(t){var a=t.isHovered,u=t.isPressed;return Object(v.jsxs)(c.a,{alignItems:"center",h:g?"32px":"36px",px:g?"8px":"12px",py:g?"6px":"8px",borderRadius:"9999px",bg:i?"surface-selected":u?"surface-pressed":a?"surface-hovered":"transparent",children:[(!!n||!!r)&&Object(v.jsxs)(d.a,{borderRadius:"9999px",w:w,h:w,mr:j,children:[!!n&&Object(v.jsx)(f.a,{name:n,color:i?k:"icon-default"}),!!r&&Object(v.jsx)(l.a,{height:w,width:w,src:r})]}),null==o?void 0:o(),e.length>0?Object(v.jsx)(s.h.Body2Strong,{maxW:b,isTruncated:!0,color:i?"text-default":"text-subdued",children:e}):null]})}})},g=function(t){var e=t.buttons,n=t.selectedIndex,r=t.onButtonPress,o=t.size,i=void 0===o?"sm":o,u=t.bg,c=void 0===u?"surface-default":u,s=t.maxTextWidth,d=a()(t,m);return Object(v.jsx)(h.a,b(b({bg:c,overflow:"hidden",w:"full",flexDirection:"row",alignItems:"center",position:"relative",selectedIndex:n},d),{},{children:e.map((function(t,e){return Object(v.jsx)(O,b(b({isCurrent:n===e},t),{},{size:i,maxTextWidth:s,onPress:function(){r(e)}}),e)}))}))};g.displayName="ToggleButtonGroup";var w=g},3194:function(t,e,n){"use strict";n.d(e,"e",(function(){return v})),n.d(e,"c",(function(){return y})),n.d(e,"d",(function(){return b})),n.d(e,"b",(function(){return O})),n.d(e,"a",(function(){return g}));var r=n(20),o=n.n(r),i=n(3),a=n.n(i),u=n(10),c=n.n(u),s=n(1),d=n(114),l=n(43),f=n(176),p=n(3082),h=n(749),v=function(t,e){var n=Object(s.useState)(!1),r=c()(n,2),o=r[0],i=r[1],u=Object(s.useState)(),d=c()(u,2),f=d[0],p=d[1],h=Object(s.useRef)({keyword:"",count:0});return Object(s.useEffect)((function(){function n(){return(n=a()((function*(e,n){if(0!==e.length){i(!0),p([]);var r=[];try{h.current.count+=1,r=yield l.a.serviceSwap.searchTokens({networkId:null!=n?n:void 0,keyword:t}),e===h.current.keyword&&n===h.current.networkId&&p(r)}finally{h.current.count-=1,0===h.current.count&&i(!1)}}else p(void 0)}))).apply(this,arguments)}h.current.keyword=t,h.current.networkId=e,function(t,e){n.apply(this,arguments)}(t,e)}),[t,e]),{loading:o,result:f}},m=function(t,e){var n=Object(f.c)(t,e);return Object(f.v)(n,2e3)},y=function(t,e){var n=m(null==t?void 0:t.networkId,e);return Object(s.useEffect)((function(){t&&e&&l.a.serviceToken.fetchTokenBalance({activeAccountId:e,activeNetworkId:t.networkId,tokenIds:t.tokenIdOnNetwork?[t.tokenIdOnNetwork]:[]})}),[t,e]),Object(s.useMemo)((function(){var e,r;if(t)return null!=(e=null==(r=n[Object(d.g)(t)])?void 0:r.balance)?e:"0"}),[n,t])},b=function(t){var e=Object(p.b)({networkId:null==t?void 0:t.networkId,contractAdress:null==t?void 0:t.tokenIdOnNetwork});return Object(s.useMemo)((function(){if(t)return e}),[e,t])};function O(t){var e=Object(f.h)((function(t){return t.swapTransactions.tokenList}));return Object(s.useMemo)((function(){var n;if(!e)return[];var r=t;r||(r="All");var o=e.find((function(t){return t.networkId===r}));return null!=(n=null==o?void 0:o.tokens)?n:[]}),[e,t])}function g(t,e){var n=O(t),r=Object(f.b)(t,e),i=m(t,e);return Object(s.useMemo)((function(){var t=[].concat(o()(n),o()(r)),e=new Set,a=function(t){return""+t.networkId+t.tokenIdOnNetwork},u=t.filter((function(t){return!e.has(a(t))&&(e.add(a(t)),!0)})),c=function(t){var e,n,r=t||"main";return Boolean(i[r]&&Number(Object(h.g)(null!=(e=null==(n=i[r])?void 0:n.balance)?e:"0",6))>0)};if(!i)return u;var s=u.filter((function(t){return c(t.tokenIdOnNetwork)})),d=u.filter((function(t){return!c(t.tokenIdOnNetwork)}));return s.concat(d)}),[n,r,i])}},3249:function(t,e,n){"use strict";var r;n.d(e,"a",(function(){return r})),function(t){t.HistoryRequestModal="HistoryRequestModal",t.TicketDetailModal="TicketDetailModal",t.ReplyTicketModel="ReplyTicketModel",t.SubmitRequestModal="SubmitRequestModal"}(r||(r={}))},3252:function(t,e,n){"use strict";n.d(e,"g",(function(){return g})),n.d(e,"f",(function(){return w})),n.d(e,"e",(function(){return k})),n.d(e,"d",(function(){return j})),n.d(e,"a",(function(){return T})),n.d(e,"c",(function(){return I})),n.d(e,"b",(function(){return A}));var r=n(3),o=n.n(r),i=n(6),a=n.n(i),u=n(1),c=n(27),s=n.n(c),d=n(508),l=n(43),f=n(176),p=n(184),h=n(3550),v=n(3506),m=n(3083),y=n(749),b=n(3194),O=function(){function t(t,e){this.token=t,this.typedValue=e,this.base=new s.a(10),this.value=new s.a(e),this.decimals=new s.a(t.decimals),this.amount=this.base.exponentiatedBy(this.decimals).multipliedBy(this.value)}var e=t.prototype;return e.toNumber=function(){return this.amount},e.toFormat=function(){return this.toNumber().toFixed(0)},a()(t)}();function g(t,e){return Object(u.useMemo)((function(){if(t&&e){var n=new s.a(e),r=new s.a(t.decimals),o=new s.a(10),i=n.dividedBy(o.exponentiatedBy(r));return new O(t,i.toFixed())}}),[t,e])}function w(){return Object(f.h)((function(t){return t.swap}))}function k(){var t=Object(f.h)((function(t){return t.settings.swapSlippagePercent})),e=Object(f.h)((function(t){return t.swap.inputToken})),n=Object(f.h)((function(t){return t.swap.outputToken})),r=Object(f.h)((function(t){return t.swap.independentField})),o=Object(f.h)((function(t){return t.swap.typedValue})),i=Object(f.h)((function(t){return t.swap.inputTokenNetwork})),a=Object(f.h)((function(t){return t.swap.outputTokenNetwork})),c=Object(f.h)((function(t){return t.swap.sendingAccount})),d=Object(f.h)((function(t){var e;return null==(e=t.swap.recipient)?void 0:e.address})),l=Object(u.useMemo)((function(){if(e&&n&&o&&i&&a&&c&&d&&!new s.a(o).lte(0))return{typedValue:o,independentField:r,networkOut:a,networkIn:i,tokenOut:n,tokenIn:e,slippagePercentage:t,activeAccount:c,receivingAddress:d}}),[o,r,e,n,i,a,t,c,d]);return Object(f.i)(l,500)}var j=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{showLoading:!1},e=t.showLoading,n=k(),r=Object(u.useRef)({params:n,count:0});Object(u.useEffect)((function(){r.current.params=n}),[n]);var i=Object(u.useCallback)(o()((function*(){var t=yield l.a.serviceSwap.refreshParams(n);if(n){e&&l.a.dispatch(Object(p.h)(!0)),l.a.dispatch(Object(p.f)(void 0));var i=function(){var t=o()((function*(t){var e=t.filter((function(t){return!t.limited&&void 0!==t.data}));if(e.length>0){var n=yield l.a.serviceSwap.getCurrentUserSelectedQuoter();if(n){var r=e.find((function(t){return t.data.type===n}));if(r)return r}return 1===e.length||e.sort((function(t,e){var n,r,o=null!=(n=t.data.estimatedBuyAmount)?n:t.data.buyAmount,i=null!=(r=e.data.estimatedBuyAmount)?r:e.data.buyAmount;return Number(i)-Number(o)})),e[0]}return t[0]}));return function(e){return t.apply(this,arguments)}}(),a=function(){var t=o()((function*(){var t;r.current.params=n,r.current.count+=1,function(){var e=o()((function*(){var e=yield h.a.client.fetchQuotes(n);if(!v.a.submited&&r.current.params===n&&e){var o,a,u;l.a.dispatch(Object(p.m)(e));var c=yield i(e);c&&(null==(o=c.data)?void 0:o.type)!==(null==(a=t)||null==(u=a.data)?void 0:u.type)&&(t||(t=c),l.a.dispatch(Object(p.j)(c.data),Object(p.k)(c.limited)))}}));return function(){return e.apply(this,arguments)}}()();try{var e=yield h.a.client.fetchQuote(n);r.current.params!==n||t||(e?(t=e,l.a.dispatch(Object(p.j)(e.data),Object(p.k)(e.limited))):l.a.dispatch(Object(p.f)(m.b.NotSupport),Object(p.k)(void 0)))}catch(a){l.a.dispatch(Object(p.f)(m.b.QuoteFailed),Object(p.h)(!1))}finally{r.current.count-=1,0===r.current.count&&l.a.dispatch(Object(p.h)(!1))}}));return function(){return t.apply(this,arguments)}}(),u=function(){var t=o()((function*(){r.current.params=n,r.current.count+=1;try{var t=yield h.a.client.fetchQuotes(n);if(!v.a.submited&&r.current.params===n&&t){l.a.dispatch(Object(p.m)(t));var e=yield i(t);e?l.a.dispatch(Object(p.j)(e.data),Object(p.k)(e.limited)):l.a.dispatch(Object(p.f)(m.b.NotSupport),Object(p.k)(void 0))}}catch(o){l.a.dispatch(Object(p.f)(m.b.QuoteFailed),Object(p.h)(!1))}finally{r.current.count-=1,0===r.current.count&&l.a.dispatch(Object(p.h)(!1))}}));return function(){return t.apply(this,arguments)}}();t?yield u():(l.a.dispatch(Object(p.m)(void 0)),yield a())}else l.a.dispatch(Object(p.j)(void 0),Object(p.m)(void 0))})),[n,e]);return i};function T(){var t=Object(f.h)((function(t){return t.swap.independentField})),e=Object(f.h)((function(t){return t.swap.typedValue})),n=Object(f.h)((function(t){return t.swap.inputToken})),r=Object(f.h)((function(t){return t.swap.outputToken})),o=Object(f.h)((function(t){return t.swap.quote})),i=g(n,Object(y.m)(null==o?void 0:o.sellAmount)),a=g(r,Object(y.m)(null==o?void 0:o.buyAmount)),c=Object(u.useMemo)((function(){var n,r="INPUT"===t?"OUTPUT":"INPUT";return(n={})[t]=e,n[r]="INPUT"===r?Object(y.g)(null==i?void 0:i.value):Object(y.g)(null==a?void 0:a.value),n}),[t,i,a,e]);return{inputAmount:i,outputAmount:a,formattedAmounts:c}}var I=function(){var t=Object(f.h)((function(t){return t.swap.error})),e=Object(f.h)((function(t){return t.swap.inputToken})),n=Object(f.h)((function(t){return t.swap.sendingAccount})),r=T().inputAmount,o=Object(b.c)(r?e:void 0,null==n?void 0:n.id),i=Object(u.useMemo)((function(){if(o&&e)return new O(e,o).toNumber()}),[e,o]),a=r&&i&&i.lt(r.toNumber())?m.b.InsufficientBalance:void 0;return t||a};function A(){var t=Object(d.a)(),e=Object(f.h)((function(t){return t.swap.inputToken})),n=Object(f.h)((function(t){return t.swap.quoteLimited})),r=T().inputAmount,o=g(e,null==n?void 0:n.max),i=g(e,null==n?void 0:n.min);return Object(u.useMemo)((function(){var n,a;if(r&&e&&(o||i)){if(i){var u=i.typedValue;i.amount.gt(r.amount)&&(n=t.formatMessage({id:"msg__str_minimum_amount"},{0:u+" "+e.symbol}),a=u)}if(o){var c=o.typedValue;o.amount.lt(r.amount)&&(n=t.formatMessage({id:"msg__str_maximum_amount"},{0:c+" "+e.symbol}),a=c)}}if(n&&a)return{message:n,value:a}}),[r,e,o,i,t])}},3253:function(t,e,n){"use strict";n.d(e,"e",(function(){return c})),n.d(e,"f",(function(){return s})),n.d(e,"c",(function(){return d})),n.d(e,"a",(function(){return l})),n.d(e,"b",(function(){return f})),n.d(e,"d",(function(){return p}));var r,o,i,a,u=n(36),c="https://www.bangwo8.com/osp2016/im/pc/index.php?vendorID=782460&uid=&customSource=onekey",s=[u.a.eth,u.a.bsc,u.a.polygon,u.a.fantom,u.a.avalanche,u.a.celo,u.a.optimism,u.a.arbitrum],d=((r={})[u.a.heco]="https://0x.onekey.so/swap/v1/quote",r[u.a.goerli]="https://goerli.api.0x.org/swap/v1/quote",r),l=((o={})[u.a.eth]=60,o[u.a.bsc]=30,o[u.a.polygon]=30,o[u.a.fantom]=30,o[u.a.avalanche]=30,o[u.a.celo]=60,o[u.a.optimism]=60,o[u.a.heco]=15,o[u.a.okt]=15,o),f=((i={})[u.a.okt]=[{name:"CherrySwap",logoUrl:"https://common.onekey-asset.com/logo/CherrySwap.png"}],i[u.a.heco]=[{name:"MDex",logoUrl:"https://common.onekey-asset.com/logo/MdexSwap.png"}],i[u.a.xdai]=[{name:"HoneySwap",logoUrl:"https://common.onekey-asset.com/logo/HoneySwap.png"}],i),p=((a={})[u.a.eth]=.01,a[u.a.bsc]=.01,a[u.a.polygon]=.03,a[u.a.btc]=.001,a[u.a.optimism]=1e-4,a[u.a.xrp]=11,a[u.a.trx]=5,a)},3254:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n(70),o=n(110),i=n(32),a=n(268),u=n(0);function c(t){return"https://node.onekey.so/proxyimg?base="+t}var s=function(t){var e=t.sources,n=t.size||4;if(!e||0===e.length)return null;if(1===e.length)return Object(u.jsx)(i.a,{borderRadius:"full",w:n,h:n,overflow:"hidden",bgColor:"surface-neutral-default",children:Object(u.jsx)(a.a,{size:n,src:c(e[0]),testID:e[0]})},e[0]);var r=function(t,e){return t<=0?0:-e/2};return Object(u.jsx)(i.a,{flexDirection:"row",alignItems:"center",children:e.map((function(t,e){return Object(u.jsx)(o.a,{ml:r(e,n),borderRadius:"full",h:n,w:n,overflow:"hidden",bgColor:"surface-neutral-default",children:Object(u.jsx)(a.a,{size:n,src:c(t)})},t)}))})};e.b=function(t){var e=t.providers,n=t.typography,o=void 0===n?"Caption":n,a=t.color,c=void 0===a?"text-subdued":a,d=t.fontWeight,l=void 0===d?400:d;if(!e)return Object(u.jsx)(i.a,{flexDirection:"row",flexGrow:1,children:Object(u.jsx)(r.a,{typography:o,color:c,isTruncated:!0,children:"OneKey Swap"})});if(1===e.length)return Object(u.jsxs)(i.a,{flexDirection:"row",alignItems:"center",flexGrow:1,children:[e[0].logoUrl?Object(u.jsx)(s,{sources:[e[0].logoUrl]}):null,Object(u.jsx)(r.a,{ml:2,typography:o,color:c,fontWeight:l,isTruncated:!0,children:e[0].name})]});if(e.length>1){var f=e.map((function(t){return t.logoUrl})).filter(Boolean);return Object(u.jsxs)(i.a,{alignItems:"center",flexDirection:"row",flexGrow:1,children:[f.length>0?Object(u.jsx)(s,{sources:f}):null,Object(u.jsxs)(r.a,{ml:"2",typography:o,color:c,fontWeight:l,isTruncated:!0,children:[e.length," Exchanges"]})]})}return Object(u.jsx)(i.a,{alignItems:"center",flexDirection:"row",flexGrow:1,children:Object(u.jsx)(r.a,{typography:o,color:c,children:"OneKey Swap"})})}},3506:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r={submited:!1}},3550:function(t,e,n){"use strict";n.d(e,"a",(function(){return M}));var r=n(2),o=n.n(r),i=n(3),a=n.n(i),u=n(6),c=n.n(u),s=n(55),d=n.n(s),l=n(27),f=n.n(l),p=n(43),h=n(3083),v=n(749),m=n(36),y=n(3253);function b(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function O(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?b(Object(n),!0).forEach((function(e){o()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var g=function(){function t(){this.type=h.a.zeroX,this.client=d.a.create({timeout:1e4})}var e=t.prototype;return e.getBaseUrl=function(){var t=a()((function*(t){var e,n=yield p.a.serviceSwap.getServerEndPoint();return((e={})[m.a.eth]=n+"/0x/quote?chainID=ethereum",e[m.a.bsc]=n+"/0x/quote?chainID=bsc",e[m.a.polygon]=n+"/0x/quote?chainID=polygon",e[m.a.fantom]=n+"/0x/quote?chainID=fantom",e[m.a.avalanche]=n+"/0x/quote?chainID=avalanche",e[m.a.celo]=n+"/0x/quote?chainID=celo",e[m.a.optimism]=n+"/0x/quote?chainID=optimism",e[m.a.arbitrum]=n+"/0x/quote?chainID=arbitrum",e)[t]}));return function(e){return t.apply(this,arguments)}}(),e.isSupported=function(t,e){return t.id===e.id&&y.f.includes(t.id)},e.getProviderLogo=function(t){return"https://common.onekey-asset.com/logo/"+t+".png"},e.fetch0xQuote=function(){var t=a()((function*(t,e){var n=this,r=(yield this.client.get(t,{params:e})).data.data;return{providers:(null==r?void 0:r.sources.filter((function(t){return Number(t.proportion)>0}))).map((function(t){return{name:t.name.split("_").join(" "),logoUrl:n.getProviderLogo(t.name)}})),data:r}}));return function(e,n){return t.apply(this,arguments)}}(),e.fetchQuote=function(){var t=a()((function*(t){var e,n=t.networkIn,r=t.networkOut,o=t.tokenIn,i=t.tokenOut,a=t.slippagePercentage,u=t.independentField,c=t.typedValue,s=t.activeAccount,d=t.receivingAddress;if(this.isSupported(n,r)&&d===s.address){var l=+a/100,f={sellToken:o.tokenIdOnNetwork||v.s,buyToken:i.tokenIdOnNetwork||v.s,slippagePercentage:Number.isNaN(l)?"0.03":String(l),feeRecipient:v.f,affiliateAddress:v.b};"INPUT"===u?f.sellAmount=new v.a(o,c).toFormat():f.buyAmount=new v.a(i,c).toFormat();var p=yield this.getBaseUrl(o.networkId);if(p){var h=yield this.fetch0xQuote(p,f),m=h.providers,b=h.data,O={type:this.type,instantRate:b.price,allowanceTarget:b.allowanceTarget,buyAmount:b.buyAmount,buyTokenAddress:b.buyTokenAddress,sellAmount:b.sellAmount,sellTokenAddress:b.sellTokenAddress,arrivalTime:null!=(e=y.a[n.id])?e:30,percentageFee:b.percentageFee,providers:m};return b.data&&(O.txData={from:s.address,to:b.to,data:b.data,value:b.value}),O.instantRate="INPUT"===u?b.price:Object(v.e)(1,b.price),{data:O}}}}));return function(e){return t.apply(this,arguments)}}(),e.buildTransaction=function(){var t=a()((function*(t){var e=t.networkIn,n=t.networkOut,r=t.tokenIn,o=t.tokenOut,i=t.slippagePercentage,a=t.independentField,u=t.typedValue,c=t.activeAccount,s=t.txData,d=t.receivingAddress;if(this.isSupported(e,n)&&d===c.address){if(s)return{data:s};var l=+i/100,f={sellToken:r.tokenIdOnNetwork||v.s,buyToken:o.tokenIdOnNetwork||v.s,slippagePercentage:Number.isNaN(l)?"0.03":String(l),feeRecipient:v.f,affiliateAddress:v.b,takerAddress:c.address};"INPUT"===a?f.sellAmount=new v.a(r,u).toFormat():f.buyAmount=new v.a(o,u).toFormat();var p=yield this.getBaseUrl(r.networkId);if(p)return{data:O(O({},(yield this.fetch0xQuote(p,f)).data),{},{from:c.address})}}}));return function(e){return t.apply(this,arguments)}}(),e.queryTransactionProgress=function(){var t=a()((function*(t){var e=t.networkId,n=t.accountId,r=t.nonce;if(void 0!==r)return{status:yield p.a.serviceHistory.queryTransactionNonceStatus({networkId:e,accountId:n,nonce:r})};var o=yield p.a.serviceNetwork.rpcCall(e,{method:"eth_getTransactionReceipt",params:[t.hash]});return o?{status:1===Number(o.status)?"sucesss":"failed"}:Date.now()-t.addedTime>36e5?{status:"failed"}:void 0}));return function(e){return t.apply(this,arguments)}}(),c()(t)}();function w(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function k(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?w(Object(n),!0).forEach((function(e){o()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function j(t){return t.tokenIdOnNetwork?t.tokenIdOnNetwork:"So11111111111111111111111111111111111111112"}var T=function(){function t(){this.type=h.a.jupiter,this.client=d.a.create({timeout:6e4})}var e=t.prototype;return e.getBaseURL=function(){var t=a()((function*(){return(yield p.a.serviceSwap.getServerEndPoint())+"/jupiter"}));return function(){return t.apply(this,arguments)}}(),e.isSupported=function(t,e){return t.id===e.id&&"sol"===t.impl},e.fetchPrice=function(){var t=a()((function*(t,e){var n=(yield this.getBaseURL())+"/v1/price",r=yield this.client.get(n,{params:{id:j(t),vsToken:j(e)}});if(r.data)return r.data.data}));return function(e,n){return t.apply(this,arguments)}}(),e.buildSwapTransaction=function(){var t=a()((function*(t,e,n){var r=(yield this.getBaseURL())+"/v1/swap",o=(yield this.client.post(r,{route:t,userPublicKey:e,outputMint:n})).data;if(!(null!=o&&o.cleanupTransaction||null!=o&&o.setupTransaction))return null==o?void 0:o.swapTransaction}));return function(e,n,r){return t.apply(this,arguments)}}(),e.findBestTransaction=function(){var t=a()((function*(t,e,n){for(var r=0;r<t.length;r+=1){var o=t[r],i=yield this.buildSwapTransaction(o,e,n);if(i)return{transaction:i,route:o}}}));return function(e,n,r){return t.apply(this,arguments)}}(),e.doQuote=function(){var t=a()((function*(t,e){var n,r=(yield this.getBaseURL())+"/v1/quote",o=yield this.client.get(r,{params:t});if(o.data){var i=o.data.data,a=yield this.findBestTransaction(i,e,t.outputMint);if(a)return k(k({},a),{},{percentageFee:null==o||null==(n=o.data)?void 0:n.percentageFee})}}));return function(e,n){return t.apply(this,arguments)}}(),e.refreshRecentBlockBash=function(){var t=a()((function*(t,e){return p.a.engine.solanaRefreshRecentBlockBash({transaction:e,accountId:t,networkId:m.a.sol})}));return function(e,n){return t.apply(this,arguments)}}(),e.findRouteAndTransaction=function(){var t=a()((function*(t){var e=t.tokenIn,n=t.tokenOut,r=t.typedValue,o=t.independentField,i=t.activeAccount,a={inputMint:j(e),outputMint:j(n),amount:Object(v.k)("OUTPUT"===o?n:e,r),swapMode:"ExactIn",slippage:t.slippagePercentage,onlyDirectRoutes:!0};"OUTPUT"===o&&(a.swapMode="ExactOut");var u=yield this.doQuote(a,i.address);return u||(a.onlyDirectRoutes=!1,yield this.doQuote(a,i.address))}));return function(e){return t.apply(this,arguments)}}(),e.fetchRawQuote=function(){var t=a()((function*(t){var e=t.tokenIn,n=t.tokenOut,r=yield this.findRouteAndTransaction(t);if(r){var o=r.route,i=r.transaction,a=r.percentageFee;if(o)return{data:{type:this.type,instantRate:Object(v.d)(e.decimals,n.decimals,o.inAmount,o.outAmount),sellTokenAddress:j(e),buyTokenAddress:j(n),providers:[{name:"Jupiter",logoUrl:"https://common.onekey-asset.com/logo/Jupiter.png"}],arrivalTime:30,sellAmount:String(o.inAmount),buyAmount:String(o.outAmount),percentageFee:a,txData:i}}}}));return function(e){return t.apply(this,arguments)}}(),e.fetchAdjustedQuote=function(){var t=a()((function*(t){var e=t.tokenIn,n=t.tokenOut,r=t.typedValue;if("OUTPUT"===t.independentField){var o=yield this.fetchPrice(e,n);if(o){var i=Object(v.e)(r,o.price),a=k({},t);a.independentField="INPUT",a.typedValue=i;var u=yield this.findRouteAndTransaction(a);if(u){var c=u.route,s=u.transaction,d=new f.a(Object(v.k)(n,r)),l=new f.a(c.outAmount).isGreaterThan(d.multipliedBy(.95));if(c&&l)return{data:{type:this.type,instantRate:Object(v.d)(e.decimals,n.decimals,c.inAmount,c.outAmount),sellTokenAddress:j(e),buyTokenAddress:j(n),providers:[{name:"Jupiter",logoUrl:"https://common.onekey-asset.com/logo/Jupiter.png"}],arrivalTime:30,sellAmount:String(c.inAmount),buyAmount:String(Object(v.k)(n,r)),txData:s}}}}}}));return function(e){return t.apply(this,arguments)}}(),e.fetchQuote=function(){var t=a()((function*(t){if(t.activeAccount.address===t.receivingAddress){var e=yield this.fetchRawQuote(t);return e||this.fetchAdjustedQuote(t)}}));return function(e){return t.apply(this,arguments)}}(),e.buildTransaction=function(){var t=a()((function*(t){if(t.activeAccount.address===t.receivingAddress){var e=t.activeAccount;if(t.txData)if("string"===typeof t.txData)return{data:yield this.refreshRecentBlockBash(e.id,t.txData)};var n=yield this.findRouteAndTransaction(t);if(n){var r=n.transaction;return{data:yield this.refreshRecentBlockBash(r,e.id)}}}}));return function(e){return t.apply(this,arguments)}}(),e.queryTransactionProgress=function(){var t=a()((function*(t){var e=t.networkId,n=t.accountId,r=t.hash;return{status:yield p.a.serviceHistory.queryTransactionByTxid({networkId:e,accountId:n,txid:r})}}));return function(e){return t.apply(this,arguments)}}(),c()(t)}();function I(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function A(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?I(Object(n),!0).forEach((function(e){o()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var x=function(){function t(){this.type=h.a.mdex,this.client=d.a.create({timeout:1e4})}var e=t.prototype;return e.isSupported=function(t,e){return t.id===e.id&&!!y.c[t.id]},e.fetchQuote=function(){var t=a()((function*(t){var e,n=t.networkIn,r=t.networkOut,o=t.tokenIn,i=t.tokenOut,a=t.slippagePercentage,u=t.independentField,c=t.typedValue,s=t.activeAccount,d=t.receivingAddress;if(this.isSupported(n,r)&&d===s.address){var l=+a/100,f={sellToken:o.tokenIdOnNetwork||v.s,buyToken:i.tokenIdOnNetwork||v.s,slippagePercentage:Number.isNaN(l)?"0.03":String(l),feeRecipient:v.f,affiliateAddress:v.b};"INPUT"===u?f.sellAmount=new v.a(o,c).toFormat():f.buyAmount=new v.a(i,c).toFormat();var p=y.c[o.networkId];if(p){var h=(yield this.client.get(p,{params:f})).data,m={type:this.type,instantRate:h.price,allowanceTarget:h.allowanceTarget,buyAmount:h.buyAmount,buyTokenAddress:h.buyTokenAddress,sellAmount:h.sellAmount,sellTokenAddress:h.sellTokenAddress,providers:null!=(e=y.b[o.networkId])?e:[{name:"OneKey Swap"}],arrivalTime:15};return h.data&&(m.txData={from:s.address,to:h.to,data:h.data,value:h.value}),m.instantRate="INPUT"===u?h.price:Object(v.e)(1,h.price),{data:m}}}}));return function(e){return t.apply(this,arguments)}}(),e.buildTransaction=function(){var t=a()((function*(t){var e=t.networkIn,n=t.networkOut,r=t.tokenIn,o=t.tokenOut,i=t.slippagePercentage,a=t.independentField,u=t.typedValue,c=t.activeAccount,s=t.txData,d=t.receivingAddress;if(this.isSupported(e,n)&&d===c.address){if(s)return{data:s};var l=+i/100,f={sellToken:r.tokenIdOnNetwork||v.s,buyToken:o.tokenIdOnNetwork||v.s,slippagePercentage:Number.isNaN(l)?"0.03":String(l),feeRecipient:v.f,affiliateAddress:v.b,takerAddress:c.address};"INPUT"===a?f.sellAmount=new v.a(r,u).toFormat():f.buyAmount=new v.a(o,u).toFormat();var p=y.c[r.networkId];if(p)return{data:A(A({},(yield this.client.get(p,{params:f})).data),{},{from:c.address})}}}));return function(e){return t.apply(this,arguments)}}(),e.queryTransactionProgress=function(){var t=a()((function*(t){var e=t.networkId,n=t.accountId,r=t.nonce;if(void 0!==r)return{status:yield p.a.serviceHistory.queryTransactionNonceStatus({networkId:e,accountId:n,nonce:r})};var o=yield p.a.serviceNetwork.rpcCall(e,{method:"eth_getTransactionReceipt",params:[t.hash]});return o?{status:1===Number(o.status)?"sucesss":"failed"}:Date.now()-t.addedTime>36e5?{status:"failed"}:void 0}));return function(e){return t.apply(this,arguments)}}(),c()(t)}();function P(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function S(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?P(Object(n),!0).forEach((function(e){o()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var N,C=function(){function t(){this.type=h.a.socket,this.client=d.a.create({timeout:3e4})}var e=t.prototype;return e.prepare=function(){this.refreshSupportedChains()},e.getBaseURL=function(){var t=a()((function*(){return(yield p.a.serviceSwap.getServerEndPoint())+"/socketBridge"}));return function(){return t.apply(this,arguments)}}(),e.fetchTokenPrice=function(){var t=a()((function*(t){var e,n=(yield this.getBaseURL())+"/token-price",r=yield this.client.get(n,{params:{tokenAddress:Object(v.j)(t),chainId:Object(v.i)(t.networkId)}});return null==r||null==(e=r.data)?void 0:e.result}));return function(e){return t.apply(this,arguments)}}(),e.fetchInstantTokenRate=function(){var t=a()((function*(t,e){var n=yield this.fetchTokenPrice(t),r=yield this.fetchTokenPrice(e);if(n&&r)return new f.a(r.tokenPrice).div(n.tokenPrice).toNumber()}));return function(e,n){return t.apply(this,arguments)}}(),e.fetchInstantTokenRateFromChain=function(){var t=a()((function*(t,e,n){var r,o,i,a,u=(yield this.getBaseURL())+"/quote",c={fromChainId:Object(v.i)(t.networkId),fromTokenAddress:Object(v.j)(t),toChainId:Object(v.i)(e.networkId),toTokenAddress:Object(v.j)(e),fromAmount:Object(v.k)(t,"1"),userAddress:n,sort:"output",singleTxOnly:!0},s=yield this.client.get(u,{params:c}),d=null==(r=s)||null==(o=r.data)?void 0:o.result;if(d){if(d.routes.length>0){var l=d.routes[0],f=Object(v.d)(t.decimals,e.decimals,l.fromAmount,l.toAmount);return Number(f)}if(d.bridgeRouteErrors){var p=Object.values(d.bridgeRouteErrors).find((function(t){return t.maxAmount||t.minAmount}));if(p){var h=(null==p?void 0:p.maxAmount)||(null==p?void 0:p.minAmount);if(h&&(c.fromAmount=h,(d=null==(i=s=yield this.client.get(u,{params:c}))||null==(a=i.data)?void 0:a.result)&&d.routes.length>0)){var m=d.routes[0],y=Object(v.d)(t.decimals,e.decimals,m.fromAmount,m.toAmount);return Number(y)}}}}}));return function(e,n,r){return t.apply(this,arguments)}}(),e.refreshSupportedChains=function(){var t=a()((function*(){var t=yield this.fetchSupportedChains(),e=t.filter((function(t){return t.sendingEnabled})).map((function(t){return String(t.chainId)})),n=t.filter((function(t){return t.receivingEnabled})).map((function(t){return String(t.chainId)}));e.length>0&&(this.supportedSendingChainIds=e),n.length>0&&(this.supportedReceivingChainIds=n)}));return function(){return t.apply(this,arguments)}}(),e.fetchSupportedChains=function(){var t=a()((function*(){var t,e=yield this.getBaseURL(),n=yield this.client.get(e+"/supported/chains");return null==n||null==(t=n.data)?void 0:t.result}));return function(){return t.apply(this,arguments)}}(),e.getBridgeInfo=function(){var t=a()((function*(t){this.supportedBridges||(this.supportedBridges=yield this.fetchSupportedBridges());var e=this.supportedBridges.filter((function(e){return e.name===t||e.bridgeName===t}))[0];return{icon:null==e?void 0:e.icon,displayName:null==e?void 0:e.displayName}}));return function(e){return t.apply(this,arguments)}}(),e.fetchSupportedBridges=function(){var t=a()((function*(){var t,e=yield this.getBaseURL(),n=yield this.client.get(e+"/supported/bridges");return null==n||null==(t=n.data)?void 0:t.result}));return function(){return t.apply(this,arguments)}}(),e.isSupported=function(t,e){var n="evm"===t.impl&&"evm"===e.impl;if(!n)return!1;if(!this.supportedReceivingChainIds||!this.supportedSendingChainIds)return n;var r=Object(v.h)(t),o=Object(v.h)(e);return n&&this.supportedSendingChainIds.includes(r)&&this.supportedReceivingChainIds.includes(o)},e.fetchTransactionData=function(){var t=a()((function*(t){var e=yield this.getBaseURL();return(yield this.client.post(e+"/build-tx",{route:t})).data.result}));return function(e){return t.apply(this,arguments)}}(),e.fetchSimpleQuoteFromInput=function(){var t=a()((function*(t){var e,n,r=(yield this.getBaseURL())+"/quote";if(t.networkIn.id===t.networkOut.id&&"OUTPUT"!==t.independentField){var o;try{o=yield this.client.get(r,{params:{fromChainId:Object(v.i)(t.networkIn.id),fromTokenAddress:Object(v.j)(t.tokenIn),toChainId:Object(v.i)(t.networkOut.id),toTokenAddress:Object(v.j)(t.tokenOut),fromAmount:Object(v.k)(t.tokenIn,t.typedValue),userAddress:t.activeAccount.address,recipient:t.receivingAddress,sort:"output",singleTxOnly:!0}})}catch(y){return}var i=null==(e=o)||null==(n=e.data)?void 0:n.result;if(i&&i.routes.length>0){var a=i.routes.find((function(t){return!!t.isOnlySwapRoute}));if(a){var u,c,s=a.fromAmount,d=Object(v.j)(t.tokenIn),l=a.toAmount,f=Object(v.j)(t.tokenOut),p=Object(v.d)(t.tokenIn.decimals,t.tokenOut.decimals,s,l),h=yield this.fetchTransactionData(a);h&&h.approvalData&&h.approvalData.allowanceTarget&&(u=h.approvalData.allowanceTarget),h&&(c={from:t.activeAccount.address,value:h.value,to:h.txTarget,data:h.txData});var m=[];if(a.userTxs)m=a.userTxs.filter((function(t){return t.protocol})).map((function(t){return t.protocol})).map((function(t){return{name:t.displayName,logoUrl:t.icon}}));return{data:{type:this.type,sellAmount:s,sellTokenAddress:d,buyAmount:l,buyTokenAddress:f,instantRate:p,allowanceTarget:u,txData:c,arrivalTime:30,providers:m}}}}}}));return function(e){return t.apply(this,arguments)}}(),e.fetchSimpleQuote=function(){var t=a()((function*(t){if("INPUT"===t.independentField)return this.fetchSimpleQuoteFromInput(t);var e=t.tokenIn,n=t.tokenOut,r=t.typedValue,o=yield this.fetchInstantTokenRateFromChain(e,n,t.activeAccount.address);if(o){var i=Object(v.e)(r,o),a=S({},t);a.independentField="INPUT",a.typedValue=i;var u=yield this.fetchSimpleQuoteFromInput(a);if(null==u||!u.data)return u;var c=new f.a(u.data.buyAmount),s=new f.a(Object(v.k)(n,r));if(c.isGreaterThan(s.multipliedBy(.95))){var d=u.data;return d.buyAmount=Object(v.k)(n,r),{data:d}}}}));return function(e){return t.apply(this,arguments)}}(),e.fetchMultichainQuoteFromInput=function(){var t=a()((function*(t){var e,n,r=this,o=(yield this.getBaseURL())+"/quote";if("OUTPUT"!==t.independentField){var i;try{i=yield this.client.get(o,{params:{fromChainId:Object(v.i)(t.networkIn.id),fromTokenAddress:Object(v.j)(t.tokenIn),toChainId:Object(v.i)(t.networkOut.id),toTokenAddress:Object(v.j)(t.tokenOut),fromAmount:Object(v.k)(t.tokenIn,t.typedValue),userAddress:t.activeAccount.address,recipient:t.receivingAddress,sort:"output",singleTxOnly:!0}})}catch(w){return}var a=null==(e=i)||null==(n=e.data)?void 0:n.result;if(a&&a.routes.length>0){var u,c,s=a.routes[0],d=s.fromAmount,l=Object(v.j)(t.tokenIn),f=s.toAmount,p=Object(v.j)(t.tokenOut),h=Object(v.d)(t.tokenIn.decimals,t.tokenOut.decimals,d,f),m=yield this.fetchTransactionData(s);m&&m.approvalData&&m.approvalData.allowanceTarget&&(u=m.approvalData.allowanceTarget),m&&(c={from:t.activeAccount.address,value:m.value,to:m.txTarget,data:m.txData});var y=yield Promise.all(s.usedBridgeNames.map((function(t){return r.getBridgeInfo(t)}))),b=s.usedBridgeNames.map((function(t,e){var n,r;return{name:null==(n=y[e])?void 0:n.displayName,logoUrl:null==(r=y[e])?void 0:r.icon}}));return{data:{type:this.type,sellAmount:d,sellTokenAddress:l,buyAmount:f,buyTokenAddress:p,instantRate:h,allowanceTarget:u,txData:c,arrivalTime:s.serviceTime,providers:b,additionalParams:{socketUsedBridgeNames:s.usedBridgeNames}}}}var O=null==a?void 0:a.bridgeRouteErrors;if(O){var g=Object.values(O).filter((function(t){return t.maxAmount||t.minAmount})).map((function(t){return{max:t.maxAmount,min:t.minAmount}}));if(g.length>0)return{limited:Object(v.c)(g)}}}}));return function(e){return t.apply(this,arguments)}}(),e.fetchMultichainQuote=function(){var t=a()((function*(t){if("INPUT"===t.independentField)return this.fetchMultichainQuoteFromInput(t);var e=t.tokenIn,n=t.tokenOut,r=t.typedValue,o=yield this.fetchInstantTokenRateFromChain(e,n,t.activeAccount.address);if(o){var i=Object(v.e)(r,o),a=S({},t);a.independentField="INPUT",a.typedValue=i;var u=yield this.fetchMultichainQuoteFromInput(a);if(null==u||!u.data)return u;var c=new f.a(u.data.buyAmount),s=new f.a(Object(v.k)(n,r));if(c.isGreaterThan(s.multipliedBy(.95))){var d=u.data;return d.buyAmount=Object(v.k)(n,r),{data:d}}}}));return function(e){return t.apply(this,arguments)}}(),e.fetchQuote=function(){var t=a()((function*(t){if(this.isSupported(t.networkIn,t.networkOut))return t.networkIn.id===t.networkOut.id?this.fetchSimpleQuote(t):this.fetchMultichainQuote(t)}));return function(e){return t.apply(this,arguments)}}(),e.buildTransaction=function(){var t=a()((function*(t){var e=t.txData,n=t.additionalParams;if(e)return{data:e,attachment:{socketUsedBridgeNames:null==n?void 0:n.socketUsedBridgeNames}};var r,o,i=yield this.fetchQuote(t);if(null!=i&&i.data&&(null!=i&&null!=(r=i.data)&&r.txData))return{data:null==i?void 0:i.data.txData,attachment:{socketUsedBridgeNames:null==(o=i.data.additionalParams)?void 0:o.socketUsedBridgeNames}}}));return function(e){return t.apply(this,arguments)}}(),e.querySocketBridgeStatus=function(){var t=a()((function*(t){var e,n;try{var r=yield this.getBaseURL();n=yield this.client.get(r+"/bridge-status",{params:t})}catch(a){return}var o,i=n.data.result;return"COMPLETED"===i.sourceTxStatus&&"COMPLETED"===i.destinationTxStatus||"COMPLETED"===(null==(e=i.refuel)?void 0:e.status)?{status:"sucesss",destinationTransactionHash:i.destinationTransactionHash||(null==(o=i.refuel)?void 0:o.destinationTransactionHash)}:"FAILED"===i.destinationTxStatus||"FAILED"===i.sourceTxStatus?{status:"failed"}:void 0}));return function(e){return t.apply(this,arguments)}}(),e.queryCrosschainTransactionProgress=function(){var t=a()((function*(t){var e=t.nonce,n=t.networkId,r=t.accountId,o=t.tokens,i=t.attachment;if(void 0!==e&&o)for(var a=o.from,u=o.to,c=Object(v.i)(a.networkId),s=Object(v.i)(u.networkId),d=yield p.a.serviceHistory.getTransactionsWithNonce({nonce:e,networkId:n,accountId:r}),l=0;l<d.length;l+=1){var f,h,m,y,b=d[l].decodedTx.txid,O=yield this.querySocketBridgeStatus({fromChainId:c,toChainId:s,transactionHash:b,bridgeName:null==i||null==(f=i.socketUsedBridgeNames)?void 0:f[0]});if("sucesss"===(null==(h=O)?void 0:h.status))return{status:O.status,destinationTransactionHash:O.destinationTransactionHash};if("failed"===(null==(m=O)?void 0:m.status))return{status:O.status};if(null!=(y=O)&&y.destinationTransactionHash)return{destinationTransactionHash:O.destinationTransactionHash}}if(Date.now()-t.addedTime>36e5)return{status:"failed"}}));return function(e){return t.apply(this,arguments)}}(),e.querySimpleTransactionProgress=function(){var t=a()((function*(t){var e=t.networkId,n=t.accountId,r=t.nonce;if(r)return{status:yield p.a.serviceHistory.queryTransactionNonceStatus({networkId:e,accountId:n,nonce:r})};var o=yield p.a.serviceNetwork.rpcCall(e,{method:"eth_getTransactionReceipt",params:[t.hash]});return o?{status:1===Number(o.status)?"sucesss":"failed"}:Date.now()-t.addedTime>36e5?{status:"failed"}:void 0}));return function(e){return t.apply(this,arguments)}}(),e.queryTransactionProgress=function(){var t=a()((function*(t){var e=t.tokens;if(e){var n=e.from,r=e.to;return n.networkId===r.networkId?this.querySimpleTransactionProgress(t):this.queryCrosschainTransactionProgress(t)}}));return function(e){return t.apply(this,arguments)}}(),c()(t)}(),R=n(165),D=((N={})[m.a.btc]="BTC",N[m.a.eth]="ETH",N[m.a.bsc]="BSC",N[m.a.heco]="HECO",N[m.a.polygon]="POLYGON",N[m.a.avalanche]="AVAXC",N[m.a.okt]="OKExChain",N[m.a.fantom]="FTM",N[m.a.arbitrum]="ARB",N[m.a.celo]="CELO",N[m.a.optimism]="Optimism",N[m.a.sol]="SOL",N[m.a.trx]="TRX",N[m.a.near]="NEAR",N[m.a.etc]="ETC",N[m.a.ethw]="ETHW",N[m.a.etf]="ETHF",N[m.a.doge]="DOGE",N[m.a.ltc]="LTC",N[m.a.bch]="BCH",N[m.a.apt]="APT",N[m.a.algo]="ALGO",N),B={};function U(t){var e;return null!=(e=D[t.id])?e:""}var F=function(){var t=e.prototype;function e(){this.type=h.a.swftc,this.coinsLastUpdate=0,this.coinCodeRecords={},this.coinCodeRecordsLastUpdate=0,this.networkAddrRecords={},this.networkAddrRecordsLastUpdate=0,this.client=d.a.create({timeout:6e4})}return t.getBaseUrl=function(){var t=a()((function*(){return(yield p.a.serviceSwap.getServerEndPoint())+"/swft"}));return function(){return t.apply(this,arguments)}}(),t.prepare=function(){this.getCoins()},t.isSupported=function(t,e){return!0},t.modifyTxId=function(){var t=a()((function*(t,e){var n=(yield this.getBaseUrl())+"/modifyTxId";return(yield this.client.post(n,{orderId:t,depositTxid:e})).data.data}));return function(e,n){return t.apply(this,arguments)}}(),t.getGroupedCoins=function(){var t=a()((function*(){var t=yield this.getCoins();return this.groupCoinsByChainId(t)}));return function(){return t.apply(this,arguments)}}(),t.getCoin=function(){var t=a()((function*(t,e){var n,r=U(t);return null==(n=(yield this.getNetworkAddrRecords())[r])?void 0:n[e]}));return function(e,n){return t.apply(this,arguments)}}(),t.getLocalCoins=function(){var t=a()((function*(){var t=p.a.serviceSwap;return this.coins?this.coins:yield t.getSwftcCoins()}));return function(){return t.apply(this,arguments)}}(),t.saveLocalCoins=function(){var t=a()((function*(t){var e=p.a.serviceSwap;yield e.setSwftcCoins(t),this.coins=t,this.coinsLastUpdate=Date.now()}));return function(e){return t.apply(this,arguments)}}(),t.getRemoteCoins=function(){var t=a()((function*(){var t=(yield this.getBaseUrl())+"/queryCoinList";return(yield this.client.post(t)).data.data}));return function(){return t.apply(this,arguments)}}(),t.updateCoins=function(){var t=a()((function*(){var t=yield this.getRemoteCoins();this.saveLocalCoins(t)}));return function(){return t.apply(this,arguments)}}(),t.getCoins=function(){var t=a()((function*(){var t=this,e=yield this.getLocalCoins();return e||(e=yield this.getRemoteCoins(),yield this.saveLocalCoins(e)),Date.now()-this.coinsLastUpdate>36e5&&setTimeout((function(){return t.updateCoins()}),10),e}));return function(){return t.apply(this,arguments)}}(),t.getCoinCodeRecords=function(){var t=a()((function*(){if(this.coinCodeRecords&&Date.now()-this.coinCodeRecordsLastUpdate<36e5)return this.coinCodeRecords;var t=yield this.getCoins(),e={};return t.forEach((function(t){e[t.coinCode]=t})),this.coinCodeRecords=e,this.coinCodeRecordsLastUpdate=Date.now(),e}));return function(){return t.apply(this,arguments)}}(),t.getNetworkAddrRecords=function(){var t=a()((function*(){if(this.networkAddrRecords&&Date.now()-this.networkAddrRecordsLastUpdate<36e5)return this.networkAddrRecords;var t=yield this.getCoins(),e={};return t.forEach((function(t){e[t.mainNetwork]||(e[t.mainNetwork]={});var n=t.contact||v.s;e[t.mainNetwork][n]=t})),this.networkAddrRecords=e,this.networkAddrRecordsLastUpdate=Date.now(),this.networkAddrRecords}));return function(){return t.apply(this,arguments)}}(),t.groupCoinsByChainId=function(t){var e={};return t.forEach((function(t){var n=function(t){if(B[t])return B[t];for(var e=Object.keys(D),n=0;n<e.length;n+=1){var r=e[n],o=D[r];if(o&&(B[o]=r,o===t))return r}}(t.mainNetwork);if(n){e[n]||(e[n]=[]);var r=t.contact||v.s;e[n].push(r)}})),e},t.fetchSwftcQuote=function(){var t=a()((function*(t){var e=t.networkIn,n=t.networkOut,r=t.tokenOut,o=t.tokenIn;if(this.isSupported(e,n)){var i=yield this.getNetworkAddrRecords(),a=U(e),u=U(n),c=Object(v.j)(o),s=Object(v.j)(r);if(a&&u){var d,l,f,p,h=null==(d=i[a])||null==(l=d[c])?void 0:l.coinCode,m=null==(f=i[u])||null==(p=f[s])?void 0:p.coinCode,y=(yield this.getBaseUrl())+"/getBaseInfo";if(h&&m)return{depositCoinCode:h,receiveCoinCode:m,rate:(yield this.client.post(y,{depositCoinCode:h,receiveCoinCode:m})).data.data}}}}));return function(e){return t.apply(this,arguments)}}(),t.fetchQuote=function(){var t=a()((function*(t){var e=t.independentField,n=t.tokenIn,r=t.typedValue,o=t.tokenOut,i=yield this.fetchSwftcQuote(t);if(i){var a={type:this.type,instantRate:i.rate.instantRate,sellTokenAddress:Object(v.j)(n),buyTokenAddress:Object(v.j)(o),providers:[{name:"SwftBridge",logoUrl:"https://common.onekey-asset.com/logo/SwftBridge.png"}],arrivalTime:300,sellAmount:"",buyAmount:"",percentageFee:i.rate.percentageFee};"INPUT"===e?(a.sellAmount=Object(v.k)(n,r),a.buyAmount=Object(v.k)(o,function(t,e,n,r){var o=new f.a(t),i=new f.a(e),a=new f.a(n),u=new f.a(r);return o.minus(o.multipliedBy(i)).multipliedBy(a).minus(u).toFixed()}(r,Object(v.t)(i.rate.depositCoinFeeRate,"0"),i.rate.instantRate,i.rate.chainFee))):(a.buyAmount=Object(v.k)(o,r),a.sellAmount=Object(v.k)(n,function(t,e,n,r){var o=new f.a(t),i=new f.a(e),a=new f.a(n),u=new f.a(r);return o.plus(u).div(a).div(new f.a(1).minus(i)).toFixed()}(r,Object(v.t)(i.rate.depositCoinFeeRate,"0"),i.rate.instantRate,i.rate.chainFee)));var u=new v.a(n,i.rate.depositMax).toNumber(),c=new v.a(n,i.rate.depositMin).toNumber();return{data:a,limited:{max:u.toFixed(),min:c.toFixed()}}}}));return function(e){return t.apply(this,arguments)}}(),t.buildTransaction=function(){var t=a()((function*(t){var e=t.typedValue,n=t.independentField,r=t.activeAccount,o=t.tokenIn,i=t.networkIn,a=t.receivingAddress,u=yield this.fetchSwftcQuote(t);if(u&&r){var c=u.depositCoinCode,s=u.receiveCoinCode,d=u.rate,l="",h="";"INPUT"===n?(l=e,h=Object(v.r)(e,d.instantRate)):(h=e,l=Object(v.e)(e,d.instantRate));var m=r.address,y=null!=a?a:r.address,b=r.address,O=yield this.createOrder(c,s,new f.a(l).toFixed(8,f.a.ROUND_DOWN),new f.a(h).toFixed(8,f.a.ROUND_DOWN),m,y,b);return O&&O.data?o.tokenIdOnNetwork?{data:yield p.a.engine.buildEncodedTxFromTransfer({networkId:i.id,accountId:r.id,transferInfo:{from:r.address,to:O.data.platformAddr,amount:l,token:o.tokenIdOnNetwork}}),attachment:{swftcOrderId:O.data.orderId}}:{data:yield p.a.engine.buildEncodedTxFromTransfer({networkId:i.id,accountId:r.id,transferInfo:{from:r.address,to:O.data.platformAddr,amount:l}}),attachment:{swftcOrderId:O.data.orderId}}:{error:{code:O.resCode,msg:O.resMsg}}}}));return function(e){return t.apply(this,arguments)}}(),t.createOrder=function(){var t=a()((function*(t,e,n,r,o,i,a){var u={equipmentNo:o,destinationAddr:i,refundAddr:a,depositCoinAmt:n,receiveCoinAmt:r,depositCoinCode:t,receiveCoinCode:e,sourceType:"H5",sourceFlag:"ONEKEY"},c=(yield this.getBaseUrl())+"/accountExchange";return(yield this.client.post(c,u)).data}));return function(e,n,r,o,i,a,u){return t.apply(this,arguments)}}(),t.queryTransactionProgress=function(){var t=a()((function*(t){var e,n,r=null!=(e=null==(n=t.attachment)?void 0:n.swftcOrderId)?e:t.thirdPartyOrderId;if(r){var o=(yield this.getBaseUrl())+"/queryOrderState",i=(yield d.a.post(o,{equipmentNo:t.from,sourceType:"H5",orderId:r})).data.data;if("complete"===i.tradeState)return{status:"sucesss",destinationTransactionHash:i.transactionId};if(i.transactionId)return{destinationTransactionHash:i.transactionId}}var a=t.networkId,u=t.accountId,c=t.nonce,s=t.hash;if("evm"===Object(R.f)(a)&&void 0!==c){var l=yield p.a.serviceHistory.queryTransactionNonceStatus({networkId:a,accountId:u,nonce:c});if("canceled"===l||"failed"===l)return{status:l}}else if("evm"!==Object(R.f)(a)){var f=yield p.a.serviceHistory.queryTransactionByTxid({networkId:a,accountId:u,txid:s});if("canceled"===f||"failed"===f)return{status:f}}if(Date.now()-t.addedTime>36e5)return{status:"failed"}}));return function(e){return t.apply(this,arguments)}}(),c()(e)}();function E(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function L(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?E(Object(n),!0).forEach((function(e){o()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var M=function(){function t(){this.httpClient=d.a.create({timeout:6e4}),this.jupiter=new T,this.swftc=new F,this.simple=new g,this.socket=new C,this.mdex=new x,this.quoters=[this.mdex,this.simple,this.socket,this.jupiter,this.swftc]}var e=t.prototype;return e.prepare=function(){this.quoters.forEach((function(t){null==t.prepare||t.prepare()}))},e.convertParams=function(t){if(t.receivingAddress){var e,n,r=t.networkOut.id,o=t.networkIn.id,i=t.tokenOut.tokenIdOnNetwork?t.tokenOut.tokenIdOnNetwork:v.s,a=t.tokenIn.tokenIdOnNetwork?t.tokenIn.tokenIdOnNetwork:v.s,u=t.tokenOut.decimals,c=t.tokenIn.decimals,s=t.slippagePercentage,d=t.receivingAddress,l=t.activeAccount.address;"INPUT"===t.independentField?n=Object(v.k)(t.tokenIn,t.typedValue):e=Object(v.k)(t.tokenOut,t.typedValue);var f={toNetworkId:r,fromNetworkId:o,toTokenAddress:i,fromTokenAddress:a,toTokenDecimals:u,fromTokenDecimals:c,slippagePercentage:s,userAddress:l,receivingAddress:d};return n&&(f.fromTokenAmount=n),e&&(f.toTokenAmount=e),f}},e.convertOrderToTransaction=function(){var t=a()((function*(t,e){var n=t.tokenIn,r=t.networkIn,o=t.activeAccount,i=t.sellAmount;if(i&&n){var a=new f.a(i).shiftedBy(-n.decimals).toFixed();return n.tokenIdOnNetwork?yield p.a.engine.buildEncodedTxFromTransfer({networkId:r.id,accountId:o.id,transferInfo:{from:o.address,to:e.platformAddr,amount:a,token:n.tokenIdOnNetwork}}):yield p.a.engine.buildEncodedTxFromTransfer({networkId:r.id,accountId:o.id,transferInfo:{from:o.address,to:e.platformAddr,amount:a}})}}));return function(e,n){return t.apply(this,arguments)}}(),e.buildQuote=function(){var t=a()((function*(t){var e=t.responses,n=t.params;if(e&&0!==e.length){var r,o=e.filter((function(t){var e;return null==(e=t.result)?void 0:e.allowanceTarget})).map((function(t){return t.result.allowanceTarget})),i=yield p.a.engine.batchTokensAllowance({networkId:n.tokenIn.networkId,accountId:n.activeAccount.id,tokenIdOnNetwork:n.tokenIn.tokenIdOnNetwork,spenders:o});return i&&i.length===o.length&&o.forEach((function(t,e){var n=i[e];r||(r={}),r[t]=n})),e.map((function(t){var e,n=t.result,o=0;"swft"===n.quoter&&(o=.002);var i,a=o+Number(null!=(e=n.percentageFee)?e:0),u={type:n.quoter,instantRate:n.instantRate,sellAmount:n.sellAmount,sellTokenAddress:n.sellTokenAddress,buyAmount:n.buyAmount,buyTokenAddress:n.buyTokenAddress,providers:n.sources,percentageFee:n.percentageFee,allowanceTarget:n.allowanceTarget,arrivalTime:n.arrivalTime,needApproved:!1,estimatedBuyAmount:Object(v.r)(n.buyAmount,1-a)};if(u.allowanceTarget&&r){var c=r[u.allowanceTarget];void 0!==c&&n.sellAmount&&(u.needApproved=Number(n.sellAmount)>c)}return t.limit&&(i={max:t.limit.max,min:t.limit.min}),{data:u,limited:i}}))}}));return function(e){return t.apply(this,arguments)}}(),e.fetchQuote=function(){var t=a()((function*(t){var e,n=this.convertParams(t);if(n){var r=yield p.a.serviceSwap.getCurrentUserSelectedQuoter();r&&(n.quoterType=r);var o=(yield p.a.serviceSwap.getServerEndPoint())+"/swap/v2/quote",i=null==(e=(yield this.httpClient.get(o,{params:n})).data)?void 0:e.data;if(i){var a=yield this.buildQuote({responses:[i],params:t});return null==a?void 0:a[0]}}}));return function(e){return t.apply(this,arguments)}}(),e.fetchQuotes=function(){var t=a()((function*(t){var e,n=this.convertParams(t);if(n){var r=(yield p.a.serviceSwap.getServerEndPoint())+"/swap/quote_all",o=null==(e=(yield this.httpClient.get(r,{params:n})).data)?void 0:e.data;if(o){var i=yield this.buildQuote({responses:o,params:t});if(i)return i.filter((function(t){return Boolean(t)}))}}}));return function(e){return t.apply(this,arguments)}}(),e.buildTransaction=function(){var t=a()((function*(t,e){var n,r=this.convertParams(e);if(r){r.fromTokenAmount=e.sellAmount,delete r.toTokenAmount,r.quoterType=t;var o=(yield p.a.serviceSwap.getServerEndPoint())+"/swap/build_tx",i=(yield this.httpClient.post(o,r)).data;if(null!=i&&i.transaction)return"object"===typeof i.transaction?{data:L(L({},i.transaction),{},{from:e.activeAccount.address}),result:i.result}:{data:i.transaction,result:i.result};if(i.order&&null!=(n=i.result)&&n.instantRate)return{data:yield this.convertOrderToTransaction(e,i.order),result:i.result,attachment:{swftcOrderId:i.order.orderId}}}}));return function(e,n){return t.apply(this,arguments)}}(),e.fetchQuoteLegacy=function(){var t=a()((function*(t){for(var e=0;e<this.quoters.length;e+=1){var n=this.quoters[e];if(n.isSupported(t.networkOut,t.networkIn)){var r=yield n.fetchQuote(t);if(null!=r&&r.data)return r}}}));return function(e){return t.apply(this,arguments)}}(),e.buildTransactionLegacy=function(){var t=a()((function*(t,e){for(var n=0;n<this.quoters.length;n+=1){var r=this.quoters[n];if(r.type===t&&r.isSupported(e.networkOut,e.networkIn)){var o=yield r.buildTransaction(e);if(o)return o}}}));return function(e,n){return t.apply(this,arguments)}}(),e.getQuoteType=function(t){return t.quoterType?t.quoterType:t.thirdPartyOrderId?h.a.swftc:h.a.zeroX},e.isSimpileTx=function(t){var e,n,r=null==(e=t.tokens)?void 0:e.from,o=null==(n=t.tokens)?void 0:n.to,i=this.getQuoteType(t);return(null==r?void 0:r.networkId)===(null==o?void 0:o.networkId)&&i!==h.a.swftc},e.queryTransactionProgress=function(){var t=a()((function*(t){if(this.isSimpileTx(t))return this.simple.queryTransactionProgress(t);for(var e=this.getQuoteType(t),n=0;n<this.quoters.length;n+=1){var r=this.quoters[n];if(r.type===e)return r.queryTransactionProgress(t)}}));return function(e){return t.apply(this,arguments)}}(),e.swftModifyTxId=function(){var t=a()((function*(t,e){return this.swftc.modifyTxId(t,e)}));return function(e,n){return t.apply(this,arguments)}}(),c()(t)}();M.client=new M},3720:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n(70),o=n(1),i=n(508),a=n(0),u=function(t){var e=t.value,n=t.typography,u=void 0===n?"Caption":n,c=Object(i.a)(),s=Object(o.useMemo)((function(){if(!e)return c.formatMessage({id:"content__str_mins"},{content__str_mins:1});if(e<60)return c.formatMessage({id:"content__str_seconds"},{content__str_seconds:e});var t=Math.ceil(e/60);return c.formatMessage({id:"content__str_mins"},{content__str_mins:t})}),[e,c]);return Object(a.jsxs)(r.a,{typography:u,color:"text-subdued",children:["<",s]})}},3722:function(t,e,n){"use strict";var r=n(3),o=n.n(r),i=n(1),a=n(43),u=n(438),c=n(3550);e.a=function(t){var e=t.tx,n=t.stopInterval,r=Object(i.useCallback)(o()((function*(){var t=yield c.a.client.queryTransactionProgress(e);if(t){var n=t.status;if(n&&"pending"!==n&&(a.a.dispatch(Object(u.i)({accountId:e.accountId,networkId:e.networkId,hash:e.hash,transaction:{confirmedTime:Date.now(),status:n}})),e.tokens)){var r=e.tokens.from,o=r.token.tokenIdOnNetwork?[r.token.tokenIdOnNetwork]:[];if(a.a.serviceToken.fetchTokenBalance({activeAccountId:e.accountId,activeNetworkId:r.networkId,tokenIds:o}),e.receivingAddress){var i=yield a.a.serviceAccount.getAccountByAddress({address:e.receivingAddress}),s=e.tokens.to;if(i){var d=s.token.tokenIdOnNetwork?[s.token.tokenIdOnNetwork]:[];a.a.serviceToken.fetchTokenBalance({activeAccountId:i.id,activeNetworkId:s.networkId,tokenIds:d})}}}t.destinationTransactionHash&&a.a.dispatch(Object(u.i)({accountId:e.accountId,networkId:e.networkId,hash:e.hash,transaction:{destinationTransactionHash:t.destinationTransactionHash}}))}})),[]);return Object(i.useEffect)((function(){if(r(),!n){var t="0x"!==e.quoterType?2e4:5e3,o=setInterval(r,t);return function(){clearInterval(o)}}}),[]),null}},3723:function(t,e,n){"use strict";var r=n(32),o=n(70),i=n(27),a=n.n(i),u=n(508),c=n(3083),s=n(0);function d(t){if(!t)return"0";var e=new a.a(t);return(e=e.multipliedBy(100)).isNaN()?"0":e.toFixed()}function l(t){return!!t&&[c.a.mdex].includes(t)}e.a=function(t){var e=t.type,n=t.percentageFee,i=t.typography,a=void 0===i?"Caption":i,c=Object(u.a)();return Object(s.jsx)(r.a,{children:l(e)||n&&0===Number(n)?Object(s.jsxs)(r.a,{flexDirection:"column",alignItems:"flex-end",children:[Object(s.jsx)(o.a,{typography:a,color:"text-subdued",strikeThrough:!0,children:"0.3%"}),Object(s.jsx)(o.a,{typography:a,color:"text-success",children:c.formatMessage({id:"form__free_limited_time"})})]}):Object(s.jsx)(o.a,{typography:a,color:"text-subdued",children:n?d(n)+"%":" 0.3%"})})}},3724:function(t,e,n){"use strict";var r=n(125),o=n(79),i=n(70),a=n(10),u=n.n(a),c=n(1),s=n(27),d=n.n(s),l=n(749),f=n(0),p=function(t){var e=Object(l.g)(t,8),n=new d.a(e);return n.isZero()?Object(l.g)(t,16):n.isGreaterThan(1*10**9)?Object(l.g)(t,0):e};e.a=function(t){var e=t.tokenA,n=t.tokenB,a=t.rate,s=t.typography,d=void 0===s?"Body2":s,l=t.color,h=void 0===l?"text-default":l,v=Object(c.useState)(!1),m=u()(v,2),y=m[0],b=m[1];if(!e||!n||!a)return Object(f.jsx)(i.a,{typography:d,color:h,children:"---"});var O=e.symbol,g=n.symbol,w="";return w=y?"1 "+g+" \u2248 "+p(1/Number(a))+" "+O:"1 "+O+" \u2248 "+p(a)+" "+g,Object(f.jsxs)(r.a,{flexDirection:"row",alignItems:"center",onPress:function(){return b((function(t){return!t}))},children:[Object(f.jsx)(i.a,{typography:d,color:h,textAlign:"right",mr:"1",selectable:!1,children:w}),Object(f.jsx)(o.a,{size:16,name:"ArrowsRightLeftMini",color:"icon-subdued"})]})}}}]);