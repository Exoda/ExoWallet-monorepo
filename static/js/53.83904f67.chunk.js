(this.webpackJsonp=this.webpackJsonp||[]).push([[53],{3050:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(6),i=n.n(r),o=n(9),a=n.n(o),c=n(12),u=n.n(c),s=n(5),d=n.n(s);function f(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d()(e);if(t){var i=d()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return u()(this,n)}}var l=function(e){a()(n,e);var t=f(n);function n(e){var n;return(n=t.call(this,e.options)).vault=e,n}return i()(n)}(n(1108).a);!function(e){a()(n,e);var t=f(n);function n(){return t.apply(this,arguments)}i()(n)}(l)},3055:function(e,t,n){"use strict";n.d(t,"a",(function(){return O}));var r=n(10),i=n.n(r),o=n(2),a=n.n(o),c=n(3),u=n.n(c),s=n(6),d=n.n(s),f=n(9),l=n.n(f),p=n(12),h=n.n(p),y=n(5),v=n.n(y),g=n(22),w=n(21);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function T(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=v()(e);if(t){var i=v()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var O=function(e){l()(n,e);var t=T(n);function n(){return t.apply(this,arguments)}var r=n.prototype;return r.signTransaction=function(){var e=u()((function*(e,t){var n=t.password;if("undefined"===typeof n)throw new w.p("Software signing requires a password.");var r=yield this.getSigners(n,e.inputs.map((function(e){return e.address})));return g.a.engine.info("signTransaction",this.networkId,e),b(b({},yield this.engine.providerManager.signTransaction(this.networkId,e,r)),{},{encodedTx:e.encodedTx})}));return function(t,n){return e.apply(this,arguments)}}(),r.signMessage=function(){var e=u()((function*(e,t){var n=this,r=t.password;if("undefined"===typeof r)throw new w.p("Software signing requires a password.");var o=yield this.getDbAccount(),a=Object.values(yield this.getSigners(r,[o.address])),c=i()(a,1)[0];return g.a.engine.info("signMessage",this.networkId,e),Promise.all(e.map((function(e){return n.engine.providerManager.signMessage(n.networkId,e,c)})))}));return function(t,n){return e.apply(this,arguments)}}(),r.getAddress=function(){throw new Error("Method not implemented.")},d()(n)}(n(3050).a)},3068:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(44),i=n(72),o=n(22),a=n(15);function c(e,t){return"string"!==typeof t?null:e===r.HardwareErrorCode.DeviceInitializeFailed&&t.includes("ECONNABORTED")?new i.g({message:t}):t.includes("Bridge network error")?new i.e({message:t}):null}function u(e){var t,n=e||{},u=n.code,s=n.error,d=n.message,f=null!=(t=null!=s?s:d)?t:"Unknown error";if(c(u,f))return c(u,f);switch(o.a.hardwareSDK.info("Device Utils Convert Device Error:",u,f),u){case r.HardwareErrorCode.UnknownError:return new i.F(e);case r.HardwareErrorCode.DeviceFwException:return new i.s(e);case r.HardwareErrorCode.DeviceUnexpectedMode:return"string"===typeof f&&-1!==f.indexOf("ui-device_bootloader_mode")?new i.C(e):new i.F(e);case r.HardwareErrorCode.DeviceCheckDeviceIdError:return new i.l(e);case r.HardwareErrorCode.DeviceNotFound:return new i.j(e);case r.HardwareErrorCode.DeviceUnexpectedBootloaderMode:return new i.C(e);case r.HardwareErrorCode.DeviceInterruptedFromOutside:case r.HardwareErrorCode.DeviceInterruptedFromUser:return new i.I(e);case r.HardwareErrorCode.DeviceNotSupportPassphrase:return new i.D(e);case r.HardwareErrorCode.IFrameLoadFail:return new i.t(e);case r.HardwareErrorCode.IframeTimeout:return new i.u(e);case r.HardwareErrorCode.FirmwareUpdateDownloadFailed:return new i.o(e);case r.HardwareErrorCode.FirmwareUpdateManuallyEnterBoot:return new i.r(e);case r.HardwareErrorCode.FirmwareUpdateAutoEnterBootFailure:return new i.p(e);case r.HardwareErrorCode.FirmwareUpdateLimitOneDevice:return new i.q(e);case r.HardwareErrorCode.CallMethodNeedUpgradeFirmware:return new i.s(e);case r.HardwareErrorCode.NewFirmwareUnRelease:return new i.B(e);case r.HardwareErrorCode.NetworkError:return new i.A(e);case r.HardwareErrorCode.BlePermissionError:return new i.y(e);case r.HardwareErrorCode.BleLocationError:return new i.x({message:f});case r.HardwareErrorCode.BleLocationServicesDisabled:return new i.b({message:f});case r.HardwareErrorCode.BleDeviceNotBonded:return new i.i(e);case r.HardwareErrorCode.BleWriteCharacteristicError:return new i.d(e);case r.HardwareErrorCode.BleScanError:return new i.c({message:f});case r.HardwareErrorCode.BleAlreadyConnected:return new i.a(e);case r.HardwareErrorCode.RuntimeError:return-1!==f.indexOf("EIP712 blind sign is disabled")?new i.E(e):-1!==f.indexOf("Unknown message")||-1!==f.indexOf("Failure_UnexpectedMessage")?new i.G(e):new i.F(e);case r.HardwareErrorCode.PinInvalid:return new i.v(e);case r.HardwareErrorCode.DeviceCheckPassphraseStateError:return new i.w(e);case r.HardwareErrorCode.DeviceOpenedPassphrase:return new i.m(e);case r.HardwareErrorCode.DeviceNotOpenedPassphrase:return new i.k(e);case r.HardwareErrorCode.PinCancelled:case r.HardwareErrorCode.ActionCancelled:return new i.H(e);case r.HardwareErrorCode.BridgeNotInstalled:case i.h.NeedOneKeyBridge:return new i.z(e);case r.HardwareErrorCode.BridgeNetworkError:return new i.e(e);case r.HardwareErrorCode.BridgeTimeoutError:return a.a.isDesktop&&(o.a.hardwareSDK.debug("desktop bridge timeout, restart desktop bridge."),window.desktopApi.reloadBridgeProcess()),new i.f(e);case r.HardwareErrorCode.PollingTimeout:return new i.g(e);case r.HardwareErrorCode.BlindSignDisabled:return new i.E(e);default:return new i.F(e)}}},3069:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return S}));var r=n(2),i=n.n(r),o=n(143),a=n.n(o),c=n(3),u=n.n(c),s=n(6),d=n.n(s),f=n(9),l=n.n(f),p=n(12),h=n.n(p),y=n(5),v=n.n(y),g=n(27),w=n.n(g),m=n(14),b=n(22),T=n(15),O=n(54),x=n(21),A=n(647),P=n(57),k=n(1108);function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function E(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=v()(e);if(t){var i=v()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}if(T.a.isExtensionUi)throw new Error("engine/VaultBase is not allowed imported from ui");var S=function(t){l()(r,t);var n=E(r);function r(){return n.apply(this,arguments)}var i=r.prototype;return i.init=function(){var e=u()((function*(e){yield this.initProvider(),yield this.initKeyring(e)}));return function(t){return e.apply(this,arguments)}}(),i.initKeyring=function(){var e=u()((function*(e){this.keyring=yield e.keyringCreator(this)}));return function(t){return e.apply(this,arguments)}}(),i.signTransaction=function(){var e=u()((function*(e,t){return this.keyring.signTransaction(e,t)}));return function(t,n){return e.apply(this,arguments)}}(),i.signAndSendTransaction=function(){var e=u()((function*(e,t,n){var r=yield this.signTransaction(e,t);return n?C(C({},r),{},{encodedTx:e.encodedTx}):this.broadcastTransaction(C(C({},r),{},{encodedTx:e.encodedTx}))}));return function(t,n,r){return e.apply(this,arguments)}}(),i.broadcastTransaction=function(){var e=u()((function*(e,t){b.a.engine.info("broadcastTransaction START:",{rawTx:e.rawTx});var n=yield this.engine.providerManager.broadcastTransaction(this.networkId,e.rawTx,t);return b.a.engine.info("broadcastTransaction END:",{txid:n,rawTx:e.rawTx}),C(C({},e),{},{txid:n,encodedTx:e.encodedTx})}));return function(t,n){return e.apply(this,arguments)}}(),i.buildEncodedTxFromBatchTransfer=function(){var e=u()((function*(e,t){throw new x.k}));return function(t,n){return e.apply(this,arguments)}}(),i.buildEncodedTxsFromSetApproveForAll=function(){var e=u()((function*(e,t){throw new x.k}));return function(t,n){return e.apply(this,arguments)}}(),i.activateAccount=function(){var e=u()((function*(){throw new x.k}));return function(){return e.apply(this,arguments)}}(),i.activateToken=function(){var e=u()((function*(e,t){throw new x.k}));return function(t,n){return e.apply(this,arguments)}}(),i.getTokenAllowance=function(){var e=u()((function*(e,t){throw new x.k}));return function(t,n){return e.apply(this,arguments)}}(),i.batchTokensAllowance=function(){var e=u()((function*(e,t){throw new x.k}));return function(t,n){return e.apply(this,arguments)}}(),i.getOutputAccount=function(){var e=u()((function*(){var e=yield this.getDbAccount({noCache:!0});return{id:e.id,name:e.name,type:e.type,path:e.path,coinType:e.coinType,tokens:[],address:e.address}}));return function(){return e.apply(this,arguments)}}(),i.getAccountBalance=function(){var e=u()((function*(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=yield this.getDbAccount(),r=n.address;return this.getBalances((t?[{address:r}]:[]).concat(e.map((function(e){return{address:r,tokenAddress:e}}))))}));return function(t){return e.apply(this,arguments)}}(),i.updatePendingTxs=function(){var e=u()((function*(e){throw new x.k}));return function(t){return e.apply(this,arguments)}}(),i.getAccountNonce=function(){var e=u()((function*(){return Promise.resolve(null)}));return function(){return e.apply(this,arguments)}}(),i.fixActionDirection=function(){var e=u()((function*(e){var t,n,r,i,o=e.action,a=e.accountAddress;(o.direction=P.b.OTHER,o.type===P.a.NATIVE_TRANSFER)&&(o.direction=yield this.buildTxActionDirection({from:(null==(t=o.nativeTransfer)?void 0:t.from)||"",to:(null==(n=o.nativeTransfer)?void 0:n.to)||"",address:a}));o.type===P.a.TOKEN_TRANSFER&&(o.direction=yield this.buildTxActionDirection({from:(null==(r=o.tokenTransfer)?void 0:r.from)||"",to:(null==(i=o.tokenTransfer)?void 0:i.to)||"",address:a}));return o}));return function(t){return e.apply(this,arguments)}}(),i.fixDecodedTx=function(){var e=u()((function*(e){var t,n;e.createdAt=null!=(t=e.createdAt)?t:Date.now();var r=null==(n=e.encodedTx)?void 0:n.nonce;e.nonce=a()(r)?e.nonce:new w.a(r).toNumber();for(var i=e.owner,o=0;o<e.actions.length;o+=1){var c=e.actions[o];yield this.fixActionDirection({action:c,accountAddress:i})}if(e.outputActions)for(var u=0;u<e.outputActions.length;u+=1){var s=e.outputActions[u];yield this.fixActionDirection({action:s,accountAddress:i})}return Promise.resolve(e)}));return function(t){return e.apply(this,arguments)}}(),i.fixHistoryTx=function(){var e=u()((function*(e){return e.decodedTx=yield this.fixDecodedTx(e.decodedTx),T.a.isDev&&T.a.isDesktop&&Object.assign(e,{_tmpCreatedAtText:new Date(e.decodedTx.createdAt||0).toLocaleString(),_tmpUpdatedAtText:new Date(e.decodedTx.updatedAt||0).toLocaleString(),_tmpStatus:e.decodedTx.status,_tmpIsFinal:e.decodedTx.isFinal}),Promise.resolve(e)}));return function(t){return e.apply(this,arguments)}}(),i.buildHistoryTx=function(){var e=u()((function*(e){var t=e.historyTxToMerge,n=(e.encodedTx,e.decodedTx),r=e.signedTx,i=e.isSigner,o=e.isLocalCreated,a=(null==r?void 0:r.txid)||(null==n?void 0:n.txid)||"";if(!a)throw new Error("buildHistoryTx txid not found");var c=yield this.getAccountAddress();n.txid=a||n.txid,n.owner=c,i&&(n.signer=c);var u=C(C({id:this.networkId+"_"+a+"_"+this.accountId,isLocalCreated:Boolean(o)},t),{},{decodedTx:n});return u=yield this.fixHistoryTx(u),Promise.resolve(u)}));return function(t){return e.apply(this,arguments)}}(),i.checkIsScamHistoryTx=function(){var e=u()((function*(e){return!1}));return function(t){return e.apply(this,arguments)}}(),i.fetchOnChainHistory=function(){var e=u()((function*(e){throw new x.k}));return function(t){return e.apply(this,arguments)}}(),i.fixAddressCase=function(e){return Promise.resolve(e)},i.buildTxActionDirection=function(){var e=u()((function*(e){var t=e.from,n=e.to,r=e.address;return t=yield this.fixAddressCase(t||""),n=yield this.fixAddressCase(n),r=yield this.fixAddressCase(r),t===n&&t===r?P.b.SELF:t&&t===r?P.b.OUT:n&&n===r?P.b.IN:P.b.OTHER}));return function(t){return e.apply(this,arguments)}}(),i.getNextNonce=function(){var e=u()((function*(e,t){var n,r,i=null!=(n=null==(r=(yield this.engine.providerManager.getAddresses(e,[t.address]))[0])?void 0:r.nonce)?n:0,o=(yield this.engine.getHistory(e,t.id,void 0,!1),yield O.a.history.getMaxPendingNonce({accountId:this.accountId,networkId:e})),c=yield O.a.history.getPendingNonceList({accountId:this.accountId,networkId:e}),u=Math.max(a()(o)?0:o+1,i);if(Number.isNaN(u)&&(u=i),u>i)for(var s=i;s<u;s+=1)if(!c.includes(s)){u=s;break}if(u<i&&(u=i),u-i>=m.t.PENDING_QUEUE_MAX_LENGTH)throw new x.u(m.t.PENDING_QUEUE_MAX_LENGTH);return u}));return function(t,n){return e.apply(this,arguments)}}(),i.validateSendAmount=function(e,t,n){return Promise.resolve(!0)},i.notifyChainChanged=function(e,t){},i.getFetchBalanceAddress=function(e){return Promise.resolve(e.address)},i.getPrivateKeyByCredential=function(t){return e.from(t.startsWith("0x")?t.slice(2):t,"hex")},d()(r)}(function(e){l()(n,e);var t=E(n);function n(){return t.apply(this,arguments)}var r=n.prototype;return r.initProvider=function(){var e=u()((function*(){var e=(yield this.getNetwork()).impl;a()(A.a[e])||(this.engineProvider=yield this.engine.providerManager.getProvider(this.networkId))}));return function(){return e.apply(this,arguments)}}(),r.proxyJsonRPCCall=function(){var e=u()((function*(e){throw new x.k}));return function(t){return e.apply(this,arguments)}}(),r.createClientFromURL=function(e){throw new x.k},r.getEthersProvider=function(){var e=u()((function*(){throw new x.k}));return function(){return e.apply(this,arguments)}}(),r.getClientEndpointStatus=function(){var e=u()((function*(e){var t=this.createClientFromURL(e),n=performance.now(),r=(yield t.getInfo()).bestBlockNumber;return{responseTime:Math.floor(performance.now()-n),latestBlock:r}}));return function(t){return e.apply(this,arguments)}}(),r.validateAddress=function(){var e=u()((function*(e){var t=yield this.engineProvider.verifyAddress(e),n=t.normalizedAddress;if(!t.isValid||"undefined"===typeof n)throw new x.e;return Promise.resolve(n)}));return function(t){return e.apply(this,arguments)}}(),r.validateImportedCredential=function(e){return Promise.resolve(this.settings.importedAccountEnabled&&/^(0x)?[0-9a-zA-Z]{64}$/.test(e))},r.validateWatchingCredential=function(){var e=u()((function*(e){return Promise.resolve(this.settings.watchingAccountEnabled&&(yield this.engineProvider.verifyAddress(e)).isValid)}));return function(t){return e.apply(this,arguments)}}(),r.validateTokenAddress=function(){var e=u()((function*(e){var t=yield this.engineProvider.verifyTokenAddress(e),n=t.normalizedAddress;if(!t.isValid||"undefined"===typeof n)throw new x.h;return Promise.resolve(n)}));return function(t){return e.apply(this,arguments)}}(),r.checkAccountExistence=function(){var e=u()((function*(e){return Promise.resolve(!0)}));return function(t){return e.apply(this,arguments)}}(),r.getBalances=function(){var e=u()((function*(e){return(yield this.engine.providerManager.getClient(this.networkId)).getBalances(e.map((function(e){var t=e.address,n=e.tokenAddress;return{address:t,coin:C({},"string"===typeof n?{tokenAddress:n}:{})}})))}));return function(t){return e.apply(this,arguments)}}(),r.getFrozenBalance=function(){var e=u()((function*(){return 0}));return function(){return e.apply(this,arguments)}}(),r.getTransactionStatuses=function(e){return this.engine.providerManager.getTransactionStatuses(this.networkId,e)},r.getTransactionFeeInNative=function(e){return Promise.resolve("")},r.isContractAddress=function(){var e=u()((function*(e){return!1}));return function(t){return e.apply(this,arguments)}}(),d()(n)}(k.a))}).call(this,n(19).Buffer)},3070:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return y}));var r=n(3),i=n.n(r),o=n(6),a=n.n(o),c=n(9),u=n.n(c),s=n(12),d=n.n(s),f=n(5),l=n.n(f),p=n(299);function h(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=l()(e);if(t){var i=l()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return d()(this,n)}}var y=function(t){u()(r,t);var n=h(r);function r(){return n.apply(this,arguments)}var o=r.prototype;return o.getHardwareInfo=function(){var e=i()((function*(){var e,t,n=yield this.engine.getHWDeviceByWalletId(this.vault.walletId);return{connectId:null!=(e=null==n?void 0:n.mac)?e:"",deviceId:null!=(t=null==n?void 0:n.deviceId)?t:""}}));return function(){return e.apply(this,arguments)}}(),o.getWalletPassphraseState=function(){var e=i()((function*(){var e=yield this.engine.getWallet(this.vault.walletId);return{passphraseState:null==e?void 0:e.passphraseState}}));return function(){return e.apply(this,arguments)}}(),o.getHardwareSDKInstance=function(){var t=i()((function*(){var t,n,r,i,o;return null!=(o=yield null==(t=e)||null==(n=t.$backgroundApiProxy)||null==(r=n.backgroundApi)||null==(i=r.serviceHardware)||null==i.getSDKInstance?void 0:i.getSDKInstance())?o:p.b}));return function(){return t.apply(this,arguments)}}(),a()(r)}(n(3050).a)}).call(this,n(40))},3071:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var r=n(2),i=n.n(r),o=n(3),a=n.n(o),c=n(6),u=n.n(c),s=n(9),d=n.n(s),f=n(12),l=n.n(f),p=n(5),h=n.n(p),y=n(297),v=n(21);function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h()(e);if(t){var i=h()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return l()(this,n)}}var b=function(e){d()(n,e);var t=m(n);function n(){return t.apply(this,arguments)}var r=n.prototype;return r.getPrivateKeys=function(){var e=a()((function*(e,t){var n=(yield this.getDbAccount()).path.split("/"),r=t||[n.pop()],i=n.join("/"),o=(yield this.engine.dbApi.getCredential(this.walletId,e)).seed;if("undefined"===typeof o)throw new v.p("Unable to get credential.");var a=(yield this.engine.providerManager.getChainInfoByNetworkId(this.networkId)).curve;return Object(y.c)(a,o,e,i,r).reduce((function(e,t){var n;return w(w({},e),{},((n={})[t.path]=t.extendedKey.key,n))}),{})}));return function(t,n){return e.apply(this,arguments)}}(),r.getAddress=function(){throw new Error("Method not implemented.")},u()(n)}(n(3055).a)},3072:function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var r=n(3),i=n.n(r),o=n(6),a=n.n(o),c=n(9),u=n.n(c),s=n(12),d=n.n(s),f=n(5),l=n.n(f),p=n(21);function h(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=l()(e);if(t){var i=l()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return d()(this,n)}}var y=function(e){u()(n,e);var t=h(n);function n(){return t.apply(this,arguments)}var r=n.prototype;return r.getPrivateKeys=function(){var e=i()((function*(e,t){if("undefined"!==typeof t)throw new p.k("Getting private keys from extended private key");var n=(yield this.engine.dbApi.getCredential(this.accountId,e)).privateKey;if("undefined"===typeof n)throw new p.p("Unable to get credential.");return{"":n}}));return function(t,n){return e.apply(this,arguments)}}(),r.getAddress=function(){throw new Error("Method not implemented.")},a()(n)}(n(3055).a)},3073:function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var r=n(3),i=n.n(r),o=n(6),a=n.n(o),c=n(9),u=n.n(c),s=n(12),d=n.n(s),f=n(5),l=n.n(f),p=n(21);function h(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=l()(e);if(t){var i=l()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return d()(this,n)}}var y=function(e){u()(n,e);var t=h(n);function n(){return t.apply(this,arguments)}var r=n.prototype;return r.signTransaction=function(){var e=i()((function*(e,t){throw new p.p("signTransaction is not supported for watching accounts")}));return function(t,n){return e.apply(this,arguments)}}(),r.signMessage=function(){var e=i()((function*(e,t){throw new p.p("signMessage is not supported for watching accounts")}));return function(t,n){return e.apply(this,arguments)}}(),r.getAddress=function(){throw new Error("Method not implemented.")},a()(n)}(n(3050).a)},3477:function(e,t,n){"use strict";(function(e){n.d(t,"c",(function(){return g})),n.d(t,"b",(function(){return m})),n.d(t,"a",(function(){return b}));var r=n(10),i=n.n(r),o=n(2),a=n.n(o),c=n(3),u=n.n(c),s=n(3647),d=n(27),f=n.n(d),l=n(113),p=n(57),h=n(3664);function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(e,t){return w.apply(this,arguments)}function w(){return(w=u()((function*(t,n){var r=new s.FilecoinSigner,o=t.encodedTx,a=v(v({},o),{},{Value:new f.a(o.Value),GasFeeCap:new f.a(o.GasFeeCap),GasPremium:new f.a(o.GasPremium)}),c=r.tx.transactionSerializeRaw(a),u=r.utils.getDigest(c),d=yield n.sign(u),l=i()(d,2),p=l[0],y=l[1],g=e.concat([e.from(p),e.from([y])]);return Promise.resolve({txid:"",rawTx:JSON.stringify({Message:o,Signature:{Data:g.toString("base64"),Type:h.a.SECP256K1}})})}))).apply(this,arguments)}function m(e,t){return 0!==e&&-1!==e?l.a.CONFIRM_BUT_FAILED:t&&0===e?l.a.CONFIRM_AND_SUCCESS:l.a.PENDING}function b(e,t){return 0!==e&&-1!==e?p.c.Failed:t&&0===e?p.c.Confirmed:p.c.Pending}}).call(this,n(19).Buffer)},3664:function(e,t,n){"use strict";var r,i;n.d(t,"a",(function(){return i})),function(e){e.MAIN="314",e.CALIBRATION="314159"}(r||(r={})),function(e){e[e.ID=0]="ID",e[e.SECP256K1=1]="SECP256K1",e[e.ACTOR=2]="ACTOR",e[e.BLS=3]="BLS"}(i||(i={}))},4092:function(e,t){},4123:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return E}));var r=n(2),i=n.n(r),o=n(3),a=n.n(o),c=n(6),u=n.n(c),s=n(9),d=n.n(s),f=n(12),l=n.n(f),p=n(5),h=n.n(p),y=n(3647),v=n(27),g=n.n(v),w=n(3068),m=n(14),b=n(22),T=n(21),O=n(111),x=n(3070),A=n(3664);function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function I(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h()(e);if(t){var i=h()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return l()(this,n)}}var C="m/44'/"+m.k+"'/0'/0",E=function(t){d()(r,t);var n=I(r);function r(){return n.apply(this,arguments)}var i=r.prototype;return i.prepareAccounts=function(){var e=a()((function*(e){var t,n=e.indexes,r=e.names,i=n.map((function(e){return C+"/"+e})),o=yield this.getHardwareSDKInstance(),a=yield this.getHardwareInfo(),c=a.connectId,u=a.deviceId,s=yield this.getWalletPassphraseState(),d=yield this.getNetwork();try{t=yield o.filecoinGetAddress(c,u,k({bundle:i.map((function(e){return{path:e,showOnOneKey:!1,isTestnet:d.isTestnet}}))},s))}catch(x){throw b.a.common.error(x),new T.o(x)}if(!t.success)throw b.a.common.error(t.payload),Object(w.a)(t.payload);var f=[],l=0;for(var p of t.payload){var h=p.address,y=p.path;if(h){var v,g=(r||[])[l]||"FIL #"+(n[l]+1);f.push({id:this.walletId+"--"+y,name:g,type:O.a.VARIANT,path:y,coinType:m.k,pub:"",address:h,addresses:(v={},v[this.networkId]=h,v)}),l+=1}}return f}));return function(t){return e.apply(this,arguments)}}(),i.getAddress=function(){var e=a()((function*(e){var t,n=yield this.getNetwork(),r=yield this.getHardwareSDKInstance(),i=yield this.getHardwareInfo(),o=i.connectId,a=i.deviceId,c=yield this.getWalletPassphraseState(),u=yield r.filecoinGetAddress(o,a,k({path:e.path,showOnOneKey:e.showOnOneKey,isTestnet:n.isTestnet},c));if(u.success&&null!=(t=u.payload)&&t.address)return u.payload.address;throw Object(w.a)(u.payload)}));return function(t){return e.apply(this,arguments)}}(),i.signTransaction=function(){var t=a()((function*(t){var n=yield this.getHardwareSDKInstance(),r=yield this.getNetwork(),i=yield this.getAccountPath(),o=yield this.getHardwareInfo(),a=o.connectId,c=o.deviceId,u=yield this.getWalletPassphraseState(),s=t.encodedTx,d=new y.FilecoinSigner,f=k(k({},s),{},{Value:new g.a(s.Value),GasFeeCap:new g.a(s.GasFeeCap),GasPremium:new g.a(s.GasPremium)}),l=d.tx.transactionSerializeRaw(f),p=yield n.filecoinSignTransaction(a,c,k({path:i,rawTx:e.from(l).toString("hex"),isTestnet:r.isTestnet},u));if(p.success){var h=p.payload.signature;return Promise.resolve({txid:"",rawTx:JSON.stringify({Message:s,Signature:{Data:e.from(h,"hex").toString("base64"),Type:A.a.SECP256K1}})})}throw Object(w.a)(p.payload)}));return function(e){return t.apply(this,arguments)}}(),i.signMessage=function(){throw new T.k},u()(r)}(x.a)}).call(this,n(19).Buffer)},4129:function(e,t){},4186:function(e,t,n){"use strict";n.d(t,"a",(function(){return A}));var r=n(3),i=n.n(r),o=n(6),a=n.n(o),c=n(9),u=n.n(c),s=n(12),d=n.n(s),f=n(5),l=n.n(f),p=n(3325),h=n(297),y=n(427),v=n(14),g=n(21),w=n(938),m=n(111),b=n(3071),T=n(3477);function O(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=l()(e);if(t){var i=l()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return d()(this,n)}}var x="m/44'/"+v.k+"'/0'/0",A=function(e){u()(n,e);var t=O(n);function n(){return t.apply(this,arguments)}var r=n.prototype;return r.signTransaction=function(){var e=i()((function*(e,t){var n=(yield this.getDbAccount()).addresses[this.networkId],r=(yield this.getSigners(t.password||"",[n]))[n];return Object(T.c)(e,r)}));return function(t,n){return e.apply(this,arguments)}}(),r.getSigners=function(){var e=i()((function*(e,t){var n,r=yield this.getDbAccount(),i=r.addresses[this.networkId];if(1!==t.length)throw new g.p("FIL signers number should be 1.");if(t[0]!==i)throw new g.p("Wrong address required for signing.");var o=(yield this.getPrivateKeys(e))[r.path];if("undefined"===typeof o)throw new g.p("Unable to get signer.");return(n={})[i]=new w.b(o,e,"secp256k1"),n}));return function(t,n){return e.apply(this,arguments)}}(),r.prepareAccounts=function(){var e=i()((function*(e){var t=e.password,n=e.indexes,r=e.names,i=(yield this.engine.dbApi.getCredential(this.walletId,t)).seed,o=yield this.getNetwork(),a=Object(h.d)("secp256k1",i,t,x,n.map((function(e){return e.toString()})));if(a.length!==n.length)throw new g.p("Unable to get publick key.");var c=[],u=0;for(var s of a){var d,f=s.path,l=s.extendedKey.key,w=y.c.transformPublicKey(l),b=w.toString("hex"),T=Object(p.newSecp256k1Address)(w,o.isTestnet?p.CoinType.TEST:p.CoinType.MAIN).toString(),O=(r||[])[u]||"FIL #"+(n[u]+1);c.push({id:this.walletId+"--"+f,name:O,type:m.a.VARIANT,path:f,coinType:v.k,pub:b,address:T,addresses:(d={},d[this.networkId]=T,d)}),u+=1}return c}));return function(t){return e.apply(this,arguments)}}(),a()(n)}(b.a)},4187:function(e,t,n){"use strict";n.d(t,"a",(function(){return A}));var r=n(10),i=n.n(r),o=n(3),a=n.n(o),c=n(6),u=n.n(c),s=n(9),d=n.n(s),f=n(12),l=n.n(f),p=n(5),h=n.n(p),y=n(3325),v=n(427),g=n(14),w=n(21),m=n(938),b=n(111),T=n(3072),O=n(3477);function x(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h()(e);if(t){var i=h()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return l()(this,n)}}var A=function(e){d()(n,e);var t=x(n);function n(){return t.apply(this,arguments)}var r=n.prototype;return r.getSigners=function(){var e=a()((function*(e,t){var n,r=(yield this.getDbAccount()).addresses[this.networkId];if(1!==t.length)throw new w.p("FIL signers number should be 1.");if(t[0]!==r)throw new w.p("Wrong address required for signing.");var o=Object.values(yield this.getPrivateKeys(e)),a=i()(o,1)[0];return(n={})[r]=new m.b(a,e,"secp256k1"),n}));return function(t,n){return e.apply(this,arguments)}}(),r.prepareAccounts=function(){var e=a()((function*(e){var t,n=e.name,r=e.privateKey,i=yield this.getNetwork();if(32!==r.length)throw new w.p("Invalid private key.");var o=v.c.publicFromPrivate(r),a=v.c.transformPublicKey(o),c=o.toString("hex"),u=Object(y.newSecp256k1Address)(a,i.isTestnet?y.CoinType.TEST:y.CoinType.MAIN).toString();return Promise.resolve([{id:"imported--"+g.k+"--"+c,name:n||"",type:b.a.VARIANT,path:"",coinType:g.k,pub:c,address:u,addresses:(t={},t[this.networkId]=u,t)}])}));return function(t){return e.apply(this,arguments)}}(),r.signTransaction=function(){var e=a()((function*(e,t){var n=(yield this.getDbAccount()).addresses[this.networkId],r=(yield this.getSigners(t.password||"",[n]))[n];return Object(O.c)(e,r)}));return function(t,n){return e.apply(this,arguments)}}(),u()(n)}(T.a)},4188:function(e,t,n){"use strict";n.d(t,"a",(function(){return w}));var r=n(3),i=n.n(r),o=n(6),a=n.n(o),c=n(9),u=n.n(c),s=n(12),d=n.n(s),f=n(5),l=n.n(f),p=n(3325),h=n(14),y=n(21),v=n(111);function g(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=l()(e);if(t){var i=l()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return d()(this,n)}}var w=function(e){u()(n,e);var t=g(n);function n(){return t.apply(this,arguments)}return n.prototype.prepareAccounts=function(){var e=i()((function*(e){var t,n=e.name,r=e.target,i=e.accountIdPrefix,o=yield this.getNetwork(),a=Object(p.validateAddressString)(r),c=a?r.toLowerCase():void 0;if(!a||"undefined"===typeof c)throw new y.e;var u=Object(p.decode)(c),s=Object(p.encode)(o.isTestnet?p.CoinType.TEST:p.CoinType.MAIN,u);return[{id:i+"--"+h.k+"--"+s,name:n||"",type:v.a.VARIANT,path:"",coinType:h.k,pub:"",address:s,addresses:(t={},t[this.networkId]=s,t)}]}));return function(t){return e.apply(this,arguments)}}(),a()(n)}(n(3073).a)},4436:function(e,t,n){"use strict";n.r(t),function(e){n.d(t,"default",(function(){return V}));var r=n(10),i=n.n(r),o=n(143),a=n.n(o),c=n(2),u=n.n(c),s=n(302),d=n.n(s),f=n(3),l=n.n(f),p=n(6),h=n.n(p),y=n(9),v=n.n(y),g=n(12),w=n.n(g),m=n(5),b=n.n(m),T=n(3325),O=n(4118),x=n(4122),A=n(27),P=n.n(A),k=n(126),I=n.n(k),C=n(112),E=n(56),S=n(22),D=n(21),j=n(57),R=n(3069),N=n(4123),B=n(4186),F=n(4187),H=n(4188),M=n(2103),K=n(3477);function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function L(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function U(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=b()(e);if(t){var i=b()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return w()(this,n)}}var G="0",V=function(t){v()(r,t);var n=U(r);function r(){for(var e,t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return(e=n.call.apply(n,[this].concat(r))).keyringMap={hd:B.a,hw:N.a,imported:F.a,watching:H.a,external:H.a},e.settings=M.default,e.getClientCache=I()(function(){var e=l()((function*(e,t){return new x.a({apiAddress:e,namespace:t})}));return function(t,n){return e.apply(this,arguments)}}(),{primitive:!0,maxAge:Object(E.b)({minute:3})}),e}var o=r.prototype;return o.getClient=function(){var e=l()((function*(e){var t=(yield this.engine.getNetwork(this.networkId)).rpcURL;return this.getClientCache(null!=e?e:t,"Filecoin")}));return function(t){return e.apply(this,arguments)}}(),o.getScanClient=function(){var e=l()((function*(){var e=(yield this.engine.getNetwork(this.networkId)).isTestnet?"https://calibration.filscan.io:8700/rpc/v1":"https://api.filscan.io:8700/rpc/v1";return this.getClientCache(e,"filscan")}));return function(){return e.apply(this,arguments)}}(),o.buildEncodedTxFromTransfer=function(){var e=l()((function*(e){var t=e.from,n=e.to,r=e.amount,i=yield this.getNetwork(),o=new P.a(r);return o.isNaN()&&(o=new P.a("0")),new O.Message({from:t,to:n,nonce:0,value:o.shiftedBy(i.decimals),method:0,params:""}).toLotusType()}));return function(t){return e.apply(this,arguments)}}(),o.updateEncodedTx=function(){var e=l()((function*(e,t,n){if(n.type===j.d.transfer){var r=yield this.getNetwork();e.Value=new P.a(t.amount).shiftedBy(r.decimals).toFixed()}return Promise.resolve(e)}));return function(t,n,r){return e.apply(this,arguments)}}(),o.decodeTx=function(){var e=l()((function*(e,t){var n=yield this.engine.getNetwork(this.networkId),r=yield this.getAccountAddress(),i=yield this.engine.getNativeTokenInfo(this.networkId);return{txid:(d()(e.CID)?e.CID["/"]:e.CID)||"",owner:r,signer:e.From||r,nonce:e.Nonce||0,actions:[{type:j.a.NATIVE_TRANSFER,nativeTransfer:{tokenInfo:i,from:e.From,to:e.To,amount:new P.a(e.Value).shiftedBy(-n.decimals).toFixed(),amountValue:e.Value,extraInfo:null},direction:e.To===r?j.b.SELF:j.b.OUT}],status:j.c.Pending,networkId:this.networkId,accountId:this.accountId,encodedTx:e,payload:t,extraInfo:null}}));return function(t,n){return e.apply(this,arguments)}}(),o.fetchFeeInfo=function(){var e=l()((function*(e){var t=yield this.getClient(),n=yield this.engine.getNetwork(this.networkId),r=yield t.request("GasEstimateMessageGas",e,{},[]);G=r.GasPremium;var i=P.a.max(e.GasLimit,r.GasLimit);return{customDisabled:!0,limit:new P.a(i).toFixed(),prices:[new P.a(r.GasFeeCap).shiftedBy(-n.feeDecimals).toFixed()],defaultPresetIndex:"0",feeSymbol:n.feeSymbol,feeDecimals:n.feeDecimals,nativeSymbol:n.symbol,nativeDecimals:n.decimals,tx:null}}));return function(t){return e.apply(this,arguments)}}(),o.attachFeeInfoToEncodedTx=function(){var e=l()((function*(e){var t=yield this.getNetwork(),n=e.encodedTx,r=e.feeInfoValue,i=r.limit,o=r.price,c=L({},n);return a()(i)||(c.GasLimit=new P.a(i).toNumber()),a()(o)||(c.GasFeeCap=new P.a(o||"0.000000001").shiftedBy(t.feeDecimals).toFixed()),a()(G)||(c.GasPremium=G),Promise.resolve(c)}));return function(t){return e.apply(this,arguments)}}(),o.buildUnsignedTxFromEncodedTx=function(){var e=l()((function*(e){var t=yield this.getClient(),n=yield t.request("MpoolGetNonce",e.From);return e.Nonce=Number(n),Promise.resolve({inputs:[],outputs:[],payload:{encodedTx:e},encodedTx:e})}));return function(t){return e.apply(this,arguments)}}(),o.decodedTxToLegacy=function(e){return Promise.resolve({})},o.getExportedCredential=function(){var t=l()((function*(t){var n=yield this.getDbAccount();if(n.id.startsWith("hd-")||n.id.startsWith("imported")){var r=this.keyring,o=Object.values(yield r.getPrivateKeys(t)),a=i()(o,1)[0],c=Object(C.a)(t,a).toString("base64");return e.from(JSON.stringify({Type:"secp256k1",PrivateKey:c})).toString("hex")}throw new D.p("Only credential of HD or imported accounts can be exported")}));return function(e){return t.apply(this,arguments)}}(),o.getTransactionFeeInNative=function(){var e=l()((function*(e){try{var t,n=yield this.getScanClient(),r=yield this.engine.getNativeTokenInfo(this.networkId),i=yield n.request("MessageDetails",e);return new P.a(null!=(t=i.all_gas_fee)?t:0).shiftedBy(-r.decimals).toFixed()}catch(o){return""}}));return function(t){return e.apply(this,arguments)}}(),o.getTransactionStatuses=function(){var e=l()((function*(e){var t=this;return Promise.all(e.map(function(){var e=l()((function*(e){var n=yield t.getScanClient(),r=yield n.request("MessageDetails",e);return Object(K.b)(r.exit_code,r.signed_cid)}));return function(t){return e.apply(this,arguments)}}()))}));return function(t){return e.apply(this,arguments)}}(),o.fetchOnChainHistory=function(){var e=l()((function*(e){var t=this,n=yield this.getScanClient(),r=e.localHistory,i=yield this.getAccountAddress(),o=yield this.engine.getNativeTokenInfo(this.networkId),a=[];try{a=(yield n.request("MessageByAddress",{address:i,offset_range:{start:0,count:50}})).data}catch(u){}var c=a.map(function(){var e=l()((function*(e){try{var n,a,c,s=r.find((function(t){return t.decodedTx.txid===e.signed_cid}));if(s&&s.decodedTx.isFinal)return null;if("transfer"!==e.method_name)return null;var d=j.b.OUT;e.to===i&&(d=e.from===i?j.b.SELF:j.b.IN);var f=new P.a(e.value),l={txid:null!=(n=e.signed_cid)?n:"",owner:e.from,signer:e.from,nonce:null!=(a=e.nonce)?a:0,actions:[{type:j.a.NATIVE_TRANSFER,direction:d,nativeTransfer:{tokenInfo:o,from:e.from,to:e.to,amount:f.shiftedBy(-o.decimals).toFixed(),amountValue:f.toFixed(),extraInfo:null}}],status:Object(K.a)(e.exit_code,e.signed_cid),networkId:t.networkId,accountId:t.accountId,extraInfo:null};return l.updatedAt=new Date(e.last_modified).getTime(),l.createdAt=null!=(c=null==s?void 0:s.decodedTx.createdAt)?c:l.updatedAt,l.isFinal=l.status===j.c.Confirmed,yield t.buildHistoryTx({decodedTx:l,historyTxToMerge:s})}catch(u){return Promise.resolve(null)}}));return function(t){return e.apply(this,arguments)}}());return(yield Promise.all(c)).filter(Boolean)}));return function(t){return e.apply(this,arguments)}}(),o.validateImportedCredential=function(e){var t=!1;return this.settings.importedAccountEnabled&&(t=/^(0x)?[0-9a-zA-Z]{64}|[0-9a-zA-Z]{160}$/.test(e)),Promise.resolve(t)},o.getOutputAccount=function(){var e=l()((function*(){var e,t=yield this.getDbAccount({noCache:!0}),n={id:t.id,name:t.name,type:t.type,path:t.path,coinType:t.coinType,tokens:[],address:(null==(e=t.addresses)?void 0:e[this.networkId])||""};if(0===n.address.length)try{var r=yield this.getNetwork(),i=Object(T.decode)(t.address),o=Object(T.encode)(r.isTestnet?T.CoinType.TEST:T.CoinType.MAIN,i);yield this.engine.dbApi.addAccountAddress(t.id,this.networkId,o),n.address=o}catch(a){}return n}));return function(){return e.apply(this,arguments)}}(),o.getAccountAddress=function(){var e=l()((function*(){return(yield this.getOutputAccount()).address}));return function(){return e.apply(this,arguments)}}(),o.getAccountBalance=function(){var e=l()((function*(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=yield this.getAccountAddress();return this.getBalances((t?[{address:n}]:[]).concat(e.map((function(e){return{address:n,tokenAddress:e}}))))}));return function(t){return e.apply(this,arguments)}}(),o.getBalances=function(){var e=l()((function*(e){var t=yield this.getClient();return yield Promise.all(e.map(function(){var e=l()((function*(e){var n=e.address;try{var r=yield t.request("WalletBalance",n);return new P.a(r)}catch(o){var i;if(null!=o&&null!=(i=o.message)&&null!=i.includes&&i.includes("Account not found"))return new P.a(0);throw o}}));return function(t){return e.apply(this,arguments)}}()))}));return function(t){return e.apply(this,arguments)}}(),o.validateWatchingCredential=function(){var e=l()((function*(e){var t=Object(T.validateAddressString)(e),n=t?e.toLowerCase():void 0;return!(!t||"undefined"===typeof n)}));return function(t){return e.apply(this,arguments)}}(),o.validateAddress=function(){var e=l()((function*(e){var t=Object(T.validateAddressString)(e),n=t?e.toLowerCase():void 0;if(!t||"undefined"===typeof n)throw new D.e;return Promise.resolve(n)}));return function(t){return e.apply(this,arguments)}}(),o.broadcastTransaction=function(){var e=l()((function*(e){S.a.engine.info("broadcastTransaction START:",{rawTx:e.rawTx});var t,n=yield this.getClient();try{t=yield n.request("MpoolPush",JSON.parse(e.rawTx))}catch(r){throw S.a.sendTx.info("broadcastTransaction ERROR:",r),r}return S.a.engine.info("broadcastTransaction END:",{txid:e.txid,rawTx:e.rawTx}),L(L({},e),{},{txid:d()(t)?t["/"]:t,encodedTx:e.encodedTx})}));return function(t){return e.apply(this,arguments)}}(),o.getPrivateKeyByCredential=function(t){var n;if(160===t.length)try{var r=JSON.parse(e.from(t,"hex").toString());r.PrivateKey&&(n=e.from(r.PrivateKey,"base64"))}catch(i){}else 64===t.length&&(n=e.from(t,"hex"));return n},o.addressFromBase=function(){var e=l()((function*(e){var t=(yield this.getNetwork()).isTestnet;return Object(T.encode)(t?T.CoinType.TEST:T.CoinType.MAIN,Object(T.decode)(e))}));return function(t){return e.apply(this,arguments)}}(),o.getClientEndpointStatus=function(){var e=l()((function*(e){var t=yield this.getClient(e),n=performance.now(),r=(yield t.request("ChainHead")).Height;return{responseTime:Math.floor(performance.now()-n),latestBlock:r}}));return function(t){return e.apply(this,arguments)}}(),h()(r)}(R.a)}.call(this,n(19).Buffer)}}]);