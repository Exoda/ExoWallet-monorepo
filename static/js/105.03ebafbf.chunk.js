(this.webpackJsonp=this.webpackJsonp||[]).push([[105],{3112:function(e,t,n){"use strict";n.d(t,"c",(function(){return v})),n.d(t,"b",(function(){return y})),n.d(t,"d",(function(){return _})),n.d(t,"a",(function(){return P}));var r=n(2),c=n.n(r),o=n(3),i=n.n(o),a=n(10),s=n.n(a),u=n(1),l=n(1116),f=n(330),d=n(164),b=n(82),j=n(14),O=n(43),h=n(42);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var m=function(e){return[d.a,d.c,d.d,d.e].includes(e)},v=function(){var e=O.a.engine,t=Object(u.useState)([]),n=s()(t,2),r=n[0],c=n[1],o=Object(h.l)().wallets,a=Object(u.useCallback)(i()((function*(){var t=yield Promise.all(o.map(function(){var t=i()((function*(t){var n,r=yield e.getAccounts(t.accounts);return g(g({},t),{},{accounts:null!=(n=null==r?void 0:r.filter((function(e){if(!e)return!1;var t=e||{},n=t.address,r=t.coinType;return!m(n)&&!!Object(f.d)(r,j.C)})))?n:[]})}));return function(e){return t.apply(this,arguments)}}()));return c(t),t})),[e,o]);return Object(u.useEffect)((function(){a()}),[a]),{wallets:r,getWalletsAndAccounts:a}},y=function(){var e=Object(u.useState)(!1),t=s()(e,2),n=t[0],r=t[1],c=O.a.serviceNotification,o=v(),a=o.wallets,l=o.getWalletsAndAccounts,f=Object(u.useState)([]),d=s()(f,2),b=d[0],j=d[1],h=Object(u.useCallback)(i()((function*(){var e=yield c.queryAccountDynamic();j(e)})),[c]),p=Object(u.useCallback)(i()((function*(){r(!0);try{yield h(),yield l()}finally{r(!1)}})),[h,l]);return Object(u.useEffect)((function(){p()}),[p]),{loading:n,wallets:a,enabledAccounts:b,refresh:p}},_=function(){var e=O.a.serviceNotification,t=Object(u.useState)(!1),n=s()(t,2),r=n[0],c=n[1],o=Object(u.useState)([]),a=s()(o,2),l=a[0],f=a[1],d=Object(u.useCallback)(i()((function*(){c(!0);try{var t=yield e.queryPriceAlertList();f(t||[])}catch(n){}c(!1)})),[e]);return Object(u.useEffect)((function(){d()}),[d]),{alerts:l,loading:r,fetchPriceAlerts:d}},x=function(){var e=i()((function*(e,t){if(!e)return!1;var n=e||{},r=n.address,c=n.coinType;return!m(r)&&(!!Object(f.d)(c,j.C)&&!(yield Object(b.j)({asyncFunc:function(){var e=i()((function*(){return O.a.validator.isContractAddress(t,r)}));return function(){return e.apply(this,arguments)}}(),timeout:6e3,timeoutResult:!1})))}));return function(t,n){return e.apply(this,arguments)}}(),P=function(e,t){var n=Object(l.a)(i()((function*(){return x(e,t)})),[e]).result;return null!=n&&n}},3730:function(e,t,n){"use strict";n.r(t);var r=n(559),c=n(326),o=n(2),i=n.n(o),a=n(744),s=n(389),u=n(125),l=n(79),f=n(1110),d=n(32),b=n(70),j=n(1),O=n(52),h=n(508),p=n(43),g=n(176),m=n(42),v=n(94),y=n(33),_=n(3112),x=n(0);function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var C=[5,8,10],A=function(e){var t=e.title,n=e.onChange,r=e.value,c=e.desc,o=e.divider;return Object(x.jsxs)(d.a,{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",p:4,borderBottomWidth:o?"1 ":void 0,borderBottomColor:"divider",borderBottomRadius:o?void 0:"12px",children:[Object(x.jsxs)(d.a,{flex:"1",children:[Object(x.jsx)(b.a,{typography:"Body1Strong",numberOfLines:1,children:t}),c&&Object(x.jsx)(b.a,{color:"text-subdued",typography:"Body2",numberOfLines:2,children:c})]}),Object(x.jsx)(d.a,{ml:"3",children:Object(x.jsx)(f.a,{labelType:"false",isChecked:r,onToggle:function(){return null==n?void 0:n(!r)}})})]})},M=function(e){var t=e.title,n=e.desc;return Object(x.jsxs)(d.a,{flexDirection:"row",p:"4",children:[Object(x.jsx)(b.a,{flex:1,typography:"Body1Strong",children:t}),Object(x.jsx)(b.a,{mr:"19px",children:n}),Object(x.jsx)(l.a,{name:"ChevronRightMini",color:"icon-subdued",size:20})]})},E=function(e){var t=e.title,n=e.desc,r=e.onPress;return Object(x.jsx)(u.a,{onPress:r,children:Object(x.jsxs)(d.a,{flexDirection:"row",p:"4",children:[Object(x.jsx)(b.a,{flex:1,typography:"Body1Strong",children:t}),Object(x.jsx)(b.a,{mr:"19px",children:n}),Object(x.jsx)(l.a,{name:"ChevronRightMini",color:"icon-subdued",size:20})]})})},k=function(e){var t=e.title,n=e.value,r=e.onChange,c=e.options;return Object(x.jsx)(s.b,{title:t,isTriggerPlain:!0,footer:null,headerShown:!1,defaultValue:n,onChange:r,options:c,dropdownProps:{width:"64"},dropdownPosition:"right",renderTrigger:function(){return Object(x.jsx)(M,{title:t,desc:n+"%"})}})},S=function(e){var t,n=e.title,r=e.switchs,c=e.footer,o=e.extraText,i=Object(a.a)().themeVariant,s=r.length;return Object(x.jsxs)(x.Fragment,{children:[n&&Object(x.jsx)(b.a,{mt:6,color:"text-subdued",children:n}),Object(x.jsxs)(d.a,{w:"full",mt:"2",borderRadius:"12",bg:"surface-default",borderWidth:"light"===i?1:void 0,borderColor:"border-subdued",children:[r.map((function(e,t){return Object(j.createElement)(A,w(w({},e),{},{key:e.title,divider:!!c||t!==s-1}))})),null!=r&&null!=(t=r[0])&&t.value&&c?c:null]}),o&&Object(x.jsx)(b.a,{mt:2,color:"text-subdued",typography:"Caption",children:o})]})};t.default=function(){var e=Object(h.a)(),t=Object(g.o)(),n=Object(O.t)(),o=Object(m.o)().authenticationType,i=Object(_.d)(),a=i.alerts,s=i.fetchPriceAlerts,u=Object(_.b)(),l=u.enabledAccounts,f=u.refresh,b=Object(m.n)(),P=b.pushNotification,w=void 0===P?v.b:P,A=b.devMode,M=p.a.serviceNotification;Object(j.useLayoutEffect)((function(){var n=e.formatMessage({id:"form__notification"});t.setOptions({title:n})}),[t,e,o]);var D=Object(j.useCallback)((function(e){return function(t){var n;(0,p.a.dispatch)(Object(v.z)(((n={})[e]=t,n))),M.syncPushNotificationConfig()}}),[M]);Object(j.useEffect)((function(){n&&(f(),s())}),[s,n,f]);var T=Object(j.useMemo)((function(){return null!=A&&A.enableZeroNotificationThreshold?[0].concat(C):C}),[null==A?void 0:A.enableZeroNotificationThreshold]),N=Object(j.useMemo)((function(){return null!=w&&w.pushEnable?Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(S,{title:e.formatMessage({id:"form__market_uppercase"}),switchs:[{title:e.formatMessage({id:"form__btc_and_eth_movement"}),desc:e.formatMessage({id:"form__btc_and_eth_movement_desc"}),value:w.btcAndEthPriceAlertEnable,onChange:D("btcAndEthPriceAlertEnable")},{title:e.formatMessage({id:"title__favorite"}),desc:e.formatMessage({id:"form__favorite_desc"}),value:w.favoriteTokensPriceAlertEnable,onChange:D("favoriteTokensPriceAlertEnable")}],footer:Object(x.jsx)(k,{title:e.formatMessage({id:"form__manage_threshold"}),value:w.threshold||T[0],onChange:D("threshold"),options:T.map((function(e){return{label:e+"%",value:e}}))})}),Object(x.jsx)(S,{title:e.formatMessage({id:"form__alert_uppercase"}),switchs:[{title:e.formatMessage({id:"form__price_alert"}),desc:e.formatMessage({id:"form__price_alert_desc"}),value:w.priceAlertEnable,onChange:D("priceAlertEnable")}],footer:Object(x.jsx)(E,{title:e.formatMessage({id:"form__manage"}),desc:void 0===a?Object(x.jsx)(c.b,{size:"sm"}):String(a.length),onPress:function(){return t.navigate(y.c.PushNotificationManagePriceAlert,{alerts:a||[]})}})}),Object(x.jsx)(S,{title:e.formatMessage({id:"form__account_uppercase"}),switchs:[{title:e.formatMessage({id:"form__account_dynamic_notification"}),desc:e.formatMessage({id:"form__account_dynamic_notification_desc"}),value:w.accountActivityPushEnable,onChange:D("accountActivityPushEnable")}],footer:Object(x.jsx)(E,{title:e.formatMessage({id:"form__manage"}),desc:void 0===l?Object(x.jsx)(c.b,{size:"sm"}):String(l.length),onPress:function(){return t.navigate(y.c.PushNotificationManageAccountDynamic)}})})]}):null}),[l,a,t,e,D,w,T]);return Object(x.jsxs)(r.a,{w:"full",h:"full",bg:"background-default",p:"4",maxW:768,mx:"auto",children:[Object(x.jsx)(S,{extraText:e.formatMessage({id:"content__receive_notifications_of_account_dynamics_and_asset_changes"}),switchs:[{title:e.formatMessage({id:"form__notification"}),value:w.pushEnable,onChange:D("pushEnable")}]}),N,Object(x.jsx)(d.a,{height:10})]})}}}]);