(this.webpackJsonp=this.webpackJsonp||[]).push([[84,835],{3121:function(e,t,n){"use strict";var a=n(32),r=n(559),c=n(558),o=n(0),s=function(e){var t=e.children,n=e.footer,s=Object(c.a)();return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(r.a,{alignSelf:"stretch",flex:1,px:4,py:{base:4,sm:8},_contentContainerStyle:{w:"full",maxW:800,mx:"auto"},children:t}),n?Object(o.jsx)(a.a,{mx:4,py:4,mb:s.bottom+"px",children:n}):null]})};s.defaultProps={},t.a=s},3189:function(e,t,n){"use strict";var a=n(2),r=n.n(a),c=n(32),o=n(79),s=n(70),i=n(85),u=n(16),l=n.n(u),d=n(1),b=n(3065),m=n(0),p=["backupTime","numOfHDWallets","numOfImportedAccounts","numOfWatchingAccounts","numOfContacts","size"];function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.a=function(e){var t=e.backupTime,n=e.numOfHDWallets,a=e.numOfImportedAccounts,r=e.numOfWatchingAccounts,u=e.numOfContacts,j=e.size,f=l()(e,p),g=Object(i.a)(),v=Object(b.a)(),x=Object(d.useMemo)((function(){return[{iconName:"WalletOutline",count:n},{iconName:"InboxArrowDownOutline",count:a},{iconName:"EyeOutline",count:r},{iconName:"BookOpenOutline",count:u}]}),[u,n,a,r]);return Object(m.jsxs)(c.a,O(O({alignItems:"heading"===j&&g?"center":void 0},f),{},{children:[Object(m.jsx)(s.a,{typography:"heading"===j?"PageHeading":"Body1Strong",children:v.format(new Date(t),"MMM d, yyyy, HH:mm")}),Object(m.jsx)(c.a,{flexDirection:"row",mt:"heading"===j?3:1,mx:-3,flexWrap:"wrap",children:x.map((function(e,t){return Object(m.jsxs)(c.a,{flexDirection:"row",mx:3,children:[Object(m.jsx)(o.a,{name:e.iconName,size:20,color:"icon-subdued"}),Object(m.jsx)(s.a,{typography:"Body2",color:"text-subdued",pl:2,children:e.count})]},t)}))})]}))}},3198:function(e,t,n){"use strict";n.r(t),n.d(t,"ImportBackupPasswordRoutes",(function(){return a}));var a,r=n(85),c=n(283),o=n(747),s=n(98),i=n(200),u=n(41),l=n(32),d=n(79),b=n(3),m=n.n(b),p=n(745),j=n(10),O=n.n(j),f=n(1),g=n(52),v=n(508),x=n(176),h=n(752),y=n(0),w=function(){var e=Object(v.a)(),t=Object(g.x)().params,n=t.withPassword,a=t.onSuccess,r=t.onError,b=t.onCancel,j=Object(f.useState)(""),w=O()(j,2),_=w[0],D=w[1],k=Object(p.a)({mode:"onChange",defaultValues:{password:""}}),P=k.control,I=k.handleSubmit,B=k.formState.isValid,S=k.watch,C=Object(x.i)(S("password"),200);Object(f.useEffect)((function(){D("")}),[C]);var A=Object(f.useCallback)(function(){var t=m()((function*(t){var c=yield n(t.password);c===h.a.SUCCESS?a():c===h.a.WRONG_PASSWORD?D(e.formatMessage({id:"msg__wrong_password"})):r()}));return function(e){return t.apply(this,arguments)}}(),[e,n,a,r]);return Object(y.jsx)(c.b,{footer:null,onModalClose:function(){null==b||b()},children:Object(y.jsxs)(o.a,{px:{base:4,md:0},alignItems:"center",children:[Object(y.jsx)(l.a,{mb:"16px",p:"12px",borderRadius:"full",bgColor:"decorative-surface-one",children:Object(y.jsx)(d.a,{name:"LockClosedOutline",color:"decorative-icon-one"})}),Object(y.jsx)(u.h.DisplayLarge,{textAlign:"center",mb:2,children:e.formatMessage({id:"modal__import_backup"})}),Object(y.jsx)(u.h.Body1,{textAlign:"center",color:"text-subdued",children:e.formatMessage({id:"modal__import_backup_desc"})}),Object(y.jsxs)(i.a,{mt:"8",children:[Object(y.jsx)(i.a.Item,{name:"password",defaultValue:"",control:P,rules:{required:e.formatMessage({id:"form__field_is_required"}),minLength:{value:8,message:e.formatMessage({id:"msg__password_validation"})},maxLength:{value:128,message:e.formatMessage({id:"msg__password_validation"})}},children:Object(y.jsx)(i.a.PasswordInput,{autoFocus:!0})}),_?Object(y.jsx)(i.a.FormErrorMessage,{message:_}):null,Object(y.jsx)(s.a,{type:"primary",size:"xl",onPromise:I(A),isDisabled:!B,children:e.formatMessage({id:"action__unlock",defaultMessage:"Unlock"})})]})]})})},_=n(456);!function(e){e.ImportBackupPassword="ImportBackupPassword"}(a||(a={}));var D=Object(_.a)(),k=[{name:a.ImportBackupPassword,component:w}];t.default=function(){var e=Object(r.a)();return Object(y.jsx)(D.Navigator,{screenOptions:{headerShown:!1,animationEnabled:!!e},children:k.map((function(e){return Object(y.jsx)(D.Screen,{name:e.name,component:e.component},e.name)}))})}},3206:function(e,t,n){"use strict";var a=n(110),r=n(79),c=n(0);t.a=function(e){var t=e.enabled,n=e.size;return Object(c.jsx)(a.a,{rounded:"full",size:"lg"===n?"56px":"48px",bgColor:"surface-"+(t?"success":"warning")+"-subdued",children:Object(c.jsx)(r.a,{name:"CloudOutline",size:24,color:"icon-"+(t?"success":"warning")})})}},3247:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(3198),r=n(142),c=n(177);function o(){var e=Object(c.a)();return{requestBackupPassword:function(t,n,c,o){e.navigate(r.c.Modal,{screen:r.b.ImportBackupPassword,params:{screen:a.ImportBackupPasswordRoutes.ImportBackupPassword,params:{withPassword:t,onSuccess:n,onError:c,onCancel:o}}})}}}},3299:function(e,t,n){"use strict";n.r(t),n.d(t,"GroupedBackupDetails",(function(){return L}));var a=n(326),r=n(285),c=n(163),o=n(3),s=n.n(o),i=n(85),u=n(98),l=n(16),d=n.n(l),b=n(2),m=n.n(b),p=n(10),j=n.n(p),O=n(79),f=n(32),g=n(110),v=n(70),x=n(1),h=n(52),y=n(477),w=n.n(y),_=n(508),D=n(25),k=n(752),P=n(43),I=n(176),B=n(42),S=n(3247),C=n(3146),A=n(3081),M=n(142),W=n(388),z=n(3206),U=n(3189),E=n(3121),H=n(0),T=["size","ready","onImport","onDelete"];function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach((function(t){m()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var F=function(e){var t,n=e.name,a=e.avatar,r=e.accountUUIDs,c=Object(_.a)();return Object(H.jsxs)(f.a,{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",py:1,children:[Object(H.jsx)(g.a,{rounded:"full",size:"8",bgColor:null!=(t=null==a?void 0:a.bgColor)?t:"surface-neutral-default",children:null!=a&&a.emoji?Object(H.jsx)(v.a,{typography:"DisplayMedium",children:a.emoji}):void 0}),Object(H.jsx)(v.a,{px:"4",typography:"Body2Strong",flex:"1",isTruncated:!0,children:n}),Object(H.jsx)(v.a,{typography:"Body2",color:"text-subdued",children:c.formatMessage({id:"form__str_accounts"},{count:r.length})})]})},G=function(e){var t=e.category,n=e.name,a=e.address,r="EyeOutline";return"contact"===t?r="BookOpenOutline":"importedAccount"===t&&(r="InboxArrowDownOutline"),Object(H.jsxs)(f.a,{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",py:1,children:[Object(H.jsx)(g.a,{rounded:"full",size:"8",bgColor:"surface-neutral-default",children:Object(H.jsx)(O.a,{name:r,size:20,color:"icon-default"})}),Object(H.jsx)(v.a,{px:"4",typography:"Body2Strong",flex:"1",isTruncated:!0,children:n}),Object(H.jsx)(v.a,{typography:"Body2",color:"text-subdued",children:a})]})},L=function(e){var t=e.onDevice,n=e.showTitle,a=void 0===n||n,r=e.publicBackupData,c=Object(_.a)(),o=Object.entries(r.HDWallets).map((function(e){var t=j()(e,2);return R({uuid:t[0]},t[1])})).sort((function(e,t){return w()({insensitive:!0})(e.name,t.name)})),s=Object.entries(r.importedAccounts).map((function(e){var t=j()(e,2);return R({uuid:t[0]},t[1])})).sort((function(e,t){return w()({insensitive:!0})(e.name,t.name)})),i=Object.entries(r.watchingAccounts).map((function(e){var t=j()(e,2);return R({uuid:t[0]},t[1])})).sort((function(e,t){return w()({insensitive:!0})(e.name,t.name)})),u=Object.entries(r.contacts).map((function(e){var t=j()(e,2);return R({uuid:t[0]},t[1])})).sort((function(e,t){return w()({insensitive:!0})(e.name,t.name)}));return Object(H.jsxs)(f.a,{my:4,mx:12,children:[a&&Object(H.jsx)(v.a,{typography:"Heading",pb:"4",children:c.formatMessage({id:t?"content__active_on_this_device":"content__not_on_this_device"})}),o.map((function(e){var t=e.uuid,n=e.name,a=e.avatar,r=e.accountUUIDs;return Object(H.jsx)(F,{name:n,avatar:a,accountUUIDs:r},t)})),s.map((function(e){var t=e.uuid,n=e.name,a=e.address;return Object(H.jsx)(G,{category:"importedAccount",name:n,address:a},t)})),i.map((function(e){var t=e.uuid,n=e.name,a=e.address;return Object(H.jsx)(G,{category:"watchingAccount",name:n,address:a},t)})),u.map((function(e){var t=e.uuid,n=e.name,a=e.address;return Object(H.jsx)(G,{category:"contact",name:n,address:a},t)}))]})},q=function(e){var t=e.size,n=e.ready,a=e.onImport,r=e.onDelete,c=d()(e,T),o=Object(_.a)();return Object(H.jsxs)(f.a,R(R({flexDirection:"row"},c),{},{children:["undefined"===typeof a||n?void 0:Object(H.jsx)(u.a,{onPress:a,type:"basic",size:t,flexGrow:{base:1,sm:0},children:o.formatMessage({id:"action__import"})}),"undefined"===typeof r||n?void 0:Object(H.jsx)(u.a,{onPress:r,type:"destructive",size:t,ml:4,flexGrow:{base:1,sm:0},children:o.formatMessage({id:"action__delete"})})]}))};t.default=function(e){var t=e.onboarding,n=void 0!==t&&t,o=Object(_.a)(),u=Object(i.a)(),l=Object(I.o)(),d=Object(h.x)(),b=Object(B.f)().isPasswordSet,m=P.a.serviceCloudBackup,p=Object(C.a)().showVerify,O=Object(S.a)().requestBackupPassword,g=Object(A.b)();Object(x.useLayoutEffect)((function(){var e=o.formatMessage({id:"title__backup_details"});l.setOptions({title:e})}),[l,o]);var v=d.params,y=v.backupUUID,w=v.backupTime,T=v.numOfHDWallets,N=v.numOfImportedAccounts,R=v.numOfWatchingAccounts,F=v.numOfContacts,G=Object(x.useState)(!0),V=j()(G,2),J=V[0],K=V[1],Q=Object(x.useState)(!1),X=j()(Q,2),Y=X[0],Z=X[1],$=Object(x.useState)({alreadyOnDevice:{contacts:{},importedAccounts:{},watchingAccounts:{},HDWallets:{}},notOnDevice:{contacts:{},importedAccounts:{},watchingAccounts:{},HDWallets:{}}}),ee=j()($,2),te=ee[0],ne=ee[1],ae=Object(x.useState)(!1),re=j()(ae,2),ce=re[0],oe=re[1],se=Object(x.useState)(!1),ie=j()(se,2),ue=ie[0],le=ie[1];Object(x.useEffect)((function(){m.getBackupDetails(y).then((function(e){ne(e),oe(Object.values(e.alreadyOnDevice).some((function(e){return Object.keys(e).length>0}))),le(Object.values(e.notOnDevice).some((function(e){return Object.keys(e).length>0}))),K(!1)}))}),[K,m,y]);var de=Object(x.useCallback)(s()((function*(){c.a.show({title:o.formatMessage({id:"msg__backup_imported"})}),n?yield g({delay:200}):l.navigate(M.a.InitialTab)})),[o,n,g,l]),be=Object(x.useCallback)((function(){c.a.show({title:o.formatMessage({id:"msg__import_icloud_backup_failed_version"})}),l.goBack()}),[o,l]),me=Object(x.useCallback)((function(){b?p((function(e){m.restoreFromBackup({backupUUID:y,notOnDevice:te.notOnDevice,localPassword:e}).then((function(t){t===k.a.SUCCESS?de():t===k.a.WRONG_PASSWORD?O((function(t){return m.restoreFromBackup({backupUUID:y,notOnDevice:te.notOnDevice,localPassword:e,remotePassword:t})}),de,be):be()}))}),(function(){})):O((function(e){return m.restoreFromBackup({backupUUID:y,notOnDevice:te.notOnDevice,localPassword:e,remotePassword:e})}),de,be)}),[b,p,de,be,O,m,y,te]),pe=Object(x.useCallback)((function(){Object(W.a)((function(e){return Object(H.jsx)(r.a,{visible:!0,onClose:e,footerButtonProps:{primaryActionTranslationId:"action__delete",secondaryActionTranslationId:"action__cancel",primaryActionProps:{type:"destructive"},onPrimaryActionPress:function(){var t=s()((function*(){Y||(Z(!0),yield m.removeBackup(y),Z(!1),e(),l.pop(2))}));return function(){return t.apply(this,arguments)}}()},contentProps:{iconType:"danger",title:o.formatMessage({id:"dialog__delete_backup"}),content:o.formatMessage({id:"dialog__delete_backup_desc"})}})}))}),[y,Y,o,l,m]);return Object(H.jsxs)(E.a,{footer:u?Object(H.jsx)(q,{ready:J,onImport:ue?me:void 0,onDelete:n?void 0:pe,size:"xl",position:"absolute",bottom:0}):void 0,children:[Object(H.jsxs)(f.a,{flexDirection:u?"column":"row",alignItems:"center",children:[Object(H.jsx)(f.a,{mb:{base:6,sm:0},mr:{sm:6},children:Object(H.jsx)(z.a,{size:"lg",enabled:!0})}),Object(H.jsx)(U.a,{backupTime:w,numOfHDWallets:T,numOfImportedAccounts:N,numOfWatchingAccounts:R,numOfContacts:F,size:"heading"}),u?void 0:Object(H.jsx)(q,{ready:J,onImport:ue?me:void 0,onDelete:n?void 0:pe,size:"base",ml:"auto"})]}),Object(H.jsx)(f.a,{borderBottomWidth:D.a.hairlineWidth,borderBottomColor:"divider",mt:{base:6,sm:8},mb:{base:2,sm:4}}),J?Object(H.jsx)(a.b,{size:"lg"}):Object(H.jsxs)(f.a,{flexDirection:u?"column":"row",mx:-12,children:[ce?Object(H.jsx)(L,{onDevice:!0,publicBackupData:te.alreadyOnDevice}):void 0,ue?Object(H.jsx)(L,{onDevice:!1,publicBackupData:te.notOnDevice}):void 0]})]})}}}]);