(this.webpackJsonp=this.webpackJsonp||[]).push([[47],{3050:function(e,n,t){"use strict";t.d(n,"a",(function(){return f}));var r=t(6),i=t.n(r),o=t(9),a=t.n(o),u=t(12),c=t.n(u),s=t(5),d=t.n(s);function l(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,r=d()(e);if(n){var i=d()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return c()(this,t)}}var f=function(e){a()(t,e);var n=l(t);function t(e){var t;return(t=n.call(this,e.options)).vault=e,t}return i()(t)}(t(1108).a);!function(e){a()(t,e);var n=l(t);function t(){return n.apply(this,arguments)}i()(t)}(f)},3055:function(e,n,t){"use strict";t.d(n,"a",(function(){return O}));var r=t(10),i=t.n(r),o=t(2),a=t.n(o),u=t(3),c=t.n(u),s=t(6),d=t.n(s),l=t(9),f=t.n(l),p=t(12),h=t.n(p),v=t(5),y=t.n(v),g=t(22),m=t(21);function w(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function b(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?w(Object(t),!0).forEach((function(n){a()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):w(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function x(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,r=y()(e);if(n){var i=y()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return h()(this,t)}}var O=function(e){f()(t,e);var n=x(t);function t(){return n.apply(this,arguments)}var r=t.prototype;return r.signTransaction=function(){var e=c()((function*(e,n){var t=n.password;if("undefined"===typeof t)throw new m.p("Software signing requires a password.");var r=yield this.getSigners(t,e.inputs.map((function(e){return e.address})));return g.a.engine.info("signTransaction",this.networkId,e),b(b({},yield this.engine.providerManager.signTransaction(this.networkId,e,r)),{},{encodedTx:e.encodedTx})}));return function(n,t){return e.apply(this,arguments)}}(),r.signMessage=function(){var e=c()((function*(e,n){var t=this,r=n.password;if("undefined"===typeof r)throw new m.p("Software signing requires a password.");var o=yield this.getDbAccount(),a=Object.values(yield this.getSigners(r,[o.address])),u=i()(a,1)[0];return g.a.engine.info("signMessage",this.networkId,e),Promise.all(e.map((function(e){return t.engine.providerManager.signMessage(t.networkId,e,u)})))}));return function(n,t){return e.apply(this,arguments)}}(),r.getAddress=function(){throw new Error("Method not implemented.")},d()(t)}(t(3050).a)},3068:function(e,n,t){"use strict";t.d(n,"a",(function(){return c}));var r=t(44),i=t(72),o=t(22),a=t(15);function u(e,n){return"string"!==typeof n?null:e===r.HardwareErrorCode.DeviceInitializeFailed&&n.includes("ECONNABORTED")?new i.g({message:n}):n.includes("Bridge network error")?new i.e({message:n}):null}function c(e){var n,t=e||{},c=t.code,s=t.error,d=t.message,l=null!=(n=null!=s?s:d)?n:"Unknown error";if(u(c,l))return u(c,l);switch(o.a.hardwareSDK.info("Device Utils Convert Device Error:",c,l),c){case r.HardwareErrorCode.UnknownError:return new i.F(e);case r.HardwareErrorCode.DeviceFwException:return new i.s(e);case r.HardwareErrorCode.DeviceUnexpectedMode:return"string"===typeof l&&-1!==l.indexOf("ui-device_bootloader_mode")?new i.C(e):new i.F(e);case r.HardwareErrorCode.DeviceCheckDeviceIdError:return new i.l(e);case r.HardwareErrorCode.DeviceNotFound:return new i.j(e);case r.HardwareErrorCode.DeviceUnexpectedBootloaderMode:return new i.C(e);case r.HardwareErrorCode.DeviceInterruptedFromOutside:case r.HardwareErrorCode.DeviceInterruptedFromUser:return new i.I(e);case r.HardwareErrorCode.DeviceNotSupportPassphrase:return new i.D(e);case r.HardwareErrorCode.IFrameLoadFail:return new i.t(e);case r.HardwareErrorCode.IframeTimeout:return new i.u(e);case r.HardwareErrorCode.FirmwareUpdateDownloadFailed:return new i.o(e);case r.HardwareErrorCode.FirmwareUpdateManuallyEnterBoot:return new i.r(e);case r.HardwareErrorCode.FirmwareUpdateAutoEnterBootFailure:return new i.p(e);case r.HardwareErrorCode.FirmwareUpdateLimitOneDevice:return new i.q(e);case r.HardwareErrorCode.CallMethodNeedUpgradeFirmware:return new i.s(e);case r.HardwareErrorCode.NewFirmwareUnRelease:return new i.B(e);case r.HardwareErrorCode.NetworkError:return new i.A(e);case r.HardwareErrorCode.BlePermissionError:return new i.y(e);case r.HardwareErrorCode.BleLocationError:return new i.x({message:l});case r.HardwareErrorCode.BleLocationServicesDisabled:return new i.b({message:l});case r.HardwareErrorCode.BleDeviceNotBonded:return new i.i(e);case r.HardwareErrorCode.BleWriteCharacteristicError:return new i.d(e);case r.HardwareErrorCode.BleScanError:return new i.c({message:l});case r.HardwareErrorCode.BleAlreadyConnected:return new i.a(e);case r.HardwareErrorCode.RuntimeError:return-1!==l.indexOf("EIP712 blind sign is disabled")?new i.E(e):-1!==l.indexOf("Unknown message")||-1!==l.indexOf("Failure_UnexpectedMessage")?new i.G(e):new i.F(e);case r.HardwareErrorCode.PinInvalid:return new i.v(e);case r.HardwareErrorCode.DeviceCheckPassphraseStateError:return new i.w(e);case r.HardwareErrorCode.DeviceOpenedPassphrase:return new i.m(e);case r.HardwareErrorCode.DeviceNotOpenedPassphrase:return new i.k(e);case r.HardwareErrorCode.PinCancelled:case r.HardwareErrorCode.ActionCancelled:return new i.H(e);case r.HardwareErrorCode.BridgeNotInstalled:case i.h.NeedOneKeyBridge:return new i.z(e);case r.HardwareErrorCode.BridgeNetworkError:return new i.e(e);case r.HardwareErrorCode.BridgeTimeoutError:return a.a.isDesktop&&(o.a.hardwareSDK.debug("desktop bridge timeout, restart desktop bridge."),window.desktopApi.reloadBridgeProcess()),new i.f(e);case r.HardwareErrorCode.PollingTimeout:return new i.g(e);case r.HardwareErrorCode.BlindSignDisabled:return new i.E(e);default:return new i.F(e)}}},3069:function(e,n,t){"use strict";(function(e){t.d(n,"a",(function(){return j}));var r=t(2),i=t.n(r),o=t(143),a=t.n(o),u=t(3),c=t.n(u),s=t(6),d=t.n(s),l=t(9),f=t.n(l),p=t(12),h=t.n(p),v=t(5),y=t.n(v),g=t(27),m=t.n(g),w=t(14),b=t(22),x=t(15),O=t(54),k=t(21),T=t(647),I=t(57),C=t(1108);function A(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function P(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?A(Object(t),!0).forEach((function(n){i()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):A(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function E(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,r=y()(e);if(n){var i=y()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return h()(this,t)}}if(x.a.isExtensionUi)throw new Error("engine/VaultBase is not allowed imported from ui");var j=function(n){f()(r,n);var t=E(r);function r(){return t.apply(this,arguments)}var i=r.prototype;return i.init=function(){var e=c()((function*(e){yield this.initProvider(),yield this.initKeyring(e)}));return function(n){return e.apply(this,arguments)}}(),i.initKeyring=function(){var e=c()((function*(e){this.keyring=yield e.keyringCreator(this)}));return function(n){return e.apply(this,arguments)}}(),i.signTransaction=function(){var e=c()((function*(e,n){return this.keyring.signTransaction(e,n)}));return function(n,t){return e.apply(this,arguments)}}(),i.signAndSendTransaction=function(){var e=c()((function*(e,n,t){var r=yield this.signTransaction(e,n);return t?P(P({},r),{},{encodedTx:e.encodedTx}):this.broadcastTransaction(P(P({},r),{},{encodedTx:e.encodedTx}))}));return function(n,t,r){return e.apply(this,arguments)}}(),i.broadcastTransaction=function(){var e=c()((function*(e,n){b.a.engine.info("broadcastTransaction START:",{rawTx:e.rawTx});var t=yield this.engine.providerManager.broadcastTransaction(this.networkId,e.rawTx,n);return b.a.engine.info("broadcastTransaction END:",{txid:t,rawTx:e.rawTx}),P(P({},e),{},{txid:t,encodedTx:e.encodedTx})}));return function(n,t){return e.apply(this,arguments)}}(),i.buildEncodedTxFromBatchTransfer=function(){var e=c()((function*(e,n){throw new k.k}));return function(n,t){return e.apply(this,arguments)}}(),i.buildEncodedTxsFromSetApproveForAll=function(){var e=c()((function*(e,n){throw new k.k}));return function(n,t){return e.apply(this,arguments)}}(),i.activateAccount=function(){var e=c()((function*(){throw new k.k}));return function(){return e.apply(this,arguments)}}(),i.activateToken=function(){var e=c()((function*(e,n){throw new k.k}));return function(n,t){return e.apply(this,arguments)}}(),i.getTokenAllowance=function(){var e=c()((function*(e,n){throw new k.k}));return function(n,t){return e.apply(this,arguments)}}(),i.batchTokensAllowance=function(){var e=c()((function*(e,n){throw new k.k}));return function(n,t){return e.apply(this,arguments)}}(),i.getOutputAccount=function(){var e=c()((function*(){var e=yield this.getDbAccount({noCache:!0});return{id:e.id,name:e.name,type:e.type,path:e.path,coinType:e.coinType,tokens:[],address:e.address}}));return function(){return e.apply(this,arguments)}}(),i.getAccountBalance=function(){var e=c()((function*(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],t=yield this.getDbAccount(),r=t.address;return this.getBalances((n?[{address:r}]:[]).concat(e.map((function(e){return{address:r,tokenAddress:e}}))))}));return function(n){return e.apply(this,arguments)}}(),i.updatePendingTxs=function(){var e=c()((function*(e){throw new k.k}));return function(n){return e.apply(this,arguments)}}(),i.getAccountNonce=function(){var e=c()((function*(){return Promise.resolve(null)}));return function(){return e.apply(this,arguments)}}(),i.fixActionDirection=function(){var e=c()((function*(e){var n,t,r,i,o=e.action,a=e.accountAddress;(o.direction=I.b.OTHER,o.type===I.a.NATIVE_TRANSFER)&&(o.direction=yield this.buildTxActionDirection({from:(null==(n=o.nativeTransfer)?void 0:n.from)||"",to:(null==(t=o.nativeTransfer)?void 0:t.to)||"",address:a}));o.type===I.a.TOKEN_TRANSFER&&(o.direction=yield this.buildTxActionDirection({from:(null==(r=o.tokenTransfer)?void 0:r.from)||"",to:(null==(i=o.tokenTransfer)?void 0:i.to)||"",address:a}));return o}));return function(n){return e.apply(this,arguments)}}(),i.fixDecodedTx=function(){var e=c()((function*(e){var n,t;e.createdAt=null!=(n=e.createdAt)?n:Date.now();var r=null==(t=e.encodedTx)?void 0:t.nonce;e.nonce=a()(r)?e.nonce:new m.a(r).toNumber();for(var i=e.owner,o=0;o<e.actions.length;o+=1){var u=e.actions[o];yield this.fixActionDirection({action:u,accountAddress:i})}if(e.outputActions)for(var c=0;c<e.outputActions.length;c+=1){var s=e.outputActions[c];yield this.fixActionDirection({action:s,accountAddress:i})}return Promise.resolve(e)}));return function(n){return e.apply(this,arguments)}}(),i.fixHistoryTx=function(){var e=c()((function*(e){return e.decodedTx=yield this.fixDecodedTx(e.decodedTx),x.a.isDev&&x.a.isDesktop&&Object.assign(e,{_tmpCreatedAtText:new Date(e.decodedTx.createdAt||0).toLocaleString(),_tmpUpdatedAtText:new Date(e.decodedTx.updatedAt||0).toLocaleString(),_tmpStatus:e.decodedTx.status,_tmpIsFinal:e.decodedTx.isFinal}),Promise.resolve(e)}));return function(n){return e.apply(this,arguments)}}(),i.buildHistoryTx=function(){var e=c()((function*(e){var n=e.historyTxToMerge,t=(e.encodedTx,e.decodedTx),r=e.signedTx,i=e.isSigner,o=e.isLocalCreated,a=(null==r?void 0:r.txid)||(null==t?void 0:t.txid)||"";if(!a)throw new Error("buildHistoryTx txid not found");var u=yield this.getAccountAddress();t.txid=a||t.txid,t.owner=u,i&&(t.signer=u);var c=P(P({id:this.networkId+"_"+a+"_"+this.accountId,isLocalCreated:Boolean(o)},n),{},{decodedTx:t});return c=yield this.fixHistoryTx(c),Promise.resolve(c)}));return function(n){return e.apply(this,arguments)}}(),i.checkIsScamHistoryTx=function(){var e=c()((function*(e){return!1}));return function(n){return e.apply(this,arguments)}}(),i.fetchOnChainHistory=function(){var e=c()((function*(e){throw new k.k}));return function(n){return e.apply(this,arguments)}}(),i.fixAddressCase=function(e){return Promise.resolve(e)},i.buildTxActionDirection=function(){var e=c()((function*(e){var n=e.from,t=e.to,r=e.address;return n=yield this.fixAddressCase(n||""),t=yield this.fixAddressCase(t),r=yield this.fixAddressCase(r),n===t&&n===r?I.b.SELF:n&&n===r?I.b.OUT:t&&t===r?I.b.IN:I.b.OTHER}));return function(n){return e.apply(this,arguments)}}(),i.getNextNonce=function(){var e=c()((function*(e,n){var t,r,i=null!=(t=null==(r=(yield this.engine.providerManager.getAddresses(e,[n.address]))[0])?void 0:r.nonce)?t:0,o=(yield this.engine.getHistory(e,n.id,void 0,!1),yield O.a.history.getMaxPendingNonce({accountId:this.accountId,networkId:e})),u=yield O.a.history.getPendingNonceList({accountId:this.accountId,networkId:e}),c=Math.max(a()(o)?0:o+1,i);if(Number.isNaN(c)&&(c=i),c>i)for(var s=i;s<c;s+=1)if(!u.includes(s)){c=s;break}if(c<i&&(c=i),c-i>=w.t.PENDING_QUEUE_MAX_LENGTH)throw new k.u(w.t.PENDING_QUEUE_MAX_LENGTH);return c}));return function(n,t){return e.apply(this,arguments)}}(),i.validateSendAmount=function(e,n,t){return Promise.resolve(!0)},i.notifyChainChanged=function(e,n){},i.getFetchBalanceAddress=function(e){return Promise.resolve(e.address)},i.getPrivateKeyByCredential=function(n){return e.from(n.startsWith("0x")?n.slice(2):n,"hex")},d()(r)}(function(e){f()(t,e);var n=E(t);function t(){return n.apply(this,arguments)}var r=t.prototype;return r.initProvider=function(){var e=c()((function*(){var e=(yield this.getNetwork()).impl;a()(T.a[e])||(this.engineProvider=yield this.engine.providerManager.getProvider(this.networkId))}));return function(){return e.apply(this,arguments)}}(),r.proxyJsonRPCCall=function(){var e=c()((function*(e){throw new k.k}));return function(n){return e.apply(this,arguments)}}(),r.createClientFromURL=function(e){throw new k.k},r.getEthersProvider=function(){var e=c()((function*(){throw new k.k}));return function(){return e.apply(this,arguments)}}(),r.getClientEndpointStatus=function(){var e=c()((function*(e){var n=this.createClientFromURL(e),t=performance.now(),r=(yield n.getInfo()).bestBlockNumber;return{responseTime:Math.floor(performance.now()-t),latestBlock:r}}));return function(n){return e.apply(this,arguments)}}(),r.validateAddress=function(){var e=c()((function*(e){var n=yield this.engineProvider.verifyAddress(e),t=n.normalizedAddress;if(!n.isValid||"undefined"===typeof t)throw new k.e;return Promise.resolve(t)}));return function(n){return e.apply(this,arguments)}}(),r.validateImportedCredential=function(e){return Promise.resolve(this.settings.importedAccountEnabled&&/^(0x)?[0-9a-zA-Z]{64}$/.test(e))},r.validateWatchingCredential=function(){var e=c()((function*(e){return Promise.resolve(this.settings.watchingAccountEnabled&&(yield this.engineProvider.verifyAddress(e)).isValid)}));return function(n){return e.apply(this,arguments)}}(),r.validateTokenAddress=function(){var e=c()((function*(e){var n=yield this.engineProvider.verifyTokenAddress(e),t=n.normalizedAddress;if(!n.isValid||"undefined"===typeof t)throw new k.h;return Promise.resolve(t)}));return function(n){return e.apply(this,arguments)}}(),r.checkAccountExistence=function(){var e=c()((function*(e){return Promise.resolve(!0)}));return function(n){return e.apply(this,arguments)}}(),r.getBalances=function(){var e=c()((function*(e){return(yield this.engine.providerManager.getClient(this.networkId)).getBalances(e.map((function(e){var n=e.address,t=e.tokenAddress;return{address:n,coin:P({},"string"===typeof t?{tokenAddress:t}:{})}})))}));return function(n){return e.apply(this,arguments)}}(),r.getFrozenBalance=function(){var e=c()((function*(){return 0}));return function(){return e.apply(this,arguments)}}(),r.getTransactionStatuses=function(e){return this.engine.providerManager.getTransactionStatuses(this.networkId,e)},r.getTransactionFeeInNative=function(e){return Promise.resolve("")},r.isContractAddress=function(){var e=c()((function*(e){return!1}));return function(n){return e.apply(this,arguments)}}(),d()(t)}(C.a))}).call(this,t(19).Buffer)},3070:function(e,n,t){"use strict";(function(e){t.d(n,"a",(function(){return v}));var r=t(3),i=t.n(r),o=t(6),a=t.n(o),u=t(9),c=t.n(u),s=t(12),d=t.n(s),l=t(5),f=t.n(l),p=t(299);function h(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,r=f()(e);if(n){var i=f()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return d()(this,t)}}var v=function(n){c()(r,n);var t=h(r);function r(){return t.apply(this,arguments)}var o=r.prototype;return o.getHardwareInfo=function(){var e=i()((function*(){var e,n,t=yield this.engine.getHWDeviceByWalletId(this.vault.walletId);return{connectId:null!=(e=null==t?void 0:t.mac)?e:"",deviceId:null!=(n=null==t?void 0:t.deviceId)?n:""}}));return function(){return e.apply(this,arguments)}}(),o.getWalletPassphraseState=function(){var e=i()((function*(){var e=yield this.engine.getWallet(this.vault.walletId);return{passphraseState:null==e?void 0:e.passphraseState}}));return function(){return e.apply(this,arguments)}}(),o.getHardwareSDKInstance=function(){var n=i()((function*(){var n,t,r,i,o;return null!=(o=yield null==(n=e)||null==(t=n.$backgroundApiProxy)||null==(r=t.backgroundApi)||null==(i=r.serviceHardware)||null==i.getSDKInstance?void 0:i.getSDKInstance())?o:p.b}));return function(){return n.apply(this,arguments)}}(),a()(r)}(t(3050).a)}).call(this,t(40))},3071:function(e,n,t){"use strict";t.d(n,"a",(function(){return b}));var r=t(2),i=t.n(r),o=t(3),a=t.n(o),u=t(6),c=t.n(u),s=t(9),d=t.n(s),l=t(12),f=t.n(l),p=t(5),h=t.n(p),v=t(297),y=t(21);function g(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function m(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?g(Object(t),!0).forEach((function(n){i()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):g(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function w(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,r=h()(e);if(n){var i=h()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return f()(this,t)}}var b=function(e){d()(t,e);var n=w(t);function t(){return n.apply(this,arguments)}var r=t.prototype;return r.getPrivateKeys=function(){var e=a()((function*(e,n){var t=(yield this.getDbAccount()).path.split("/"),r=n||[t.pop()],i=t.join("/"),o=(yield this.engine.dbApi.getCredential(this.walletId,e)).seed;if("undefined"===typeof o)throw new y.p("Unable to get credential.");var a=(yield this.engine.providerManager.getChainInfoByNetworkId(this.networkId)).curve;return Object(v.c)(a,o,e,i,r).reduce((function(e,n){var t;return m(m({},e),{},((t={})[n.path]=n.extendedKey.key,t))}),{})}));return function(n,t){return e.apply(this,arguments)}}(),r.getAddress=function(){throw new Error("Method not implemented.")},c()(t)}(t(3055).a)},3072:function(e,n,t){"use strict";t.d(n,"a",(function(){return v}));var r=t(3),i=t.n(r),o=t(6),a=t.n(o),u=t(9),c=t.n(u),s=t(12),d=t.n(s),l=t(5),f=t.n(l),p=t(21);function h(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,r=f()(e);if(n){var i=f()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return d()(this,t)}}var v=function(e){c()(t,e);var n=h(t);function t(){return n.apply(this,arguments)}var r=t.prototype;return r.getPrivateKeys=function(){var e=i()((function*(e,n){if("undefined"!==typeof n)throw new p.k("Getting private keys from extended private key");var t=(yield this.engine.dbApi.getCredential(this.accountId,e)).privateKey;if("undefined"===typeof t)throw new p.p("Unable to get credential.");return{"":t}}));return function(n,t){return e.apply(this,arguments)}}(),r.getAddress=function(){throw new Error("Method not implemented.")},a()(t)}(t(3055).a)},3073:function(e,n,t){"use strict";t.d(n,"a",(function(){return v}));var r=t(3),i=t.n(r),o=t(6),a=t.n(o),u=t(9),c=t.n(u),s=t(12),d=t.n(s),l=t(5),f=t.n(l),p=t(21);function h(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,r=f()(e);if(n){var i=f()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return d()(this,t)}}var v=function(e){c()(t,e);var n=h(t);function t(){return n.apply(this,arguments)}var r=t.prototype;return r.signTransaction=function(){var e=i()((function*(e,n){throw new p.p("signTransaction is not supported for watching accounts")}));return function(n,t){return e.apply(this,arguments)}}(),r.signMessage=function(){var e=i()((function*(e,n){throw new p.p("signMessage is not supported for watching accounts")}));return function(n,t){return e.apply(this,arguments)}}(),r.getAddress=function(){throw new Error("Method not implemented.")},a()(t)}(t(3050).a)},3095:function(e,n,t){"use strict";t.d(n,"d",(function(){return o})),t.d(n,"c",(function(){return a})),t.d(n,"a",(function(){return u})),t.d(n,"b",(function(){return s}));var r=t(27),i=t.n(r);function o(e){var n,t=e.value,r=e.network;return new i.a(t).shiftedBy(null!=(n=-r.feeDecimals)?n:0).toFixed()}function a(e){var n,t=e.value,r=e.network;return new i.a(t).shiftedBy(null!=(n=r.feeDecimals)?n:0).toFixed()}function u(e){var n,t,r,o=e.amount,a=e.info;return new i.a(o).plus(null!=(n=a.baseFeeValue)?n:0).shiftedBy(null!=(t=a.feeDecimals)?t:0).shiftedBy(-(null!=(r=a.nativeDecimals)?r:0)).toFixed()}function c(e){return"NaN"===e||Number.isNaN(e)?"0":e}function s(e){var n=e.limitUsed||e.limit;if(e.eip1559){var t=e.price,r=new i.a(n).times(new i.a(t.baseFee).plus(t.maxPriorityFeePerGas)).toFixed(),o=new i.a(n).times(t.gasPrice||t.maxFeePerGas).toFixed();return{min:c(r),max:c(o)}}var a=new i.a(n).times(e.price).toFixed();return{min:c(a),max:c(a)}}},3353:function(e,n,t){"use strict";t.d(n,"d",(function(){return u})),t.d(n,"a",(function(){return c})),t.d(n,"b",(function(){return s})),t.d(n,"c",(function(){return d}));var r=t(1881),i=t(567),o=t(61),a=t(481),u=function(e,n){var t="secp256k1"===e?function(e){if(33!==e.length)throw new Error("Invalid Secp256k1 pubkey length (compressed): "+e.length);return Object(r.ripemd160)(Object(i.sha256)(e))}(n):function(e){if(32!==e.length)throw new Error("Invalid Ed25519 pubkey length: "+e.length);return Object(i.sha256)(e).slice(0,20)}(n);return Object(o.bytesToHex)(t)},c=function(e,n){return a.bech32.encode(e,a.bech32.toWords(Object(o.hexToBytes)(n)))},s=function(e,n){try{var t=a.bech32.decode(e),r=t.prefix,i=t.words;return r===n&&20===a.bech32.fromWords(i).length}catch(o){return!1}},d=function(e,n){try{var t=a.bech32.decode(e),r=t.prefix,i=t.words;if(r!==n)return!1;var o=a.bech32.fromWords(i);return 32===o.length||20===o.length}catch(u){return!1}}},3630:function(e,n,t){"use strict";t.d(n,"a",(function(){return h}));var r,i=t(3),o=t.n(i),a=t(6),u=t.n(a),c=t(55),s=t.n(c),d=t(27),l=t.n(d),f=t(36),p=((r={})[f.a.cryptoorgchain]="cryptoorg",r[f.a.cosmoshub]="cosmos",r[f.a.akash]="akash",r[f.a.fetch]="fetchai",r[f.a.juno]="juno",r[f.a.osmosis]="osmosis",r[f.a.secretnetwork]="secret",r),h=function(){function e(){this.axios=s.a.create({baseURL:"https://api.mintscan.io",timeout:3e4})}var n=e.prototype;return n.fetchCw20TokenInfos=function(){var e=o()((function*(e){var n=p[e];if(!n)return[];try{return(yield this.axios.get("/v2/assets/"+n+"/cw20")).data.assets}catch(t){return[]}}));return function(n){return e.apply(this,arguments)}}(),n.queryCw20TokenInfo=function(){var e=o()((function*(e,n){var t=e.networkId,r=yield this.fetchCw20TokenInfos(t),i=n.reduce((function(e,n){return e.has(n)?e:e.add(n)}),new Set);return r.reduce((function(e,n){return i.has(n.contract_address)&&e.push({contractAddress:n.contract_address,name:n.denom,decimals:n.decimal,symbol:n.denom}),e}),[])}));return function(n,t){return e.apply(this,arguments)}}(),n.queryCw20TokenBalance=function(){var e=o()((function*(e,n,t){var r=t.reduce((function(e,n){return e.push({address:n,balance:new l.a("0")}),e}),[]);return Promise.resolve(r)}));return function(n,t,r){return e.apply(this,arguments)}}(),n.fetchAssertInfos=function(){var e=o()((function*(e){var n=p[e];if(!n)return[];try{return(yield this.axios.get("/v2/assets/"+n)).data.assets}catch(t){return[]}}));return function(n){return e.apply(this,arguments)}}(),n.fetchContractsInfo=function(){var e=o()((function*(e,n){try{var t=p[e];if(!t)return;return(yield this.axios.get("/v1/"+t+"/wasm/contracts/"+n)).data.contract}catch(r){}}));return function(n,t){return e.apply(this,arguments)}}(),n.fetchRelayerPaths=function(){var e=o()((function*(e){try{var n=p[e];if(!n)return;return(yield this.axios.get("/v1/relayer/"+n+"/paths")).data.sendable}catch(t){}}));return function(n){return e.apply(this,arguments)}}(),n.fetchAccountTxs=function(){var e=o()((function*(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;try{var i=p[e];if(!i)return;var o=yield this.axios.get("/v1/"+i+"/account/"+n+"/txs?limit="+t+"&from="+r);return o.data}catch(a){}}));return function(n,t){return e.apply(this,arguments)}}(),u()(e)}()},4062:function(e,n,t){"use strict";(function(e){t.d(n,"a",(function(){return j}));var r=t(2),i=t.n(r),o=t(3),a=t.n(o),u=t(6),c=t.n(u),s=t(9),d=t.n(s),l=t(12),f=t.n(l),p=t(5),h=t.n(p),v=t(61),y=t(44),g=t(111),m=t(3068),w=t(14),b=t(22),x=t(21),O=t(3070),k=t(287),T=t(3353),I=t(683);function C(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function A(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?C(Object(t),!0).forEach((function(n){i()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):C(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function P(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,r=h()(e);if(n){var i=h()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return f()(this,t)}}var E="m/44'/"+w.h+"'",j=function(n){d()(r,n);var t=P(r);function r(){return t.apply(this,arguments)}var i=r.prototype;return i.getChainInfo=function(){var e=a()((function*(){return this.engine.providerManager.getChainInfoByNetworkId(this.networkId)}));return function(){return e.apply(this,arguments)}}(),i.getPublicKey=function(){var e=a()((function*(e,n,t){var r,i,o,a=yield this.getChainInfo(),u=null!=(r=null==a||null==(i=a.implOptions)?void 0:i.curve)?r:"secp256k1",c=yield this.getHardwareSDKInstance(),s=yield this.getWalletPassphraseState();try{o=yield c.cosmosGetPublicKey(e,n,A({bundle:t.map((function(e){return{path:e,curve:u}}))},s))}catch(d){throw b.a.common.error(d),new x.o(d)}if(!o.success)throw b.a.common.error(o.payload),Object(m.a)(o.payload);return o.payload.map((function(e){return e.publicKey})).filter((function(e){return!!e}))}));return function(n,t,r){return e.apply(this,arguments)}}(),i.prepareAccounts=function(){var e=a()((function*(e){var n,t,r,i=e.indexes,o=e.names,a=i.map((function(e){return E+"/0'/0/"+e})),u=yield this.getHardwareSDKInstance(),c=yield this.getHardwareInfo(),s=c.connectId,d=c.deviceId,l=yield this.getWalletPassphraseState(),f=yield this.getChainInfo(),p=null!=(n=null==f||null==(t=f.implOptions)?void 0:t.curve)?n:"secp256k1";if("ed25519"===p)throw new y.HardwareError("ed25519 curve is not supported");try{r=yield u.cosmosGetPublicKey(s,d,A({bundle:a.map((function(e){return{path:e,curve:p,showOnOneKey:!1}}))},l))}catch(D){throw b.a.common.error(D),new x.o(D)}if(!r.success)throw b.a.common.error(r.payload),Object(m.a)(r.payload);var h=[],O=0;for(var k of r.payload){var I=k.path,C=k.publicKey,P=Object(v.hexToBytes)(C),j=Object(T.d)(p,P),B=(o||[])[O]||"COSMOS #"+(i[O]+1);h.push({id:this.walletId+"--"+I,name:B,type:g.a.VARIANT,path:I,coinType:w.h,pub:C,address:j,addresses:{}}),O+=1}return h}));return function(n){return e.apply(this,arguments)}}(),i.getAddress=function(){var e=a()((function*(e){var n,t,r,i,o=yield this.getHardwareSDKInstance(),a=yield this.getHardwareInfo(),u=a.connectId,c=a.deviceId,s=yield this.getWalletPassphraseState(),d=yield this.getChainInfo(),l=null!=(n=null==d||null==(t=d.implOptions)?void 0:t.curve)?n:"secp256k1",f=null==d||null==(r=d.implOptions)?void 0:r.addressPrefix;if("ed25519"===l)throw new y.HardwareError("ed25519 curve is not supported");var p,h=yield o.cosmosGetAddress(u,c,A({path:e.path,hrp:f,showOnOneKey:e.showOnOneKey},s));if(h.success&&null!=(i=h.payload)&&i.address)return null==(p=h.payload)?void 0:p.address;throw Object(m.a)(h.payload)}));return function(n){return e.apply(this,arguments)}}(),i.signTransaction=function(){var n=a()((function*(n){var t,r;b.a.common.info("signTransaction",n);var i=yield this.getDbAccount(),o=null==(t=n.inputs)||null==(r=t[0])?void 0:r.publicKey;if(!o)throw new x.p("Unable to get sender public key.");var a=n.payload.encodedTx,u=Object(I.b)(a),c=Object(v.bytesToHex)(u),s=yield this.getHardwareInfo(),d=s.connectId,l=s.deviceId,f=yield this.getWalletPassphraseState(),p=yield this.getHardwareSDKInstance(),h=yield p.cosmosSignTransaction(d,l,A({path:i.path,rawTx:c},f));if(h.success){var y=h.payload.signature,g=Object(I.c)({txWrapper:a,signature:{signatures:[Object(v.hexToBytes)(Object(k.c)(y))]},publicKey:{pubKey:o}});return{txid:"",rawTx:e.from(g).toString("base64")}}throw Object(m.a)(h.payload)}));return function(e){return n.apply(this,arguments)}}(),i.addressFromBase=function(){var e=a()((function*(e){var n,t,r=yield this.getChainInfo();return Object(T.a)(null!=(n=null==(t=r.implOptions)?void 0:t.addressPrefix)?n:"cosmos",e)}));return function(n){return e.apply(this,arguments)}}(),c()(r)}(O.a)}).call(this,t(19).Buffer)},4063:function(e,n,t){"use strict";(function(e){t.d(n,"a",(function(){return P}));var r=t(10),i=t.n(r),o=t(3),a=t.n(o),u=t(6),c=t.n(u),s=t(9),d=t.n(s),l=t(12),f=t.n(l),p=t(5),h=t.n(p),v=t(567),y=t(21),g=t(938),m=t(297),w=t(111),b=t(14),x=t(22),O=t(3071),k=t(3353),T=t(683);function I(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,r=h()(e);if(n){var i=h()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return f()(this,t)}}var C="m/44'/"+b.h+"'/0'/0",A="m/44'/"+b.h+"'/0'/0'",P=function(n){d()(r,n);var t=I(r);function r(){return t.apply(this,arguments)}var o=r.prototype;return o.getChainInfo=function(){var e=a()((function*(){return this.engine.providerManager.getChainInfoByNetworkId(this.networkId)}));return function(){return e.apply(this,arguments)}}(),o.getSigners=function(){var e=a()((function*(e,n){var t,r,i,o=yield this.getDbAccount(),a=o.address;if(1!==n.length)throw new y.p("Cosmos signers number should be 1.");if(n[0]!==a)throw new y.p("Wrong address required for signing.");var u=(yield this.getPrivateKeys(e))[o.path];if("undefined"===typeof u)throw new y.p("Unable to get signer.");var c=yield this.getChainInfo();return(i={})[a]=new g.b(u,e,null!=(t=null==c||null==(r=c.implOptions)?void 0:r.curve)?t:"secp256k1"),i}));return function(n,t){return e.apply(this,arguments)}}(),o.prepareAccounts=function(){var e=a()((function*(e){var n,t,r=e.password,i=e.indexes,o=e.names,a=(yield this.engine.dbApi.getCredential(this.walletId,r)).seed,u=yield this.getChainInfo(),c=null!=(n=null==u||null==(t=u.implOptions)?void 0:t.curve)?n:"secp256k1",s=Object(m.d)(c,a,r,"secp256k1"===c?C:A,"secp256k1"===c?i.map((function(e){return e.toString()})):i.map((function(e){return e.toString()+"'"})));if(s.length!==i.length)throw new y.p("Unable to get publick key.");var d=[],l=0;for(var f of s){var p=f.path,h=f.extendedKey.key,v=Object(k.d)(c,h),g=(o||[])[l]||"COSMOS #"+(i[l]+1);d.push({id:this.walletId+"--"+p,name:g,type:w.a.VARIANT,path:p,coinType:b.h,pub:h.toString("hex"),address:v,addresses:{}}),l+=1}return d}));return function(n){return e.apply(this,arguments)}}(),o.signTransaction=function(){var n=a()((function*(n,t){var r,o;x.a.common.info("signTransaction result",n);var a=yield this.getDbAccount();x.a.common.info("signTransaction dbAccount",a);var u=(yield this.getSigners(t.password||"",[a.address]))[a.address],c=null==(r=n.inputs)||null==(o=r[0])?void 0:o.publicKey;if(!c)throw new y.p("Unable to get sender public key.");var s=n.payload.encodedTx,d=Object(T.d)(s),l=yield u.sign(e.from(Object(v.sha256)(d))),f=i()(l,1)[0],p=Object(T.c)({txWrapper:s,signature:{signatures:[f]},publicKey:{pubKey:c}});return{txid:"",rawTx:e.from(p).toString("base64")}}));return function(e,t){return n.apply(this,arguments)}}(),o.addressFromBase=function(){var e=a()((function*(e){var n,t,r=yield this.getChainInfo();return Object(k.a)(null!=(n=null==(t=r.implOptions)?void 0:t.addressPrefix)?n:"cosmos",e)}));return function(n){return e.apply(this,arguments)}}(),c()(r)}(O.a)}).call(this,t(19).Buffer)},4064:function(e,n,t){"use strict";(function(e){t.d(n,"a",(function(){return C}));var r=t(10),i=t.n(r),o=t(3),a=t.n(o),u=t(6),c=t.n(u),s=t(9),d=t.n(s),l=t(12),f=t.n(l),p=t(5),h=t.n(p),v=t(567),y=t(21),g=t(938),m=t(427),w=t(111),b=t(14),x=t(22),O=t(3072),k=t(3353),T=t(683);function I(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,r=h()(e);if(n){var i=h()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return f()(this,t)}}var C=function(n){d()(r,n);var t=I(r);function r(){return t.apply(this,arguments)}var o=r.prototype;return o.getChainInfo=function(){var e=a()((function*(){return this.engine.providerManager.getChainInfoByNetworkId(this.networkId)}));return function(){return e.apply(this,arguments)}}(),o.getSigners=function(){var e=a()((function*(e,n){var t,r,i,o=yield this.getDbAccount(),a=o.address;if(1!==n.length)throw new y.p("Cosmos signers number should be 1.");if(n[0]!==a)throw new y.p("Wrong address required for signing.");var u=(yield this.getPrivateKeys(e))[o.path];if("undefined"===typeof u)throw new y.p("Unable to get signer.");var c=yield this.getChainInfo();return(i={})[a]=new g.b(u,e,null!=(t=null==c||null==(r=c.implOptions)?void 0:r.curve)?t:"secp256k1"),i}));return function(n,t){return e.apply(this,arguments)}}(),o.getCurve=function(e){switch(e){case"ed25519":return m.a;case"secp256k1":return m.c;default:throw new y.p("Unsupported curve")}},o.prepareAccounts=function(){var e=a()((function*(e){var n,t,r=e.privateKey,i=e.name;if(32!==r.length)throw new y.p("Invalid private key.");var o=yield this.getChainInfo(),a=null!=(n=null==o||null==(t=o.implOptions)?void 0:t.curve)?n:"secp256k1",u=this.getCurve(a).publicFromPrivate(r),c=u.toString("hex"),s=Object(k.d)(a,u);return Promise.resolve([{id:"imported--"+b.h+"--"+c,name:i||"",type:w.a.VARIANT,path:"",coinType:b.h,pub:c,address:s,addresses:{}}])}));return function(n){return e.apply(this,arguments)}}(),o.signTransaction=function(){var n=a()((function*(n,t){var r,o;x.a.common.info("signTransaction result",n);var a=yield this.getDbAccount();x.a.common.info("signTransaction dbAccount",a);var u=(yield this.getSigners(t.password||"",[a.address]))[a.address],c=null==(r=n.inputs)||null==(o=r[0])?void 0:o.publicKey;if(!c)throw new y.p("Unable to get sender public key.");var s=n.payload.encodedTx,d=Object(T.b)(s),l=yield u.sign(e.from(Object(v.sha256)(d))),f=i()(l,1)[0],p=Object(T.c)({txWrapper:s,signature:{signatures:[f]},publicKey:{pubKey:c}});return{txid:"",rawTx:e.from(p).toString("base64")}}));return function(e,t){return n.apply(this,arguments)}}(),o.addressFromBase=function(){var e=a()((function*(e){var n,t,r=yield this.getChainInfo();return Object(k.a)(null!=(n=null==(t=r.implOptions)?void 0:t.addressPrefix)?n:"cosmos",e)}));return function(n){return e.apply(this,arguments)}}(),c()(r)}(O.a)}).call(this,t(19).Buffer)},4065:function(e,n,t){"use strict";t.d(n,"a",(function(){return g}));var r=t(3),i=t.n(r),o=t(6),a=t.n(o),u=t(9),c=t.n(u),s=t(12),d=t.n(s),l=t(5),f=t.n(l),p=t(14),h=t(21),v=t(111);function y(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,r=f()(e);if(n){var i=f()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return d()(this,t)}}var g=function(e){c()(t,e);var n=y(t);function t(){return n.apply(this,arguments)}return t.prototype.prepareAccounts=function(){var e=i()((function*(e){var n,t=e.name,r=e.target,i=e.accountIdPrefix,o=yield this.vault.validateAddress(r);if("undefined"===typeof o)throw new h.e;return Promise.resolve([{id:i+"--"+p.h+"--"+r,name:t||"",type:v.a.VARIANT,path:"",coinType:p.h,pub:"",address:"",addresses:(n={},n[this.networkId]=o,n)}])}));return function(n){return e.apply(this,arguments)}}(),a()(t)}(t(3073).a)},4066:function(e,n,t){"use strict";t.d(n,"a",(function(){return d}));var r=t(3),i=t.n(r),o=t(6),a=t.n(o),u=t(55),c=t.n(u),s=t(21),d=function(){function e(e){this.axios=c.a.create({baseURL:e.endsWith("/")?e.slice(0,-1):e,timeout:3e4})}var n=e.prototype;return n.fetchNodeInfo=function(){var e=i()((function*(){return(yield this.axios.get("/node_info")).data.node_info}));return function(){return e.apply(this,arguments)}}(),n.fetchBlockHeader=function(){var e=i()((function*(){return(yield this.axios.get("/blocks/latest")).data.block.header}));return function(){return e.apply(this,arguments)}}(),n.getAccountInfo=function(){var e=i()((function*(e){var n=yield this.axios.get("/cosmos/auth/v1beta1/accounts/"+e);return 404===n.status?null:n.data.account}));return function(n){return e.apply(this,arguments)}}(),n.getAccountBalances=function(){var e=i()((function*(e){var n;return null!=(n=(yield this.axios.get("/bank/balances/"+e)).data.result)?n:[]}));return function(n){return e.apply(this,arguments)}}(),n.getTransactionInfo=function(){var e=i()((function*(e){return this.axios.get("/cosmos/tx/v1beta1/txs/"+e).then((function(e){return e.data.tx_response})).catch((function(e){var n;throw new s.m(null==(n=e.response)?void 0:n.status.toString())}))}));return function(n){return e.apply(this,arguments)}}(),n.broadcastTransaction=function(){var e=i()((function*(e){var n,t,r={mode:"BROADCAST_MODE_SYNC",tx_bytes:e},i=yield this.axios.post("/cosmos/tx/v1beta1/txs",r,{headers:{"Content-Type":"application/json"}}),o=i.data.tx_response.raw_log,a=i.data.tx_response.code;if(null!=a&&0!==a){if(-1!==o.indexOf("account sequence mismatch"))throw new s.p(o,"msg__broadcast_tx_sequence_number_error");if(-1!==o.indexOf("insufficient fees"))throw new s.p(o,"msg__broadcast_tx_Insufficient_fee");throw new s.p(o)}return null!=(n=null==(t=i.data.tx_response)?void 0:t.txhash)?n:null}));return function(n){return e.apply(this,arguments)}}(),n.simulationTransaction=function(){var e=i()((function*(e){var n;return null!=(n=(yield this.axios.post("/cosmos/tx/v1beta1/simulate",e,{headers:{"Content-Type":"application/json"}})).data.gas_info)?n:null}));return function(n){return e.apply(this,arguments)}}(),a()(e)}()},4067:function(e,n,t){"use strict";t.d(n,"a",(function(){return a}));var r=t(6),i=t.n(r),o=t(727),a=function(){function e(){}return e.prototype.makeTxWrapper=function(e,n){return o.a.fromAminoSignDoc({chain_id:n.chainId,account_number:n.accountNumber,sequence:n.nonce,fee:{amount:[{amount:n.feeAmount,denom:n.mainCoinDenom}],gas:n.gasLimit},msgs:e.aminoMsgs,memo:n.memo},e)},i()(e)}()},4068:function(e,n,t){"use strict";(function(e){t.d(n,"a",(function(){return l}));var r=t(194),i=t.n(r),o=t(3),a=t.n(o),u=t(6),c=t.n(u),s=t(27),d=t.n(s),l=function(){function n(){}var t=n.prototype;return t.queryContract=function(){var n=a()((function*(n,t,r){var i=e.from(JSON.stringify(r),"utf-8").toString("base64");return n.get("/cosmwasm/wasm/v1/contract/"+t+"/smart/"+i).then((function(e){return e.data.data}))}));return function(e,t,r){return n.apply(this,arguments)}}(),t.queryCw20TokenInfo=function(){var e=a()((function*(e,n){var t=this,r=e.axios;if(!r)throw new Error("axios is not defined");return Promise.all(n.map((function(e){return t.queryContract(r,e,{token_info:{}}).then((function(n){return{contractAddress:e,name:n.name,decimals:n.decimals,symbol:n.symbol}}))})))}));return function(n,t){return e.apply(this,arguments)}}(),t.queryCw20TokenBalance=function(){var e=a()((function*(e,n,t){var r=this,o=e.axios;if(!o)throw new Error("axios is not defined");return Promise.all(t.map((function(e){return r.queryContract(o,n,{balance:{address:e}}).then((function(e){var n;try{n=new d.a(i()(e,"balance","0"))}catch(t){n=new d.a(0)}return{address:e,balance:n}}))})))}));return function(n,t,r){return e.apply(this,arguments)}}(),c()(n)}()}).call(this,t(19).Buffer)},4069:function(e,n,t){"use strict";var r,i,o;t.d(n,"a",(function(){return o})),function(e){e.StateClosed="STATE_CLOSED",e.StateOpen="STATE_OPEN",e.StateTryopen="STATE_TRYOPEN"}(r||(r={})),function(e){e.Icahost="icahost",e.Transfer="transfer"}(i||(i={})),function(e){e.Erc20="erc20",e.Native="native",e.Staking="staking",e.Ibc="ibc",e.Bridge="bridge"}(o||(o={}))},4070:function(e,n,t){"use strict";t.d(n,"a",(function(){return u}));var r=t(6),i=t.n(r),o=t(4071),a=t(4072),u=function(){function e(){this.aminoMsgBuilder=new o.a,this.protoMsgBuilder=new a.a}var n=e.prototype;return n.makeProtoMsgsOrWithAminoMsgs=function(e,n){for(var t=arguments.length,r=new Array(t>2?t-2:0),i=2;i<t;i++)r[i-2]=arguments[i];return{aminoMsgs:[e.apply(void 0,r)],protoMsgs:[n.apply(void 0,r)]}},n.makeSendNativeMsg=function(e,n,t,r){return this.makeProtoMsgsOrWithAminoMsgs(this.aminoMsgBuilder.makeSendNativeMsg.bind(this.aminoMsgBuilder),this.protoMsgBuilder.makeSendNativeMsg.bind(this.protoMsgBuilder),e,n,t,r)},n.makeSendCwTokenMsg=function(e,n,t,r){return this.makeProtoMsgsOrWithAminoMsgs(this.aminoMsgBuilder.makeSendCwTokenMsg.bind(this.aminoMsgBuilder),this.protoMsgBuilder.makeSendCwTokenMsg.bind(this.protoMsgBuilder),e,n,t,r)},n.makeExecuteContractMsg=function(e,n,t,r){return this.makeProtoMsgsOrWithAminoMsgs(this.aminoMsgBuilder.makeExecuteContractMsg.bind(this.aminoMsgBuilder),this.protoMsgBuilder.makeExecuteContractMsg.bind(this.protoMsgBuilder),e,n,t,r)},i()(e)}()},4071:function(e,n,t){"use strict";(function(e){t.d(n,"a",(function(){return a}));var r=t(6),i=t.n(r),o=(t(2),t(10),t(692),t(134),t(861),t(169),t(535));var a=function(){function e(){}var n=e.prototype;return n.makeExecuteContractMsg=function(e,n,t,r){return{type:o.a.executeWasm.type,value:{sender:e,contract:n,msg:t,funds:r}}},n.makeSendNativeMsg=function(e,n,t,r){return{type:o.a.send.native.type,value:{from_address:e,to_address:n,amount:[{amount:t,denom:r}]}}},n.makeSendCwTokenMsg=function(e,n,t,r){return this.makeExecuteContractMsg(e,n,{transfer:{recipient:t,amount:r}},[])},i()(e)}()}).call(this,t(19).Buffer)},4072:function(e,n,t){"use strict";(function(e){t.d(n,"a",(function(){return y}));var r=t(6),i=t.n(r),o=t(10),a=t.n(o),u=(t(20),t(2)),c=t.n(u),s=t(61),d=t(692),l=(t(500),t(1048),t(134),t(861)),f=(t(305),t(118),t(169));function p(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function h(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?p(Object(t),!0).forEach((function(n){c()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):p(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function v(e){return null!==e&&"object"===typeof e?Object.entries(e).filter((function(e){return null!=a()(e,2)[1]})).reduce((function(e,n){var t,r=a()(n,2),i=r[0],o=r[1];return h(h({},e),{},((t={})[i]=o!==Object(o)||Array.isArray(o)?o:v(o),t))}),{}):e}var y=function(){function n(){}var t=n.prototype;return t.makeExecuteContractMsg=function(n,t,r,i){var o=l.MsgExecuteContract.encode(l.MsgExecuteContract.fromPartial({sender:n,contract:t,msg:e.from(JSON.stringify(v(r))),funds:i})).finish();return{typeUrl:f.a.EXECUTE_CONTRACT,value:Object(s.bytesToHex)(o)}},t.makeSendNativeMsg=function(e,n,t,r){var i=d.MsgSend.encode(d.MsgSend.fromPartial({fromAddress:e,toAddress:n,amount:[{amount:t,denom:r}]})).finish();return{typeUrl:f.a.SEND,value:Object(s.bytesToHex)(i)}},t.makeSendCwTokenMsg=function(e,n,t,r){return this.makeExecuteContractMsg(e,n,{transfer:{recipient:t,amount:r}},[])},i()(n)}()}).call(this,t(19).Buffer)},4416:function(e,n,t){"use strict";t.d(n,"a",(function(){return s}));var r=t(6),i=t.n(r),o=t(36),a=t(4068),u=t(3630),c=function(){function e(){}var n=e.prototype;return n.queryCw20TokenInfo=function(e,n){throw new Error("Not implemented")},n.queryCw20TokenBalance=function(e,n,t){throw new Error("Not implemented")},i()(e)}(),s=new(function(){function e(){this.registryMap=new Map}var n=e.prototype;return n.get=function(e){return this.registryMap.get(e)},n.register=function(e,n){this.registryMap.set(e,n)},i()(e)}()),d=new a.a;s.register(o.a.juno,d),s.register(o.a.osmosis,d),s.register(o.a.secretnetwork,new c);var l=new u.a;s.register(o.a.cosmoshub,l),s.register(o.a.akash,l),s.register(o.a.fetch,l)},4435:function(e,n,t){"use strict";t.r(n),function(e){t.d(n,"default",(function(){return ae}));var r=t(194),i=t.n(r),o=t(2),a=t.n(o),u=t(20),c=t.n(u),s=t(10),d=t.n(s),l=t(3),f=t.n(l),p=t(6),h=t.n(p),v=t(9),y=t.n(v),g=t(12),m=t.n(g),w=t(5),b=t.n(w),x=t(61),O=t(27),k=t.n(O),T=t(3001),I=t(126),C=t.n(I),A=t(21),P=t(165),E=t(112),j=t(113),B=t(76),D=t(57),S=t(3095),N=t(287),R=t(3069),M=t(299),F=t(22),_=t(4062),H=t(4063),K=t(4064),U=t(4065),W=t(4066),L=t(3353),q=t(4067),V=t(535),G=t(169),z=t(4416),J=t(3630),X=t(4069),Q=t(683),Y=t(4070),$=t(384),Z=t(2100),ee=t(728);function ne(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function te(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?ne(Object(t),!0).forEach((function(n){a()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ne(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function re(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,r=b()(e);if(n){var i=b()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return m()(this,t)}}var ie={default:"1.3"},oe=["0.01","0.025","0.04"],ae=function(n){y()(r,n);var t=re(r);function r(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).keyringMap={hd:H.a,hw:_.a,imported:K.a,watching:U.a,external:U.a},e.settings=Z.default,e.getClientCache=C()((function(n){return e.getNodeClient(n)}),{promise:!0,max:1}),e.msgBuilder=new Y.a,e.txBuilder=new q.a,e}var o=r.prototype;return o.getContractClient=function(){var e=f()((function*(){return Promise.resolve(z.a.get(this.networkId))}));return function(){return e.apply(this,arguments)}}(),o.getNodeClient=function(e){return new W.a(e)},o.getClient=function(){var e=f()((function*(){var e=(yield this.engine.getNetwork(this.networkId)).rpcURL;return this.getClientCache(e)}));return function(){return e.apply(this,arguments)}}(),o.getChainInfo=function(){var e=f()((function*(){return yield this.engine.providerManager.getChainInfoByNetworkId(this.networkId)}));return function(){return e.apply(this,arguments)}}(),o.getChainImplInfo=function(){var e=f()((function*(){return(yield this.engine.providerManager.getChainInfoByNetworkId(this.networkId)).implOptions}));return function(){return e.apply(this,arguments)}}(),o.getClientEndpointStatus=function(){var e=f()((function*(e){var n=this.getNodeClient(e),t=performance.now(),r=(yield n.fetchBlockHeader()).height,i=parseInt(r);return{responseTime:Math.floor(performance.now()-t),latestBlock:i}}));return function(n){return e.apply(this,arguments)}}(),o._getPublicKey=function(){var e=f()((function*(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.prefix,t=void 0===n||n,r=yield this.getDbAccount(),i=r.pub;return t&&(i=Object(N.a)(i)),Promise.resolve(i)}));return function(){return e.apply(this,arguments)}}(),o.getKey=function(){var e=f()((function*(e,n){var t,r,i=yield this.engine.dbApi.getAccount(n),o=yield this.engine.providerManager.getChainInfoByNetworkId(this.networkId),a=Object(L.a)(null!=(t=null==(r=o.implOptions)?void 0:r.addressPrefix)?t:"cosmos",i.address),u=yield this.engine.getWalletSafe(this.walletId);return{name:i.name,algo:"secp251k1",pubKey:i.pub,address:i.address,bech32Address:a,isNanoLedger:(null==u?void 0:u.type)===B.c}}));return function(n,t){return e.apply(this,arguments)}}(),o.normalIBCAddress=function(e){if(this.isIbcToken(e)){var n=e.split("/"),t=d()(n,2),r=t[0],i=t[1];return r.toLowerCase()+"/"+i.toUpperCase()}},o.validateAddress=function(){var e=f()((function*(e){var n=yield this.getChainInfo();return Object(L.b)(e,n.implOptions.addressPrefix)?Promise.resolve(e):Promise.reject(new A.e)}));return function(n){return e.apply(this,arguments)}}(),o.isIbcToken=function(e){return-1!==e.indexOf("/")&&"ibc"===e.split("/")[0].toLowerCase()},o.validateTokenAddress=function(){var e=f()((function*(e){var n=this,t=yield this.getChainInfo();if(this.isIbcToken(e)){var r,i=null!=(r=this.normalIBCAddress(e))?r:e,o=new J.a,a=yield o.fetchAssertInfos(this.networkId);return a&&a.find((function(e){return e.type===X.a.Ibc&&n.normalIBCAddress(e.denom)===i}))?Promise.resolve(i):Promise.reject(new A.h)}return Object(L.c)(e,t.implOptions.addressPrefix)?Promise.resolve(e):Promise.reject(new A.h)}));return function(n){return e.apply(this,arguments)}}(),o.validateWatchingCredential=function(e){return this.settings.watchingAccountEnabled?this.validateAddress(e).then((function(e){return!!e&&e.length>0})).catch((function(){return!1})):Promise.resolve(!1)},o.checkAccountExistence=function(){var e=f()((function*(e){var n=yield this.getClient();return!!(yield n.getAccountInfo(e))}));return function(n){return e.apply(this,arguments)}}(),o.getAccountNonce=function(){var e=f()((function*(){var e,n=yield this.getClient(),t=yield n.getAccountInfo(yield this.getAccountAddress());return new k.a(null!=(e=null==t?void 0:t.sequence)?e:"0").toNumber()}));return function(){return e.apply(this,arguments)}}(),o.getBalances=function(){var e=f()((function*(e){var n=this,t=yield this.getClient(),r=(yield this.getChainInfo()).implOptions,i=yield this.getContractClient();return Promise.all(e.map(function(){var e=f()((function*(e){var o=e.address,a=e.tokenAddress;try{var u,c=null!=(u=null==a?void 0:a.trim())?u:void 0,s=!c,d=c&&n.isIbcToken(c);if(s||d){var l=yield t.getAccountBalances(o);if(s){var f,p=l.find((function(e){return e.denom===r.mainCoinDenom}));return new k.a(null!=(f=null==p?void 0:p.amount)?f:"0")}if(d){var h,v=l.find((function(e){return n.normalIBCAddress(e.denom)===n.normalIBCAddress(c)}));return new k.a(null!=(h=null==v?void 0:v.amount)?h:"0")}}if(!i)throw new Error("Contract client not found");return yield i.queryCw20TokenBalance({networkId:n.networkId,axios:t.axios},c,[o]).then((function(e){return e[0].balance}))}catch(y){}}));return function(n){return e.apply(this,arguments)}}()))}));return function(n){return e.apply(this,arguments)}}(),o.fetchTokenInfos=function(){var e=f()((function*(e){var n=this,t=e.filter((function(e){return n.isIbcToken(e)})).reduce((function(e,t){var r=n.normalIBCAddress(t);return r&&e.add(r),e}),new Set),r=[];if(t.size>0){var i=new J.a,o=yield i.fetchAssertInfos(this.networkId);if(!o)return Promise.resolve([]);var a=o.reduce((function(e,r){var i,o,a,u=null!=(i=n.normalIBCAddress(r.denom))?i:r.denom;r.type===X.a.Ibc&&t.has(u)&&e.push({name:r.dp_denom+"("+(null!=(o=null==(a=r.channel)?void 0:a.toUpperCase())?o:"")+")",symbol:r.dp_denom,decimals:r.decimal});return e}),[]);r.push.apply(r,c()(a))}if(r.length===e.length)return r;try{var u=yield this.getContractClient();if(!u)return r;var s=yield this.getClient(),d=e.filter((function(e){return!n.isIbcToken(e)}));yield u.queryCw20TokenInfo({networkId:this.networkId,axios:s.axios},d).then((function(e){return e.map((function(e){return{name:e.name,symbol:e.symbol,decimals:e.decimals}}))})).then((function(e){r.push.apply(r,c()(e))})).catch((function(){}))}catch(l){}return r}));return function(n){return e.apply(this,arguments)}}(),o.attachFeeInfoToEncodedTx=function(){var e=f()((function*(e){var n,t,r,i=e.feeInfoValue,o=i.price,a=i.limit;if(!o||"string"!==typeof o)throw new A.p("Invalid gas price.");if("string"!==typeof a)throw new A.p("Invalid fee limit");var u=yield this.getNetwork(),c=Object(S.c)({value:o,network:u}),s=new k.a(parseFloat(c)*parseFloat(a)).toFixed(0),d=Object($.c)(e.encodedTx),l=yield this.getChainImplInfo(),f=[];d&&d.amount.length>0?(d.amount[0].denom!==l.mainCoinDenom&&F.a.engine.warn("Cosmos Invalid fee denom:",{network:u,transaction:e.encodedTx}),f=[{denom:l.mainCoinDenom,amount:s}]):f=[{denom:l.mainCoinDenom,amount:s}];var p={amount:f,gas_limit:a,payer:null!=(n=null==d?void 0:d.payer)?n:"",granter:null!=(t=null==d?void 0:d.granter)?t:"",feePayer:null!=(r=null==d?void 0:d.feePayer)?r:""};return Object($.f)(e.encodedTx,p)}));return function(n){return e.apply(this,arguments)}}(),o.decodedTxToLegacy=function(e){return Promise.resolve({})},o.decodeTx=function(){var e=f()((function*(e,n){var t,r=yield this.engine.getNetwork(this.networkId),i=yield this.getDbAccount(),o=yield this.engine.getNativeTokenInfo(this.networkId),a=yield this.getChainInfo(),u=Object($.d)(e),c=[];for(var s of u){var d,l=null,f=Object(ee.d)(s,null==a||null==(d=a.implOptions)?void 0:d.mainCoinDenom);if(f===D.a.NATIVE_TRANSFER||f===D.a.TOKEN_TRANSFER){var p,h="nativeTransfer",v="unpacked"in s?s.unpacked:s.value,y=v.amount,g=v.fromAddress,m=v.toAddress,w=y[0].amount,b=y[0].denom;if(f===D.a.TOKEN_TRANSFER&&(h="tokenTransfer",!(o=yield this.engine.ensureTokenInDB(this.networkId,b))))throw new Error("Invalid token address");var x={tokenInfo:o,to:m,from:g,amount:new k.a(w).shiftedBy(-o.decimals).toFixed(),amountValue:w,extraInfo:null};(p={type:f})[h]=x,l=p}else l={type:D.a.UNKNOWN,direction:D.b.OTHER,unknownAction:{extraInfo:{}}};l&&c.push(l)}var O,T,I=Object($.c)(e),C=Object($.e)(e),A=oe[0];null!=I&&I.gas_limit&&(A=new k.a(null!=(O=null==I||null==(T=I.amount[0])?void 0:T.amount)?O:"1").div(null==I?void 0:I.gas_limit).toFixed(6));var P={txid:"",owner:i.address,signer:i.address,nonce:C.toNumber(),actions:c,status:D.c.Pending,networkId:this.networkId,accountId:this.accountId,feeInfo:{price:Object(S.d)({value:A,network:r}),limit:null!=(t=null==I?void 0:I.gas_limit)?t:void 0},extraInfo:null,encodedTx:e};return Promise.resolve(P)}));return function(n,t){return e.apply(this,arguments)}}(),o.buildEncodedTxFromTransfer=function(){var e=f()((function*(e){var n,t,r=e.to,i=e.amount,o=e.token,a=(yield this.getDbAccount()).address,u=yield this.getChainInfo(),c=Object(P.g)(this.networkId).chainId;if(!c)throw new Error("Invalid networkId");var s,l=null!=(n=e.destinationTag)?n:"";if(!Object(L.b)(r,u.implOptions.addressPrefix)&&r.indexOf("#")>-1){var f=r.split("#"),p=d()(f,2),h=p[0],v=p[1];r=h,l=null!=v?v:"",yield this.validateAddress(h)}if(o&&""!==o){var y=yield this.engine.ensureTokenInDB(this.networkId,o);if("undefined"===typeof y)throw new A.p("Failed to get token info.");var g=new k.a(i).shiftedBy(y.decimals).toFixed();s=this.isIbcToken(o)?this.msgBuilder.makeSendNativeMsg(a,r,g,o):this.msgBuilder.makeSendCwTokenMsg(a,o,r,g)}else{var m,w=yield this.getNetwork(),b=new k.a(i).shiftedBy(w.decimals).toFixed();s=this.msgBuilder.makeSendNativeMsg(a,r,b,null==u||null==(m=u.implOptions)?void 0:m.mainCoinDenom)}var O=yield this.getClient(),T=yield O.getAccountInfo(a);if(!T)throw new Error("Invalid account");var I=Object(x.hexToBytes)(Object(N.c)(yield this._getPublicKey()));return this.txBuilder.makeTxWrapper(s,{memo:l,gasLimit:"0",feeAmount:"1",pubkey:I,mainCoinDenom:null==u||null==(t=u.implOptions)?void 0:t.mainCoinDenom,chainId:c,accountNumber:T.account_number,nonce:T.sequence})}));return function(n){return e.apply(this,arguments)}}(),o.buildEncodedTxFromApprove=function(e){throw new A.k},o.updateEncodedTxTokenApprove=function(e,n){throw new A.k},o.buildUnsignedTxFromEncodedTx=function(){var e=f()((function*(e){var n=yield this.getDbAccount();return Promise.resolve({inputs:[{address:n.address,value:new k.a(0),publicKey:n.pub}],outputs:[],payload:{encodedTx:e},encodedTx:e})}));return function(n){return e.apply(this,arguments)}}(),o.fetchFeeConfig=function(){var e=f()((function*(){var e=(yield this.getChainInfo()).implOptions.gasPriceStep||{},n=e.low,t=e.normal,r=e.high;return[new k.a(null!=n?n:oe[0]),new k.a(null!=t?t:oe[1]),new k.a(null!=r?r:oe[2])]}));return function(){return e.apply(this,arguments)}}(),o.fixFeeAmount=function(){var e=f()((function*(e){var n,t,r,i=Object($.c)(e),o=yield this.getChainImplInfo(),a=[];i&&i.amount.length>0?(i.amount[0].denom!==o.mainCoinDenom&&F.a.engine.warn("Cosmos Invalid fee denom:",{network:this.networkId,transaction:e}),a=[{denom:o.mainCoinDenom,amount:i.amount[0].amount}]):a=[{denom:o.mainCoinDenom,amount:"100000"}];var u={amount:a,gas_limit:i.gas_limit,payer:null!=(n=null==i?void 0:i.payer)?n:"",granter:null!=(t=null==i?void 0:i.granter)?t:"",feePayer:null!=(r=null==i?void 0:i.feePayer)?r:""};return Object($.f)(e,u)}));return function(n){return e.apply(this,arguments)}}(),o.fetchFeeInfo=function(){var n=f()((function*(n){var t=yield Promise.all([this.getNetwork(),this.buildUnsignedTxFromEncodedTx(n)]),r=d()(t,2),i=r[0],o=r[1],a=yield this.fixFeeAmount(o.encodedTx),u=Object($.c)(a).gas_limit,c=(yield this.fetchFeeConfig()).map((function(e){return Object(S.d)({value:e.toFixed(),network:i})}));try{var s,l=yield this.getClient(),f=yield this._getPublicKey(),p=Object(Q.c)({txWrapper:a,signature:{signatures:[new Uint8Array(64)]},publicKey:{pubKey:f}});if(!p)throw new Error("Invalid rawTxBytes");var h=yield l.simulationTransaction({tx_bytes:e.from(p).toString("base64")});if(!h)throw new Error("Failed to get tx simulation");u=new k.a(h.gas_used).multipliedBy(null!=(s=ie[this.networkId])?s:ie.default).toFixed(0)}catch(b){var v=Object($.d)(a).find((function(e){return(null==e?void 0:e.typeUrl)===V.a.send.native.type||(null==e?void 0:e.type)===G.a.SEND}));if(v){var y,g=("unpacked"in v?v.unpacked:v.value).amount,m=yield this.getChainInfo();g&&g.length>0&&g[0].denom===(null==m||null==(y=m.implOptions)?void 0:y.mainCoinDenom)&&(u="100000")}if(!u||""===u)throw b}var w="1";return c.length>0&&"0"===c[0]&&(w="0"),{nativeSymbol:i.symbol,nativeDecimals:i.decimals,feeSymbol:i.feeSymbol,feeDecimals:i.feeDecimals,limit:u,prices:c,defaultPresetIndex:w}}));return function(e){return n.apply(this,arguments)}}(),o.broadcastTransaction=function(){var e=f()((function*(e){var n=yield this.getClient();F.a.engine.info("broadcastTransaction START:",{rawTx:e.rawTx});try{var t=yield n.broadcastTransaction(e.rawTx);if(F.a.engine.info("broadcastTransaction Done:",{txid:t,rawTx:e.rawTx}),!t)throw new Error("broadcastTransaction failed");return te(te({},e),{},{txid:t})}catch(a){if(a instanceof A.p)throw a;var r=a||{},i=r.errorCode,o=r.message;throw new A.p((null!=i?i:"")+" "+o)}}));return function(n){return e.apply(this,arguments)}}(),o.updateEncodedTx=function(){var e=f()((function*(e,n,t){var r=Object($.d)(e);if(t.type===D.d.transfer&&r.length>0&&r[0].typeUrl===V.a.send.native.type){var i=yield this.getNetwork();return Promise.resolve(Object($.g)(e,new k.a(n.amount).shiftedBy(i.decimals).toFixed()))}return Promise.resolve(e)}));return function(n,t,r){return e.apply(this,arguments)}}(),o.getExportedCredential=function(){var e=f()((function*(e){var n=yield this.getDbAccount();if(n.id.startsWith("hd-")||n.id.startsWith("imported")){var t=this.keyring,r=Object.values(yield t.getPrivateKeys(e)),i=d()(r,1)[0];return"0x"+Object(E.a)(e,i).toString("hex")}throw new A.p("Only credential of HD or imported accounts can be exported")}));return function(n){return e.apply(this,arguments)}}(),o.fetchOnChainHistory=function(){var e=f()((function*(e){var n,t=this,r=e.localHistory,i=void 0===r?[]:r;if(e.tokenIdOnNetwork)return Promise.resolve([]);var o=(yield Object(M.a)()).getTimeStamp,a=yield this.getDbAccount(),u=yield this.getChainInfo(),c=new J.a,s=(null!=(n=yield c.fetchAccountTxs(this.networkId,a.address))?n:[]).map(function(){var e=f()((function*(e){var n=i.find((function(n){return n.decodedTx.txid.toUpperCase()===e.data.txhash.toUpperCase()}));if(n&&n.decodedTx.isFinal)return Promise.resolve(void 0);try{var r,c,s,d,l,f=yield t.engine.getNativeTokenInfo(t.networkId),p=e.data.code,h=D.c.Pending;p?h=D.c.Failed:new k.a(e.data.height).gt(0)&&(h=D.c.Confirmed);var v=e.data.tx.body.messages,y=e.data.tx.auth_info.fee,g=e.data.tx.auth_info.signer_infos[0].sequence,m="",w="",b=[];for(var x of v){var O,I=null,C=Object(ee.c)(x,null==u||null==(O=u.implOptions)?void 0:O.mainCoinDenom);if(C===D.a.NATIVE_TRANSFER||C===D.a.TOKEN_TRANSFER){var A,P="nativeTransfer",E=x.amount,j=x.from_address,B=x.to_address;m=j,w=B;var S=E[0].amount,N=E[0].denom;if(C===D.a.TOKEN_TRANSFER&&(P="tokenTransfer",f=yield t.engine.ensureTokenInDB(t.networkId,N)),!f)throw new Error("Invalid token address");var R={tokenInfo:f,to:B,from:j,amount:new k.a(S).shiftedBy(-f.decimals).toFixed(),amountValue:S,extraInfo:null};(A={type:C})[P]=R,I=A}else I={type:D.a.UNKNOWN,direction:D.b.OTHER,unknownAction:{extraInfo:{}}};I&&b.push(I)}var M={from:m,to:w,value:""},F=new k.a(null!=(r=null==y||null==(c=y.amount[0])?void 0:c.amount)?r:"0"),_={txid:e.data.txhash,owner:a.address,signer:m,nonce:parseInt(g),actions:b,status:h,networkId:t.networkId,accountId:t.accountId,encodedTx:M,extraInfo:null,totalFeeInNative:new k.a(F).shiftedBy(-(null!=(s=null==(d=f)?void 0:d.decimals)?s:6)).toFixed()};return _.updatedAt=null!=(l=Object(T.a)(new Date(e.data.timestamp)))?l:o(),_.createdAt=_.updatedAt,_.isFinal=_.status===D.c.Confirmed,yield t.buildHistoryTx({decodedTx:_,historyTxToMerge:n})}catch(H){return}}));return function(n){return e.apply(this,arguments)}}());return(yield Promise.all(s)).filter(Boolean)}));return function(n){return e.apply(this,arguments)}}(),o.getTransactionStatuses=function(){var e=f()((function*(e){var n=yield this.getClient();return Promise.all(e.map(function(){var e=f()((function*(e){try{var t=yield n.getTransactionInfo(e),r=i()(t,"code",void 0),o=j.a.PENDING;return r?o=j.a.CONFIRM_BUT_FAILED:new k.a(t.height).gt(0)&&(o=j.a.CONFIRM_AND_SUCCESS),yield Promise.resolve(o)}catch(r){var a=r.message;if("404"===a||"400"===a)return Promise.resolve(j.a.NOT_FOUND)}}));return function(n){return e.apply(this,arguments)}}()))}));return function(n){return e.apply(this,arguments)}}(),o.addressFromBase=function(){var e=f()((function*(e){var n,t,r=yield this.getChainInfo();return Object(L.a)(null!=(n=null==(t=r.implOptions)?void 0:t.addressPrefix)?n:"cosmos",e)}));return function(n){return e.apply(this,arguments)}}(),h()(r)}(R.a)}.call(this,t(19).Buffer)}}]);