(this.webpackJsonp=this.webpackJsonp||[]).push([[14,84,100,109,835],{3022:function(e,t,n){"use strict";n.r(t),n.d(t,"stackScreenList",(function(){return _r})),n.d(t,"StackNavigator",(function(){return wr})),n.d(t,"default",(function(){return Cr}));var r=n(1),a=n.n(r),o=n(3014),c=n(286),i=n(3764),s=n(43),l=n(3683),u=n(2),d=n.n(u),b=n(110),j=n(326),f=n(121),p=n(125),m=n(268),O=n(79),g=n(1109),h=n(32),x=n(70),y=n(52),v=n(508),_=n(4322),w=n.n(_),C=n(4323),P=n.n(C),D=n(4324),A=n.n(D),M=n(3240),S=n(15),k=n(176),B=n(177),E=n(33),W=n(3085),I=n(3238),R=n(163),T=n(3),H=n.n(T),z=n(3086),N=n(25),F=n(4325),U=n.n(F),V=n(4326),L=n.n(V),Q=n(3410),q=n(3081),G=n(56),J=n(3290),K=n(0);var X=Object(r.memo)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.disableOnboardingDone,n=e.onSuccess,a=Object(J.a)(),o=a.addExternalAccount,c=Object(q.b)(),i=Object(v.a)(),s=Object(B.a)(),l=Object(r.useMemo)((function(){return[{logo:L.a,label:"Trezor",available:!1},{logo:U.a,label:"Ledger",available:!1}]}),[]);return Object(K.jsxs)(b.a,{flex:1,children:[Object(K.jsx)(z.a,{from:"sm",children:Object(K.jsx)(h.a,{testID:"ConnectWallet-SecondaryContent-Divider",w:"full",h:S.a.isNative?N.a.hairlineWidth:"1px",bgColor:"divider",mt:-4,mb:1})}),Object(K.jsxs)(h.a,{flexDir:{sm:"row"},flexWrap:{sm:"wrap"},alignSelf:"stretch",mx:-2,children:[Object(K.jsx)(Q.b,{onConnectResult:function(){var e=H()((function*(e){yield o(e),t?null==s||null==s.goBack||s.goBack():(yield c(),yield Object(G.g)(600),R.a.show({title:i.formatMessage({id:"msg__account_imported"})})),n&&n()}));return function(t){return e.apply(this,arguments)}}()}),l.map((function(e){return Object(K.jsx)(Q.a,{label:e.label,available:e.available,logoSource:e.logo,onPress:function(){}},e.label)}))]})]})}));function Y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(n),!0).forEach((function(t){d()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function $(){var e,t=Object(v.a)(),n=Object(B.a)(),a=Object(I.b)(),o=null==a?void 0:a.forceVisibleUnfocused,c=Object(r.useCallback)((function(){null==o||o(),n.navigate(E.g.Modal,{screen:E.e.CreateWallet,params:{screen:E.b.ConnectHardwareModal}})}),[o,n]),i=Object(k.f)().network,s=!(null!=i&&null!=(e=i.settings)&&e.hardwareAccountEnabled);return Object(K.jsxs)(p.a,{h:{base:200,sm:240},pt:4,pb:5,px:5,rounded:"xl",bgColor:"surface-default",_hover:{bgColor:"surface-hovered"},_pressed:{bgColor:"surface-pressed"},borderWidth:1,borderColor:"border-subdued",onPress:function(){s||c()},children:[Object(K.jsxs)(x.a,{typography:"Heading",maxW:{base:160,sm:"auto"},children:[t.formatMessage({id:"action__connect"})," OneKey","\n",t.formatMessage({id:"wallet__hardware_wallet"})]}),Object(K.jsx)(h.a,{flex:1}),Object(K.jsx)(h.a,{alignSelf:"flex-start",children:s?Object(K.jsx)(g.a,{title:t.formatMessage({id:"badge__coming_soon"}),size:"sm",type:"default"}):Object(K.jsx)(O.a,{name:"ArrowRightOutline"})}),Object(K.jsx)(m.a,{position:"absolute",bottom:0,right:{base:-16,sm:-24},source:S.a.isNative?w.a:P.a,height:{base:200,sm:235},width:{base:243,sm:285}})]})}function ee(){var e=Object(B.a)(),t=Object(I.b)(),n=null==t?void 0:t.forceVisibleUnfocused,a=Object(r.useCallback)((function(){null==n||n(),e.navigate(E.g.Modal,{screen:E.e.CreateWallet,params:{screen:E.b.OnekeyLiteRestorePinCodeVerifyModal}})}),[e,n]);return Object(K.jsx)(h.a,{mt:{base:6,sm:4},mx:{base:-2,sm:0},children:Object(K.jsxs)(p.a,{flexDir:"row",alignItems:"center",px:{base:2,sm:4},py:3,rounded:"xl",borderWidth:{sm:1},borderColor:"border-subdued",bgColor:{sm:"surface-default"},_hover:{bgColor:"surface-hovered"},_pressed:{bgColor:"surface-pressed"},onPress:function(){return a()},children:[Object(K.jsx)(m.a,{source:A.a,size:8}),Object(K.jsx)(x.a,{flex:1,mx:3,typography:{sm:"Body1Strong",md:"Body2Strong"},children:"OneKey Lite"}),Object(K.jsx)(O.a,{name:"ChevronRightMini",color:"icon-subdued",size:20})]})})}var te=Object(r.memo)((function(){var e,t=Object(v.a)(),n=Object(f.a)("background-default"),r=Object(k.h)((function(e){return e.runtime.onBoardingLoadingBehindModal})),a=Object(y.x)(),o=null==a||null==(e=a.params)?void 0:e.disableAnimation;return Object(K.jsx)(K.Fragment,{children:r?Object(K.jsx)(b.a,{bgColor:n,flex:1,height:"full",children:Object(K.jsx)(j.b,{size:"lg"})}):Object(K.jsxs)(W.a,{disableAnimation:o,title:t.formatMessage({id:"title__connect_with"}),secondaryContent:Object(K.jsx)(X,Z({},null==a?void 0:a.params)),children:[Object(K.jsx)($,{}),M.a||S.a.isDev?Object(K.jsx)(ee,{}):null]})})})),ne=n(10),re=n.n(ne),ae=n(21),oe=n(151),ce=n(22),ie=n(93);var se=n(94),le=n(328),ue=n(3368),de=[{text:"content__creating_your_wallet"},{text:"content__generating_your_accounts"},{text:"content__encrypting_your_data"}],be="onboardingWalletCreated",je="onboardingPressFinishButton",fe=n(298),pe=n.n(fe),me=n(772),Oe=n(85),ge=n(35),he=n(103),xe=n(16),ye=n.n(xe),ve=n(6),_e=n.n(ve),we=n(23),Ce=n.n(we),Pe=n(9),De=n.n(Pe),Ae=n(12),Me=n.n(Ae),Se=n(5),ke=n.n(Se),Be=n(29),Ee=n.n(Be);function We(e,t){if(!(t<0)){var n=t;return function e(t){for(var a,o,c=r.Children.toArray(t.props.children),i=c.length,s=0;!o&&s<i;)"string"!==typeof(a=c[s])?o=e(a):n-a.length<0?o=a.charAt(n):n-=a.length,s+=1;return o}(e)}}var Ie=N.a.create({hidden:{color:"transparent"}});var Re=["children","delayMap","fixed","initialDelay","maxDelay","minDelay","onTyped","onTypingEnd","typing"];function Te(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function He(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Te(Object(n),!0).forEach((function(t){d()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Te(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ze(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ke()(e);if(t){var a=ke()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Me()(this,n)}}var Ne=function(e){De()(n,e);var t=ze(n);function n(e){var n;return(n=t.call(this,e)).state={direction:e.typing,visibleChars:0},n.typeNextChar=n.typeNextChar.bind(Ce()(n)),n}n.getDerivedStateFromProps=function(e,t){var n=e.typing,r=t.direction,a=t.visibleChars;return n!==r?{direction:n,visibleChars:a+n}:null};var o=n.prototype;return o.componentDidMount=function(){var e=this.props.initialDelay;this.startTyping(e)},o.componentDidUpdate=function(e,t){var n=this.props,r=n.children,a=n.typing;if(this.clearTimeout(),0!==a)if(r===e.children){var o=this.props,c=o.delayMap,i=o.onTyped,s=o.onTypingEnd,l=this.state.visibleChars,u=We(this,t.visibleChars),d=We(this,l);if(u&&i(u,l),d){var b=this.getRandomTimeout();c&&c.forEach((function(e){var t=e.at,n=e.delay;(t===l||u.match(t))&&(b+=n)})),this.startTyping(b)}d||s()}else this.reset()},o.componentWillUnmount=function(){this.clearTimeout()},o.getRandomTimeout=function(){var e=this.props,t=e.maxDelay,n=e.minDelay;return Math.round(Math.random()*(t-n)+n)},o.clearTimeout=function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null)})),o.reset=function(){var e=this,t=this.props.initialDelay;this.setState({visibleChars:0},(function(){return e.startTyping(t)}))},o.startTyping=function(e){this.timeoutId=setTimeout(this.typeNextChar,e)},o.typeNextChar=function(){this.setState((function(e){var t=e.direction;return{visibleChars:e.visibleChars+t}}))},o.render=function(){var e=this.props,t=e.children,n=(e.delayMap,e.fixed),o=(e.initialDelay,e.maxDelay,e.minDelay,e.onTyped,e.onTypingEnd,e.typing,ye()(e,Re)),c=this.state.visibleChars;return function(e,t,n,o){var c,i,s=0;function l(e){var t=e.props.children;return a.a.cloneElement(e,{},r.Children.map(t,u))}function u(e){if("string"!==typeof e)return l(e);var n=e.length+s,r=null;if(n>i&&(!c||s<c)){var a=i-s,o=c?c-s:n,u=e.substring(0,a),d=e.substring(o,n);if(t)r=[u,Object(K.jsx)(he.a,{style:Ie.hidden,children:e.substring(a,o)}),d];else r=[u,d]}return s=n,r||e}return n>o?(c=n,i=o):(c=o,i=n||0),l(e)}(Object(K.jsx)(he.a,He(He({},o),{},{children:t})),n,c)},_e()(n)}(r.Component);Ne.propTypes={children:Ee.a.node.isRequired,delayMap:Ee.a.arrayOf(Ee.a.shape({at:Ee.a.oneOfType([Ee.a.string,Ee.a.number,Ee.a.instanceOf(RegExp)]),delay:Ee.a.number})),fixed:Ee.a.bool,initialDelay:Ee.a.number,maxDelay:Ee.a.number,minDelay:Ee.a.number,onTyped:Ee.a.func,onTypingEnd:Ee.a.func,style:Ee.a.oneOfType([Ee.a.object,Ee.a.array]),typing:Ee.a.oneOf([-1,0,1])},Ne.defaultProps={fixed:!1,initialDelay:200,maxDelay:100,minDelay:20,onTyped:function(){},onTypingEnd:function(){},style:{},typing:0};var Fe=function(){var e=Object(r.useRef)(new ge.a.Value(0)).current,t=Object(f.a)("interactive-default"),n=Object(Oe.a)();return Object(r.useEffect)((function(){ge.a.loop(ge.a.sequence([ge.a.timing(e,{toValue:1,duration:300,useNativeDriver:!0}),ge.a.timing(e,{toValue:0,duration:300,useNativeDriver:!0})])).start()}),[e]),Object(K.jsx)(ge.a.View,{style:{width:32,height:n?48:56,borderBottomWidth:4,borderBottomColor:t,opacity:e}})},Ue=function(e){var t=e.children,n=e.onTypingEnd,a=e.isPending,o=void 0===a||a,c=e.isFadeOut,i=Object(r.useRef)(new ge.a.Value(1)).current,s=Object(Oe.a)();Object(r.useEffect)((function(){if(c){var e=ge.a.timing(i,{toValue:.3,duration:300,useNativeDriver:!1});setTimeout((function(){e.start()}),150)}}),[c,i]);var l=Object(r.useState)(!1),u=re()(l,2),d=u[0],b=u[1];Object(r.useEffect)((function(){o||setTimeout((function(){b(!0)}),650)}),[o]);var j=Object(f.a)("text-default"),p=Object(r.useMemo)((function(){return t}),[]);return Object(K.jsx)(ge.a.View,{style:{minHeight:s?48:56,opacity:i},children:d?Object(K.jsx)(Ne,{typing:1,style:{color:j,fontSize:s?42:48,lineHeight:s?48:56,fontWeight:"bold"},initialDelay:0,minDelay:12,maxDelay:12,onTypingEnd:n,children:p}):Object(K.jsx)(Fe,{})})};Ue.Highlight=function(e){var t=e.children,n=Object(f.a)("interactive-default");return Object(K.jsx)(he.a,{style:{color:n},children:t})},Ue.NormalText=function(e){var t=e.children,n=Object(f.a)("text-default");return Object(K.jsx)(he.a,{style:{color:n},children:t})};var Ve=Ue,Le=n(649),Qe=n(98),qe=n(594),Ge=n(3328),Je=function(e){var t=e.visible,n=Object(v.a)();return Object(K.jsxs)(Le.a,{as:h.a,position:"absolute",top:4,right:4,w:280,initial:{opacity:0,translateY:-16,scale:.95},animate:{translateY:0,opacity:1,scale:1,transition:{duration:300,delay:150}},visible:t,children:[Object(K.jsxs)(h.a,{p:4,bgColor:"surface-default",rounded:"xl",borderWidth:1,borderColor:"divider",children:[Object(K.jsx)(x.a,{typography:"Body2Strong",children:n.formatMessage({id:"content__pin_onekey_ext"})}),Object(K.jsxs)(h.a,{flexDir:"row",my:2,children:[Object(K.jsx)(Ge.a,{colors:["transparent",Object(f.a)("surface-neutral-subdued")],style:{height:32,flex:1,borderRadius:16},start:{x:0,y:0},end:{x:1,y:0}}),Object(K.jsx)(h.a,{ml:4,mr:1,p:2,rounded:"full",bgColor:"surface-neutral-subdued",children:Object(K.jsx)(O.a,{name:"ExtensionsMini",color:"icon-default",size:16})}),Object(K.jsx)(h.a,{p:2,rounded:"full",children:Object(K.jsx)(O.a,{name:"EllipsisVerticalMini",size:16})})]}),Object(K.jsxs)(h.a,{flexDir:"row",alignItems:"center",py:3,px:4,borderWidth:1,borderColor:"border-subdued",rounded:"xl",shadow:"depth.4",children:[Object(K.jsx)(O.a,{name:"BrandLogoIllus",size:16}),Object(K.jsx)(x.a,{flex:1,mx:3,typography:"Body2",children:"OneKey"}),Object(K.jsx)(O.a,{name:"PinMini",size:16})]}),Object(K.jsx)(h.a,{position:"absolute",left:"-112px",bottom:"-69px",children:Object(K.jsx)(O.a,{name:"ArrowTopRightIllus",size:69,color:"interactive-default"})})]}),S.a.isExtension?Object(K.jsxs)(h.a,{flexDirection:"row",alignItems:"center",mt:"8px",p:4,bgColor:"surface-default",rounded:"xl",borderWidth:1,borderColor:"divider",children:[Object(K.jsx)(x.a,{typography:"Body2Strong",flex:1,children:n.formatMessage({id:"content__keyboard_shortcut"})}),Object(K.jsx)(h.a,{flexDirection:"row",mx:"-2px",children:["\u2325","\u21e7","O"].map((function(e,t){return Object(K.jsx)(h.a,{alignItems:"center",minW:"24px",mx:"2px",py:"4px",bgColor:"surface-neutral-subdued",rounded:"6px",children:Object(K.jsx)(x.a,{fontSize:14,lineHeight:16,children:e})},t)}))})]}):void 0]})};Je.defaultProps={};var Ke=Je;function Xe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ye(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xe(Object(n),!0).forEach((function(t){d()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ze(e){var t=e.onPressFinished,n=e.pausedProcessIndex,a=e.forwardedRef,o=e.minHeight,c=Object(v.a)(),i=Object(r.useRef)(new qe.a),s=Object(r.useRef)(!1),l=Object(r.useState)(!1),u=re()(l,2),d=u[0],b=u[1],j=Object(Oe.a)(),f=Object(r.useMemo)((function(){var e=de,t=e.reduce((function(e,t,n){return e[n]={typingEnd:!1,done:!1},e}),{});return{processInfoList:e,processDefaultStates:t}}),[]),m=f.processInfoList,O=f.processDefaultStates,g=Object(r.useMemo)((function(){return n<=0?0:n>=m.length-1?m.length-1:n}),[n,m.length]),x=Object(r.useState)(O),y=re()(x,2),_=y[0],w=y[1],C=m.length-1,P=Object(r.useState)(!1),D=re()(P,2),A=D[0],M=D[1],k=Object(r.useMemo)((function(){return _[C]}),[C,_]),B=Object(r.useCallback)((function(){S.a.isRuntimeBrowser&&setTimeout((function(){var e;window.scrollTo(0,999999),null==(e=document.querySelector("#WebOnboardingAutoTypingContainer"))||e.scrollTo(0,999999)}),0)}),[]),E=Object(r.useCallback)((function(){M(!0),B()}),[B]),W=Object(r.useMemo)((function(){var e=!0;return Object.values(_).forEach((function(t){e=e&&t.done})),e}),[_]),I=Object(r.useCallback)((function(e,t){w((function(n){var r;return Ye(Ye({},n),{},((r={})[e]=Ye(Ye({},n[e]),t),r))}))}),[]),R=Object(r.useMemo)((function(){return d&&W&&A}),[W,A,d]);Object(r.useEffect)((function(){R&&B()}),[R,B]);var T=Object(r.useRef)({}),H=Object(r.useCallback)((function(e){T.current[e]||(T.current[e]=!0,I(e,{typingEnd:!0}),B(),setTimeout((function(){e!==g||s.current?I(e,{done:!0}):i.current.once("event-wallet-created",(function(){I(e,{done:!0})})),B()}),1e3))}),[g,I,B]),z=Object(r.useMemo)((function(){return m.map((function(e,t){return function(){return H(t)}}))}),[H,m]),N=Object(r.useMemo)((function(){return Object(K.jsx)(Le.a,{as:h.a,mt:"auto",alignSelf:{base:"stretch",sm:"flex-start"},visible:R,initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1,transition:{duration:300,delay:150}},children:Object(K.jsx)(Qe.a,{onPromise:t,type:S.a.isExtension?"basic":"primary",size:"xl",minW:160,children:c.formatMessage({id:S.a.isExtension?"action__i_got_it":"action__lets_go"})})})}),[R,t,c]),F=Object(r.useCallback)((function(){s.current||(s.current=!0,i.current.emit("event-wallet-created"),setTimeout((function(){b(!0),B()}),300))}),[B]);return Object(r.useImperativeHandle)(a,(function(){return{handleWalletCreated:F}})),Object(K.jsxs)(K.Fragment,{children:[Object(K.jsxs)(h.a,{minH:null!=o?o:{base:480,sm:320},maxH:"full",flexGrow:{base:1,sm:0},children:[Object(K.jsxs)(h.a,{flex:1,justifyContent:"flex-end",mb:{base:12,sm:0},children:[m.map((function(e,t){var n=_[t-1],r=_[t],a=!1,o=!1;if(n&&(a=!n.done),r&&(o=r.done&&r.typingEnd),!n||n.typingEnd)return Object(K.jsx)(Ve,{onTypingEnd:z[t],isPending:a,isFadeOut:o,children:c.formatMessage({id:e.text},{a:function(e){return Object(K.jsx)(Ve.NormalText,{children:e})},b:function(e){return Object(K.jsx)(Ve.Highlight,{children:e})}})},t)})),k.typingEnd&&!W?Object(K.jsx)(Ve,{}):void 0,k.typingEnd&&W?Object(K.jsx)(p.a,{onPress:t,children:Object(K.jsx)(Ve,{isPending:!k.done,onTypingEnd:E,children:Object(K.jsxs)(Ve.NormalText,{children:[c.formatMessage({id:"content__your_wallet_is_now_ready"},{b:function(e){return Object(K.jsx)(Ve.Highlight,{children:e})}})," ","\ud83d\ude80"]})})}):void 0,A?Object(K.jsx)(Ve,{}):void 0]}),Object(K.jsx)(h.a,{mt:S.a.isExtension&&j?4:16,minH:"50px",children:R?N:void 0})]}),Object(K.jsx)(me.a,{children:R&&S.a.isExtension&&!j?Object(K.jsx)(Ke,{visible:R}):void 0})]})}var $e=Object(r.forwardRef)((function(e,t){var n=Object.assign({},(pe()(e),e));return Object(K.jsx)(Ze,Ye(Ye({},n),{},{forwardedRef:t}))}));$e.displayName="ProcessAutoTypingRef";var et=$e,tt=n(1123),nt=n(1932);function rt(e){var t=e.src,n=e.routePath,a=e.customReceiveHandler,o=e.onWebViewRef,c=e.isSpinnerLoading,i=e.onContentLoaded,s=Object(nt.b)(),l=s.themeVariant,u=s.localeVariant,d=s.enableHaptics,b=Object(r.useMemo)((function(){if(!t)return S.a.isNativeAndroid?{uri:"file:///android_asset/web-embed/index.html"}:S.a.isNativeIOS?{uri:"web-embed/index.html"}:void 0}),[t]);return Object(K.jsx)(tt.a,{src:t||"",onContentLoaded:i,isSpinnerLoading:c,onWebViewRef:o,customReceiveHandler:a,nativeWebviewSource:b,nativeInjectedJavaScriptBeforeContentLoaded:'\n        window.location.hash = "'+(n||"")+'";\n        window.WEB_EMBED_ONEKEY_APP_SETTINGS = {\n          themeVariant: "'+l+'",\n          localeVariant: "'+u+'",\n          enableHaptics: '+d.toString()+",\n        };\n      "})}function at(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ot(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?at(Object(n),!0).forEach((function(t){d()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):at(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ct(e){var t=e.onPressFinished,n=e.forwardedRef,a=e.pausedProcessIndex,o=e.onContentLoaded,c=Object(r.useRef)(null),i=Object(r.useCallback)((function(e,n){var r=e.data;"$private"===e.scope&&(null==r?void 0:r.method)===je&&t()}),[t]),s=Object(r.useCallback)((function(e){c.current=e}),[]),l=Object(r.useCallback)((function(){var e,t;null==(e=c.current)||null==(t=e.jsBridge)||t.request({data:{method:be},scope:"$private"})}),[]);Object(r.useImperativeHandle)(n,(function(){return{handleWalletCreated:l}}));var u="/onboarding/auto_typing?pausedProcessIndex="+(null!=a?a:1);return Object(K.jsx)(rt,{isSpinnerLoading:!0,onContentLoaded:o,onWebViewRef:s,customReceiveHandler:i,routePath:u,src:S.a.isDev?"http://192.168.31.96:3008/#"+u:void 0})}var it=Object(r.forwardRef)((function(e,t){var n=Object.assign({},(pe()(e),e));return Object(K.jsx)(ct,ot(ot({},n),{},{forwardedRef:t}))}));it.displayName="ProcessAutoTypingWebViewRef";var st=it;var lt=Object(r.memo)((function(e){var t=e.routeParams,n=e.handleWalletCreated,a=e.shouldStartCreating,o=e.onPressOnboardingFinished,c=e.setIsNavBackDisabled,i=Object(v.a)(),l=(Object(B.a)(),Object(ue.a)().onboardingGoBack),u=t.password,d=t.mnemonic,b=t.withEnableAuthentication,j=t.isHardwareCreating,f=Object(I.b)(),p=null==f?void 0:f.forceVisibleUnfocused,m=Object(r.useCallback)(H()((function*(){try{var e,t=null==j?void 0:j.device,n=null==j?void 0:j.features;return!(!t||!n)&&(yield s.a.serviceAccount.createHWWallet({features:n,connectId:null!=(e=t.connectId)?e:""}),null==p||p(),!0)}catch(u){ce.a.common.error(u);var r=u||{},a=r.className,c=r.message,l=r.data;a===ae.n.OneKeyAlreadyExistWalletError?(setTimeout((function(){var e=(l||{}).walletName;e&&R.a.show({title:i.formatMessage({id:"msg__wallet_already_exist_activated_automatically"},{0:e})},{type:"default"})}),1100),null==o||o()):a===ae.n.OneKeyHardwareError?oe.a.showErrorToast(u):R.a.show({title:c},{type:"default"})}return!1})),[null==j?void 0:j.device,null==j?void 0:j.features,p,o,i]),O=Object(r.useCallback)(H()((function*(){if(!u||!d)return!1;try{yield Object(G.g)(300);var e=performance.now();ce.a.onBoarding.info("startCreatingHDWallet"),ie.b.clear(ie.a.createHDWallet),ie.b.mark({name:ie.a.createHDWallet,title:"onboarding.createHDWallet >> start ==========================="}),yield s.a.serviceAccount.createHDWallet({password:u,mnemonic:d,dispatchActionDelay:300,postCreatedDelay:600}),ie.b.mark({name:ie.a.createHDWallet,title:"onboarding.createHDWallet >> createHDWallet DONE"}),b&&(s.a.dispatch(Object(se.m)(!0)),Object(le.d)(u)),S.a.isDev&&R.a.show({title:i.formatMessage({id:"msg__account_created"})});var t=performance.now();return ie.b.mark({name:ie.a.createHDWallet,title:"onboarding.createHDWallet >> end"}),ce.a.onBoarding.info("startCreatingHDWallet done!",Math.round(t-e)),!0}catch(r){ce.a.common.error(r);var n=r.key;R.a.show({title:i.formatMessage({id:n})},{type:"error"})}return!1})),[i,d,u,b]);return Object(r.useEffect)((function(){H()((function*(){if(a&&p){(j?yield m():yield O())?n():(null==c||c(!1),setTimeout((function(){return l()}),600))}}))()}),[c,p,l,n,O,j,m,a]),null})),ut=Object(r.memo)((function(){var e=Object(q.b)(),t=Object(y.x)().params||{},n=Object(r.useState)(!0),a=re()(n,2),o=a[0],c=a[1];!function(e){var t=e.condition,n=Object(y.u)(),a=Object(r.useCallback)((function(e,t,r){for(var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=a.applyToAllParent,c=void 0!==o&&o,i=n;i&&i[e];){var s;if(i[e](t,r),c)i=null==(s=i)||null==s.getParent?void 0:s.getParent();else i=void 0}}),[n]);Object(r.useEffect)((function(){if(S.a.isNativeAndroid){var e=function(e){t&&(null==e||null==e.preventDefault||e.preventDefault())};return a("addListener","beforeRemove",e),function(){a("removeListener","beforeRemove",e)}}}),[t,n,a]),Object(r.useLayoutEffect)((function(){t&&n.setOptions({gestureEnabled:!1,headerLeft:null})}),[n,t])}({condition:o});var i=Object(r.useRef)(null),s=S.a.isNative&&!S.a.isDev,l=Object(r.useState)(!1),u=re()(l,2),d=u[0],j=u[1];Object(r.useEffect)((function(){var e=setTimeout((function(){return j(!0)}),Object(G.b)({minute:1}));return function(){clearTimeout(e)}}),[]);var f=Object(r.useState)(!s),p=re()(f,2),m=p[0],O=p[1],g=(null!=t&&t.isHardwareCreating,1),x=Object(r.useRef)(),v=Object(r.useCallback)((function(){ce.a.onBoarding.info("Wallet Created Success !!!!"),i.current&&i.current.handleWalletCreated(),clearInterval(x.current),x.current=setInterval((function(){ce.a.onBoarding.info("handleWalletCreated interval recheck"),i&&i.current&&i.current.handleWalletCreated&&i.current.handleWalletCreated()}),3e3)}),[]);Object(r.useEffect)((function(){var e=setTimeout((function(){clearInterval(x.current)}),18e4);return function(){clearInterval(x.current),clearTimeout(e)}}),[]);var _=Object(r.useCallback)(H()((function*(){c(!1),S.a.isExtension,yield e({delay:600})})),[e]),w=Object(r.useMemo)((function(){return s?Object(K.jsx)(h.a,{flex:1,h:"full",w:"full",children:Object(K.jsx)(st,{ref:i,onContentLoaded:function(){return O(!0)},onPressFinished:_,pausedProcessIndex:g})}):null}),[s,_,g]),C=Object(r.useMemo)((function(){return s?null:Object(K.jsx)(et,{ref:i,onPressFinished:_,pausedProcessIndex:g})}),[s,_,g]);return Object(K.jsxs)(W.a,{backButton:!1,showCloseButton:d,fullHeight:!0,children:[Object(K.jsx)(lt,{routeParams:t,handleWalletCreated:v,shouldStartCreating:m,onPressOnboardingFinished:_,setIsNavBackDisabled:c}),s?Object(K.jsx)(b.a,{h:"full",w:"full",children:w}):Object(K.jsx)(h.a,{flex:1,h:"full",w:"full",minH:{base:480,sm:320},justifyContent:"flex-end",children:C})]})})),dt=n(940),bt=n(3778),jt=["onPressSavedPhrase","mnemonic"];function ft(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ft(Object(n),!0).forEach((function(t){d()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ft(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var mt=function(e){var t=e.onPressSavedPhrase,n=e.mnemonic,a=ye()(e,jt),o=Object(v.a)(),c=Object(Oe.a)(),i=Object(r.useCallback)(H()((function*(){null==t||t(),yield Object(G.g)(3e3)})),[t]);return Object(K.jsxs)(h.a,pt(pt({alignSelf:"stretch",flex:1},a),{},{children:[Object(K.jsxs)(x.a,{typography:"Body2",color:"text-subdued",textAlign:"center",mb:4,children:["\u2193 ",o.formatMessage({id:"content__click_below_to_copy"})," \u2193"]}),Object(K.jsx)(h.a,{flex:1,mb:8,children:Object(K.jsx)(bt.a,{mnemonic:n})}),Object(K.jsx)(x.a,{typography:"Body2",color:"text-subdued",textAlign:"center",mb:4,children:o.formatMessage({id:"content__save_phrase_securely"})}),Object(K.jsx)(Qe.a,{type:"primary",size:c?"xl":"base",onPromise:i,children:o.formatMessage({id:"action__i_have_saved_the_phrase"})})]}))},Ot=function(e){var t=e.onPressShowPhraseButton,n=e.onPressSavedPhrase,a=e.mnemonic,o=Object(v.a)(),c=Object(Oe.a)(),i=Object(r.useState)(!1),s=re()(i,2),l=s[0],u=s[1];return Object(K.jsx)(b.a,{flex:{sm:1},mt:"auto",children:l?Object(K.jsx)(z.a,{from:"base",till:"sm",children:Object(K.jsx)(Le.a,{visible:l,initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1,transition:{duration:150}},style:{flex:1,alignSelf:"stretch"},children:Object(K.jsx)(mt,{mnemonic:a,onPressSavedPhrase:n})})}):Object(K.jsxs)(K.Fragment,{children:[Object(K.jsx)(z.a,{from:"base",till:"sm",children:Object(K.jsx)(x.a,{typography:"Body2",mb:4,textAlign:"center",children:o.formatMessage({id:"content__read_information_on_the_left"})})}),Object(K.jsx)(Qe.a,{type:"primary",size:c?"xl":"base",alignSelf:c?"stretch":"auto",onPress:c?t:function(){u(!0)},children:o.formatMessage({id:"action__show_recovery_phrase"})})]})})};Ot.defaultProps={};var gt=Ot,ht=function(e){return"critical"===e?{bgColor:"surface-critical-default",iconColor:"icon-critical"}:"warning"===e?{bgColor:"surface-warning-default",iconColor:"icon-warning"}:{bgColor:"decorative-surface-one",iconColor:"decorative-icon-one"}},xt=function(){var e=Object(v.a)(),t=Object(y.u)(),n=Object(y.x)(),a=n.params.mnemonic,o=Object(r.useCallback)((function(){t.replace(dt.a.ShowRecoveryPhrase,n.params)}),[t,n.params]),c=Object(r.useCallback)((function(){t.replace(dt.a.BehindTheScene,n.params)}),[t,n.params]),i=Object(r.useMemo)((function(){return[{type:"decorative",icon:"LockClosedOutline",para:e.formatMessage({id:"modal__attention_unlock"})},{type:"decorative",icon:"DotsCircleHorizontalOutline",para:e.formatMessage({id:"content__recovery_phrase_restore"})},{type:"warning",icon:"ShieldCheckOutline",para:e.formatMessage({id:"backup__manual_backup_warning_never_ask"})},{type:"critical",icon:"EyeSlashOutline",para:e.formatMessage({id:"modal__attention_shh"})}]}),[e]);return Object(K.jsx)(W.a,{title:e.formatMessage({id:"title__recovery_phrase"}),description:e.formatMessage({id:"title__recovery_phrase_desc"}),secondaryContent:Object(K.jsx)(gt,{mnemonic:a,onPressShowPhraseButton:o,onPressSavedPhrase:c}),fullHeight:!0,children:Object(K.jsx)(h.a,{my:-3,mt:{base:4,sm:0},children:i.map((function(e,t){var n,r;return Object(K.jsxs)(h.a,{flexDir:"row",alignItems:"center",py:3,children:[Object(K.jsx)(h.a,{p:2.5,mr:4,rounded:"full",bgColor:null==(n=ht(e.type))?void 0:n.bgColor,alignSelf:"flex-start",children:Object(K.jsx)(O.a,{name:e.icon,color:null==(r=ht(e.type))?void 0:r.iconColor,size:20})}),Object(K.jsx)(x.a,{flex:1,typography:"Body2",children:e.para})]},t)}))})})},yt=n(3062),vt=n(42),_t=function(){var e=Object(v.a)();return Object(K.jsxs)(K.Fragment,{children:[Object(K.jsx)(z.a,{from:"base",till:"sm",children:Object(K.jsx)(h.a,{p:3,rounded:"full",bgColor:"decorative-surface-one",alignSelf:"flex-start",children:Object(K.jsx)(O.a,{name:"LockClosedOutline",color:"decorative-icon-one"})})}),Object(K.jsx)(x.a,{typography:"Body2",mt:{base:16,sm:8},children:e.formatMessage({id:"content__password_usage"})}),Object(K.jsx)(x.a,{typography:"Body2",mt:4,children:e.formatMessage({id:"content__password_security"})})]})};_t.defaultProps={};var wt=_t;var Ct=Object(r.memo)((function(e){var t=e.password,n=e.withEnableAuthentication,a=e.importedMnemonic,o=Object(y.u)();return Object(r.useEffect)((function(){H()((function*(){if(a)o.replace(dt.a.BehindTheScene,{password:t,mnemonic:a,withEnableAuthentication:n});else{var e=yield s.a.engine.generateMnemonic();yield Object(G.g)(600),o.replace(dt.a.RecoveryPhrase,{password:t,mnemonic:e,withEnableAuthentication:n})}}))()}),[]),Object(K.jsx)(b.a,{h:"full",w:"full",children:Object(K.jsx)(j.b,{size:"lg"})})})),Pt=function(){var e,t,n=Object(v.a)(),a=Object(vt.f)().isPasswordSet,o=Object(y.x)(),c=null==(e=o.params)?void 0:e.mnemonic,i=null==o||null==(t=o.params)?void 0:t.disableAnimation,s=Object(r.useMemo)((function(){return a?n.formatMessage({id:"Verify_Password"}):n.formatMessage({id:"title__set_password"})}),[n,a]),l=Object(r.useMemo)((function(){return a?n.formatMessage({id:"Verify_password_to_continue"}):void 0}),[n,a]);return Object(K.jsx)(W.a,{fullHeight:!0,disableAnimation:i,title:s,subTitle:l,secondaryContent:Object(K.jsx)(wt,{}),children:Object(K.jsx)(yt.b,{isAutoHeight:!0,hideTitle:!0,walletId:null,skipSavePassword:!0,field:yt.a.Wallet,children:function(e,t){var n=t.withEnableAuthentication;return Object(K.jsx)(Ct,{password:e,withEnableAuthentication:n,importedMnemonic:c})}})})},Dt=function(){var e=Object(v.a)(),t=Object(y.u)(),n=Object(y.x)(),a=n.params.mnemonic,o=Object(r.useCallback)((function(){t.replace(dt.a.BehindTheScene,n.params)}),[t,n.params]);return Object(K.jsx)(W.a,{title:e.formatMessage({id:"content__click_below_to_copy"}),description:e.formatMessage({id:"modal__for_your_eyes_only_desc"}),fullHeight:!0,secondaryContent:Object(K.jsx)(mt,{mnemonic:a,onPressSavedPhrase:o})})},At=n(3237),Mt=n(404),St=n(3706),kt=function(e){var t=e.children;return Object(K.jsx)(h.a,{p:"8px",w:{base:"100%",sm:"1/3"},children:t})},Bt=function(){var e,t=Object(v.a)(),n=Object(y.u)(),a=Object(B.a)(),o=Object(y.x)(),c=Object(I.b)(),i=null==c?void 0:c.forceVisibleUnfocused,l=Object(r.useState)(!1),u=re()(l,2),d=u[0],b=u[1],j=null==o||null==(e=o.params)?void 0:e.disableAnimation,f=Object(At.a)(H()((function*(){b(!0);var e=yield s.a.serviceCloudBackup.getBackupStatus();return b(!1),e.hasPreviousBackups}))).result,p=Object(r.useCallback)((function(){n.navigate(dt.a.RecoveryWallet)}),[n]),m=Object(r.useCallback)((function(){n.navigate(dt.a.Migration,{disableAnimation:!1})}),[n]),O=Object(r.useCallback)((function(){null==i||i(),a.navigate(E.g.Modal,{screen:E.e.CreateWallet,params:{screen:E.b.OnekeyLiteRestorePinCodeVerifyModal}})}),[a,i]),g=Object(r.useCallback)((function(){n.navigate(dt.a.KeyTag)}),[n]),x=Object(r.useCallback)((function(){n.navigate(dt.a.RestoreFromCloud)}),[n]);return Object(K.jsx)(W.a,{disableAnimation:j,title:t.formatMessage({id:"action__import_wallet"}),description:t.formatMessage({id:"onboarding__import_wallet_desc"}),children:Object(K.jsxs)(h.a,{m:-2,flexDirection:{base:"column",sm:"row"},flexWrap:"wrap",children:[Object(K.jsx)(kt,{children:Object(K.jsx)(St.d,{title:t.formatMessage({id:"onboarding__import_wallet_with_recovery_phrase"}),onPress:p})}),M.a&&Object(K.jsx)(kt,{children:Object(K.jsx)(St.c,{title:t.formatMessage({id:"onboarding__import_wallet_with_lite"}),onPress:O})}),Object(K.jsx)(kt,{children:Object(K.jsx)(St.a,{title:t.formatMessage({id:"onboarding__import_wallet_with_keytag"}),onPress:g})}),Mt.a&&Object(K.jsx)(kt,{children:Object(K.jsx)(St.b,{title:t.formatMessage({id:"onboarding__import_wallet_with_migrate"}),onPress:m})}),(S.a.isNativeIOS||S.a.isNativeIOSPad)&&Object(K.jsx)(kt,{children:Object(K.jsx)(St.e,{title:t.formatMessage({id:"action__restore_from_icloud"}),onPress:x,isDisabled:!f,isLoading:d})})]})})};Bt.defaultProps={};var Et=Bt,Wt=n(3681),It=n(3130),Rt=n(559),Tt=n(186),Ht=n(558),zt=n(4327),Nt=n.n(zt),Ft=n(4328),Ut=n.n(Ft),Vt=n(4329),Lt=n.n(Vt),Qt=n(4330),qt=n.n(Qt),Gt=n(3498),Jt=n.n(Gt),Kt=n(4331),Xt=n.n(Kt),Yt=n(4332),Zt=n.n(Yt),$t=n(4333),en=n.n($t),tn=n(4334),nn=n.n(tn),rn=function(e){var t=e.visible,n=e.onClose,a=Object(Ht.a)(),o=Object(Oe.a)(),c=Object(v.a)(),i=Object(r.useMemo)((function(){return[{index:"1",desc:o?c.formatMessage({id:"content__native_metamask_tutorials_1"}):c.formatMessage({id:"content__ext_metamask_tutorials_1"}),image:o?nn.a:qt.a,imageHeight:o?"51px":"56px"},{index:"2",desc:c.formatMessage({id:"content__native_metamask_tutorials_2"}),image:o?en.a:Lt.a,imageHeight:o?"107px":"103px"},{index:"3",desc:c.formatMessage({id:"content__native_metamask_tutorials_3"}),image:o?Zt.a:Ut.a,imageHeight:o?"99px":"110px"},{index:"4",desc:c.formatMessage({id:"content__native_metamask_tutorials_4"}),image:o?Xt.a:Nt.a,imageHeight:o?"59px":"66px"},{index:"5",desc:c.formatMessage({id:"content__native_metamask_tutorials_5"})}]}),[c,o]);return Object(K.jsxs)(Le.a,{as:It.a,position:"absolute",top:0,right:0,bottom:0,left:0,visible:t,initial:{opacity:0},animate:{opacity:1,transition:{duration:150}},children:[o?null:Object(K.jsx)(p.a,{top:0,right:0,bottom:0,left:0,bgColor:"backdrop",opacity:.75,onPress:n}),Object(K.jsxs)(Le.a,{visible:t,as:h.a,top:0,right:0,bottom:0,w:"full",maxW:400,pt:16+a.top+"px",bgColor:"background-default",pointerEvents:"auto",initial:{opacity:0,translateX:400},animate:{opacity:1,translateX:0,transition:{duration:150}},children:[Object(K.jsx)(Tt.a,{type:"plain",circle:!0,size:"lg",name:"XMarkOutline",alignSelf:"flex-end",onPress:n,mr:4}),Object(K.jsxs)(Rt.a,{flex:1,px:{base:6,sm:12},children:[Object(K.jsx)(m.a,{source:Jt.a,size:8,rounded:"xl",borderWidth:N.a.hairlineWidth,borderColor:"border-subdued"}),Object(K.jsx)(x.a,{mt:4,mb:8,typography:"DisplayLarge",children:c.formatMessage({id:"content__import_wallet_from_str"},{0:"MetaMask"})}),i.map((function(e,t){return Object(K.jsxs)(h.a,{mb:8,children:[Object(K.jsxs)(x.a,{typography:"Body2",mb:4,children:[e.index,". ",e.desc]}),e.image?Object(K.jsx)(m.a,{w:"full",h:e.imageHeight,source:e.image,resizeMode:"cover"}):null]},t)}))]})]})]})},an=function(e){var t=e.onPressDrawerTrigger,n=Object(v.a)();return Object(K.jsxs)(K.Fragment,{children:[Object(K.jsx)(z.a,{from:"base",till:"sm",children:Object(K.jsx)(h.a,{p:3,rounded:"full",bgColor:"decorative-surface-one",alignSelf:"flex-start",children:Object(K.jsx)(O.a,{name:"DotsCircleHorizontalOutline",color:"decorative-icon-one"})})}),Object(K.jsx)(x.a,{typography:"Body2Strong",mt:{base:16,sm:8},children:n.formatMessage({id:"content__what_is_recovery_phrase"})}),Object(K.jsx)(x.a,{typography:"Body2",color:"text-subdued",mt:2,mb:6,children:n.formatMessage({id:"content__what_is_recovery_phrase_desc"})}),Object(K.jsx)(x.a,{typography:"Body2Strong",children:n.formatMessage({id:"content__safe_to_enter_into_onekey"})}),Object(K.jsx)(x.a,{typography:"Body2",color:"text-subdued",mt:2,mb:6,children:n.formatMessage({id:"content__safe_to_enter_into_onekey_desc"})}),Object(K.jsx)(x.a,{typography:"Body2Strong",children:n.formatMessage({id:"content__where_find_phrase"})}),Object(K.jsx)(p.a,{mx:-2,mt:2,onPress:t,children:function(e){var t=e.isHovered,n=e.isPressed;return Object(K.jsxs)(h.a,{flexDir:"row",py:{base:3,sm:2},px:2,bgColor:n?"surface-pressed":t?"surface-hovered":void 0,rounded:"xl",children:[Object(K.jsx)(m.a,{source:Jt.a,size:5,borderWidth:N.a.hairlineWidth,borderColor:"border-subdued",rounded:"lg"}),Object(K.jsx)(x.a,{flex:1,typography:"Body2Strong",ml:3,children:"MetaMask"}),Object(K.jsx)(O.a,{name:"ChevronRightMini",color:"icon-subdued",size:20})]})}})]})};an.defaultProps={};var on=an,cn=function(){var e,t=Object(v.a)(),n=Object(f.a)("background-default"),a=Object(k.h)((function(e){return e.runtime.onBoardingLoadingBehindModal})),o=Object(r.useState)(!1),c=re()(o,2),i=c[0],s=c[1],l=Object(y.x)(),u=Object(r.useCallback)((function(){s(!0)}),[]),d=null==l||null==(e=l.params)?void 0:e.disableAnimation;return a?Object(K.jsx)(b.a,{bgColor:n,flex:1,height:"full",children:Object(K.jsx)(j.b,{size:"lg"})}):Object(K.jsxs)(K.Fragment,{children:[Object(K.jsx)(W.a,{disableAnimation:d,title:t.formatMessage({id:"onboarding__import_with_phrase"}),secondaryContent:Object(K.jsx)(on,{onPressDrawerTrigger:u}),children:Object(K.jsx)(Wt.a,{})}),Object(K.jsx)(rn,{visible:i,onClose:function(){return s(!1)}})]})};cn.defaultProps={};var sn,ln=cn,un=n(958);!function(e){e[e.Connecting=0]="Connecting",e[e.Success=1]="Success",e[e.Fail=2]="Fail"}(sn||(sn={}));var dn=Object(r.createContext)(null);function bn(e){var t=e.children,n=e.inputValue,a=Object(r.useState)((function(){var e=0;return n&&(null==n?void 0:n.length)>0&&(e=1),Object(un.httpServerEnable)()||(e=1),{inputValue:n,selectRange:e}})),o=re()(a,2),c=o[0],i=o[1],s=Object(r.useMemo)((function(){return{context:c,setContext:i}}),[c]);return Object(K.jsx)(dn.Provider,{value:s,children:t})}function jn(){return Object(r.useContext)(dn)}var fn=n(1112),pn=n(390),mn=n(3053),On=n(1106),gn=n(3108),hn=n(746),xn=n(2118),yn=n(3133),vn=n.n(yn),_n=n(142),wn=n(210),Cn=n(1118),Pn=n(3388),Dn=n(1120),An=n(1128),Mn=n(547),Sn=n(388);function kn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Bn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?kn(Object(n),!0).forEach((function(t){d()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var En=function(e){var t=e.deviceInfo,n=e.confirmPress,a=e.closeOverlay,o=Object(v.a)(),c=Object(Mt.f)(t),i=Object(Mt.f)(Object(Mt.d)()),s=Object(r.useState)(!1),l=re()(s,2),u=l[0],d=l[1],b=Object(r.useCallback)(H()((function*(){(yield null==n?void 0:n(!0))&&a()})),[a,n]),j=Object(r.useCallback)((function(){null==n||n(!1),a()}),[a,n]);return Object(K.jsxs)(Dn.a,{title:o.formatMessage({id:"modal__send_data_request"}),closeOverlay:j,children:[Object(K.jsxs)(h.a,{bgColor:"surface-default",borderRadius:"12px",borderColor:"border-subdued",borderWidth:1,py:"16px",children:[Object(K.jsx)(x.a,{typography:"Body2",color:"text-subdued",ml:"16px",children:o.formatMessage({id:"content__to"})}),Object(K.jsxs)(h.a,{paddingX:"16px",flexDirection:"row",mt:"12px",children:[Object(K.jsx)(O.a,{name:c.logo,size:24,color:"icon-subdued"}),Object(K.jsx)(x.a,{ml:"8px",typography:"Body1Strong",children:c.name})]})]}),Object(K.jsx)(An.a,{w:"full",mt:"24px",isChecked:u,defaultIsChecked:!1,onChange:function(e){d(e)},title:o.formatMessage({id:"modal__send_data_request_checkbox_label"},{to:c.name,from:i.name}),description:o.formatMessage({id:"modal__send_data_request_desc"})}),Object(K.jsxs)(Mn.a,{mt:"24px",space:"12px",w:"full",children:[Object(K.jsx)(Qe.a,{flex:1,size:"xl",type:"basic",onPress:j,children:o.formatMessage({id:"action__reject"})}),Object(K.jsx)(Qe.a,{flex:1,isDisabled:!u,size:"xl",type:"primary",onPromise:b,children:o.formatMessage({id:"action__confirm"})})]})]})};function Wn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function In(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wn(Object(n),!0).forEach((function(t){d()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Rn=Object(r.memo)((function(e){var t=e.qrcode,n=e.refreshQrcode,a=Object(v.a)(),o=s.a.serviceHTTP,c=s.a.serviceMigrate,i=Object(Pn.c)().exportDataRequest,l=Object(y.u)(),u=Object(r.useRef)(!1),d=Object(r.useCallback)((function(){var e=Object(Mt.c)(t);Object(hn.a)(e),R.a.show({title:a.formatMessage({id:"msg__copied"})})}),[a,t]),b=Object(r.useCallback)((function(e){var t,r=e.type,s=e.data;if(r===xn.MigrateNotificationNames.ReceiveDataFromClient){var d=s.postData,b=s.requestId;try{if("string"!==typeof d)throw o.serverRespond({requestId:b,respondData:{success:!1,data:"postData is not string"}}),new Error("postData is not string");var j=JSON.parse(d);if("string"!==typeof(null==j?void 0:j.public)||"string"!==typeof(null==j?void 0:j.private))throw o.serverRespond({requestId:b,respondData:{success:!1,data:"can not fount public/private."}}),new Error("can not fount public/private.");l.navigate(_n.c.Onboarding,{screen:dt.a.MigrationPreview,params:{data:j}}),o.serverRespond({requestId:b,respondData:{success:!0}})}catch(g){}}else if(r===xn.MigrateNotificationNames.RequestDataFromClient){var f=s.requestId,p=s.url,m=new URL(p,"http://example.com").searchParams.get("deviceInfo");if("string"===typeof m&&!1===u.current){var O=JSON.parse(m);u.current=!0,t={deviceInfo:O,confirmPress:function(){var e=H()((function*(e){if(u.current=!1,e){var t=yield i(),n=t.status,r=t.data;if(n===Pn.a.SUCCESS&&s){var l=yield c.publicKey("Client"),d=yield c.encryptDataWithPublicKey(l,JSON.stringify(r));return!1===d?(o.serverRespond({requestId:f,respondData:{success:!1}}),R.a.show({title:""+a.formatMessage({id:"form__failed"})}),!1):(o.serverRespond({requestId:f,respondData:{success:!0,data:d}}),R.a.show({title:"\ud83e\uddd9 "+a.formatMessage({id:"msg__data_sent_to_platform"},{platform:Object(Mt.f)(O).name})}),!0)}return n===Pn.a.EMPTY&&R.a.show({title:a.formatMessage({id:"msg__no_data_available"})}),!1}return o.serverRespond({requestId:f,respondData:{success:!1}}),!0}));return function(t){return e.apply(this,arguments)}}()},Object(Sn.a)((function(e){return Object(K.jsx)(En,Bn(Bn({},t),{},{closeOverlay:e}))}))}}else r===xn.MigrateNotificationNames.UpdateQrcode&&n()}),[i,a,l,o,c,n]);return Object(r.useEffect)((function(){return wn.b.on(wn.a.Migrate,b),function(){wn.b.removeAllListeners(wn.a.Migrate)}}),[b]),Object(K.jsxs)(K.Fragment,{children:[t.length>0?Object(K.jsx)(h.a,{borderRadius:"24px",bgColor:"#FFFFFF",padding:"11px",size:"192px",borderWidth:N.a.hairlineWidth,borderColor:"border-subdued",shadow:"depth.1",children:Object(K.jsx)(gn.a,{value:""+Mt.b+t,size:170,logo:vn.a,logoSize:36,logoMargin:5,logoBackgroundColor:"white"})}):Object(K.jsx)(On.a,{borderRadius:"12px",width:192,height:192}),t.length>0?Object(K.jsxs)(p.a,{onPress:d,flexDirection:"row",mt:"16px",alignItems:"center",children:[Object(K.jsx)(O.a,{name:"LinkMini",size:20,color:"icon-subdued"}),Object(K.jsx)(x.a,{ml:"8px",typography:"Body1Strong",children:t})]}):Object(K.jsx)(mn.a,{shape:"Body1"})]})})),Tn=Object(r.memo)((function(){var e,t,n=Object(v.a)(),a=Object(Pn.b)().connectServer,o=null==(e=jn())?void 0:e.context,c=null==(t=jn())?void 0:t.setContext,i=Object(y.t)(),s=Object(r.useMemo)((function(){var e;return 0===(null==o||null==(e=o.inputValue)?void 0:e.replaceAll(" ","").length)}),[null==o?void 0:o.inputValue]);return Object(K.jsxs)(K.Fragment,{children:[Object(K.jsx)(pn.a,{leftIconName:"LinkSolid",rightCustomElement:Object(K.jsx)(Tt.a,{size:"xl",name:"ViewfinderCircleOutline",type:"plain",onPress:function(){Object(Cn.a)((function(e){e.startsWith(Mt.b)&&c&&c((function(t){return In(In({},t),{},{inputValue:e.replace(Mt.b,"")})}))}))}}),size:"xl",w:"full",type:"text",value:null==o?void 0:o.inputValue,placeholder:"192.168.5.178:2997/1A2B",onChangeText:function(e){c&&c((function(t){return In(In({},t),{},{inputValue:e})}))}}),Object(K.jsx)(Qe.a,{type:"primary",size:"xl",w:"full",isDisabled:s,mt:"16px",onPromise:H()((function*(){o&&(!(yield a(o.inputValue))&&i&&R.a.show({title:n.formatMessage({id:"msg__invalid_link_or_network_error"})},{type:"error"}),c&&c((function(e){return In(In({},e),{},{inputValue:""})})))})),children:n.formatMessage({id:"action__connect"})})]})})),Hn=function(){var e,t,n=Object(v.a)(),a=s.a.serviceHTTP,o=s.a.serviceMigrate,c=null==(e=jn())?void 0:e.context,i=null==(t=jn())?void 0:t.setContext,l=Object(r.useState)(""),u=re()(l,2),d=u[0],j=u[1],f=Object(r.useRef)(""),p=Object(r.useCallback)(H()((function*(){var e="";if(f.current.length>0){var t=yield o.generateRandomNum();e=Object(Mt.c)(f.current)+"/"+t}j(e)})),[o]),m=Object(r.useCallback)(H()((function*(){var e=yield a.startHttpServer(),t=e&&e.length>0;return f.current=t?e:"",t&&(ce.a.migrate.info("startHttpServer",e),yield p()),t})),[p,a]);return Object(r.useEffect)((function(){0===(null==c?void 0:c.selectRange)?m().then((function(e){i&&i((function(t){return In(In({},t),{},{serverStatus:e?sn.Success:sn.Fail})}))})):(o.clearMigrateInfo(),a.stopHttpServer(),j(""))}),[null==c?void 0:c.selectRange,a,o,i,m]),Object(K.jsxs)(K.Fragment,{children:[Object(un.httpServerEnable)()?Object(K.jsx)(b.a,{mb:"16px",children:Object(K.jsx)(fn.a,{enabled:(null==c?void 0:c.serverStatus)===sn.Success,selectedIndex:null==c?void 0:c.selectRange,onChange:function(e){i&&i((function(t){return In(In({},t),{},{selectRange:e})}))},values:[n.formatMessage({id:"content__qr_code"}),n.formatMessage({id:"content__enter_link"})],style:{width:192}})}):null,Object(K.jsx)(b.a,{flex:1,children:0===(null==c?void 0:c.selectRange)?Object(K.jsx)(Rn,{qrcode:d,refreshQrcode:p}):Object(K.jsx)(Tn,{})})]})},zn=["step","description"];function Nn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Fn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Nn(Object(n),!0).forEach((function(t){d()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Nn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Un=function(e){var t=e.step,n=e.description,r=ye()(e,zn);return Object(K.jsxs)(h.a,Fn(Fn({flexDirection:"row"},r),{},{children:[Object(K.jsx)(b.a,{size:"28px",borderRadius:"full",bgColor:"surface-neutral-subdued",mr:"12px",children:Object(K.jsx)(x.a,{typography:"CaptionStrong",color:"text-subdued",children:t})}),Object(K.jsx)(x.a,{py:{base:"4px",md:"2px"},typography:{sm:"Body2",md:"Body1"},flex:1,children:n})]}))},Vn=function(){var e,t=Object(v.a)(),n=null==(e=jn())?void 0:e.context,r=[Object(K.jsx)(x.a,{typography:{sm:"Body2",md:"Body1"},color:0===(null==n?void 0:n.selectRange)&&n.serverStatus===sn.Fail?"text-critical":"text-default",children:t.formatMessage({id:"content__migration_step_1"})}),t.formatMessage({id:"content__migration_step_2"}),0===(null==n?void 0:n.selectRange)?t.formatMessage({id:"content__migration_step_3"},{addOn:Object(K.jsx)(x.a,{typography:{sm:"Body2",md:"Body1"},color:"text-subdued",children:t.formatMessage({id:"content__migration_step_3_add_on"})})}):t.formatMessage({id:"content__migration_step_3_connect_by_link"})];return Object(K.jsxs)(h.a,{children:[r.map((function(e,t){return Object(K.jsx)(Un,{step:t+1,description:e,mt:0===t?void 0:"16px"},t)})),Object(K.jsx)(x.a,{typography:"Body2",mt:"24px",color:"text-disabled",children:t.formatMessage({id:"content__migration_note_encrypted"})}),Object(K.jsx)(x.a,{typography:"Body2",color:"text-disabled",children:t.formatMessage({id:"content__migration_note_hardware_wallet"})})]})},Ln=function(){var e=Object(v.a)(),t=Object(y.x)().params,n=t.scanText,a=t.disableAnimation,o=void 0===a||a,c=Object(y.u)(),i=s.a.serviceHTTP,l=s.a.serviceMigrate;Object(r.useLayoutEffect)((function(){c.setOptions({headerShown:!1})}),[c]);var u=Object(Oe.a)(),d=Object(r.useMemo)((function(){return u?Object(K.jsx)(Hn,{}):Object(K.jsx)(Vn,{})}),[u]),b=Object(r.useMemo)((function(){return u?Object(K.jsx)(Vn,{}):Object(K.jsx)(Hn,{})}),[u]);return Object(r.useEffect)((function(){return l.registerHttpEvents(),function(){i.stopHttpServer(),l.unRegisterHttpEvents()}}),[i,l]),Object(K.jsx)(bn,{inputValue:null!=n?n:"",children:Object(K.jsx)(W.a,{disableAnimation:o,title:e.formatMessage({id:"title__migration"}),description:e.formatMessage({id:"title__migration_desc"}),secondaryContent:b,children:d})})};Ln.defaultProps={};var Qn=Ln,qn=n(752),Gn=n(3247),Jn=n(3146),Kn=n(3299),Xn=function(){var e=Object(v.a)(),t=Object(y.x)().params.data,n=Object(y.u)(),a=s.a.serviceCloudBackup,o=Object(Oe.a)(),c=Object(vt.f)().isPasswordSet,i=Object(Jn.a)().showVerify,l=Object(q.b)(),u=Object(ue.a)().onboardingGoBack,d=Object(Gn.a)().requestBackupPassword,j=Object(r.useState)(!1),f=re()(j,2),p=f[0],m=f[1],g=Object(r.useState)({alreadyOnDevice:{contacts:{},importedAccounts:{},watchingAccounts:{},HDWallets:{}},notOnDevice:{contacts:{},importedAccounts:{},watchingAccounts:{},HDWallets:{}}}),_=re()(g,2),w=_[0],C=_[1],P=Object(r.useCallback)(H()((function*(){R.a.show({title:e.formatMessage({id:"msg__backup_imported"})}),yield l({delay:200})})),[e,l]),D=Object(r.useCallback)((function(){R.a.show({title:e.formatMessage({id:"msg__import_icloud_backup_failed_version"})}),n.goBack()}),[e,n]),A=Object(r.useCallback)(H()((function*(){return new Promise((function(e){c?i((function(n){a.restoreFromPrivateBackup({privateBackupData:t.private,notOnDevice:w.notOnDevice,localPassword:n}).then((function(r){r===qn.a.SUCCESS?P().then((function(){e(!0)})):r===qn.a.WRONG_PASSWORD?d((function(e){return a.restoreFromPrivateBackup({privateBackupData:t.private,notOnDevice:w.notOnDevice,localPassword:n,remotePassword:e})}),H()((function*(){yield P(),e(!0)})),(function(){D(),e(!1)}),(function(){e(!1)})):(D(),e(!1))}))}),(function(){e(!1)})):d((function(e){return a.restoreFromPrivateBackup({privateBackupData:t.private,notOnDevice:w.notOnDevice,localPassword:e,remotePassword:e})}),H()((function*(){yield P(),e(!0)})),D,(function(){e(!1)}))}))})),[w.notOnDevice,c,P,D,d,a,i]);Object(r.useLayoutEffect)((function(){n.setOptions({headerShown:!1})}),[n]),Object(r.useEffect)((function(){a.getBackupDetailsWithRemoteData(JSON.parse(t.public)).then((function(e){C(e),m(Object.values(e.notOnDevice).some((function(e){return Object.keys(e).length>0})))}))}),[a]);var M=Object(r.useMemo)((function(){return Object(K.jsxs)(K.Fragment,{children:[Object(K.jsx)(h.a,{flex:1,flexDirection:"column",children:Object(K.jsx)(Rt.a,{flex:1,mb:"24px",minHeight:"160px",maxHeight:{base:void 0,sm:"320px"},showsVerticalScrollIndicator:!0,children:p?Object(K.jsx)(h.a,{mx:"-48px",my:"-16px",children:Object(K.jsx)(Kn.GroupedBackupDetails,{onDevice:!1,publicBackupData:w.notOnDevice,showTitle:!1})}):Object(K.jsx)(x.a,{typography:"Body1",children:e.formatMessage({id:"empty__migrated_data_already_exists"})})})}),p?Object(K.jsx)(Qe.a,{type:"primary",size:o?"xl":"lg",onPress:o?A:void 0,onPromise:o?void 0:A,children:e.formatMessage({id:"action__import"})}):Object(K.jsx)(Qe.a,{size:o?"xl":"lg",onPress:function(){u()},children:e.formatMessage({id:"action__close"})})]})}),[u,w.notOnDevice,p,A,e,o]),S=Object(r.useMemo)((function(){return o?null:Object(K.jsxs)(h.a,{children:[Object(K.jsx)(b.a,{size:"48px",bgColor:"decorative-surface-two",borderRadius:"9999",children:Object(K.jsx)(O.a,{name:"EllipsisHorizontalCircleOutline",size:24,color:"decorative-icon-two"})}),Object(K.jsx)(x.a,{typography:"Body2",mt:"26px",children:e.formatMessage({id:"content__migration_note_hardware_wallet"})})]})}),[e,o]);return Object(K.jsx)(W.a,{disableAnimation:!0,title:e.formatMessage({id:"action__preview"}),fullHeight:!0,secondaryContent:S,children:M})};Xn.defaultProps={};var Yn=Xn,Zn=function(){return Object(K.jsx)(W.a,{fullHeight:!0,children:Object(K.jsx)(h.a,{mx:-4,flex:1,children:Object(K.jsx)(Kn.default,{onboarding:!0})})})},$n=n(3390),er=function(){var e=Object(v.a)();return Object(K.jsx)(W.a,{title:e.formatMessage({id:"content__previous_backups"}),children:Object(K.jsx)(h.a,{mx:-4,children:Object(K.jsx)($n.default,{})})})},tr=function(){var e,t,n=Object(v.a)(),a=Object(J.a)().addExternalAccount,o=Object(q.b)(),c=Object(y.x)(),i=null==(e=c.params)?void 0:e.disableOnboardingDone,s=null==(t=c.params)?void 0:t.onSuccess,l=Object(B.a)(),u=Object(r.useState)(!1),d=re()(u,2),j=d[0],f=d[1];return Object(K.jsxs)(W.a,{title:n.formatMessage({id:"title__connect_with"}),children:[j&&Object(K.jsx)(b.a,{children:Object(K.jsx)(x.a,{typography:{sm:"Body1",md:"Body1"},children:n.formatMessage({id:"content__no_other_wallets_installed"})})}),Object(K.jsx)(h.a,{flexDir:"row",flexWrap:"wrap",m:"-4px",minH:"10px",children:Object(K.jsx)(Q.b,{onConnectResult:function(){var e=H()((function*(e){yield a(e),i?null==l||null==l.goBack||l.goBack():(yield o(),yield Object(G.g)(600),R.a.show({title:n.formatMessage({id:"msg__account_imported"})})),s&&s()}));return function(t){return e.apply(this,arguments)}}(),walletListsCallback:function(e){f(!!S.a.isNativeIOS&&0===e.length)}})}),Object(K.jsx)(z.a,{till:"sm",children:Object(K.jsxs)(K.Fragment,{children:[Object(K.jsx)(x.a,{mt:8,mb:3,typography:"Subheading",color:"text-subdued",children:n.formatMessage({id:"content__institutional_wallets"})}),Object(K.jsx)(h.a,{flexDir:"row",flexWrap:"wrap",m:"-4px",children:Object(K.jsx)(Q.b,{onConnectResult:function(){var e=H()((function*(e){yield a(e),null==l||null==l.goBack||l.goBack()}));return function(t){return e.apply(this,arguments)}}(),isInstitutionWallet:!0})})]})})]})};tr.displayName="ThirdPartyWallet";var nr=tr,rr=n(387),ar=n(457),or=n(4335),cr=n.n(or),ir=n(255),sr=n(4336),lr=n.n(sr),ur=n(4337),dr=n.n(ur),br=n(3685),jr=n.n(br),fr=n(3686);function pr(e){var t=e.onPress,n=Object(v.a)(),a=Object(J.a)().addExternalAccount,o=Object(q.b)(),c=Object(r.useCallback)(function(){var e=H()((function*(e){yield a(e),yield o(),yield Object(G.g)(600),R.a.show({title:n.formatMessage({id:"msg__account_imported"})})}));return function(t){return e.apply(this,arguments)}}(),[a,n,o]),i=Object(fr.a)({onConnectResult:c}).connectExternalWallet,s=Object(r.useCallback)(H()((function*(){try{yield i({})}catch(e){ce.a.common.error(e)}})),[i]),l=[Jt.a,dr.a,lr.a,jr.a];return Object(K.jsxs)(p.a,{flexDirection:"row",alignSelf:"center",flexWrap:"wrap",justifyContent:"center",alignItems:"center",p:"8px",mt:"24px",borderRadius:"12px",_hover:{bgColor:"surface-hovered"},_pressed:{bgColor:"surface-pressed"},onPress:function(){S.a.isNativeAndroid?s():t()},children:[Object(K.jsx)(x.a,{typography:{sm:"Body2Strong",md:"DisplaySmall"},color:"text-default",children:n.formatMessage({id:"action__connect_3rd_party_wallet"})}),Object(K.jsxs)(h.a,{flexDirection:"row",alignItems:"center",mx:1.5,children:[l.map((function(e,t){return Object(K.jsx)(m.a,{source:e,size:4,mx:.5,rounded:"sm",borderWidth:N.a.hairlineWidth,borderColor:"border-subdued"},t)})),!S.a.isExtension&&Object(K.jsx)(h.a,{bg:"surface-neutral-default",borderRadius:"6px",mx:.5,children:Object(K.jsx)(O.a,{name:"EllipsisHorizontalMini",size:16,color:"icon-default"})})]}),Object(K.jsx)(O.a,{name:"ChevronRightMini",size:20,color:"icon-subdued"})]})}var mr=["icon","label","description","onPress","isDisabled","children"];function Or(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function gr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Or(Object(n),!0).forEach((function(t){d()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Or(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var hr=function(e){var t=e.icon,n=e.label,r=e.description,a=e.onPress,o=e.isDisabled,c=e.children,i=ye()(e,mr),s=Object(Oe.a)();return Object(K.jsxs)(p.a,gr(gr({flex:{sm:1},flexDir:{base:"row",sm:"column"},mx:2,px:{base:3,sm:6},py:{base:4,sm:6},bgColor:"action-secondary-default",_hover:{bgColor:"action-secondary-hovered"},_pressed:{bgColor:"action-secondary-pressed"},borderWidth:N.a.hairlineWidth,borderColor:"border-default",rounded:"xl",onPress:a,disabled:o},i),{},{children:[Object(K.jsx)(h.a,{mr:3,children:Object(K.jsx)(O.a,{size:s?24:28,name:t,color:o?"icon-disabled":"interactive-default"})}),Object(K.jsx)(x.a,{flex:{sm:void 0,base:1},mt:{sm:6},typography:{sm:"Body1Strong",md:"DisplayMedium"},color:o?"text-disabled":"text-default",children:n}),Object(K.jsx)(z.a,{till:"sm",children:Object(K.jsx)(x.a,{flex:1,mt:{sm:2},typography:{sm:"Body2",md:"Body2"},color:o?"text-disabled":"text-subdued",children:r})}),c,Object(K.jsx)(z.a,{from:"sm",children:Object(K.jsx)(h.a,{py:.5,children:Object(K.jsx)(O.a,{name:"ChevronRightMini",size:20,color:o?"icon-disabled":"icon-subdued"})})})]}))},xr=n(561),yr=function(){var e=Object(v.a)(),t=Object(Ht.a)(),n=Object(k.j)({path:"articles/360002014776"}),a=Object(k.j)({path:"articles/360002003315"}),o=Object(r.useCallback)((function(){Object(xr.b)(n,e.formatMessage({id:"form__user_agreement"}))}),[e,n]),c=Object(r.useCallback)((function(){Object(xr.b)(a,e.formatMessage({id:"form__privacy_policy"}))}),[e,a]);return Object(K.jsx)(b.a,{position:"absolute",bottom:{base:t.bottom+"px",sm:8},w:"full",pb:"16px",bgColor:"background-default",children:Object(K.jsx)(x.a,{maxW:{base:"300px",sm:"auto"},mx:"auto",textAlign:"center",color:"text-subdued",typography:"Caption",children:e.formatMessage({id:"content__agree_to_user_agreement_and_privacy_policy"},{a:function(e){return Object(K.jsx)(x.a,{color:"text-subdued",onPress:o,typography:"CaptionUnderline",children:e})},b:function(e){return Object(K.jsx)(x.a,{color:"text-subdued",onPress:c,typography:"CaptionUnderline",children:e})}})})})},vr=function(){var e,t=Object(y.u)();Object(k.p)();var n=Object(y.x)(),a=Object(r.useState)(!(null==n||null==(e=n.params)||!e.disableAnimation)),o=re()(a,2),c=o[0],i=o[1],l=Object(r.useCallback)((function(){var e;return i(!(null==n||null==(e=n.params)||!e.disableAnimation))}),[n]),u=Object(I.b)(),d=null==u?void 0:u.forceVisibleUnfocused;Object(r.useEffect)((function(){H()((function*(){if(S.a.isExtensionUiPopup||S.a.isExtensionUiStandaloneWindow){if(yield s.a.serviceApp.isResettingApp())return;s.a.serviceApp.openExtensionExpandTab({routes:[E.g.Onboarding,dt.a.Welcome],params:{}}),setTimeout((function(){window.close()}),200)}}))()}),[]),Object(r.useEffect)((function(){S.a.isNative&&wn.b.emit(wn.a.ChainWebEmbedDisabled)}),[]);var b=Object(v.a)(),j=Object(ar.a)().screenHeight<=667,f=Object(r.useCallback)((function(){l(),s.a.dispatch(Object(ir.c)(!1)),t.navigate(dt.a.SetPassword)}),[t,l]),p=Object(r.useCallback)((function(){l(),s.a.dispatch(Object(ir.c)(!1)),t.navigate(dt.a.ImportWallet)}),[t,l]),g=Object(r.useCallback)((function(){i(!0),null==d||d(),s.a.dispatch(Object(ir.c)(!1)),c?t.navigate(E.g.Modal,{screen:E.e.CreateWallet,params:{screen:E.b.ConnectHardwareModal}}):setTimeout((function(){t.navigate(E.g.Modal,{screen:E.e.CreateWallet,params:{screen:E.b.ConnectHardwareModal}})}),100)}),[d,t,c]),_=Object(r.useCallback)((function(){l(),s.a.dispatch(Object(ir.c)(!1)),setTimeout((function(){return t.navigate(dt.a.ThirdPartyWallet)}))}),[t,l]);return Object(K.jsxs)(K.Fragment,{children:[Object(K.jsxs)(W.a,{showCloseButton:!0,backButton:!1,pt:{base:j?8:20,sm:0},scaleFade:!0,disableAnimation:c,children:[Object(K.jsx)(O.a,{name:"BrandLogoIllus",size:48}),Object(K.jsxs)(x.a,{typography:{sm:"DisplayXLarge",md:"Display2XLarge"},mt:6,flexGrow:1,children:[b.formatMessage({id:"onboarding__landing_welcome_title"}),"\n",Object(K.jsx)(x.a,{color:"text-subdued",children:b.formatMessage({id:"onboarding__landing_welcome_desc"})})]}),Object(K.jsx)(h.a,{flexDir:{sm:"row"},flexWrap:{sm:"wrap"},mt:{base:j?8:16,sm:20},mx:-2,children:Object(K.jsxs)(h.a,{flexDirection:{sm:"row"},w:{sm:"100%"},children:[Object(K.jsx)(hr,{icon:"PlusCircleOutline",label:b.formatMessage({id:"action__create_wallet"}),description:b.formatMessage({id:"content__create_wallet_desc"}),roundedBottom:{base:0,sm:"xl"},onPress:f}),Object(K.jsx)(hr,{icon:"ArrowDownCircleOutline",label:b.formatMessage({id:"action__import_wallet"}),description:b.formatMessage({id:"content__onboarding_import_wallet_desc"}),mt:"-1px",mb:{base:6,sm:0},roundedTop:{base:0,sm:"xl"},onPress:p}),Object(K.jsx)(hr,{icon:"UsbCableOutline",label:b.formatMessage({id:"action__connect_hardware_wallet"}),description:b.formatMessage({id:"content__conenct_hardware_wallet_desc"}),onPress:g,overflow:"hidden",children:Object(K.jsx)(z.a,{till:"sm",children:Object(K.jsx)(h.a,{position:"absolute",zIndex:-1,right:"0",top:"0",children:Object(K.jsx)(m.a,{source:cr.a,w:"256px",h:"207px",opacity:.75})})})})]})}),Object(K.jsx)(z.a,{till:"sm",children:Object(K.jsxs)(h.a,{flexDirection:"row",alignItems:"center",mt:"24px",mb:"-12px",children:[Object(K.jsx)(rr.a,{flex:1}),Object(K.jsx)(x.a,{mx:"14px",typography:"Subheading",color:"text-disabled",children:b.formatMessage({id:"content__or_lowercase"})}),Object(K.jsx)(rr.a,{flex:1})]})}),Object(K.jsx)(pr,{onPress:_})]}),Object(K.jsx)(yr,{})]})},_r=[{name:dt.a.Welcome,component:vr},{name:dt.a.ConnectWallet,component:te},{name:dt.a.ConnectHardwareModal,component:l.a},{name:dt.a.ThirdPartyWallet,component:nr},{name:dt.a.ImportWallet,component:Et},{name:dt.a.RecoveryWallet,component:ln},{name:dt.a.SetPassword,component:Pt},{name:dt.a.RecoveryPhrase,component:xt},{name:dt.a.ShowRecoveryPhrase,component:Dt},{name:dt.a.BehindTheScene,component:ut},{name:dt.a.RestoreFromCloud,component:er},{name:dt.a.CloudBackupDetails,component:Zn},{name:dt.a.KeyTag,component:i.a},{name:dt.a.Migration,component:Qn},{name:dt.a.MigrationPreview,component:Yn}],wr=Object(o.a)();function Cr(){var e=Object(r.useMemo)((function(){return _r.map((function(e){return Object(K.jsx)(wr.Screen,{name:e.name,component:e.component},e.name)}))}),[]);return Object(r.useEffect)((function(){return s.a.serviceOnboarding.checkOnboardingStatus(),function(){s.a.serviceOnboarding.checkOnboardingStatus()}}),[]),Object(K.jsx)(c.a,{children:Object(K.jsx)(wr.Navigator,{screenOptions:{headerShown:!1},children:Object(K.jsx)(wr.Group,{children:e})})})}},3086:function(e,t,n){"use strict";var r=n(3153);n.d(t,"a",(function(){return r.a}))},3121:function(e,t,n){"use strict";var r=n(32),a=n(559),o=n(558),c=n(0),i=function(e){var t=e.children,n=e.footer,i=Object(o.a)();return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(a.a,{alignSelf:"stretch",flex:1,px:4,py:{base:4,sm:8},_contentContainerStyle:{w:"full",maxW:800,mx:"auto"},children:t}),n?Object(c.jsx)(r.a,{mx:4,py:4,mb:i.bottom+"px",children:n}):null]})};i.defaultProps={},t.a=i},3153:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var r=n(10),a=n.n(r),o=n(16),c=n.n(o),i=n(1),s=n(248),l=n(254),u=n(249),d=n(207);var b=n(556),j=n(652),f=n(24),p=["children"];function m(e){var t=e.children,n=c()(e,p),r=Object(s.a)("Hidden",n,{},{ignoreProps:["only","platform"]}),o=r.from,i=r.till,m=r.only,O=r.platform,g=r.colorMode,h=Object(l.a)().breakpoints,x=Object(j.b)(),y=function(e){var t,n=null===(t=Object(u.a)())||void 0===t?void 0:t.width,r=Object(l.a)();if(Object(d.k)(e,r.breakpoints)){var a=Object(d.g)(r.breakpoints,n);return Object(d.f)(e,r.breakpoints,a)}return e}(Object.keys(h).reduce((function(e,t){return e[t]=t,e}),{})),v=Object(b.a)("breakpoints",[y]),_=a()(v,1)[0],w=Object(b.a)("breakpoints",[o]),C=a()(w,1)[0],P=Object(b.a)("breakpoints",[i]),D=a()(P,1)[0];return o||i||m||g||O?o&&i&&_>=C&&_<D||o&&!i&&_>=C||i&&!o&&_<D||Array.isArray(m)&&m.includes(y)||m===y||Array.isArray(O)&&O.includes(f.a.OS)||O===f.a.OS||g===x.colorMode?null:t:null}Object(i.memo)(m)},3189:function(e,t,n){"use strict";var r=n(2),a=n.n(r),o=n(32),c=n(79),i=n(70),s=n(85),l=n(16),u=n.n(l),d=n(1),b=n(3065),j=n(0),f=["backupTime","numOfHDWallets","numOfImportedAccounts","numOfWatchingAccounts","numOfContacts","size"];function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.a=function(e){var t=e.backupTime,n=e.numOfHDWallets,r=e.numOfImportedAccounts,a=e.numOfWatchingAccounts,l=e.numOfContacts,p=e.size,O=u()(e,f),g=Object(s.a)(),h=Object(b.a)(),x=Object(d.useMemo)((function(){return[{iconName:"WalletOutline",count:n},{iconName:"InboxArrowDownOutline",count:r},{iconName:"EyeOutline",count:a},{iconName:"BookOpenOutline",count:l}]}),[l,n,r,a]);return Object(j.jsxs)(o.a,m(m({alignItems:"heading"===p&&g?"center":void 0},O),{},{children:[Object(j.jsx)(i.a,{typography:"heading"===p?"PageHeading":"Body1Strong",children:h.format(new Date(t),"MMM d, yyyy, HH:mm")}),Object(j.jsx)(o.a,{flexDirection:"row",mt:"heading"===p?3:1,mx:-3,flexWrap:"wrap",children:x.map((function(e,t){return Object(j.jsxs)(o.a,{flexDirection:"row",mx:3,children:[Object(j.jsx)(c.a,{name:e.iconName,size:20,color:"icon-subdued"}),Object(j.jsx)(i.a,{typography:"Body2",color:"text-subdued",pl:2,children:e.count})]},t)}))})]}))}},3198:function(e,t,n){"use strict";n.r(t),n.d(t,"ImportBackupPasswordRoutes",(function(){return r}));var r,a=n(85),o=n(283),c=n(747),i=n(98),s=n(200),l=n(41),u=n(32),d=n(79),b=n(3),j=n.n(b),f=n(745),p=n(10),m=n.n(p),O=n(1),g=n(52),h=n(508),x=n(176),y=n(752),v=n(0),_=function(){var e=Object(h.a)(),t=Object(g.x)().params,n=t.withPassword,r=t.onSuccess,a=t.onError,b=t.onCancel,p=Object(O.useState)(""),_=m()(p,2),w=_[0],C=_[1],P=Object(f.a)({mode:"onChange",defaultValues:{password:""}}),D=P.control,A=P.handleSubmit,M=P.formState.isValid,S=P.watch,k=Object(x.i)(S("password"),200);Object(O.useEffect)((function(){C("")}),[k]);var B=Object(O.useCallback)(function(){var t=j()((function*(t){var o=yield n(t.password);o===y.a.SUCCESS?r():o===y.a.WRONG_PASSWORD?C(e.formatMessage({id:"msg__wrong_password"})):a()}));return function(e){return t.apply(this,arguments)}}(),[e,n,r,a]);return Object(v.jsx)(o.b,{footer:null,onModalClose:function(){null==b||b()},children:Object(v.jsxs)(c.a,{px:{base:4,md:0},alignItems:"center",children:[Object(v.jsx)(u.a,{mb:"16px",p:"12px",borderRadius:"full",bgColor:"decorative-surface-one",children:Object(v.jsx)(d.a,{name:"LockClosedOutline",color:"decorative-icon-one"})}),Object(v.jsx)(l.h.DisplayLarge,{textAlign:"center",mb:2,children:e.formatMessage({id:"modal__import_backup"})}),Object(v.jsx)(l.h.Body1,{textAlign:"center",color:"text-subdued",children:e.formatMessage({id:"modal__import_backup_desc"})}),Object(v.jsxs)(s.a,{mt:"8",children:[Object(v.jsx)(s.a.Item,{name:"password",defaultValue:"",control:D,rules:{required:e.formatMessage({id:"form__field_is_required"}),minLength:{value:8,message:e.formatMessage({id:"msg__password_validation"})},maxLength:{value:128,message:e.formatMessage({id:"msg__password_validation"})}},children:Object(v.jsx)(s.a.PasswordInput,{autoFocus:!0})}),w?Object(v.jsx)(s.a.FormErrorMessage,{message:w}):null,Object(v.jsx)(i.a,{type:"primary",size:"xl",onPromise:A(B),isDisabled:!M,children:e.formatMessage({id:"action__unlock",defaultMessage:"Unlock"})})]})]})})},w=n(456);!function(e){e.ImportBackupPassword="ImportBackupPassword"}(r||(r={}));var C=Object(w.a)(),P=[{name:r.ImportBackupPassword,component:_}];t.default=function(){var e=Object(a.a)();return Object(v.jsx)(C.Navigator,{screenOptions:{headerShown:!1,animationEnabled:!!e},children:P.map((function(e){return Object(v.jsx)(C.Screen,{name:e.name,component:e.component},e.name)}))})}},3206:function(e,t,n){"use strict";var r=n(110),a=n(79),o=n(0);t.a=function(e){var t=e.enabled,n=e.size;return Object(o.jsx)(r.a,{rounded:"full",size:"lg"===n?"56px":"48px",bgColor:"surface-"+(t?"success":"warning")+"-subdued",children:Object(o.jsx)(a.a,{name:"CloudOutline",size:24,color:"icon-"+(t?"success":"warning")})})}},3247:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(3198),a=n(142),o=n(177);function c(){var e=Object(o.a)();return{requestBackupPassword:function(t,n,o,c){e.navigate(a.c.Modal,{screen:a.b.ImportBackupPassword,params:{screen:r.ImportBackupPasswordRoutes.ImportBackupPassword,params:{withPassword:t,onSuccess:n,onError:o,onCancel:c}}})}}}},3299:function(e,t,n){"use strict";n.r(t),n.d(t,"GroupedBackupDetails",(function(){return L}));var r=n(326),a=n(285),o=n(163),c=n(3),i=n.n(c),s=n(85),l=n(98),u=n(16),d=n.n(u),b=n(2),j=n.n(b),f=n(10),p=n.n(f),m=n(79),O=n(32),g=n(110),h=n(70),x=n(1),y=n(52),v=n(477),_=n.n(v),w=n(508),C=n(25),P=n(752),D=n(43),A=n(176),M=n(42),S=n(3247),k=n(3146),B=n(3081),E=n(142),W=n(388),I=n(3206),R=n(3189),T=n(3121),H=n(0),z=["size","ready","onImport","onDelete"];function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach((function(t){j()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var U=function(e){var t,n=e.name,r=e.avatar,a=e.accountUUIDs,o=Object(w.a)();return Object(H.jsxs)(O.a,{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",py:1,children:[Object(H.jsx)(g.a,{rounded:"full",size:"8",bgColor:null!=(t=null==r?void 0:r.bgColor)?t:"surface-neutral-default",children:null!=r&&r.emoji?Object(H.jsx)(h.a,{typography:"DisplayMedium",children:r.emoji}):void 0}),Object(H.jsx)(h.a,{px:"4",typography:"Body2Strong",flex:"1",isTruncated:!0,children:n}),Object(H.jsx)(h.a,{typography:"Body2",color:"text-subdued",children:o.formatMessage({id:"form__str_accounts"},{count:a.length})})]})},V=function(e){var t=e.category,n=e.name,r=e.address,a="EyeOutline";return"contact"===t?a="BookOpenOutline":"importedAccount"===t&&(a="InboxArrowDownOutline"),Object(H.jsxs)(O.a,{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",py:1,children:[Object(H.jsx)(g.a,{rounded:"full",size:"8",bgColor:"surface-neutral-default",children:Object(H.jsx)(m.a,{name:a,size:20,color:"icon-default"})}),Object(H.jsx)(h.a,{px:"4",typography:"Body2Strong",flex:"1",isTruncated:!0,children:n}),Object(H.jsx)(h.a,{typography:"Body2",color:"text-subdued",children:r})]})},L=function(e){var t=e.onDevice,n=e.showTitle,r=void 0===n||n,a=e.publicBackupData,o=Object(w.a)(),c=Object.entries(a.HDWallets).map((function(e){var t=p()(e,2);return F({uuid:t[0]},t[1])})).sort((function(e,t){return _()({insensitive:!0})(e.name,t.name)})),i=Object.entries(a.importedAccounts).map((function(e){var t=p()(e,2);return F({uuid:t[0]},t[1])})).sort((function(e,t){return _()({insensitive:!0})(e.name,t.name)})),s=Object.entries(a.watchingAccounts).map((function(e){var t=p()(e,2);return F({uuid:t[0]},t[1])})).sort((function(e,t){return _()({insensitive:!0})(e.name,t.name)})),l=Object.entries(a.contacts).map((function(e){var t=p()(e,2);return F({uuid:t[0]},t[1])})).sort((function(e,t){return _()({insensitive:!0})(e.name,t.name)}));return Object(H.jsxs)(O.a,{my:4,mx:12,children:[r&&Object(H.jsx)(h.a,{typography:"Heading",pb:"4",children:o.formatMessage({id:t?"content__active_on_this_device":"content__not_on_this_device"})}),c.map((function(e){var t=e.uuid,n=e.name,r=e.avatar,a=e.accountUUIDs;return Object(H.jsx)(U,{name:n,avatar:r,accountUUIDs:a},t)})),i.map((function(e){var t=e.uuid,n=e.name,r=e.address;return Object(H.jsx)(V,{category:"importedAccount",name:n,address:r},t)})),s.map((function(e){var t=e.uuid,n=e.name,r=e.address;return Object(H.jsx)(V,{category:"watchingAccount",name:n,address:r},t)})),l.map((function(e){var t=e.uuid,n=e.name,r=e.address;return Object(H.jsx)(V,{category:"contact",name:n,address:r},t)}))]})},Q=function(e){var t=e.size,n=e.ready,r=e.onImport,a=e.onDelete,o=d()(e,z),c=Object(w.a)();return Object(H.jsxs)(O.a,F(F({flexDirection:"row"},o),{},{children:["undefined"===typeof r||n?void 0:Object(H.jsx)(l.a,{onPress:r,type:"basic",size:t,flexGrow:{base:1,sm:0},children:c.formatMessage({id:"action__import"})}),"undefined"===typeof a||n?void 0:Object(H.jsx)(l.a,{onPress:a,type:"destructive",size:t,ml:4,flexGrow:{base:1,sm:0},children:c.formatMessage({id:"action__delete"})})]}))};t.default=function(e){var t=e.onboarding,n=void 0!==t&&t,c=Object(w.a)(),l=Object(s.a)(),u=Object(A.o)(),d=Object(y.x)(),b=Object(M.f)().isPasswordSet,j=D.a.serviceCloudBackup,f=Object(k.a)().showVerify,m=Object(S.a)().requestBackupPassword,g=Object(B.b)();Object(x.useLayoutEffect)((function(){var e=c.formatMessage({id:"title__backup_details"});u.setOptions({title:e})}),[u,c]);var h=d.params,v=h.backupUUID,_=h.backupTime,z=h.numOfHDWallets,N=h.numOfImportedAccounts,F=h.numOfWatchingAccounts,U=h.numOfContacts,V=Object(x.useState)(!0),q=p()(V,2),G=q[0],J=q[1],K=Object(x.useState)(!1),X=p()(K,2),Y=X[0],Z=X[1],$=Object(x.useState)({alreadyOnDevice:{contacts:{},importedAccounts:{},watchingAccounts:{},HDWallets:{}},notOnDevice:{contacts:{},importedAccounts:{},watchingAccounts:{},HDWallets:{}}}),ee=p()($,2),te=ee[0],ne=ee[1],re=Object(x.useState)(!1),ae=p()(re,2),oe=ae[0],ce=ae[1],ie=Object(x.useState)(!1),se=p()(ie,2),le=se[0],ue=se[1];Object(x.useEffect)((function(){j.getBackupDetails(v).then((function(e){ne(e),ce(Object.values(e.alreadyOnDevice).some((function(e){return Object.keys(e).length>0}))),ue(Object.values(e.notOnDevice).some((function(e){return Object.keys(e).length>0}))),J(!1)}))}),[J,j,v]);var de=Object(x.useCallback)(i()((function*(){o.a.show({title:c.formatMessage({id:"msg__backup_imported"})}),n?yield g({delay:200}):u.navigate(E.a.InitialTab)})),[c,n,g,u]),be=Object(x.useCallback)((function(){o.a.show({title:c.formatMessage({id:"msg__import_icloud_backup_failed_version"})}),u.goBack()}),[c,u]),je=Object(x.useCallback)((function(){b?f((function(e){j.restoreFromBackup({backupUUID:v,notOnDevice:te.notOnDevice,localPassword:e}).then((function(t){t===P.a.SUCCESS?de():t===P.a.WRONG_PASSWORD?m((function(t){return j.restoreFromBackup({backupUUID:v,notOnDevice:te.notOnDevice,localPassword:e,remotePassword:t})}),de,be):be()}))}),(function(){})):m((function(e){return j.restoreFromBackup({backupUUID:v,notOnDevice:te.notOnDevice,localPassword:e,remotePassword:e})}),de,be)}),[b,f,de,be,m,j,v,te]),fe=Object(x.useCallback)((function(){Object(W.a)((function(e){return Object(H.jsx)(a.a,{visible:!0,onClose:e,footerButtonProps:{primaryActionTranslationId:"action__delete",secondaryActionTranslationId:"action__cancel",primaryActionProps:{type:"destructive"},onPrimaryActionPress:function(){var t=i()((function*(){Y||(Z(!0),yield j.removeBackup(v),Z(!1),e(),u.pop(2))}));return function(){return t.apply(this,arguments)}}()},contentProps:{iconType:"danger",title:c.formatMessage({id:"dialog__delete_backup"}),content:c.formatMessage({id:"dialog__delete_backup_desc"})}})}))}),[v,Y,c,u,j]);return Object(H.jsxs)(T.a,{footer:l?Object(H.jsx)(Q,{ready:G,onImport:le?je:void 0,onDelete:n?void 0:fe,size:"xl",position:"absolute",bottom:0}):void 0,children:[Object(H.jsxs)(O.a,{flexDirection:l?"column":"row",alignItems:"center",children:[Object(H.jsx)(O.a,{mb:{base:6,sm:0},mr:{sm:6},children:Object(H.jsx)(I.a,{size:"lg",enabled:!0})}),Object(H.jsx)(R.a,{backupTime:_,numOfHDWallets:z,numOfImportedAccounts:N,numOfWatchingAccounts:F,numOfContacts:U,size:"heading"}),l?void 0:Object(H.jsx)(Q,{ready:G,onImport:le?je:void 0,onDelete:n?void 0:fe,size:"base",ml:"auto"})]}),Object(H.jsx)(O.a,{borderBottomWidth:C.a.hairlineWidth,borderBottomColor:"divider",mt:{base:6,sm:8},mb:{base:2,sm:4}}),G?Object(H.jsx)(r.b,{size:"lg"}):Object(H.jsxs)(O.a,{flexDirection:l?"column":"row",mx:-12,children:[oe?Object(H.jsx)(L,{onDevice:!0,publicBackupData:te.alreadyOnDevice}):void 0,le?Object(H.jsx)(L,{onDevice:!1,publicBackupData:te.notOnDevice}):void 0]})]})}},3388:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return p})),n.d(t,"b",(function(){return m}));var r,a=n(3),o=n.n(a),c=n(460),i=n.n(c),s=n(10),l=n.n(s),u=n(1),d=n(43),b=n(3062),j=n(3146),f=n(3389);function p(){var e=Object(j.a)().showVerify,t=d.a.serviceCloudBackup,n=Object(u.useCallback)(function(){var e=o()((function*(e){var n=yield t.getDataForBackup(e);return{status:r.SUCCESS,data:n}}));return function(t){return e.apply(this,arguments)}}(),[t]);return{exportDataRequest:Object(u.useCallback)(o()((function*(){return new Promise((function(a){t.getDataForBackup("").then((function(t){!function(e){var t=!0;return Object.entries(e).forEach((function(e){var n=l()(e,2),r=(n[0],n[1]);i()(r)||(t=!1)})),t}(JSON.parse(t.public))?e((function(e){n(e).then((function(e){a(e)}))}),(function(){a({status:r.CANCEL})}),null,b.a.Secret):a({status:r.EMPTY})}))}))})),[n,t,e])}}function m(){var e=d.a.serviceMigrate;return{connectServer:Object(u.useCallback)(function(){var t=o()((function*(t){var n=yield e.connectServer(t);return!!n&&(Object(f.a)({serverInfo:n,serverAddress:t}),!0)}));return function(e){return t.apply(this,arguments)}}(),[e])}}!function(e){e.SUCCESS="success",e.EMPTY="empty",e.CANCEL="cancel"}(r||(r={}))},3389:function(e,t,n){"use strict";n.d(t,"a",(function(){return N}));var r,a=n(2),o=n.n(a),c=n(1120),i=n(98),s=n(646),l=n(110),u=n(186),d=n(1109),b=n(79),j=n(743),f=n(32),p=n(70),m=n(326),O=n(163),g=n(3),h=n.n(g),x=n(460),y=n.n(x),v=n(10),_=n.n(v),w=n(1),C=n(52),P=n(4420),D=n(508),A=n(25),M=n(142),S=n(43),k=n(388),B=n(940),E=n(404),W=n(3388),I=n(0);function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}!function(e){e[e.Success=0]="Success",e[e.Fail=1]="Fail",e[e.Connecting=2]="Connecting"}(r||(r={}));var H=Object(E.d)(),z=function(e){var t=e.serverAddress,n=e.serverInfo,a=e.closeOverlay,o=S.a.serviceMigrate,g=Object(w.useRef)(n),x=Object(w.useState)((function(){return n?r.Success:r.Connecting})),v=_()(x,2),k=v[0],R=v[1],T=Object(w.useState)(H),z=_()(T,2),N=z[0],F=z[1],U=Object(w.useState)(g.current),V=_()(U,2),L=V[0],Q=V[1],q=Object(w.useMemo)((function(){return Object(E.f)(N)}),[N]),G=Object(w.useMemo)((function(){if(L)return Object(E.f)(L)}),[L]),J=Object(w.useState)(!0),K=_()(J,2),X=K[0],Y=K[1],Z=Object(D.a)(),$=Object(W.c)().exportDataRequest,ee=Object(C.u)();Object(w.useEffect)((function(){k===r.Connecting&&setTimeout((function(){o.connectServer(t).then((function(e){e?(g.current=e,Q(e),R(r.Success)):R(r.Fail)}))}),500)}),[k,t,o]),Object(w.useEffect)((function(){k===r.Success&&void 0!==g.current&&(X?(F(H),Q(g.current)):(F(g.current),Q(H)))}),[k,N,X,L]);var te=Object(w.useCallback)(h()((function*(){var e=yield $(),n=e.status,r=e.data;return n===W.a.SUCCESS?yield o.sendDataToServer({ipAddress:t,data:JSON.stringify(r)}):(n===W.a.EMPTY&&O.a.show({title:Z.formatMessage({id:"msg__no_data_available"})},{type:"default"}),!1)})),[$,Z,t,o]),ne=Object(w.useCallback)(h()((function*(){var e=yield o.getDataFromServer({ipAddress:t});return!!e&&(function(e){var t=!0;return Object.entries(e).forEach((function(e){var n=_()(e,2),r=(n[0],n[1]);y()(r)||(t=!1)})),t}(JSON.parse(e.public))?(O.a.show({title:Z.formatMessage({id:"msg__no_data_available"})},{type:"default"}),!1):(o.disConnectServer(t),a(),ee.navigate(M.c.Onboarding,{screen:B.a.MigrationPreview,params:{data:e}}),!0))})),[a,Z,ee,t,o]),re=Object(w.useState)(!1),ae=_()(re,2),oe=ae[0],ce=ae[1],ie=Object(w.useCallback)(h()((function*(){(ce(!0),X)?((yield te())&&G&&O.a.show({title:"\ud83e\uddd9 "+Z.formatMessage({id:"msg__data_sent_to_platform"},{platform:G.name})}),o.disConnectServer(t),a()):yield ne();ce(!1)})),[a,ne,Z,X,G,te,t,o]),se=Object(w.useMemo)((function(){return k===r.Connecting?Object(I.jsx)(j.a,{title:"",subTitle:Object(I.jsxs)(f.a,{children:[Object(I.jsx)(m.b,{size:"lg"}),Object(I.jsx)(p.a,{mt:"12px",typography:"DisplayMedium",children:Z.formatMessage({id:"content__connecting"})})]})}):k===r.Fail?Object(I.jsx)(j.a,{emoji:"\ud83d\udeab",title:Z.formatMessage({id:"modal__failed_to_connect"}),subTitle:Z.formatMessage({id:"modal__migrating_data_connection_failed_desc"})}):k===r.Success&&G&&q?Object(I.jsxs)(I.Fragment,{children:[Object(I.jsxs)(f.a,{bgColor:"surface-default",borderRadius:"12px",borderColor:"border-subdued",borderWidth:A.a.hairlineWidth,children:[Object(I.jsxs)(f.a,{py:"16px",children:[Object(I.jsx)(p.a,{typography:"Body2",color:"text-subdued",ml:"16px",children:Z.formatMessage({id:"content__from"})}),Object(I.jsxs)(f.a,{paddingX:"16px",flexDirection:"row",mt:"12px",children:[Object(I.jsx)(b.a,{name:q.logo,size:24,color:"icon-subdued"}),Object(I.jsx)(p.a,{typography:"Body1Strong",flex:1,ml:"8px",children:q.name}),X&&Object(I.jsx)(P.a,{from:{scale:0},animate:{scale:1},transition:{type:"timing"},children:Object(I.jsx)(d.a,{size:"sm",type:"info",title:Z.formatMessage({id:"content__current"})})})]})]}),Object(I.jsx)(f.a,{borderBottomWidth:A.a.hairlineWidth,borderColor:"border-subdued"}),Object(I.jsxs)(f.a,{py:"16px",children:[Object(I.jsx)(p.a,{typography:"Body2",color:"text-subdued",ml:"16px",children:Z.formatMessage({id:"content__to"})}),Object(I.jsxs)(f.a,{paddingX:"16px",flexDirection:"row",justifyContent:"space-between",mt:"12px",children:[Object(I.jsx)(b.a,{name:G.logo,size:24,color:"icon-subdued"}),Object(I.jsx)(p.a,{typography:"Body1Strong",flex:1,ml:"8px",children:G.name}),!X&&Object(I.jsx)(P.a,{from:{scale:0},animate:{scale:1},transition:{type:"timing"},children:Object(I.jsx)(d.a,{size:"sm",type:"info",title:Z.formatMessage({id:"content__current"})})})]})]}),Object(I.jsx)(l.a,{position:"absolute",width:"full",height:"full",children:Object(I.jsx)(u.a,{onPress:function(){Y((function(e){return!e}))},name:"SwitchVerticalOutline",circle:!0,type:"basic",size:"base",iconColor:"icon-default"})})]}),Object(I.jsxs)(f.a,{mt:"24px",children:[oe&&!X&&Object(I.jsx)(s.a,{customIconName:"EllipsisHorizontalCircleMini",title:Z.formatMessage({id:"modal__migrating_data_awaiting_confirmation"},{from:q.name}),alertType:"success",dismiss:!1}),Object(I.jsx)(i.a,{mt:"12px",size:"xl",type:"primary",onPress:ie,isLoading:oe,children:Z.formatMessage({id:"action__migrate"})})]})]}):void 0}),[k,Z,oe,X,ie,q,G]);return Object(I.jsx)(c.a,{title:Z.formatMessage({id:"modal__migrating_data"}),headerDescription:k===r.Success?Object(I.jsxs)(p.a,{typography:"Caption",color:"text-success",children:["\ud83c\udf89 ",Z.formatMessage({id:"modal__migrating_data_desc"})]}):null,closeOverlay:function(){o.disConnectServer(t),a()},children:se})},N=function(e){return Object(k.a)((function(t){return Object(I.jsx)(z,T(T({},e),{},{closeOverlay:t}))}))}},3390:function(e,t,n){"use strict";n.r(t);var r=n(2),a=n.n(r),o=n(70),c=n(110),i=n(326),s=n(3),l=n.n(s),u=n(10),d=n.n(u),b=n(125),j=n(32),f=n(79),p=n(1),m=n(508),O=n(25),g=n(43),h=n(176),x=n(142),y=n(3189),v=n(3121),_=n(0);function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var C=function(e){var t=e.backupUUID,n=e.backupTime,r=e.numOfHDWallets,a=e.numOfImportedAccounts,o=e.numOfWatchingAccounts,c=e.numOfContacts,i=Object(h.o)();return Object(_.jsxs)(b.a,{flexDirection:"row",justifyContent:"space-between",alignItems:"center",p:2,mt:2,rounded:"xl",_hover:{bgColor:"surface-hovered"},_pressed:{bgColor:"surface-pressed"},onPress:function(){i.navigate(x.a.CloudBackupDetails,{backupUUID:t,backupTime:n,numOfHDWallets:r,numOfImportedAccounts:a,numOfWatchingAccounts:o,numOfContacts:c})},children:[Object(_.jsx)(y.a,{backupTime:n,numOfHDWallets:r,numOfImportedAccounts:a,numOfWatchingAccounts:o,numOfContacts:c,size:"normal"}),Object(_.jsx)(j.a,{children:Object(_.jsx)(f.a,{name:"ChevronRightMini",color:"icon-subdued",size:20})})]})};t.default=function(){var e=Object(m.a)(),t=Object(h.o)(),n=g.a.serviceCloudBackup;Object(p.useLayoutEffect)((function(){var n=e.formatMessage({id:"content__previous_backups"});t.setOptions({title:n})}),[t,e]);var r=Object(p.useState)(!0),s=d()(r,2),u=s[0],b=s[1],x=Object(p.useState)([]),y=d()(x,2),P=y[0],D=y[1];return Object(p.useEffect)((function(){(function(){var e=l()((function*(){D(yield n.getPreviousBackups()),b(!1)}));return function(){return e.apply(this,arguments)}})()()}),[n]),Object(_.jsx)(v.a,{children:u?Object(_.jsx)(c.a,{py:16,children:Object(_.jsx)(i.b,{size:"lg"})}):Object(_.jsx)(_.Fragment,{children:P.map((function(e,t){return Object(_.jsxs)(j.a,{children:[0!==t?Object(_.jsx)(j.a,{borderBottomWidth:O.a.hairlineWidth,borderBottomColor:"divider",my:6,bgColor:"divider"}):null,Object(_.jsxs)(j.a,{flexDirection:"row",children:[Object(_.jsx)(f.a,{name:"iPadOS"===e[0].deviceInfo.osName?"DeviceTabletOutline":"DeviceMobileOutline",size:20}),Object(_.jsx)(o.a,{typography:"Body2Strong",color:"text-subdued",ml:2,children:e[0].deviceInfo.deviceName})]}),Object(_.jsx)(j.a,{mx:-2,children:e.map((function(e){return Object(_.jsx)(C,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e),e.backupUUID)}))})]},t)}))})})}},3498:function(e,t,n){e.exports=n.p+"static/media/logo_metamask.dd1c33eb.png"},4322:function(e,t,n){e.exports=n.p+"static/media/device_classic_touch.d5143074.png"},4323:function(e,t,n){e.exports=n.p+"static/media/device_mini_classic_touch.792e867c.png"},4324:function(e,t,n){e.exports=n.p+"static/media/onekey-lite.583b6533.png"},4325:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgBAMAAAAQtmoLAAAAMFBMVEUAAAAAAAD///8QEBDv7+/7+/sEBAQcHBxwcHCXl5d+fn4gICBubm7r6+ufn5+VlZXXjP+NAAAAAXRSTlMAQObYZgAAAJlJREFUWMNjYBQkDYxqGNUwBDUoIQE1qFgSsuBAaHCBAzeoWApCCIsGlc3GMGAIFROGi1hj02CIJ2yERzUMGw2hsXg1hIaiaygvx64ULj0E8jQykFq1jDQNokrOoxpGNYxqGFYa4maCwEfiNUBA4ODRINMBAQcHT9mKFZBcoQyBWnRUw2DRQKChOyRa9wQ0DIE8PaphVAOFGgCtomPGGGK2iwAAAABJRU5ErkJggg=="},4326:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAMAAADVRocKAAAAulBMVEUAAAD///8AAAAHBwdnZ2dra2vn5+ff39+EhIR+fn4RERH9/f339/fNzc37+/vx8fG3t7fR0dFwcHAuLi4VFRUJCQnt7e3AwMBAQEA7OzsqKir09PTZ2dmpqamUlJR3d3caGhrj4+Pi4uLV1dXKysrCwsKlpaWdnZ2ZmZlbW1tTU1M2Njby8vLU1NTFxcW9vb2urq6goKCMjIx7e3tsbGxPT09HR0czMzMkJCQgICDGxsZpaWljY2MmJibYQD7aAAAAAXRSTlMAQObYZgAAAcxJREFUaN7t2WlPwkAQBmB2V8ux21p62HIjICKo3OL5//+WSBhLYWuEDhiSeT+102SepN0m22kmk2FHDQEEEEDAGQKW0TbNR0PCOS4gbcf1+TJ+2QkUOlC5e+Eb+exZuEAw4Ftxi5hA3ec78Sd4QINrM8UCcjwhdRzAFEmAf4sBWGWemEEFAahH/cJaSymjVooqd+kB9bP+Cza8ct0m1MoyNRBAr9ds1KxagGqQGshDq9Fm1YZqLjUQrjuV4mV4Ds8yJaCa+sdZhxtnpQSu4W534vWnddm7wgKK8boJS4uAIwJXxnceARgasdgAtFenDwcA72IVvo6IoqnPDgAu+B65JICA/wUa2cQ4KECOJSZPAAEEEEAAAQScDmg2ErboN3kvJQDxLm407Wce4r5I3FdZLNV7gb3x6r8xiPU0P8rOrjSSbBlZCwVHABy+m8VYqbGrueAcAFRquk7lpqbo2movACKDBf9DSkPr4M9Y2YHFkhTRN1NOW4ofhV/aO22EoWB26nNtvEYLaW7amhQ07XMG4mj5oeduraZeBXn6bnUHUfuwe4z/B9IO12M0WzFkAHI7F6IP415cANKpwtFZ/sMhgDECCCCAMQJOD3wB8z5BO/qdMIsAAAAASUVORK5CYII="},4327:function(e,t,n){e.exports=n.p+"static/media/desk_reveal.20570ffc.png"},4328:function(e,t,n){e.exports=n.p+"static/media/desk_security.6671c2f4.png"},4329:function(e,t,n){e.exports=n.p+"static/media/desk_settings.19ce0c79.png"},4330:function(e,t,n){e.exports=n.p+"static/media/desk_topbar.141ef7ad.png"},4331:function(e,t,n){e.exports=n.p+"static/media/mobile_reveal.f0a02ba0.png"},4332:function(e,t,n){e.exports=n.p+"static/media/mobile_security.f850c96e.png"},4333:function(e,t,n){e.exports=n.p+"static/media/mobile_settings.45b93463.png"},4334:function(e,t,n){e.exports=n.p+"static/media/mobile_topbar.2ea77d7b.png"},4335:function(e,t,n){e.exports=n.p+"static/media/welcome_hardware.738ecd2f.png"},4336:function(e,t,n){e.exports=n.p+"static/media/logo_rainbow.4dc78fbd.png"},4337:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAMAAADVRocKAAAAPFBMVEUAAAD///8zdbuZut3l7vdMhsPy9/uAqdVmmMzM3e5Afb+zy+Wmw+FZj8hNhsPZ5vNzoNC/1OmMstm/1Orw5n5WAAAAAXRSTlMAQObYZgAAAjFJREFUaN7t2elu6jAQBWA83sZLSKDv/64Xtbk6ok3KGZSoIOX8Qy3+vEycxJxOJ7drDuAADuAADuBPgDQWfNgBKFUkjvi8NeDlM965XYCgMkfDDkDyVRAfaMDUPBIJggZSUTSP5MsWQCodrX9PnXpJTwGp+VtyHuKPbmf5lqhT9rc0AxCiLCcW59rqHwMN5JUZ8elrwVeEiQbqWvNzQl4cxZkGFr6uPd0vkm4IVEXrSOi6ARCH/Fsllj5pfRo4h0BuUiE+Bzg6Lwfo19pyjaOu1QgID8irAdOuAPaiQN9M55327YErB+DxpLBAmZ8EXgdo8pnGAh/4/32AZgU+TI+ImFIaGFEVuwCoayooaxpIeEoggr2LA7D9DiwwYHsngWi4IaA/LIAxJ6JxzKgygH0zQtFlFkDdXUwXsmcBXJrddBlcCIAY9PoNcGQBLNvZUqXiaADfSYbbzWACMqaVXeNsAhq93aEzPIBFqPxzowQGQJS+azYsAQ2gtpUeQDcCSTCzzAAkmADMUQ0PajSihmxAwdsv0b4UFkCUEMYoGIAVCFXm+Ae7HCaSAZCOd822OIl4GW3OCKCDc6bwo3kVwRCNAAQk3xEhC9E+AEYQH5bPv7ojgQfzjKXo9f6E50kAc4EMt0GMKoJciRMv4jQT8XezpmWDQ8H1M64BzfMAT9S27bnp2vkXD5hWezKe/NLzhNLkAT7pitI0Avwg0H0asKWM/7v/pr/hHMABHMABOPd+wD9+jjDMeVUrrwAAAABJRU5ErkJggg=="}}]);