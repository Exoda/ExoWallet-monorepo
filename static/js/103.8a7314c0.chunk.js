(this.webpackJsonp=this.webpackJsonp||[]).push([[103],{3112:function(e,t,n){"use strict";n.d(t,"c",(function(){return h})),n.d(t,"b",(function(){return g})),n.d(t,"d",(function(){return w})),n.d(t,"a",(function(){return _}));var r=n(2),c=n.n(r),a=n(3),i=n.n(a),o=n(10),u=n.n(o),s=n(1),l=n(1116),d=n(330),f=n(164),b=n(82),j=n(14),O=n(43),p=n(42);function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var m=function(e){return[f.a,f.c,f.d,f.e].includes(e)},h=function(){var e=O.a.engine,t=Object(s.useState)([]),n=u()(t,2),r=n[0],c=n[1],a=Object(p.l)().wallets,o=Object(s.useCallback)(i()((function*(){var t=yield Promise.all(a.map(function(){var t=i()((function*(t){var n,r=yield e.getAccounts(t.accounts);return v(v({},t),{},{accounts:null!=(n=null==r?void 0:r.filter((function(e){if(!e)return!1;var t=e||{},n=t.address,r=t.coinType;return!m(n)&&!!Object(d.d)(r,j.C)})))?n:[]})}));return function(e){return t.apply(this,arguments)}}()));return c(t),t})),[e,a]);return Object(s.useEffect)((function(){o()}),[o]),{wallets:r,getWalletsAndAccounts:o}},g=function(){var e=Object(s.useState)(!1),t=u()(e,2),n=t[0],r=t[1],c=O.a.serviceNotification,a=h(),o=a.wallets,l=a.getWalletsAndAccounts,d=Object(s.useState)([]),f=u()(d,2),b=f[0],j=f[1],p=Object(s.useCallback)(i()((function*(){var e=yield c.queryAccountDynamic();j(e)})),[c]),y=Object(s.useCallback)(i()((function*(){r(!0);try{yield p(),yield l()}finally{r(!1)}})),[p,l]);return Object(s.useEffect)((function(){y()}),[y]),{loading:n,wallets:o,enabledAccounts:b,refresh:y}},w=function(){var e=O.a.serviceNotification,t=Object(s.useState)(!1),n=u()(t,2),r=n[0],c=n[1],a=Object(s.useState)([]),o=u()(a,2),l=o[0],d=o[1],f=Object(s.useCallback)(i()((function*(){c(!0);try{var t=yield e.queryPriceAlertList();d(t||[])}catch(n){}c(!1)})),[e]);return Object(s.useEffect)((function(){f()}),[f]),{alerts:l,loading:r,fetchPriceAlerts:f}},x=function(){var e=i()((function*(e,t){if(!e)return!1;var n=e||{},r=n.address,c=n.coinType;return!m(r)&&(!!Object(d.d)(c,j.C)&&!(yield Object(b.j)({asyncFunc:function(){var e=i()((function*(){return O.a.validator.isContractAddress(t,r)}));return function(){return e.apply(this,arguments)}}(),timeout:6e3,timeoutResult:!1})))}));return function(t,n){return e.apply(this,arguments)}}(),_=function(e,t){var n=Object(l.a)(i()((function*(){return x(e,t)})),[e]).result;return null!=n&&n}},3731:function(e,t,n){"use strict";n.r(t);var r=n(559),c=n(2),a=n.n(c),i=n(41),o=n(3),u=n.n(o),s=n(744),l=n(1110),d=n(326),f=n(32),b=n(3379),j=n(10),O=n.n(j),p=n(1),y=n(1116),v=n(508),m=n(330),h=n(76),g=n(176),w=n(14),x=n(43),_=n(3076),P=n(3294),C=n(3112),A=n(0);function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var S=function(e){var t,n,r=e.divider,c=e.account,a=e.onChange,i=e.checked,o=e.icon,u=Object(p.useState)(!1),s=O()(u,2),j=s[0],y=s[1];return Object(A.jsxs)(f.a,{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",py:4,px:{base:4,md:6},borderBottomWidth:r?"1 ":void 0,borderBottomColor:"divider",borderBottomRadius:r?void 0:"12px",children:[Object(A.jsxs)(f.a,{flex:"1",flexDirection:"row",alignItems:"center",children:[o,Object(A.jsx)(f.a,{mx:"3",flex:"1",children:Object(A.jsx)(b.a,{hiddenAvatar:!0,address:null!=(t=null!=(n=null==c?void 0:c.displayAddress)?n:null==c?void 0:c.address)?t:"",name:c.name,containerProps:{flex:1}})})]}),j?Object(A.jsx)(d.b,{}):Object(A.jsx)(l.a,{labelType:"false",isChecked:i,onToggle:function(){return e=!i,y(!0),void a(e).finally((function(){return setTimeout((function(){y(!1)}),200)}));var e}})]})},E=function(e){var t=e.name,n=e.type,r=e.accounts,c=e.avatar,a=e.enabledAccounts,o=e.refreash,l=e.passphraseState,d=Object(v.a)(),b=Object(s.a)().themeVariant,j=x.a.serviceNotification,O=Object(p.useCallback)(function(){var e=u()((function*(e,t){t?yield j.addAccountDynamic({accountId:e.id,address:e.address,name:e.name,passphrase:!!l}):yield j.removeAccountDynamic({address:e.address}),yield o()}));return function(t,n){return e.apply(this,arguments)}}(),[j,o,l]),y=r.length,m=Object(p.useMemo)((function(){return[h.d,h.e,h.a].includes(n)?Object(A.jsx)(_.c,{size:"sm",avatarBgColor:"surface-neutral-default",walletImage:n,circular:!0}):Object(A.jsx)(f.a,{bg:(null==c?void 0:c.bgColor)||"#000",w:"8",h:"8",borderRadius:"50",justifyContent:"center",alignItems:"center",children:null==c?void 0:c.emoji})}),[n,c]),g=Object(p.useMemo)((function(){switch(n){case h.d:return d.formatMessage({id:"wallet__imported_accounts"});case h.e:return d.formatMessage({id:"wallet__watched_accounts"});case h.a:return d.formatMessage({id:"content__external_account"})}return t}),[n,t,d]);return Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(i.h.Subheading,{children:g}),Object(A.jsx)(f.a,{w:"full",mt:"2",mb:6,borderRadius:"12",bg:"surface-default",borderWidth:"light"===b?1:void 0,borderColor:"border-subdued",children:r.map((function(e,t){return Object(A.jsx)(S,{icon:m,account:e,checked:!!a.find((function(t){return t.address===e.address})),onChange:function(t){return O(e,t)},divider:t!==y-1},e.id)}))})]})};t.default=function(){var e=Object(v.a)(),t=Object(C.b)(),n=t.wallets,c=t.enabledAccounts,a=t.refresh,i=t.loading,o=Object(g.o)(),s=Object(p.useMemo)((function(){return n.map((function(e){return D(D({},e),{},{accounts:e.accounts.filter((function(e){return Object(m.d)(e.coinType,w.C)}))})})).filter((function(e){return!!e.accounts.length}))}),[n]),l=Object(y.a)(u()((function*(){return x.a.serviceNotification.filterContractAddresses(s.map((function(e){return e.accounts.map((function(e){return e.address}))})).flat())})),[s]),d=l.result,f=l.loading;return Object(p.useLayoutEffect)((function(){var t=e.formatMessage({id:"title__manage_account_dynamic"});o.setOptions({title:t})}),[o,e]),s.length?Object(A.jsx)(r.a,{w:"full",h:"full",bg:"background-default",p:"4",maxW:768,mx:"auto",children:s.map((function(e){return Object(A.jsx)(E,D(D({},e),{},{accounts:e.accounts.filter((function(e){return null==d?void 0:d.includes(e.address)})),refreash:a,enabledAccounts:c}),e.id)}))}):Object(A.jsx)(P.a,{isLoading:i||f,desc:e.formatMessage({id:"content__there_are_no_accounts_available_for_subscriptions"})})}}}]);