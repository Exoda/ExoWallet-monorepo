(this.webpackJsonp=this.webpackJsonp||[]).push([[98],{3388:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return b})),n.d(t,"b",(function(){return y}));var r,i=n(3),a=n.n(i),o=n(460),c=n.n(o),s=n(10),u=n.n(s),d=n(1),l=n(43),f=n(3062),p=n(3146),v=n(3389);function b(){var e=Object(p.a)().showVerify,t=l.a.serviceCloudBackup,n=Object(d.useCallback)(function(){var e=a()((function*(e){var n=yield t.getDataForBackup(e);return{status:r.SUCCESS,data:n}}));return function(t){return e.apply(this,arguments)}}(),[t]);return{exportDataRequest:Object(d.useCallback)(a()((function*(){return new Promise((function(i){t.getDataForBackup("").then((function(t){!function(e){var t=!0;return Object.entries(e).forEach((function(e){var n=u()(e,2),r=(n[0],n[1]);c()(r)||(t=!1)})),t}(JSON.parse(t.public))?e((function(e){n(e).then((function(e){i(e)}))}),(function(){i({status:r.CANCEL})}),null,f.a.Secret):i({status:r.EMPTY})}))}))})),[n,t,e])}}function y(){var e=l.a.serviceMigrate;return{connectServer:Object(d.useCallback)(function(){var t=a()((function*(t){var n=yield e.connectServer(t);return!!n&&(Object(v.a)({serverInfo:n,serverAddress:t}),!0)}));return function(e){return t.apply(this,arguments)}}(),[e])}}!function(e){e.SUCCESS="success",e.EMPTY="empty",e.CANCEL="cancel"}(r||(r={}))},3389:function(e,t,n){"use strict";n.d(t,"a",(function(){return z}));var r,i=n(2),a=n.n(i),o=n(1120),c=n(98),s=n(646),u=n(110),d=n(186),l=n(1109),f=n(79),p=n(743),v=n(32),b=n(70),y=n(326),m=n(163),h=n(3),g=n.n(h),j=n(460),O=n.n(j),w=n(10),x=n.n(w),A=n(1),P=n(52),S=n(4420),C=n(508),E=n(25),M=n(142),_=n(43),D=n(388),R=n(940),k=n(404),T=n(3388),B=n(0);function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}!function(e){e[e.Success=0]="Success",e[e.Fail=1]="Fail",e[e.Connecting=2]="Connecting"}(r||(r={}));var U=Object(k.d)(),q=function(e){var t=e.serverAddress,n=e.serverInfo,i=e.closeOverlay,a=_.a.serviceMigrate,h=Object(A.useRef)(n),j=Object(A.useState)((function(){return n?r.Success:r.Connecting})),w=x()(j,2),D=w[0],N=w[1],I=Object(A.useState)(U),q=x()(I,2),z=q[0],F=q[1],W=Object(A.useState)(h.current),G=x()(W,2),V=G[0],L=G[1],H=Object(A.useMemo)((function(){return Object(k.f)(z)}),[z]),Q=Object(A.useMemo)((function(){if(V)return Object(k.f)(V)}),[V]),J=Object(A.useState)(!0),K=x()(J,2),Y=K[0],X=K[1],Z=Object(C.a)(),$=Object(T.c)().exportDataRequest,ee=Object(P.u)();Object(A.useEffect)((function(){D===r.Connecting&&setTimeout((function(){a.connectServer(t).then((function(e){e?(h.current=e,L(e),N(r.Success)):N(r.Fail)}))}),500)}),[D,t,a]),Object(A.useEffect)((function(){D===r.Success&&void 0!==h.current&&(Y?(F(U),L(h.current)):(F(h.current),L(U)))}),[D,z,Y,V]);var te=Object(A.useCallback)(g()((function*(){var e=yield $(),n=e.status,r=e.data;return n===T.a.SUCCESS?yield a.sendDataToServer({ipAddress:t,data:JSON.stringify(r)}):(n===T.a.EMPTY&&m.a.show({title:Z.formatMessage({id:"msg__no_data_available"})},{type:"default"}),!1)})),[$,Z,t,a]),ne=Object(A.useCallback)(g()((function*(){var e=yield a.getDataFromServer({ipAddress:t});return!!e&&(function(e){var t=!0;return Object.entries(e).forEach((function(e){var n=x()(e,2),r=(n[0],n[1]);O()(r)||(t=!1)})),t}(JSON.parse(e.public))?(m.a.show({title:Z.formatMessage({id:"msg__no_data_available"})},{type:"default"}),!1):(a.disConnectServer(t),i(),ee.navigate(M.c.Onboarding,{screen:R.a.MigrationPreview,params:{data:e}}),!0))})),[i,Z,ee,t,a]),re=Object(A.useState)(!1),ie=x()(re,2),ae=ie[0],oe=ie[1],ce=Object(A.useCallback)(g()((function*(){(oe(!0),Y)?((yield te())&&Q&&m.a.show({title:"\ud83e\uddd9 "+Z.formatMessage({id:"msg__data_sent_to_platform"},{platform:Q.name})}),a.disConnectServer(t),i()):yield ne();oe(!1)})),[i,ne,Z,Y,Q,te,t,a]),se=Object(A.useMemo)((function(){return D===r.Connecting?Object(B.jsx)(p.a,{title:"",subTitle:Object(B.jsxs)(v.a,{children:[Object(B.jsx)(y.b,{size:"lg"}),Object(B.jsx)(b.a,{mt:"12px",typography:"DisplayMedium",children:Z.formatMessage({id:"content__connecting"})})]})}):D===r.Fail?Object(B.jsx)(p.a,{emoji:"\ud83d\udeab",title:Z.formatMessage({id:"modal__failed_to_connect"}),subTitle:Z.formatMessage({id:"modal__migrating_data_connection_failed_desc"})}):D===r.Success&&Q&&H?Object(B.jsxs)(B.Fragment,{children:[Object(B.jsxs)(v.a,{bgColor:"surface-default",borderRadius:"12px",borderColor:"border-subdued",borderWidth:E.a.hairlineWidth,children:[Object(B.jsxs)(v.a,{py:"16px",children:[Object(B.jsx)(b.a,{typography:"Body2",color:"text-subdued",ml:"16px",children:Z.formatMessage({id:"content__from"})}),Object(B.jsxs)(v.a,{paddingX:"16px",flexDirection:"row",mt:"12px",children:[Object(B.jsx)(f.a,{name:H.logo,size:24,color:"icon-subdued"}),Object(B.jsx)(b.a,{typography:"Body1Strong",flex:1,ml:"8px",children:H.name}),Y&&Object(B.jsx)(S.a,{from:{scale:0},animate:{scale:1},transition:{type:"timing"},children:Object(B.jsx)(l.a,{size:"sm",type:"info",title:Z.formatMessage({id:"content__current"})})})]})]}),Object(B.jsx)(v.a,{borderBottomWidth:E.a.hairlineWidth,borderColor:"border-subdued"}),Object(B.jsxs)(v.a,{py:"16px",children:[Object(B.jsx)(b.a,{typography:"Body2",color:"text-subdued",ml:"16px",children:Z.formatMessage({id:"content__to"})}),Object(B.jsxs)(v.a,{paddingX:"16px",flexDirection:"row",justifyContent:"space-between",mt:"12px",children:[Object(B.jsx)(f.a,{name:Q.logo,size:24,color:"icon-subdued"}),Object(B.jsx)(b.a,{typography:"Body1Strong",flex:1,ml:"8px",children:Q.name}),!Y&&Object(B.jsx)(S.a,{from:{scale:0},animate:{scale:1},transition:{type:"timing"},children:Object(B.jsx)(l.a,{size:"sm",type:"info",title:Z.formatMessage({id:"content__current"})})})]})]}),Object(B.jsx)(u.a,{position:"absolute",width:"full",height:"full",children:Object(B.jsx)(d.a,{onPress:function(){X((function(e){return!e}))},name:"SwitchVerticalOutline",circle:!0,type:"basic",size:"base",iconColor:"icon-default"})})]}),Object(B.jsxs)(v.a,{mt:"24px",children:[ae&&!Y&&Object(B.jsx)(s.a,{customIconName:"EllipsisHorizontalCircleMini",title:Z.formatMessage({id:"modal__migrating_data_awaiting_confirmation"},{from:H.name}),alertType:"success",dismiss:!1}),Object(B.jsx)(c.a,{mt:"12px",size:"xl",type:"primary",onPress:ce,isLoading:ae,children:Z.formatMessage({id:"action__migrate"})})]})]}):void 0}),[D,Z,ae,Y,ce,H,Q]);return Object(B.jsx)(o.a,{title:Z.formatMessage({id:"modal__migrating_data"}),headerDescription:D===r.Success?Object(B.jsxs)(b.a,{typography:"Caption",color:"text-success",children:["\ud83c\udf89 ",Z.formatMessage({id:"modal__migrating_data_desc"})]}):null,closeOverlay:function(){a.disConnectServer(t),i()},children:se})},z=function(e){return Object(D.a)((function(t){return Object(B.jsx)(q,I(I({},e),{},{closeOverlay:t}))}))}},3546:function(e,t,n){"use strict";n.r(t),n.d(t,"ScanQrcodeRoutes",(function(){return Kt.a}));var r=n(85),i=n(283),a=n(200),o=n(234),c=n(3379),s=n(32),u=n(41),d=n(3),l=n.n(d),f=n(745),p=n(558),v=n(52),b=n(508),y=n(43),m=n(42),h=n(151),g=n(3286),j=n(3076),O=n(142),w=n(458),x=n(0),A=function(){var e,t=Object(b.a)(),n=Object(v.u)(),r=Object(v.x)().params,d=r.address,A=r.possibleNetworks,P=void 0===A?[]:A,S=Object(p.a)().bottom,C=Object(f.a)({defaultValues:{network:P[0]}}),E=C.control,M=C.getValues,_=Object(m.c)(),D=_.account,R=_.wallet;return Object(x.jsx)(i.b,{onPrimaryActionPress:l()((function*(){var e=y.a.serviceNetwork;yield e.changeActiveNetwork(M("network"));var t=Object(m.a)(),r=t.accountId,i=t.networkId;n.navigate(O.c.Modal,{screen:O.b.Send,params:{screen:w.a.PreSendToken,params:{accountId:r,networkId:i,from:"",to:d,amount:""}}})})),primaryActionTranslationId:"action__next",hideSecondaryAction:!0,header:t.formatMessage({id:"modal__preview"}),scrollViewProps:{pb:S+"px",children:Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(s.a,{borderColor:"border-subdued",borderWidth:"1px",borderRadius:"12px",borderStyle:"dashed",alignItems:"center",justifyContent:"center",p:"20px",mb:"32px",children:Object(x.jsx)(u.h.Body2,{textAlign:"center",wordBreak:"break-all",children:d})}),Object(x.jsxs)(a.a,{children:[Object(x.jsx)(g.a,{hideHelpText:!0,selectableNetworks:P,control:E,name:"network"}),Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(u.h.Body2Strong,{mb:1,children:t.formatMessage({id:"form__account"})}),Object(x.jsxs)(o.a,{p:"15px",borderWidth:1,borderColor:"border-disabled",borderRadius:"12px",alignItems:"center",bg:"surface-disabled",children:[Object(x.jsx)(j.c,{walletImage:null==R?void 0:R.type,hwWalletType:(null==R?void 0:R.deviceType)||Object(h.b)(null==R?void 0:R.associatedDevice),avatar:null==R?void 0:R.avatar,size:"sm",mr:"12px"}),Object(x.jsx)(c.a,{color:"text-disabled",hiddenAvatar:!0,address:null!=(e=null==D?void 0:D.address)?e:"",name:null==D?void 0:D.name})]})]})]})]})}})};A.displayName="PreviewSend";var P,S,C,E,M,_,D,R,k=A,T=n(110),B=n(98),N=n(10),I=n.n(N),U=n(1),q=n.n(U),z=n(2),F=n.n(z),W=n(6),G=n.n(W),V=n(9),L=n.n(V),H=n(12),Q=n.n(H),J=n(5),K=n.n(J),Y=n(34),X=n(89),Z=n(16),$=n.n(Z),ee=n(25),te=n(28),ne=n(138);function re(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?re(Object(n),!0).forEach((function(t){F()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):re(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}!function(e){e.front="front",e.back="back"}(P||(P={})),function(e){e.on="on",e.off="off",e.auto="auto",e.torch="torch"}(S||(S={})),function(e){e.on="on",e.off="off",e.auto="auto",e.singleShot="singleShot"}(C||(C={})),function(e){e.auto="auto",e.sunny="sunny",e.cloudy="cloudy",e.shadow="shadow",e.incandescent="incandescent",e.fluorescent="fluorescent",e.continuous="continuous",e.manual="manual"}(E||(E={})),function(e){e.png="png",e.jpg="jpg"}(M||(M={})),function(e){e.H264="avc1",e.HEVC="hvc1",e.JPEG="jpeg",e.AppleProRes422="apcn",e.AppleProRes4444="ap4h"}(_||(_={})),function(e){e.off="off",e.standard="standard",e.cinematic="cinematic",e.auto="auto"}(D||(D={})),function(e){e["2160p"]="2160p",e["1080p"]="1080p",e["720p"]="720p",e["480p"]="480p",e["4:3"]="4:3"}(R||(R={}));function ae(e){return oe.apply(this,arguments)}function oe(){return(oe=l()((function*(e){var t=function(e){return{optional:[{sourceId:e}]}},n=function(e){var t=e.deviceId;return"string"===typeof t?t:Array.isArray(t)&&t.length>0?t[0]:"object"===typeof t&&t.ideal?t.ideal:null},r=yield new Promise((function(e){return MediaStreamTrack.getSources((function(t){return e(t)}))})),i=null,a=null;r.forEach((function(e){"audio"===e.kind?i=e.id:"video"===e.kind&&(a=e.id)}));var o=n(e.audioConstraints);o&&(i=o);var c=n(e.videoConstraints);return c&&(a=c),[t(i),t(a)]}))).apply(this,arguments)}function ce(e,t,n){return se.apply(this,arguments)}function se(){return(se=l()((function*(e,t,n){var r={video:"undefined"===typeof n||n};return e||(r.audio="undefined"===typeof t||t),yield le(r)}))).apply(this,arguments)}function ue(e){return de.apply(this,arguments)}function de(){return(de=l()((function*(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(be())return yield ce(t,e.audio,e.video);var n=yield ae(e),r=I()(n,2),i=r[0],a=r[1];return yield ce(t,i,a)}))).apply(this,arguments)}function le(e){return fe.apply(this,arguments)}function fe(){return(fe=l()((function*(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{return yield pe(ie(ie({},e),{},{video:t||e.video}))}catch(n){if(!t&&"ConstraintNotSatisfiedError"===n.name)return yield le(e,!0);throw n}}))).apply(this,arguments)}function pe(e){return ve.apply(this,arguments)}function ve(){return(ve=l()((function*(e){if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia)return navigator.mediaDevices.getUserMedia(e);var t=navigator.mozGetUserMedia||navigator.webkitGetUserMedia||navigator.msGetUserMedia;return new Promise((function(n,r){return t.call(navigator,e,n,r)}))}))).apply(this,arguments)}function be(){return Y.e.isDOMAvailable&&!!(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia||navigator.mozGetUserMedia||navigator.webkitGetUserMedia||navigator.msGetUserMedia)}function ye(e){return me.apply(this,arguments)}function me(){return(me=l()((function*(e){return yield je(["front","user","facetime"],"user",e)}))).apply(this,arguments)}function he(e){return ge.apply(this,arguments)}function ge(){return(ge=l()((function*(e){return yield je(["back","rear"],"environment",e)}))).apply(this,arguments)}function je(e,t,n){return Oe.apply(this,arguments)}function Oe(){return(Oe=l()((function*(e,t,n){if(!n){if(!navigator.mediaDevices.enumerateDevices)return null;n=yield navigator.mediaDevices.enumerateDevices()}var r=n.filter((function(e){return"videoinput"===e.kind})),i=r.filter((function(t){return e.some((function(e){return t.label.toLowerCase().includes(e)}))})),a=I()(i,1)[0],o=r.filter((function(e){if(!("getCapabilities"in e))return null;var n=e.getCapabilities();return n.facingMode?n.facingMode.find((function(e){return t})):null})),c=I()(o,1)[0];return(null==c?void 0:c.deviceId)||(null==a?void 0:a.deviceId)||null}))).apply(this,arguments)}function we(e){if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia)return navigator.mediaDevices.getUserMedia(e);var t=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||function(){var e=new Error("Permission unimplemented");throw e.code=0,e.name="NotAllowedError",e};return new Promise((function(n,r){t.call(navigator,e,n,r)}))}function xe(e){return"Permission dismissed"===e.message?{status:Y.d.UNDETERMINED,expires:"never",canAskAgain:!0,granted:!1}:{status:Y.d.DENIED,expires:"never",canAskAgain:!0,granted:!1}}function Ae(){return Pe.apply(this,arguments)}function Pe(){return(Pe=l()((function*(){try{return yield we({video:!0}),{status:Y.d.GRANTED,expires:"never",canAskAgain:!0,granted:!0}}catch(e){return xe({message:e.message})}}))).apply(this,arguments)}function Se(e){return Ce.apply(this,arguments)}function Ce(){return(Ce=l()((function*(e){var t,n;if(null==(t=navigator)||null==(n=t.permissions)||!n.query)throw new Y.g("expo-camera","navigator.permissions API is not available");switch((yield navigator.permissions.query({name:e})).state){case"prompt":return{status:Y.d.UNDETERMINED,expires:"never",canAskAgain:!0,granted:!1};case"granted":return{status:Y.d.GRANTED,expires:"never",canAskAgain:!0,granted:!0};case"denied":return{status:Y.d.DENIED,expires:"never",canAskAgain:!0,granted:!1}}}))).apply(this,arguments)}var Ee,Me,_e={get name(){return"ExponentCameraManager"},get Type(){return{back:"back",front:"front"}},get FlashMode(){return{on:"on",off:"off",auto:"auto",torch:"torch"}},get AutoFocus(){return{on:"on",off:"off",auto:"auto",singleShot:"singleShot"}},get WhiteBalance(){return{auto:"auto",continuous:"continuous",manual:"manual"}},get VideoQuality(){return{}},get VideoStabilization(){return{}},isAvailableAsync:function(){var e=l()((function*(){return be()}));return function(){return e.apply(this,arguments)}}(),takePicture:function(){var e=l()((function*(e,t){return yield t.takePicture(e)}));return function(t,n){return e.apply(this,arguments)}}(),pausePreview:function(){var e=l()((function*(e){yield e.pausePreview()}));return function(t){return e.apply(this,arguments)}}(),resumePreview:function(){var e=l()((function*(e){return yield e.resumePreview()}));return function(t){return e.apply(this,arguments)}}(),getAvailableCameraTypesAsync:function(){var e=l()((function*(){if(!be()||!navigator.mediaDevices.enumerateDevices)return[];var e=yield navigator.mediaDevices.enumerateDevices();return(yield Promise.all([(yield ye(e))&&P.front,(yield he())&&P.back])).filter(Boolean)}));return function(){return e.apply(this,arguments)}}(),getAvailablePictureSizes:function(){var e=l()((function*(e,t){return yield t.getAvailablePictureSizes(e)}));return function(t,n){return e.apply(this,arguments)}}(),getPermissionsAsync:function(){var e=l()((function*(){return Se("camera")}));return function(){return e.apply(this,arguments)}}(),requestPermissionsAsync:function(){var e=l()((function*(){return Ae()}));return function(){return e.apply(this,arguments)}}(),getCameraPermissionsAsync:function(){var e=l()((function*(){return Se("camera")}));return function(){return e.apply(this,arguments)}}(),requestCameraPermissionsAsync:function(){var e=l()((function*(){return Ae()}));return function(){return e.apply(this,arguments)}}(),getMicrophonePermissionsAsync:function(){var e=l()((function*(){return Se("microphone")}));return function(){return e.apply(this,arguments)}}(),requestMicrophonePermissionsAsync:function(){var e=l()((function*(){try{return yield we({audio:!0}),{status:Y.d.GRANTED,expires:"never",canAskAgain:!0,granted:!0}}catch(e){return xe({message:e.message})}}));return function(){return e.apply(this,arguments)}}()},De=n(58),Re=n.n(De);function ke(e){switch(e){case"torch":return!0;case"on":case"off":case"auto":default:return!1}}function Te(e){switch(e){case"on":case"auto":return"continuous";case"off":return"none";case"singleShot":return"single-shot";default:return}}function Be(e){switch(e){case"on":case"auto":return"continuous";case"off":return"manual";case"singleShot":return"single-shot";default:return}}var Ne=Object.keys({"3840x2160":3840/2160,"1920x1080":1920/1080,"1280x720":1280/720,"640x480":640/480,"352x288":352/288}),Ie=((Ee={})[M.jpg]="image/jpeg",Ee[M.png]="image/png",Ee),Ue={audio:!1,video:!0},qe=((Me={})[P.front]="user",Me[P.back]="environment",Me),ze={user:P.front,environment:P.back};function Fe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e||e.readyState!==e.HAVE_ENOUGH_DATA)return null;var n=We(e,t),r=n.getContext("2d",{alpha:!1});if(!r||!n.width||!n.height)return null;var i=r.getImageData(0,0,n.width,n.height);return i}function We(e,t){var n=t.scale,r=void 0===n?1:n,i=t.isImageMirror,a=void 0!==i&&i,o=function(e,t,n){var r=e*n;return{width:r,height:t/(e/r)}}(e.videoWidth,e.videoHeight,r),c=o.width,s=o.height,u=document.createElement("canvas");u.width=c,u.height=s;var d=u.getContext("2d",{alpha:!1});if(!d)throw new Error("Context is not defined");return a&&d.setTransform(-1,0,0,1,u.width,0),d.drawImage(e,0,0,c,s),u}function Ge(e,t){var n=function(e){var t={scale:1,imageType:M.png,isImageMirror:!1};for(var n in e)n in e&&void 0!==e[n]&&n in t&&(t[n]=e[n]);return t}(t),r=We(e,n),i=n.imageType,a=n.quality;return function(e,t,n){Re()(Object.values(M).includes(t),"expo-camera: "+t+" is not a valid ImageType. Expected a string from: "+Object.values(M).join(", "));var r=Ie[t];return t===M.jpg?(Re()(n<=1&&n>=0,"expo-camera: "+n+" is not a valid image quality. Expected a number from 0...1"),e.toDataURL(r,n)):e.toDataURL(r)}(r,i,void 0===a?.92:a)}function Ve(e,t,n){var r={audio:!1,video:{}};if(function(e,t,n){return void 0!==e&&void 0!==t&&void 0!==n}(e,t,n))return Ue;var i,a=navigator.mediaDevices&&navigator.mediaDevices.getSupportedConstraints?navigator.mediaDevices.getSupportedConstraints():null;if(!a||!a.facingMode||!a.width||!a.height)return Ue;if(e&&Object.values(P).includes(e)){var o=qe[e];if(/WebKit/.test(navigator.userAgent)&&!/Edg/.test(navigator.userAgent)){var c,s="user"===o?"exact":"ideal";r.video.facingMode=((c={})[s]=o,c)}else r.video.facingMode={ideal:qe[e]}}return(i=r.video)&&"boolean"!==typeof i.video&&(r.video.width=t,r.video.height=n),r}function Le(){return(Le=l()((function*(e,t,n){try{return yield He(e,t,n)}catch(i){if(i instanceof OverconstrainedError&&"facingMode"===i.constraint){var r=e===P.back?P.front:P.back;return yield He(r,t,n)}throw i}}))).apply(this,arguments)}function He(e,t,n){return Qe.apply(this,arguments)}function Qe(){return(Qe=l()((function*(e,t,n){var r=Ve(e,t,n);return yield ue(r)}))).apply(this,arguments)}function Je(e,t){return Ke.apply(this,arguments)}function Ke(){return(Ke=l()((function*(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};null!=t&&t.getVideoTracks&&(yield Promise.all(t.getVideoTracks().map((function(t){return Ye(e,t,n)}))))}))).apply(this,arguments)}function Ye(e,t){return Xe.apply(this,arguments)}function Xe(){return(Xe=l()((function*(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t.getCapabilities(),i={},a=["exposureCompensation","colorTemperature","iso","brightness","contrast","saturation","sharpness","focusDistance","zoom"];for(var o of a)r[o]&&(i[o]=et(r[o],n[o]));function c(t,i,a){return tt({constraintKey:t,settingsKey:i,convertedSetting:a(n[i]),capabilities:r,settings:n,cameraType:e})}r.focusMode&&void 0!==n.autoFocus&&(i.focusMode=c("focusMode","autoFocus",Be)),r.torch&&void 0!==n.flashMode&&(i.torch=c("torch","flashMode",ke)),r.whiteBalanceMode&&void 0!==n.whiteBalance&&(i.whiteBalanceMode=c("whiteBalanceMode","whiteBalance",Te));try{yield t.applyConstraints({advanced:[i]})}catch(s){0}}))).apply(this,arguments)}function Ze(e){e&&(e.getAudioTracks&&e.getAudioTracks().forEach((function(e){return e.stop()})),e.getVideoTracks&&e.getVideoTracks().forEach((function(e){return e.stop()})),"function"===typeof e.stop&&e.stop())}function $e(e,t){var n,r=null!=(n=window.URL.createObjectURL)?n:window.webkitURL.createObjectURL;if("undefined"!==typeof e.srcObject?e.srcObject=t:"undefined"!==typeof e.mozSrcObject?e.mozSrcObject=t:t&&r&&(e.src=r(t)),!t){var i,a,o,c=null!=(i=window.URL.revokeObjectURL)?i:window.webkitURL.revokeObjectURL,s=null!=(a=null!=(o=e.src)?o:e.srcObject)?a:e.mozSrcObject;c&&"string"===typeof s&&c(s)}}function et(e,t){if(t){var n=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,1];return(e-n[0])*(t[1]-t[0])/(n[1]-n[0])+t[0]}(t,[e.min,e.max]);return Math.min(e.max,Math.max(e.min,n))}}function tt(e){var t=e.constraintKey,n=e.settingsKey,r=e.convertedSetting,i=e.capabilities,a=e.settings;e.cameraType,a[n];if(!Array.isArray(i[t])||!r||i[t].includes(r))return r}function nt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function rt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nt(Object(n),!0).forEach((function(t){F()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var it=["autoFocus","flashMode","exposureCompensation","colorTemperature","iso","brightness","contrast","saturation","sharpness","focusDistance","whiteBalance","zoom"];function at(e,t,n,r){var i=r.onCameraReady,a=r.onMountError,o=U.useRef(!1),c=U.useRef([]),s=U.useRef({autoFocus:"continuous",flashMode:"off",whiteBalance:"continuous",zoom:1}),u=U.useState(null),d=I()(u,2),f=d[0],p=d[1],v=U.useMemo((function(){return f?f.getTracks()[0].getSettings():null}),[f]),b=U.useMemo((function(){if(!v)return null;var e=v.facingMode;return ze[void 0===e?"user":e]}),[v]),y=U.useCallback(l()((function*(){try{return yield function(e,t,n){return Le.apply(this,arguments)}(t)}catch(e){return a&&a({nativeEvent:e}),null}})),[t,a]),m=U.useCallback(l()((function*(){var e=yield y();return function(e,t){if(!e||!t)return!1;var n=e.getTracks()[0].getSettings(),r=t.getTracks()[0].getSettings();return n.deviceId===r.deviceId}(e,f)||(c.current.some((function(t){return t.id===(null==e?void 0:e.id)}))||c.current.push(e),p(e),i&&i()),!1})),[y,p,i,f,c.current]);return U.useEffect((function(){o.current||(o.current=!0,m().then((function(e){o.current=e})).catch((function(){o.current=!1})))}),[t]),U.useEffect((function(){var e={};for(var r of Object.keys(n))if(it.includes(r)){var i=n[r];i!==s.current[r]&&(e[r]=i)}var a=!!Object.keys(e).length,o=rt(rt({},s.current),e);a&&Je(t,f,e),s.current=o}),[n.autoFocus,n.flashMode,n.exposureCompensation,n.colorTemperature,n.iso,n.brightness,n.contrast,n.saturation,n.sharpness,n.focusDistance,n.whiteBalance,n.zoom]),U.useEffect((function(){e.current&&$e(e.current,f)}),[e.current,f]),U.useEffect((function(){return function(){for(var t of c.current)Ze(t);e.current&&$e(e.current,f)}}),[]),function(e,t){U.useEffect((function(){e&&e.addEventListener("loadedmetadata",(function(){requestAnimationFrame((function(){t()}))}))}),[e])}(e.current,(function(){Je(t,f,s.current)})),{type:b,mediaTrackSettings:v}}var ot=n(1888);var ct=["type","pictureSize","poster"];function st(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ut(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?st(Object(n),!0).forEach((function(t){F()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):st(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var dt=U.forwardRef((function(e,t){var n,r,i=e.type,a=(e.pictureSize,e.poster),o=$()(e,ct),c=U.useRef(null),s=at(c,i,o,{onCameraReady:function(){o.onCameraReady&&o.onCameraReady()},onMountError:o.onMountError}),u=U.useMemo((function(){var e,t;return!(null==(e=o.barCodeScannerSettings)||null==(t=e.barCodeTypes)||!t.includes("qr")||!o.onBarCodeScanned)}),[null==(n=o.barCodeScannerSettings)?void 0:n.barCodeTypes,o.onBarCodeScanned]);!function(e,t){var n=t.isEnabled,r=t.captureOptions,i=t.interval,a=t.onScanned,o=t.onError,c=U.useRef(!1),s=U.useRef(void 0);function u(){return d.apply(this,arguments)}function d(){return(d=l()((function*(){if(c.current&&a)try{var t=Fe(e.current,r);if(t){var n=yield Object(ot.scanImageData)(t),d=I()(n,1)[0];d&&a({nativeEvent:{type:d.typeName,data:d.decode(),cornerPoints:d.points}})}}catch(p){o&&o({nativeEvent:p})}finally{if(0===i)return void f();var l=!i||i<0?16:i;s.current=setTimeout((function(){u()}),l)}else f()}))).apply(this,arguments)}function f(){c.current=!1,clearTimeout(s.current)}U.useEffect((function(){n?(c.current=!0,u()):f()}),[n]),U.useEffect((function(){return function(){f()}}),[])}(c,{interval:null==(r=o.barCodeScannerSettings)?void 0:r.interval,isEnabled:u,captureOptions:{scale:1,isImageMirror:s.type===P.front},onScanned:function(e){o.onBarCodeScanned&&o.onBarCodeScanned(e)}}),U.useImperativeHandle(t,(function(){return{getAvailablePictureSizes:function(){var e=l()((function*(e){return Ne}));return function(t){return e.apply(this,arguments)}}(),takePicture:function(){var e=l()((function*(e){var t,n;if(!c.current||(null==(t=c.current)?void 0:t.readyState)!==(null==(n=c.current)?void 0:n.HAVE_ENOUGH_DATA))throw new Y.a("ERR_CAMERA_NOT_READY","HTMLVideoElement does not have enough camera data to construct an image yet.");var r=s.mediaTrackSettings;if(!r)throw new Y.a("ERR_CAMERA_NOT_READY","MediaStream is not ready yet.");return function(e,t,n){var r=Ge(e,n),i={uri:r,base64:r,width:0,height:0};if(t){var a=t.width,o=void 0===a?0:a,c=t.height,s=void 0===c?0:c;i.width=o,i.height=s,i.exif=t}return n.onPictureSaved&&n.onPictureSaved(i),i}(c.current,r,ut(ut({},e),{},{onPictureSaved:function(t){e.onPictureSaved&&e.onPictureSaved(t),o.onPictureSaved&&o.onPictureSaved({nativeEvent:{data:t,id:-1}})}}))}));return function(t){return e.apply(this,arguments)}}(),resumePreview:function(){var e=l()((function*(){c.current&&c.current.play()}));return function(){return e.apply(this,arguments)}}(),pausePreview:function(){var e=l()((function*(){c.current&&c.current.pause()}));return function(){return e.apply(this,arguments)}}()}}),[s.mediaTrackSettings,o.onPictureSaved]);var d=U.useMemo((function(){var e=s.type===_e.Type.front;return[ee.a.absoluteFill,ft.video,{transform:e?[{scaleX:-1}]:void 0}]}),[s.type]);return U.createElement(te.a,{pointerEvents:"box-none",style:[ft.videoWrapper,o.style]},U.createElement(lt,{autoPlay:!0,playsInline:!0,muted:!0,poster:a,pointerEvents:o.pointerEvents,ref:c,style:d}),o.children)})),lt=U.forwardRef((function(e,t){return Object(ne.a)("video",ut(ut({},e),{},{ref:t}))})),ft=ee.a.create({videoWrapper:{flex:1,alignItems:"stretch"},video:{width:"100%",height:"100%",objectFit:"cover"}}),pt={type:_e.Type,flashMode:_e.FlashMode,autoFocus:_e.AutoFocus,whiteBalance:_e.WhiteBalance};function vt(e){var t=function(e){if(!e||"object"!==typeof e)return{};var t={};for(var n of Object.entries(e)){var r=I()(n,2),i=r[0],a=r[1];t[i]="string"===typeof a&&pt[i]?pt[i][a]:a}return t}(e);return t.onBarCodeScanned&&(t.barCodeScannerEnabled=!0),t.onFacesDetected&&(t.faceDetectorEnabled=!0),"android"!==Y.e.OS&&(delete t.ratio,delete t.useCamera2Api),"web"!==Y.e.OS&&delete t.poster,t}function bt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function yt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bt(Object(n),!0).forEach((function(t){F()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function mt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=K()(e);if(t){var i=K()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Q()(this,n)}}var ht={},gt=1;function jt(e){var t=e.nativeEvent,n=t.id,r=t.data,i=ht[n];i&&(i(r),delete ht[n])}var Ot=function(e){L()(n,e);var t=mt(n);function n(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r)))._lastEvents={},e._lastEventsTimes={},e._onCameraReady=function(){e.props.onCameraReady&&e.props.onCameraReady()},e._onMountError=function(t){var n=t.nativeEvent;e.props.onMountError&&e.props.onMountError(n)},e._onObjectDetected=function(t){return function(n){var r=n.nativeEvent,i=r.type;e._lastEvents[i]&&e._lastEventsTimes[i]&&JSON.stringify(r)===e._lastEvents[i]&&(new Date).getTime()-e._lastEventsTimes[i].getTime()<500||t&&(t(r),e._lastEventsTimes[i]=new Date,e._lastEvents[i]=JSON.stringify(r))}},e._setReference=function(t){t?(e._cameraRef=t,"web"===Y.e.OS?e._cameraHandle=t:e._cameraHandle=Object(X.a)(t)):(e._cameraRef=null,e._cameraHandle=null)},e}n.isAvailableAsync=function(){var e=l()((function*(){if(!_e.isAvailableAsync)throw new Y.g("expo-camera","isAvailableAsync");return yield _e.isAvailableAsync()}));return function(){return e.apply(this,arguments)}}(),n.getAvailableCameraTypesAsync=function(){var e=l()((function*(){if(!_e.getAvailableCameraTypesAsync)throw new Y.g("expo-camera","getAvailableCameraTypesAsync");return yield _e.getAvailableCameraTypesAsync()}));return function(){return e.apply(this,arguments)}}(),n.getAvailableVideoCodecsAsync=function(){var e=l()((function*(){if(!_e.getAvailableVideoCodecsAsync)throw new Y.g("Camera","getAvailableVideoCodecsAsync");return yield _e.getAvailableVideoCodecsAsync()}));return function(){return e.apply(this,arguments)}}(),n.getPermissionsAsync=function(){var e=l()((function*(){return _e.getPermissionsAsync()}));return function(){return e.apply(this,arguments)}}(),n.requestPermissionsAsync=function(){var e=l()((function*(){return _e.requestPermissionsAsync()}));return function(){return e.apply(this,arguments)}}(),n.getCameraPermissionsAsync=function(){var e=l()((function*(){return _e.getCameraPermissionsAsync()}));return function(){return e.apply(this,arguments)}}(),n.requestCameraPermissionsAsync=function(){var e=l()((function*(){return _e.requestCameraPermissionsAsync()}));return function(){return e.apply(this,arguments)}}(),n.getMicrophonePermissionsAsync=function(){var e=l()((function*(){return _e.getMicrophonePermissionsAsync()}));return function(){return e.apply(this,arguments)}}(),n.requestMicrophonePermissionsAsync=function(){var e=l()((function*(){return _e.requestMicrophonePermissionsAsync()}));return function(){return e.apply(this,arguments)}}();var r=n.prototype;return r.takePictureAsync=function(){var e=l()((function*(e){var t=function(e){var t=e&&"object"===typeof e?e:{};if(t.quality||(t.quality=1),t.onPictureSaved){var n=gt++;ht[n]=t.onPictureSaved,t.id=n,t.fastMode=!0}return t}(e);return yield _e.takePicture(t,this._cameraHandle)}));return function(t){return e.apply(this,arguments)}}(),r.getSupportedRatiosAsync=function(){var e=l()((function*(){if(!_e.getSupportedRatios)throw new Y.g("Camera","getSupportedRatiosAsync");return yield _e.getSupportedRatios(this._cameraHandle)}));return function(){return e.apply(this,arguments)}}(),r.getAvailablePictureSizesAsync=function(){var e=l()((function*(e){if(!_e.getAvailablePictureSizes)throw new Y.g("Camera","getAvailablePictureSizesAsync");return yield _e.getAvailablePictureSizes(e,this._cameraHandle)}));return function(t){return e.apply(this,arguments)}}(),r.recordAsync=function(){var e=l()((function*(e){if(!_e.record)throw new Y.g("Camera","recordAsync");var t=function(e){var t=e||{};return t&&"object"===typeof t?"string"===typeof t.quality&&(t.quality=Ot.Constants.VideoQuality[t.quality]):t={},t}(e);return yield _e.record(t,this._cameraHandle)}));return function(t){return e.apply(this,arguments)}}(),r.stopRecording=function(){if(!_e.stopRecording)throw new Y.g("Camera","stopRecording");_e.stopRecording(this._cameraHandle)},r.pausePreview=function(){if(!_e.pausePreview)throw new Y.g("Camera","pausePreview");_e.pausePreview(this._cameraHandle)},r.resumePreview=function(){if(!_e.resumePreview)throw new Y.g("Camera","resumePreview");_e.resumePreview(this._cameraHandle)},r.render=function(){var e=vt(this.props),t=this.props.onBarCodeScanned?this._onObjectDetected(this.props.onBarCodeScanned):void 0,n=this._onObjectDetected(this.props.onFacesDetected);return U.createElement(dt,yt(yt({},e),{},{ref:this._setReference,onCameraReady:this._onCameraReady,onMountError:this._onMountError,onBarCodeScanned:t,onFacesDetected:n,onPictureSaved:jt}))},G()(n)}(U.Component);Ot.Constants={Type:_e.Type,FlashMode:_e.FlashMode,AutoFocus:_e.AutoFocus,WhiteBalance:_e.WhiteBalance,VideoQuality:_e.VideoQuality,VideoStabilization:_e.VideoStabilization||{},VideoCodec:_e.VideoCodec},Ot.ConversionTables=pt,Ot.defaultProps={zoom:0,ratio:"4:3",focusDepth:0,faceDetectorSettings:{},type:_e.Type.back,autoFocus:_e.AutoFocus.on,flashMode:_e.FlashMode.off,whiteBalance:_e.WhiteBalance.auto},Ot.useCameraPermissions=Object(Y.h)({getMethod:Ot.getCameraPermissionsAsync,requestMethod:Ot.requestCameraPermissionsAsync}),Ot.useMicrophonePermissions=Object(Y.h)({getMethod:Ot.getMicrophonePermissionsAsync,requestMethod:Ot.requestMicrophonePermissionsAsync});Ot.Constants,Ot.getPermissionsAsync,Ot.requestPermissionsAsync,Ot.getCameraPermissionsAsync;var wt=Ot.requestCameraPermissionsAsync,xt=(Ot.getMicrophonePermissionsAsync,Ot.requestMicrophonePermissionsAsync,n(1161)),At=n(746),Pt=n(15),St=n(628),Ct=n(1127),Et=n(1118),Mt=n(3389),_t=n(404),Dt=n(24);function Rt(e){if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia)return navigator.mediaDevices.getUserMedia(e);var t=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||function(){var e=new Error("Permission unimplemented");throw e.code=0,e.name="NotAllowedError",e};return new Promise((function(n,r){t.call(navigator,e,n,r)}))}function kt(e){return"Permission dismissed"===e.message?{status:Y.d.UNDETERMINED,expires:"never",canAskAgain:!0,granted:!1}:{status:Y.d.DENIED,expires:"never",canAskAgain:!0,granted:!1}}function Tt(){return(Tt=l()((function*(){try{return yield Rt({video:!0}),{status:Y.d.GRANTED,expires:"never",canAskAgain:!0,granted:!0}}catch(e){return kt({message:e.message})}}))).apply(this,arguments)}function Bt(){return(Bt=l()((function*(){var e,t;if(null==(e=navigator)||null==(t=e.permissions)||!t.query)throw new Y.g("expo-barcode-scanner","navigator.permissions API is not available");switch((yield navigator.permissions.query({name:"camera"})).state){case"prompt":return{status:Y.d.UNDETERMINED,expires:"never",canAskAgain:!0,granted:!1};case"granted":return{status:Y.d.GRANTED,expires:"never",canAskAgain:!0,granted:!0};case"denied":return{status:Y.d.DENIED,expires:"never",canAskAgain:!0,granted:!1}}}))).apply(this,arguments)}var Nt={get name(){return"ExpoBarCodeScannerModule"},get BarCodeType(){return{code39mod43:"code39mod43",code138:"code138",interleaved2of5:"interleaved2of5",aztec:"aztec",ean13:"ean13",ean8:"ean8",qr:"qr",pdf417:"pdf417",upc_e:"upc_e",datamatrix:"datamatrix",code39:"code39",code93:"code93",itf14:"itf14",codabar:"codabar",code128:"code128",upc_a:"upc_a"}},get Type(){return{front:"front",back:"back"}},requestPermissionsAsync:function(){var e=l()((function*(){return function(){return Tt.apply(this,arguments)}()}));return function(){return e.apply(this,arguments)}}(),getPermissionsAsync:function(){var e=l()((function*(){return function(){return Bt.apply(this,arguments)}()}));return function(){return e.apply(this,arguments)}}()},It=n(103);function Ut(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=K()(e);if(t){var i=K()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Q()(this,n)}}var qt=function(e){L()(n,e);var t=Ut(n);function n(){return t.apply(this,arguments)}return n.prototype.render=function(){return q.a.createElement(te.a,null,q.a.createElement(It.a,null,"BarCodeScanner Component not supported on the web"))},G()(n)}(q.a.Component);function zt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ft(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zt(Object(n),!0).forEach((function(t){F()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Wt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=K()(e);if(t){var i=K()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Q()(this,n)}}var Gt=Nt.BarCodeType,Vt=Nt.Type,Lt=function(e){L()(n,e);var t=Wt(n);function n(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).lastEvents={},e.lastEventsTimes={},e.onObjectDetected=function(t){return function(n){var r=n.nativeEvent,i=r.type;e.lastEvents[i]&&e.lastEventsTimes[i]&&JSON.stringify(r)===e.lastEvents[i]&&Date.now()-e.lastEventsTimes[i]<500||t&&(t(r),e.lastEventsTimes[i]=new Date,e.lastEvents[i]=JSON.stringify(r))}},e}n.getPermissionsAsync=function(){var e=l()((function*(){return Nt.getPermissionsAsync()}));return function(){return e.apply(this,arguments)}}(),n.requestPermissionsAsync=function(){var e=l()((function*(){return Nt.requestPermissionsAsync()}));return function(){return e.apply(this,arguments)}}(),n.scanFromURLAsync=function(){var e=l()((function*(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.values(Gt);if(!Nt.scanFromURLAsync)throw new Y.g("expo-barcode-scanner","scanFromURLAsync");if(Array.isArray(t)&&!t.length)throw new Error("No barCodeTypes specified; provide at least one barCodeType for scanner");if("ios"===Dt.a.OS){if(Array.isArray(t)&&!t.includes(Gt.qr))throw new Error("Only QR type is supported by scanFromURLAsync() on iOS");return yield Nt.scanFromURLAsync(e,[Gt.qr])}return yield Nt.scanFromURLAsync(e,t)}));return function(t){return e.apply(this,arguments)}}();var r=n.prototype;return r.render=function(){var e=this.convertNativeProps(this.props),t=this.props.onBarCodeScanned;return U.createElement(qt,Ft(Ft({},e),{},{onBarCodeScanned:this.onObjectDetected(t)}))},r.convertNativeProps=function(e){var t={};for(var r of Object.entries(e)){var i=I()(r,2),a=i[0],o=i[1];"string"===typeof o&&n.ConversionTables[a]?t[a]=n.ConversionTables[a][o]:t[a]=o}return t},G()(n)}(U.Component);Lt.Constants={BarCodeType:Gt,Type:Vt},Lt.ConversionTables={type:Vt},Lt.defaultProps={type:Vt.back,barCodeTypes:Object.values(Gt)},Lt.usePermissions=Object(Y.h)({getMethod:Lt.getPermissionsAsync,requestMethod:Lt.requestPermissionsAsync});Lt.Constants,Lt.getPermissionsAsync,Lt.requestPermissionsAsync,Lt.usePermissions,Lt.scanFromURLAsync;var Ht=function(e){var t=e.style,n=e.isActive,r=e.children,i=e.onQrcodeScanned;return n?Object(x.jsx)(Ot,{style:t,onBarCodeScanned:function(e){var t=e.data;return i(t)},barCodeScannerSettings:{barCodeTypes:[Lt.Constants.BarCodeType.qr]},children:r}):null};Ht.displayName="ScanCamera";var Qt=Ht,Jt=n(1887),Kt=n(682),Yt=function(){var e,t=Object(b.a)(),n=Object(p.a)().bottom,a=Object(U.useState)(Y.d.UNDETERMINED),c=I()(a,2),u=c[0],d=c[1],f=Object(U.useRef)(!1),y=Object(v.t)(),m=Object(r.a)(),h=Object(Ct.a)(),g=null==(e=Object(v.x)().params)?void 0:e.onScanCompleted,j=Object(U.useCallback)(function(){var e=l()((function*(e){if(!f.current&&e){if(f.current=!0,g)return g(e),void h.goBack();var t=yield Object(Et.b)(e);if(t){if(t.type===Kt.b.MIGRATE)return h.goBack(),void setTimeout((function(){Object(Mt.a)({serverAddress:e.replace(_t.b,"")})}),150);h.replace(Kt.a.ScanQrcodeResult,t)}else h.goBack()}}));return function(t){return e.apply(this,arguments)}}(),[h,g]),O=Object(U.useCallback)(l()((function*(){var e=yield Object(xt.a)({base64:!Pt.a.isNative,allowsMultipleSelection:!1});if(!e.cancelled){var t=yield Object(Jt.a)(e.uri);t&&j(t)}})),[j]),w=Object(U.useCallback)(l()((function*(){j(yield Object(At.b)())})),[j]);return Object(U.useEffect)((function(){wt().then((function(e){var t=e.status;return d(t)}))}),[]),Object(U.useEffect)((function(){y&&(f.current=!1)}),[y]),u===Y.d.GRANTED?Object(x.jsx)(i.b,{hidePrimaryAction:!0,hideSecondaryAction:!0,header:t.formatMessage({id:"title__scan_qr_code"}),headerDescription:Pt.a.isNativeIOSPhone?Object(x.jsx)(s.a,{h:"8px"}):void 0,height:"535px",footer:Object(x.jsxs)(o.a,{mb:n,py:"16px",px:m?"16px":"24px",space:"12px",justifyContent:"center",children:[Object(x.jsx)(B.a,{flexGrow:m?1:void 0,size:m?"xl":"base",onPress:O,leftIconName:"PhotoMini",children:t.formatMessage({id:"action__choose_an_image"})}),Pt.a.canGetClipboard?Object(x.jsx)(B.a,{flexGrow:m?1:void 0,size:m?"xl":"base",leftIconName:"ClipboardMini",onPress:w,children:t.formatMessage({id:"action__paste"})}):null]}),staticChildrenProps:{flex:1},children:Object(x.jsx)(Qt,{style:{flex:1},isActive:y,onQrcodeScanned:j,children:Object(x.jsx)(T.a,{position:"absolute",top:0,right:0,bottom:0,left:0,overflow:"hidden",children:Object(x.jsx)(s.a,{borderWidth:400,borderColor:"rgba(0,0,0,.5)",borderRadius:"425px",children:Object(x.jsx)(s.a,{size:"256px",borderWidth:4,borderColor:"white",borderRadius:"24px"})})})})}):u===Y.d.DENIED?Object(x.jsx)(St.a,{type:"camera"}):null};Yt.displayName="ScanQrcode";var Xt=Yt,Zt=n(125),$t=n(79),en=n(163),tn=n(260),nn=n(3080),rn=n(33),an=n(509),on=n(3147);function cn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function sn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cn(Object(n),!0).forEach((function(t){F()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var un={borderWidth:ee.a.hairlineWidth,borderColor:"border-subdued",bgColor:"surface-default",mb:"16px",borderRadius:"12px",overflow:"hidden"},dn={p:"4",flexDirection:"row",alignItems:"center",justifyContent:"space-between",_hover:{bgColor:"surface-hovered"},_pressed:{bgColor:"surface-pressed"}};function ln(e){var t=e.data,n=Object(b.a)(),r=Object(U.useCallback)((function(){Object(At.a)(t),en.a.show({title:n.formatMessage({id:"msg__copied"})})}),[t,n]);return Object(x.jsx)(Zt.a,sn(sn({},dn),{},{onPress:r,children:Object(x.jsxs)(o.a,{space:"3",children:[Object(x.jsx)($t.a,{name:"Square2StackOutline"}),Object(x.jsx)(u.h.Body1Strong,{children:n.formatMessage({id:"action__copy"})})]})}))}var fn=function(){var e=Object(b.a)(),t=Object(v.u)(),n=Object(p.a)().bottom,r=Object(m.c)().wallet,a=Object(v.x)().params,c=a.type,d=a.data,l=a.possibleNetworks,f=e.formatMessage({id:"title__qr_code_info"});c===Kt.b.URL?f=e.formatMessage({id:"title__url"}):c!==tn.b.WATCHING&&c!==tn.b.ADDRESS||(f=e.formatMessage({id:"form__address"}));var h="watching"===(null==r?void 0:r.type),g=Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)(s.a,sn(sn({},un),{},{children:[c===Kt.b.URL&&Object(x.jsxs)(Zt.a,sn(sn({},dn),{},{onPress:function(){var e;y.a.dispatch(Object(an.i)(d)),null==(e=t.getParent())||e.navigate(O.d.Discover)},children:[Object(x.jsxs)(o.a,{space:"3",children:[Object(x.jsx)($t.a,{name:"GlobeAltOutline"}),Object(x.jsx)(u.h.Body1Strong,{children:e.formatMessage({id:"form__view_in_explore"})})]}),Object(x.jsx)($t.a,{name:"ChevronRightMini",color:"icon-subdued",size:20})]})),(c===tn.b.WATCHING||c===tn.b.ADDRESS)&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)(Zt.a,sn(sn({},dn),{},{borderBottomRadius:0,onPress:function(){t.navigate(Kt.a.PreviewSend,{address:d,possibleNetworks:l})},isDisabled:h,children:[Object(x.jsxs)(o.a,{space:"3",children:[Object(x.jsx)($t.a,{name:"PaperAirplaneOutline",color:h?"icon-disabled":"icon-default"}),Object(x.jsx)(u.h.Body1Strong,{color:h?"text-disabled":"text-default",children:e.formatMessage({id:"form__send_tokens"})})]}),Object(x.jsx)($t.a,{name:"ChevronRightMini",size:20,color:h?"icon-disabled":"icon-subdued"})]})),Object(x.jsx)(s.a,{h:ee.a.hairlineWidth,bgColor:"divider"}),Object(x.jsxs)(Zt.a,sn(sn({},dn),{},{borderRadius:0,onPress:function(){t.navigate(rn.g.Modal,{screen:rn.e.AddressBook,params:{screen:on.a.NewAddressRoute,params:{address:d,possibleNetworks:l}}})},children:[Object(x.jsxs)(o.a,{space:"3",children:[Object(x.jsx)($t.a,{name:"BookOpenOutline"}),Object(x.jsx)(u.h.Body1Strong,{children:e.formatMessage({id:"form__add_to_address_book"})})]}),Object(x.jsx)($t.a,{name:"ChevronRightMini",color:"icon-subdued",size:20})]})),Object(x.jsx)(s.a,{h:ee.a.hairlineWidth,bgColor:"divider"})]}),(c===tn.b.WATCHING||c===tn.b.MNEMONIC||c===tn.b.IMPORTED)&&Object(x.jsxs)(Zt.a,sn(sn({},dn),{},{borderTopRadius:0,onPress:function(){t.navigate(rn.g.Modal,{screen:rn.e.CreateWallet,params:{screen:nn.b.AddExistingWalletModal,params:{mode:c,presetText:d}}})},children:[Object(x.jsxs)(o.a,{space:"3",children:[Object(x.jsx)($t.a,{name:"EyeOutline"}),Object(x.jsx)(u.h.Body1Strong,{textTransform:"capitalize",children:e.formatMessage({id:"action__watch_lowercase"})})]}),Object(x.jsx)($t.a,{name:"ChevronRightMini",color:"icon-subdued",size:20})]}))]})),Object(x.jsx)(s.a,sn(sn({},un),{},{children:Object(x.jsx)(ln,{data:d})}))]});return Object(x.jsx)(i.b,{hidePrimaryAction:!0,hideSecondaryAction:!0,header:f,footer:null,scrollViewProps:{pb:n+"px",children:Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(s.a,{borderColor:"border-subdued",borderWidth:ee.a.hairlineWidth,bgColor:"surface-subdued",borderRadius:"12px",alignItems:"center",justifyContent:"center",p:"24px",mb:"32px",children:Object(x.jsx)(u.h.Body1,{textAlign:"center",wordBreak:"break-all",children:d})}),g]})}})},pn=n(456),vn=Object(pn.a)(),bn=[{name:Kt.a.ScanQrcode,component:Xt},{name:Kt.a.ScanQrcodeResult,component:fn},{name:Kt.a.PreviewSend,component:k}];t.default=function(){var e=Object(r.a)();return Object(x.jsx)(vn.Navigator,{screenOptions:{headerShown:!1,animationEnabled:!!e},children:bn.map((function(e){return Object(x.jsx)(vn.Screen,{name:e.name,component:e.component},e.name)}))})}}}]);